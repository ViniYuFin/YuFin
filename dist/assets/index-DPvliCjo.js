(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();function Gu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Hu={exports:{}},_a={},Wu={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fr=Symbol.for("react.element"),Rp=Symbol.for("react.portal"),Lp=Symbol.for("react.fragment"),Dp=Symbol.for("react.strict_mode"),Mp=Symbol.for("react.profiler"),Ip=Symbol.for("react.provider"),Fp=Symbol.for("react.context"),$p=Symbol.for("react.forward_ref"),Vp=Symbol.for("react.suspense"),Op=Symbol.for("react.memo"),_p=Symbol.for("react.lazy"),jc=Symbol.iterator;function zp(e){return e===null||typeof e!="object"?null:(e=jc&&e[jc]||e["@@iterator"],typeof e=="function"?e:null)}var Xu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qu=Object.assign,Yu={};function xn(e,t,s){this.props=e,this.context=t,this.refs=Yu,this.updater=s||Xu}xn.prototype.isReactComponent={};xn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ku(){}Ku.prototype=xn.prototype;function ol(e,t,s){this.props=e,this.context=t,this.refs=Yu,this.updater=s||Xu}var il=ol.prototype=new Ku;il.constructor=ol;Qu(il,xn.prototype);il.isPureReactComponent=!0;var Nc=Array.isArray,Zu=Object.prototype.hasOwnProperty,ll={current:null},Ju={key:!0,ref:!0,__self:!0,__source:!0};function em(e,t,s){var r,a={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Zu.call(t,r)&&!Ju.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:fr,type:e,key:o,ref:i,props:a,_owner:ll.current}}function Bp(e,t){return{$$typeof:fr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cl(e){return typeof e=="object"&&e!==null&&e.$$typeof===fr}function Up(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var wc=/\/+/g;function mo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Up(""+e.key):t.toString(36)}function Wr(e,t,s,r,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case fr:case Rp:i=!0}}if(i)return i=e,a=a(i),e=r===""?"."+mo(i,0):r,Nc(a)?(s="",e!=null&&(s=e.replace(wc,"$&/")+"/"),Wr(a,t,s,"",function(d){return d})):a!=null&&(cl(a)&&(a=Bp(a,s+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(wc,"$&/")+"/")+e)),t.push(a)),1;if(i=0,r=r===""?".":r+":",Nc(e))for(var l=0;l<e.length;l++){o=e[l];var c=r+mo(o,l);i+=Wr(o,t,s,c,a)}else if(c=zp(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=r+mo(o,l++),i+=Wr(o,t,s,c,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Cr(e,t,s){if(e==null)return e;var r=[],a=0;return Wr(e,r,"","",function(o){return t.call(s,o,a++)}),r}function qp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qe={current:null},Xr={transition:null},Gp={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:Xr,ReactCurrentOwner:ll};function tm(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Cr,forEach:function(e,t,s){Cr(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Cr(e,function(){t++}),t},toArray:function(e){return Cr(e,function(t){return t})||[]},only:function(e){if(!cl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};re.Component=xn;re.Fragment=Lp;re.Profiler=Mp;re.PureComponent=ol;re.StrictMode=Dp;re.Suspense=Vp;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gp;re.act=tm;re.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Qu({},e.props),a=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=ll.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Zu.call(t,c)&&!Ju.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:fr,type:e.type,key:a,ref:o,props:r,_owner:i}};re.createContext=function(e){return e={$$typeof:Fp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ip,_context:e},e.Consumer=e};re.createElement=em;re.createFactory=function(e){var t=em.bind(null,e);return t.type=e,t};re.createRef=function(){return{current:null}};re.forwardRef=function(e){return{$$typeof:$p,render:e}};re.isValidElement=cl;re.lazy=function(e){return{$$typeof:_p,_payload:{_status:-1,_result:e},_init:qp}};re.memo=function(e,t){return{$$typeof:Op,type:e,compare:t===void 0?null:t}};re.startTransition=function(e){var t=Xr.transition;Xr.transition={};try{e()}finally{Xr.transition=t}};re.unstable_act=tm;re.useCallback=function(e,t){return qe.current.useCallback(e,t)};re.useContext=function(e){return qe.current.useContext(e)};re.useDebugValue=function(){};re.useDeferredValue=function(e){return qe.current.useDeferredValue(e)};re.useEffect=function(e,t){return qe.current.useEffect(e,t)};re.useId=function(){return qe.current.useId()};re.useImperativeHandle=function(e,t,s){return qe.current.useImperativeHandle(e,t,s)};re.useInsertionEffect=function(e,t){return qe.current.useInsertionEffect(e,t)};re.useLayoutEffect=function(e,t){return qe.current.useLayoutEffect(e,t)};re.useMemo=function(e,t){return qe.current.useMemo(e,t)};re.useReducer=function(e,t,s){return qe.current.useReducer(e,t,s)};re.useRef=function(e){return qe.current.useRef(e)};re.useState=function(e){return qe.current.useState(e)};re.useSyncExternalStore=function(e,t,s){return qe.current.useSyncExternalStore(e,t,s)};re.useTransition=function(){return qe.current.useTransition()};re.version="18.3.1";Wu.exports=re;var w=Wu.exports;const bt=Gu(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp=w,Wp=Symbol.for("react.element"),Xp=Symbol.for("react.fragment"),Qp=Object.prototype.hasOwnProperty,Yp=Hp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kp={key:!0,ref:!0,__self:!0,__source:!0};function sm(e,t,s){var r,a={},o=null,i=null;s!==void 0&&(o=""+s),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)Qp.call(t,r)&&!Kp.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Wp,type:e,key:o,ref:i,props:a,_owner:Yp.current}}_a.Fragment=Xp;_a.jsx=sm;_a.jsxs=sm;Hu.exports=_a;var n=Hu.exports,nm={exports:{}},rt={},rm={exports:{}},am={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,F){var L=I.length;I.push(F);e:for(;0<L;){var O=L-1>>>1,H=I[O];if(0<a(H,F))I[O]=F,I[L]=H,L=O;else break e}}function s(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var F=I[0],L=I.pop();if(L!==F){I[0]=L;e:for(var O=0,H=I.length,ne=H>>>1;O<ne;){var Y=2*(O+1)-1,B=I[Y],q=Y+1,M=I[q];if(0>a(B,L))q<H&&0>a(M,B)?(I[O]=M,I[q]=L,O=q):(I[O]=B,I[Y]=L,O=Y);else if(q<H&&0>a(M,L))I[O]=M,I[q]=L,O=q;else break e}}return F}function a(I,F){var L=I.sortIndex-F.sortIndex;return L!==0?L:I.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],m=1,u=null,g=3,p=!1,k=!1,P=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(I){for(var F=s(d);F!==null;){if(F.callback===null)r(d);else if(F.startTime<=I)r(d),F.sortIndex=F.expirationTime,t(c,F);else break;F=s(d)}}function v(I){if(P=!1,f(I),!k)if(s(c)!==null)k=!0,V(R);else{var F=s(d);F!==null&&z(v,F.startTime-I)}}function R(I,F){k=!1,P&&(P=!1,x(h),h=-1),p=!0;var L=g;try{for(f(F),u=s(c);u!==null&&(!(u.expirationTime>F)||I&&!b());){var O=u.callback;if(typeof O=="function"){u.callback=null,g=u.priorityLevel;var H=O(u.expirationTime<=F);F=e.unstable_now(),typeof H=="function"?u.callback=H:u===s(c)&&r(c),f(F)}else r(c);u=s(c)}if(u!==null)var ne=!0;else{var Y=s(d);Y!==null&&z(v,Y.startTime-F),ne=!1}return ne}finally{u=null,g=L,p=!1}}var E=!1,N=null,h=-1,j=5,C=-1;function b(){return!(e.unstable_now()-C<j)}function T(){if(N!==null){var I=e.unstable_now();C=I;var F=!0;try{F=N(!0,I)}finally{F?A():(E=!1,N=null)}}else E=!1}var A;if(typeof y=="function")A=function(){y(T)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,D=$.port2;$.port1.onmessage=T,A=function(){D.postMessage(null)}}else A=function(){S(T,0)};function V(I){N=I,E||(E=!0,A())}function z(I,F){h=S(function(){I(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){k||p||(k=!0,V(R))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(I){switch(g){case 1:case 2:case 3:var F=3;break;default:F=g}var L=g;g=F;try{return I()}finally{g=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,F){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var L=g;g=I;try{return F()}finally{g=L}},e.unstable_scheduleCallback=function(I,F,L){var O=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?O+L:O):L=O,I){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=L+H,I={id:m++,callback:F,priorityLevel:I,startTime:L,expirationTime:H,sortIndex:-1},L>O?(I.sortIndex=L,t(d,I),s(c)===null&&I===s(d)&&(P?(x(h),h=-1):P=!0,z(v,L-O))):(I.sortIndex=H,t(c,I),k||p||(k=!0,V(R))),I},e.unstable_shouldYield=b,e.unstable_wrapCallback=function(I){var F=g;return function(){var L=g;g=F;try{return I.apply(this,arguments)}finally{g=L}}}})(am);rm.exports=am;var Zp=rm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp=w,st=Zp;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var om=new Set,Xn={};function Ms(e,t){ln(e,t),ln(e+"Capture",t)}function ln(e,t){for(Xn[e]=t,e=0;e<t.length;e++)om.add(t[e])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ti=Object.prototype.hasOwnProperty,eg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sc={},Cc={};function tg(e){return ti.call(Cc,e)?!0:ti.call(Sc,e)?!1:eg.test(e)?Cc[e]=!0:(Sc[e]=!0,!1)}function sg(e,t,s,r){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ng(e,t,s,r){if(t===null||typeof t>"u"||sg(e,t,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ge(e,t,s,r,a,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){De[e]=new Ge(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];De[t]=new Ge(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){De[e]=new Ge(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){De[e]=new Ge(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){De[e]=new Ge(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){De[e]=new Ge(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){De[e]=new Ge(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){De[e]=new Ge(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){De[e]=new Ge(e,5,!1,e.toLowerCase(),null,!1,!1)});var dl=/[\-:]([a-z])/g;function ul(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dl,ul);De[t]=new Ge(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dl,ul);De[t]=new Ge(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dl,ul);De[t]=new Ge(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){De[e]=new Ge(e,1,!1,e.toLowerCase(),null,!1,!1)});De.xlinkHref=new Ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){De[e]=new Ge(e,1,!1,e.toLowerCase(),null,!0,!0)});function ml(e,t,s,r){var a=De.hasOwnProperty(t)?De[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ng(t,s,a,r)&&(s=null),r||a===null?tg(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,r=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}var zt=Jp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kr=Symbol.for("react.element"),Os=Symbol.for("react.portal"),_s=Symbol.for("react.fragment"),hl=Symbol.for("react.strict_mode"),si=Symbol.for("react.profiler"),im=Symbol.for("react.provider"),lm=Symbol.for("react.context"),fl=Symbol.for("react.forward_ref"),ni=Symbol.for("react.suspense"),ri=Symbol.for("react.suspense_list"),pl=Symbol.for("react.memo"),qt=Symbol.for("react.lazy"),cm=Symbol.for("react.offscreen"),kc=Symbol.iterator;function bn(e){return e===null||typeof e!="object"?null:(e=kc&&e[kc]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,ho;function An(e){if(ho===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);ho=t&&t[1]||""}return`
`+ho+e}var fo=!1;function po(e,t){if(!e||fo)return"";fo=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),o=r.stack.split(`
`),i=a.length-1,l=o.length-1;1<=i&&0<=l&&a[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==o[l]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{fo=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?An(e):""}function rg(e){switch(e.tag){case 5:return An(e.type);case 16:return An("Lazy");case 13:return An("Suspense");case 19:return An("SuspenseList");case 0:case 2:case 15:return e=po(e.type,!1),e;case 11:return e=po(e.type.render,!1),e;case 1:return e=po(e.type,!0),e;default:return""}}function ai(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _s:return"Fragment";case Os:return"Portal";case si:return"Profiler";case hl:return"StrictMode";case ni:return"Suspense";case ri:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case lm:return(e.displayName||"Context")+".Consumer";case im:return(e._context.displayName||"Context")+".Provider";case fl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pl:return t=e.displayName||null,t!==null?t:ai(e.type)||"Memo";case qt:t=e._payload,e=e._init;try{return ai(e(t))}catch{}}return null}function ag(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ai(t);case 8:return t===hl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function dm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function og(e){var t=dm(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,o=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pr(e){e._valueTracker||(e._valueTracker=og(e))}function um(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=dm(e)?e.checked?"true":"false":e.value),e=r,e!==s?(t.setValue(e),!0):!1}function ia(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function oi(e,t){var s=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Pc(e,t){var s=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;s=cs(t.value!=null?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mm(e,t){t=t.checked,t!=null&&ml(e,"checked",t,!1)}function ii(e,t){mm(e,t);var s=cs(t.value),r=t.type;if(s!=null)r==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?li(e,t.type,s):t.hasOwnProperty("defaultValue")&&li(e,t.type,cs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ec(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function li(e,t,s){(t!=="number"||ia(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Rn=Array.isArray;function tn(e,t,s,r){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&r&&(e[s].defaultSelected=!0)}else{for(s=""+cs(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ci(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Tc(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(X(92));if(Rn(s)){if(1<s.length)throw Error(X(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:cs(s)}}function hm(e,t){var s=cs(t.value),r=cs(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),r!=null&&(e.defaultValue=""+r)}function Ac(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function di(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Er,pm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Er=Er||document.createElement("div"),Er.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Er.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Qn(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var In={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ig=["Webkit","ms","Moz","O"];Object.keys(In).forEach(function(e){ig.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),In[t]=In[e]})});function gm(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||In.hasOwnProperty(e)&&In[e]?(""+t).trim():t+"px"}function xm(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var r=s.indexOf("--")===0,a=gm(s,t[s],r);s==="float"&&(s="cssFloat"),r?e.setProperty(s,a):e[s]=a}}var lg=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ui(e,t){if(t){if(lg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function mi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hi=null;function gl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fi=null,sn=null,nn=null;function Rc(e){if(e=xr(e)){if(typeof fi!="function")throw Error(X(280));var t=e.stateNode;t&&(t=Ga(t),fi(e.stateNode,e.type,t))}}function vm(e){sn?nn?nn.push(e):nn=[e]:sn=e}function ym(){if(sn){var e=sn,t=nn;if(nn=sn=null,Rc(e),t)for(e=0;e<t.length;e++)Rc(t[e])}}function bm(e,t){return e(t)}function jm(){}var go=!1;function Nm(e,t,s){if(go)return e(t,s);go=!0;try{return bm(e,t,s)}finally{go=!1,(sn!==null||nn!==null)&&(jm(),ym())}}function Yn(e,t){var s=e.stateNode;if(s===null)return null;var r=Ga(s);if(r===null)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(X(231,t,typeof s));return s}var pi=!1;if(Ft)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){pi=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{pi=!1}function cg(e,t,s,r,a,o,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(m){this.onError(m)}}var Fn=!1,la=null,ca=!1,gi=null,dg={onError:function(e){Fn=!0,la=e}};function ug(e,t,s,r,a,o,i,l,c){Fn=!1,la=null,cg.apply(dg,arguments)}function mg(e,t,s,r,a,o,i,l,c){if(ug.apply(this,arguments),Fn){if(Fn){var d=la;Fn=!1,la=null}else throw Error(X(198));ca||(ca=!0,gi=d)}}function Is(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function wm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lc(e){if(Is(e)!==e)throw Error(X(188))}function hg(e){var t=e.alternate;if(!t){if(t=Is(e),t===null)throw Error(X(188));return t!==e?null:e}for(var s=e,r=t;;){var a=s.return;if(a===null)break;var o=a.alternate;if(o===null){if(r=a.return,r!==null){s=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===s)return Lc(a),e;if(o===r)return Lc(a),t;o=o.sibling}throw Error(X(188))}if(s.return!==r.return)s=a,r=o;else{for(var i=!1,l=a.child;l;){if(l===s){i=!0,s=a,r=o;break}if(l===r){i=!0,r=a,s=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===s){i=!0,s=o,r=a;break}if(l===r){i=!0,r=o,s=a;break}l=l.sibling}if(!i)throw Error(X(189))}}if(s.alternate!==r)throw Error(X(190))}if(s.tag!==3)throw Error(X(188));return s.stateNode.current===s?e:t}function Sm(e){return e=hg(e),e!==null?Cm(e):null}function Cm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Cm(e);if(t!==null)return t;e=e.sibling}return null}var km=st.unstable_scheduleCallback,Dc=st.unstable_cancelCallback,fg=st.unstable_shouldYield,pg=st.unstable_requestPaint,Ne=st.unstable_now,gg=st.unstable_getCurrentPriorityLevel,xl=st.unstable_ImmediatePriority,Pm=st.unstable_UserBlockingPriority,da=st.unstable_NormalPriority,xg=st.unstable_LowPriority,Em=st.unstable_IdlePriority,za=null,Ct=null;function vg(e){if(Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(za,e,void 0,(e.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:jg,yg=Math.log,bg=Math.LN2;function jg(e){return e>>>=0,e===0?32:31-(yg(e)/bg|0)|0}var Tr=64,Ar=4194304;function Ln(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ua(e,t){var s=e.pendingLanes;if(s===0)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=s&268435455;if(i!==0){var l=i&~a;l!==0?r=Ln(l):(o&=i,o!==0&&(r=Ln(o)))}else i=s&~a,i!==0?r=Ln(i):o!==0&&(r=Ln(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(r&4&&(r|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)s=31-vt(t),a=1<<s,r|=e[s],t&=~a;return r}function Ng(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wg(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-vt(o),l=1<<i,c=a[i];c===-1?(!(l&s)||l&r)&&(a[i]=Ng(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function xi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tm(){var e=Tr;return Tr<<=1,!(Tr&4194240)&&(Tr=64),e}function xo(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function pr(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vt(t),e[t]=s}function Sg(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-vt(s),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,s&=~o}}function vl(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-vt(s),a=1<<r;a&t|e[r]&t&&(e[r]|=t),s&=~a}}var ce=0;function Am(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Rm,yl,Lm,Dm,Mm,vi=!1,Rr=[],Zt=null,Jt=null,es=null,Kn=new Map,Zn=new Map,Xt=[],Cg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mc(e,t){switch(e){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":Jt=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":Kn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zn.delete(t.pointerId)}}function Nn(e,t,s,r,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},t!==null&&(t=xr(t),t!==null&&yl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function kg(e,t,s,r,a){switch(t){case"focusin":return Zt=Nn(Zt,e,t,s,r,a),!0;case"dragenter":return Jt=Nn(Jt,e,t,s,r,a),!0;case"mouseover":return es=Nn(es,e,t,s,r,a),!0;case"pointerover":var o=a.pointerId;return Kn.set(o,Nn(Kn.get(o)||null,e,t,s,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Zn.set(o,Nn(Zn.get(o)||null,e,t,s,r,a)),!0}return!1}function Im(e){var t=Ns(e.target);if(t!==null){var s=Is(t);if(s!==null){if(t=s.tag,t===13){if(t=wm(s),t!==null){e.blockedOn=t,Mm(e.priority,function(){Lm(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=yi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);hi=r,s.target.dispatchEvent(r),hi=null}else return t=xr(s),t!==null&&yl(t),e.blockedOn=s,!1;t.shift()}return!0}function Ic(e,t,s){Qr(e)&&s.delete(t)}function Pg(){vi=!1,Zt!==null&&Qr(Zt)&&(Zt=null),Jt!==null&&Qr(Jt)&&(Jt=null),es!==null&&Qr(es)&&(es=null),Kn.forEach(Ic),Zn.forEach(Ic)}function wn(e,t){e.blockedOn===t&&(e.blockedOn=null,vi||(vi=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,Pg)))}function Jn(e){function t(a){return wn(a,e)}if(0<Rr.length){wn(Rr[0],e);for(var s=1;s<Rr.length;s++){var r=Rr[s];r.blockedOn===e&&(r.blockedOn=null)}}for(Zt!==null&&wn(Zt,e),Jt!==null&&wn(Jt,e),es!==null&&wn(es,e),Kn.forEach(t),Zn.forEach(t),s=0;s<Xt.length;s++)r=Xt[s],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xt.length&&(s=Xt[0],s.blockedOn===null);)Im(s),s.blockedOn===null&&Xt.shift()}var rn=zt.ReactCurrentBatchConfig,ma=!0;function Eg(e,t,s,r){var a=ce,o=rn.transition;rn.transition=null;try{ce=1,bl(e,t,s,r)}finally{ce=a,rn.transition=o}}function Tg(e,t,s,r){var a=ce,o=rn.transition;rn.transition=null;try{ce=4,bl(e,t,s,r)}finally{ce=a,rn.transition=o}}function bl(e,t,s,r){if(ma){var a=yi(e,t,s,r);if(a===null)Po(e,t,r,ha,s),Mc(e,r);else if(kg(a,e,t,s,r))r.stopPropagation();else if(Mc(e,r),t&4&&-1<Cg.indexOf(e)){for(;a!==null;){var o=xr(a);if(o!==null&&Rm(o),o=yi(e,t,s,r),o===null&&Po(e,t,r,ha,s),o===a)break;a=o}a!==null&&r.stopPropagation()}else Po(e,t,r,null,s)}}var ha=null;function yi(e,t,s,r){if(ha=null,e=gl(r),e=Ns(e),e!==null)if(t=Is(e),t===null)e=null;else if(s=t.tag,s===13){if(e=wm(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ha=e,null}function Fm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gg()){case xl:return 1;case Pm:return 4;case da:case xg:return 16;case Em:return 536870912;default:return 16}default:return 16}}var Yt=null,jl=null,Yr=null;function $m(){if(Yr)return Yr;var e,t=jl,s=t.length,r,a="value"in Yt?Yt.value:Yt.textContent,o=a.length;for(e=0;e<s&&t[e]===a[e];e++);var i=s-e;for(r=1;r<=i&&t[s-r]===a[o-r];r++);return Yr=a.slice(e,1<r?1-r:void 0)}function Kr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Lr(){return!0}function Fc(){return!1}function at(e){function t(s,r,a,o,i){this._reactName=s,this._targetInst=a,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Lr:Fc,this.isPropagationStopped=Fc,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Lr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Lr)},persist:function(){},isPersistent:Lr}),t}var vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nl=at(vn),gr=ye({},vn,{view:0,detail:0}),Ag=at(gr),vo,yo,Sn,Ba=ye({},gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sn&&(Sn&&e.type==="mousemove"?(vo=e.screenX-Sn.screenX,yo=e.screenY-Sn.screenY):yo=vo=0,Sn=e),vo)},movementY:function(e){return"movementY"in e?e.movementY:yo}}),$c=at(Ba),Rg=ye({},Ba,{dataTransfer:0}),Lg=at(Rg),Dg=ye({},gr,{relatedTarget:0}),bo=at(Dg),Mg=ye({},vn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ig=at(Mg),Fg=ye({},vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$g=at(Fg),Vg=ye({},vn,{data:0}),Vc=at(Vg),Og={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_g={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zg[e])?!!t[e]:!1}function wl(){return Bg}var Ug=ye({},gr,{key:function(e){if(e.key){var t=Og[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_g[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wl,charCode:function(e){return e.type==="keypress"?Kr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qg=at(Ug),Gg=ye({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oc=at(Gg),Hg=ye({},gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wl}),Wg=at(Hg),Xg=ye({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qg=at(Xg),Yg=ye({},Ba,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kg=at(Yg),Zg=[9,13,27,32],Sl=Ft&&"CompositionEvent"in window,$n=null;Ft&&"documentMode"in document&&($n=document.documentMode);var Jg=Ft&&"TextEvent"in window&&!$n,Vm=Ft&&(!Sl||$n&&8<$n&&11>=$n),_c=" ",zc=!1;function Om(e,t){switch(e){case"keyup":return Zg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _m(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zs=!1;function ex(e,t){switch(e){case"compositionend":return _m(t);case"keypress":return t.which!==32?null:(zc=!0,_c);case"textInput":return e=t.data,e===_c&&zc?null:e;default:return null}}function tx(e,t){if(zs)return e==="compositionend"||!Sl&&Om(e,t)?(e=$m(),Yr=jl=Yt=null,zs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vm&&t.locale!=="ko"?null:t.data;default:return null}}var sx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sx[e.type]:t==="textarea"}function zm(e,t,s,r){vm(r),t=fa(t,"onChange"),0<t.length&&(s=new Nl("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var Vn=null,er=null;function nx(e){Zm(e,0)}function Ua(e){var t=qs(e);if(um(t))return e}function rx(e,t){if(e==="change")return t}var Bm=!1;if(Ft){var jo;if(Ft){var No="oninput"in document;if(!No){var Uc=document.createElement("div");Uc.setAttribute("oninput","return;"),No=typeof Uc.oninput=="function"}jo=No}else jo=!1;Bm=jo&&(!document.documentMode||9<document.documentMode)}function qc(){Vn&&(Vn.detachEvent("onpropertychange",Um),er=Vn=null)}function Um(e){if(e.propertyName==="value"&&Ua(er)){var t=[];zm(t,er,e,gl(e)),Nm(nx,t)}}function ax(e,t,s){e==="focusin"?(qc(),Vn=t,er=s,Vn.attachEvent("onpropertychange",Um)):e==="focusout"&&qc()}function ox(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ua(er)}function ix(e,t){if(e==="click")return Ua(t)}function lx(e,t){if(e==="input"||e==="change")return Ua(t)}function cx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jt=typeof Object.is=="function"?Object.is:cx;function tr(e,t){if(jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var a=s[r];if(!ti.call(t,a)||!jt(e[a],t[a]))return!1}return!0}function Gc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hc(e,t){var s=Gc(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Gc(s)}}function qm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gm(){for(var e=window,t=ia();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=ia(e.document)}return t}function Cl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function dx(e){var t=Gm(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&qm(s.ownerDocument.documentElement,s)){if(r!==null&&Cl(s)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,o=Math.min(r.start,a);r=r.end===void 0?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=Hc(s,o);var i=Hc(s,r);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ux=Ft&&"documentMode"in document&&11>=document.documentMode,Bs=null,bi=null,On=null,ji=!1;function Wc(e,t,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ji||Bs==null||Bs!==ia(r)||(r=Bs,"selectionStart"in r&&Cl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),On&&tr(On,r)||(On=r,r=fa(bi,"onSelect"),0<r.length&&(t=new Nl("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=Bs)))}function Dr(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Us={animationend:Dr("Animation","AnimationEnd"),animationiteration:Dr("Animation","AnimationIteration"),animationstart:Dr("Animation","AnimationStart"),transitionend:Dr("Transition","TransitionEnd")},wo={},Hm={};Ft&&(Hm=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function qa(e){if(wo[e])return wo[e];if(!Us[e])return e;var t=Us[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Hm)return wo[e]=t[s];return e}var Wm=qa("animationend"),Xm=qa("animationiteration"),Qm=qa("animationstart"),Ym=qa("transitionend"),Km=new Map,Xc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(e,t){Km.set(e,t),Ms(t,[e])}for(var So=0;So<Xc.length;So++){var Co=Xc[So],mx=Co.toLowerCase(),hx=Co[0].toUpperCase()+Co.slice(1);hs(mx,"on"+hx)}hs(Wm,"onAnimationEnd");hs(Xm,"onAnimationIteration");hs(Qm,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(Ym,"onTransitionEnd");ln("onMouseEnter",["mouseout","mouseover"]);ln("onMouseLeave",["mouseout","mouseover"]);ln("onPointerEnter",["pointerout","pointerover"]);ln("onPointerLeave",["pointerout","pointerover"]);Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dn));function Qc(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,mg(r,t,void 0,e),e.currentTarget=null}function Zm(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&a.isPropagationStopped())break e;Qc(a,l,d),o=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&a.isPropagationStopped())break e;Qc(a,l,d),o=c}}}if(ca)throw e=gi,ca=!1,gi=null,e}function me(e,t){var s=t[ki];s===void 0&&(s=t[ki]=new Set);var r=e+"__bubble";s.has(r)||(Jm(t,e,2,!1),s.add(r))}function ko(e,t,s){var r=0;t&&(r|=4),Jm(s,e,r,t)}var Mr="_reactListening"+Math.random().toString(36).slice(2);function sr(e){if(!e[Mr]){e[Mr]=!0,om.forEach(function(s){s!=="selectionchange"&&(fx.has(s)||ko(s,!1,e),ko(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Mr]||(t[Mr]=!0,ko("selectionchange",!1,t))}}function Jm(e,t,s,r){switch(Fm(t)){case 1:var a=Eg;break;case 4:a=Tg;break;default:a=bl}s=a.bind(null,t,s,e),a=void 0,!pi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Po(e,t,s,r,a){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=Ns(l),i===null)return;if(c=i.tag,c===5||c===6){r=o=i;continue e}l=l.parentNode}}r=r.return}Nm(function(){var d=o,m=gl(s),u=[];e:{var g=Km.get(e);if(g!==void 0){var p=Nl,k=e;switch(e){case"keypress":if(Kr(s)===0)break e;case"keydown":case"keyup":p=qg;break;case"focusin":k="focus",p=bo;break;case"focusout":k="blur",p=bo;break;case"beforeblur":case"afterblur":p=bo;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=$c;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Lg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Wg;break;case Wm:case Xm:case Qm:p=Ig;break;case Ym:p=Qg;break;case"scroll":p=Ag;break;case"wheel":p=Kg;break;case"copy":case"cut":case"paste":p=$g;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Oc}var P=(t&4)!==0,S=!P&&e==="scroll",x=P?g!==null?g+"Capture":null:g;P=[];for(var y=d,f;y!==null;){f=y;var v=f.stateNode;if(f.tag===5&&v!==null&&(f=v,x!==null&&(v=Yn(y,x),v!=null&&P.push(nr(y,v,f)))),S)break;y=y.return}0<P.length&&(g=new p(g,k,null,s,m),u.push({event:g,listeners:P}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",g&&s!==hi&&(k=s.relatedTarget||s.fromElement)&&(Ns(k)||k[$t]))break e;if((p||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,p?(k=s.relatedTarget||s.toElement,p=d,k=k?Ns(k):null,k!==null&&(S=Is(k),k!==S||k.tag!==5&&k.tag!==6)&&(k=null)):(p=null,k=d),p!==k)){if(P=$c,v="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(P=Oc,v="onPointerLeave",x="onPointerEnter",y="pointer"),S=p==null?g:qs(p),f=k==null?g:qs(k),g=new P(v,y+"leave",p,s,m),g.target=S,g.relatedTarget=f,v=null,Ns(m)===d&&(P=new P(x,y+"enter",k,s,m),P.target=f,P.relatedTarget=S,v=P),S=v,p&&k)t:{for(P=p,x=k,y=0,f=P;f;f=Vs(f))y++;for(f=0,v=x;v;v=Vs(v))f++;for(;0<y-f;)P=Vs(P),y--;for(;0<f-y;)x=Vs(x),f--;for(;y--;){if(P===x||x!==null&&P===x.alternate)break t;P=Vs(P),x=Vs(x)}P=null}else P=null;p!==null&&Yc(u,g,p,P,!1),k!==null&&S!==null&&Yc(u,S,k,P,!0)}}e:{if(g=d?qs(d):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var R=rx;else if(Bc(g))if(Bm)R=lx;else{R=ox;var E=ax}else(p=g.nodeName)&&p.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(R=ix);if(R&&(R=R(e,d))){zm(u,R,s,m);break e}E&&E(e,g,d),e==="focusout"&&(E=g._wrapperState)&&E.controlled&&g.type==="number"&&li(g,"number",g.value)}switch(E=d?qs(d):window,e){case"focusin":(Bc(E)||E.contentEditable==="true")&&(Bs=E,bi=d,On=null);break;case"focusout":On=bi=Bs=null;break;case"mousedown":ji=!0;break;case"contextmenu":case"mouseup":case"dragend":ji=!1,Wc(u,s,m);break;case"selectionchange":if(ux)break;case"keydown":case"keyup":Wc(u,s,m)}var N;if(Sl)e:{switch(e){case"compositionstart":var h="onCompositionStart";break e;case"compositionend":h="onCompositionEnd";break e;case"compositionupdate":h="onCompositionUpdate";break e}h=void 0}else zs?Om(e,s)&&(h="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(h="onCompositionStart");h&&(Vm&&s.locale!=="ko"&&(zs||h!=="onCompositionStart"?h==="onCompositionEnd"&&zs&&(N=$m()):(Yt=m,jl="value"in Yt?Yt.value:Yt.textContent,zs=!0)),E=fa(d,h),0<E.length&&(h=new Vc(h,e,null,s,m),u.push({event:h,listeners:E}),N?h.data=N:(N=_m(s),N!==null&&(h.data=N)))),(N=Jg?ex(e,s):tx(e,s))&&(d=fa(d,"onBeforeInput"),0<d.length&&(m=new Vc("onBeforeInput","beforeinput",null,s,m),u.push({event:m,listeners:d}),m.data=N))}Zm(u,t)})}function nr(e,t,s){return{instance:e,listener:t,currentTarget:s}}function fa(e,t){for(var s=t+"Capture",r=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=Yn(e,s),o!=null&&r.unshift(nr(e,o,a)),o=Yn(e,t),o!=null&&r.push(nr(e,o,a))),e=e.return}return r}function Vs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yc(e,t,s,r,a){for(var o=t._reactName,i=[];s!==null&&s!==r;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,a?(c=Yn(s,o),c!=null&&i.unshift(nr(s,c,l))):a||(c=Yn(s,o),c!=null&&i.push(nr(s,c,l)))),s=s.return}i.length!==0&&e.push({event:t,listeners:i})}var px=/\r\n?/g,gx=/\u0000|\uFFFD/g;function Kc(e){return(typeof e=="string"?e:""+e).replace(px,`
`).replace(gx,"")}function Ir(e,t,s){if(t=Kc(t),Kc(e)!==t&&s)throw Error(X(425))}function pa(){}var Ni=null,wi=null;function Si(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ci=typeof setTimeout=="function"?setTimeout:void 0,xx=typeof clearTimeout=="function"?clearTimeout:void 0,Zc=typeof Promise=="function"?Promise:void 0,vx=typeof queueMicrotask=="function"?queueMicrotask:typeof Zc<"u"?function(e){return Zc.resolve(null).then(e).catch(yx)}:Ci;function yx(e){setTimeout(function(){throw e})}function Eo(e,t){var s=t,r=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(r===0){e.removeChild(a),Jn(t);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=a}while(s);Jn(t)}function ts(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Jc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var yn=Math.random().toString(36).slice(2),St="__reactFiber$"+yn,rr="__reactProps$"+yn,$t="__reactContainer$"+yn,ki="__reactEvents$"+yn,bx="__reactListeners$"+yn,jx="__reactHandles$"+yn;function Ns(e){var t=e[St];if(t)return t;for(var s=e.parentNode;s;){if(t=s[$t]||s[St]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Jc(e);e!==null;){if(s=e[St])return s;e=Jc(e)}return t}e=s,s=e.parentNode}return null}function xr(e){return e=e[St]||e[$t],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function Ga(e){return e[rr]||null}var Pi=[],Gs=-1;function fs(e){return{current:e}}function he(e){0>Gs||(e.current=Pi[Gs],Pi[Gs]=null,Gs--)}function ue(e,t){Gs++,Pi[Gs]=e.current,e.current=t}var ds={},_e=fs(ds),Xe=fs(!1),Ts=ds;function cn(e,t){var s=e.type.contextTypes;if(!s)return ds;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in s)a[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Qe(e){return e=e.childContextTypes,e!=null}function ga(){he(Xe),he(_e)}function ed(e,t,s){if(_e.current!==ds)throw Error(X(168));ue(_e,t),ue(Xe,s)}function eh(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(X(108,ag(e)||"Unknown",a));return ye({},s,r)}function xa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ds,Ts=_e.current,ue(_e,e),ue(Xe,Xe.current),!0}function td(e,t,s){var r=e.stateNode;if(!r)throw Error(X(169));s?(e=eh(e,t,Ts),r.__reactInternalMemoizedMergedChildContext=e,he(Xe),he(_e),ue(_e,e)):he(Xe),ue(Xe,s)}var Tt=null,Ha=!1,To=!1;function th(e){Tt===null?Tt=[e]:Tt.push(e)}function Nx(e){Ha=!0,th(e)}function ps(){if(!To&&Tt!==null){To=!0;var e=0,t=ce;try{var s=Tt;for(ce=1;e<s.length;e++){var r=s[e];do r=r(!0);while(r!==null)}Tt=null,Ha=!1}catch(a){throw Tt!==null&&(Tt=Tt.slice(e+1)),km(xl,ps),a}finally{ce=t,To=!1}}return null}var Hs=[],Ws=0,va=null,ya=0,lt=[],ct=0,As=null,At=1,Rt="";function vs(e,t){Hs[Ws++]=ya,Hs[Ws++]=va,va=e,ya=t}function sh(e,t,s){lt[ct++]=At,lt[ct++]=Rt,lt[ct++]=As,As=e;var r=At;e=Rt;var a=32-vt(r)-1;r&=~(1<<a),s+=1;var o=32-vt(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,At=1<<32-vt(t)+a|s<<a|r,Rt=o+e}else At=1<<o|s<<a|r,Rt=e}function kl(e){e.return!==null&&(vs(e,1),sh(e,1,0))}function Pl(e){for(;e===va;)va=Hs[--Ws],Hs[Ws]=null,ya=Hs[--Ws],Hs[Ws]=null;for(;e===As;)As=lt[--ct],lt[ct]=null,Rt=lt[--ct],lt[ct]=null,At=lt[--ct],lt[ct]=null}var tt=null,Je=null,pe=!1,xt=null;function nh(e,t){var s=dt(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function sd(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tt=e,Je=ts(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tt=e,Je=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=As!==null?{id:At,overflow:Rt}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=dt(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,tt=e,Je=null,!0):!1;default:return!1}}function Ei(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ti(e){if(pe){var t=Je;if(t){var s=t;if(!sd(e,t)){if(Ei(e))throw Error(X(418));t=ts(s.nextSibling);var r=tt;t&&sd(e,t)?nh(r,s):(e.flags=e.flags&-4097|2,pe=!1,tt=e)}}else{if(Ei(e))throw Error(X(418));e.flags=e.flags&-4097|2,pe=!1,tt=e}}}function nd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tt=e}function Fr(e){if(e!==tt)return!1;if(!pe)return nd(e),pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Si(e.type,e.memoizedProps)),t&&(t=Je)){if(Ei(e))throw rh(),Error(X(418));for(;t;)nh(e,t),t=ts(t.nextSibling)}if(nd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Je=ts(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Je=null}}else Je=tt?ts(e.stateNode.nextSibling):null;return!0}function rh(){for(var e=Je;e;)e=ts(e.nextSibling)}function dn(){Je=tt=null,pe=!1}function El(e){xt===null?xt=[e]:xt.push(e)}var wx=zt.ReactCurrentBatchConfig;function Cn(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(X(309));var r=s.stateNode}if(!r)throw Error(X(147,e));var a=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=a.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(X(284));if(!s._owner)throw Error(X(290,e))}return e}function $r(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rd(e){var t=e._init;return t(e._payload)}function ah(e){function t(x,y){if(e){var f=x.deletions;f===null?(x.deletions=[y],x.flags|=16):f.push(y)}}function s(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=as(x,y),x.index=0,x.sibling=null,x}function o(x,y,f){return x.index=f,e?(f=x.alternate,f!==null?(f=f.index,f<y?(x.flags|=2,y):f):(x.flags|=2,y)):(x.flags|=1048576,y)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,y,f,v){return y===null||y.tag!==6?(y=Fo(f,x.mode,v),y.return=x,y):(y=a(y,f),y.return=x,y)}function c(x,y,f,v){var R=f.type;return R===_s?m(x,y,f.props.children,v,f.key):y!==null&&(y.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===qt&&rd(R)===y.type)?(v=a(y,f.props),v.ref=Cn(x,y,f),v.return=x,v):(v=ra(f.type,f.key,f.props,null,x.mode,v),v.ref=Cn(x,y,f),v.return=x,v)}function d(x,y,f,v){return y===null||y.tag!==4||y.stateNode.containerInfo!==f.containerInfo||y.stateNode.implementation!==f.implementation?(y=$o(f,x.mode,v),y.return=x,y):(y=a(y,f.children||[]),y.return=x,y)}function m(x,y,f,v,R){return y===null||y.tag!==7?(y=Ps(f,x.mode,v,R),y.return=x,y):(y=a(y,f),y.return=x,y)}function u(x,y,f){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Fo(""+y,x.mode,f),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case kr:return f=ra(y.type,y.key,y.props,null,x.mode,f),f.ref=Cn(x,null,y),f.return=x,f;case Os:return y=$o(y,x.mode,f),y.return=x,y;case qt:var v=y._init;return u(x,v(y._payload),f)}if(Rn(y)||bn(y))return y=Ps(y,x.mode,f,null),y.return=x,y;$r(x,y)}return null}function g(x,y,f,v){var R=y!==null?y.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return R!==null?null:l(x,y,""+f,v);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case kr:return f.key===R?c(x,y,f,v):null;case Os:return f.key===R?d(x,y,f,v):null;case qt:return R=f._init,g(x,y,R(f._payload),v)}if(Rn(f)||bn(f))return R!==null?null:m(x,y,f,v,null);$r(x,f)}return null}function p(x,y,f,v,R){if(typeof v=="string"&&v!==""||typeof v=="number")return x=x.get(f)||null,l(y,x,""+v,R);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case kr:return x=x.get(v.key===null?f:v.key)||null,c(y,x,v,R);case Os:return x=x.get(v.key===null?f:v.key)||null,d(y,x,v,R);case qt:var E=v._init;return p(x,y,f,E(v._payload),R)}if(Rn(v)||bn(v))return x=x.get(f)||null,m(y,x,v,R,null);$r(y,v)}return null}function k(x,y,f,v){for(var R=null,E=null,N=y,h=y=0,j=null;N!==null&&h<f.length;h++){N.index>h?(j=N,N=null):j=N.sibling;var C=g(x,N,f[h],v);if(C===null){N===null&&(N=j);break}e&&N&&C.alternate===null&&t(x,N),y=o(C,y,h),E===null?R=C:E.sibling=C,E=C,N=j}if(h===f.length)return s(x,N),pe&&vs(x,h),R;if(N===null){for(;h<f.length;h++)N=u(x,f[h],v),N!==null&&(y=o(N,y,h),E===null?R=N:E.sibling=N,E=N);return pe&&vs(x,h),R}for(N=r(x,N);h<f.length;h++)j=p(N,x,h,f[h],v),j!==null&&(e&&j.alternate!==null&&N.delete(j.key===null?h:j.key),y=o(j,y,h),E===null?R=j:E.sibling=j,E=j);return e&&N.forEach(function(b){return t(x,b)}),pe&&vs(x,h),R}function P(x,y,f,v){var R=bn(f);if(typeof R!="function")throw Error(X(150));if(f=R.call(f),f==null)throw Error(X(151));for(var E=R=null,N=y,h=y=0,j=null,C=f.next();N!==null&&!C.done;h++,C=f.next()){N.index>h?(j=N,N=null):j=N.sibling;var b=g(x,N,C.value,v);if(b===null){N===null&&(N=j);break}e&&N&&b.alternate===null&&t(x,N),y=o(b,y,h),E===null?R=b:E.sibling=b,E=b,N=j}if(C.done)return s(x,N),pe&&vs(x,h),R;if(N===null){for(;!C.done;h++,C=f.next())C=u(x,C.value,v),C!==null&&(y=o(C,y,h),E===null?R=C:E.sibling=C,E=C);return pe&&vs(x,h),R}for(N=r(x,N);!C.done;h++,C=f.next())C=p(N,x,h,C.value,v),C!==null&&(e&&C.alternate!==null&&N.delete(C.key===null?h:C.key),y=o(C,y,h),E===null?R=C:E.sibling=C,E=C);return e&&N.forEach(function(T){return t(x,T)}),pe&&vs(x,h),R}function S(x,y,f,v){if(typeof f=="object"&&f!==null&&f.type===_s&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case kr:e:{for(var R=f.key,E=y;E!==null;){if(E.key===R){if(R=f.type,R===_s){if(E.tag===7){s(x,E.sibling),y=a(E,f.props.children),y.return=x,x=y;break e}}else if(E.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===qt&&rd(R)===E.type){s(x,E.sibling),y=a(E,f.props),y.ref=Cn(x,E,f),y.return=x,x=y;break e}s(x,E);break}else t(x,E);E=E.sibling}f.type===_s?(y=Ps(f.props.children,x.mode,v,f.key),y.return=x,x=y):(v=ra(f.type,f.key,f.props,null,x.mode,v),v.ref=Cn(x,y,f),v.return=x,x=v)}return i(x);case Os:e:{for(E=f.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===f.containerInfo&&y.stateNode.implementation===f.implementation){s(x,y.sibling),y=a(y,f.children||[]),y.return=x,x=y;break e}else{s(x,y);break}else t(x,y);y=y.sibling}y=$o(f,x.mode,v),y.return=x,x=y}return i(x);case qt:return E=f._init,S(x,y,E(f._payload),v)}if(Rn(f))return k(x,y,f,v);if(bn(f))return P(x,y,f,v);$r(x,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,y!==null&&y.tag===6?(s(x,y.sibling),y=a(y,f),y.return=x,x=y):(s(x,y),y=Fo(f,x.mode,v),y.return=x,x=y),i(x)):s(x,y)}return S}var un=ah(!0),oh=ah(!1),ba=fs(null),ja=null,Xs=null,Tl=null;function Al(){Tl=Xs=ja=null}function Rl(e){var t=ba.current;he(ba),e._currentValue=t}function Ai(e,t,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function an(e,t){ja=e,Tl=Xs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(We=!0),e.firstContext=null)}function mt(e){var t=e._currentValue;if(Tl!==e)if(e={context:e,memoizedValue:t,next:null},Xs===null){if(ja===null)throw Error(X(308));Xs=e,ja.dependencies={lanes:0,firstContext:e}}else Xs=Xs.next=e;return t}var ws=null;function Ll(e){ws===null?ws=[e]:ws.push(e)}function ih(e,t,s,r){var a=t.interleaved;return a===null?(s.next=s,Ll(t)):(s.next=a.next,a.next=s),t.interleaved=s,Vt(e,r)}function Vt(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Gt=!1;function Dl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ss(e,t,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Vt(e,s)}return a=r.interleaved,a===null?(t.next=t,Ll(r)):(t.next=a.next,a.next=t),r.interleaved=t,Vt(e,s)}function Zr(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,vl(e,s)}}function ad(e,t){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var a=null,o=null;if(s=s.firstBaseUpdate,s!==null){do{var i={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};o===null?a=o=i:o=o.next=i,s=s.next}while(s!==null);o===null?a=o=t:o=o.next=t}else a=o=t;s={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Na(e,t,s,r){var a=e.updateQueue;Gt=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==i&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=c))}if(o!==null){var u=a.baseState;i=0,m=d=c=null,l=o;do{var g=l.lane,p=l.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=e,P=l;switch(g=t,p=s,P.tag){case 1:if(k=P.payload,typeof k=="function"){u=k.call(p,u,g);break e}u=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=P.payload,g=typeof k=="function"?k.call(p,u,g):k,g==null)break e;u=ye({},u,g);break e;case 2:Gt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=a.effects,g===null?a.effects=[l]:g.push(l))}else p={eventTime:p,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=p,c=u):m=m.next=p,i|=g;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;g=l,l=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);if(m===null&&(c=u),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);Ls|=i,e.lanes=i,e.memoizedState=u}}function od(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=s,typeof a!="function")throw Error(X(191,a));a.call(r)}}}var vr={},kt=fs(vr),ar=fs(vr),or=fs(vr);function Ss(e){if(e===vr)throw Error(X(174));return e}function Ml(e,t){switch(ue(or,t),ue(ar,e),ue(kt,vr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:di(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=di(t,e)}he(kt),ue(kt,t)}function mn(){he(kt),he(ar),he(or)}function ch(e){Ss(or.current);var t=Ss(kt.current),s=di(t,e.type);t!==s&&(ue(ar,e),ue(kt,s))}function Il(e){ar.current===e&&(he(kt),he(ar))}var ge=fs(0);function wa(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ao=[];function Fl(){for(var e=0;e<Ao.length;e++)Ao[e]._workInProgressVersionPrimary=null;Ao.length=0}var Jr=zt.ReactCurrentDispatcher,Ro=zt.ReactCurrentBatchConfig,Rs=0,ve=null,Pe=null,Te=null,Sa=!1,_n=!1,ir=0,Sx=0;function Ie(){throw Error(X(321))}function $l(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!jt(e[s],t[s]))return!1;return!0}function Vl(e,t,s,r,a,o){if(Rs=o,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jr.current=e===null||e.memoizedState===null?Ex:Tx,e=s(r,a),_n){o=0;do{if(_n=!1,ir=0,25<=o)throw Error(X(301));o+=1,Te=Pe=null,t.updateQueue=null,Jr.current=Ax,e=s(r,a)}while(_n)}if(Jr.current=Ca,t=Pe!==null&&Pe.next!==null,Rs=0,Te=Pe=ve=null,Sa=!1,t)throw Error(X(300));return e}function Ol(){var e=ir!==0;return ir=0,e}function wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?ve.memoizedState=Te=e:Te=Te.next=e,Te}function ht(){if(Pe===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var t=Te===null?ve.memoizedState:Te.next;if(t!==null)Te=t,Pe=e;else{if(e===null)throw Error(X(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Te===null?ve.memoizedState=Te=e:Te=Te.next=e}return Te}function lr(e,t){return typeof t=="function"?t(e):t}function Lo(e){var t=ht(),s=t.queue;if(s===null)throw Error(X(311));s.lastRenderedReducer=e;var r=Pe,a=r.baseQueue,o=s.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}r.baseQueue=a=o,s.pending=null}if(a!==null){o=a.next,r=r.baseState;var l=i=null,c=null,d=o;do{var m=d.lane;if((Rs&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var u={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=u,i=r):c=c.next=u,ve.lanes|=m,Ls|=m}d=d.next}while(d!==null&&d!==o);c===null?i=r:c.next=l,jt(r,t.memoizedState)||(We=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,s.lastRenderedState=r}if(e=s.interleaved,e!==null){a=e;do o=a.lane,ve.lanes|=o,Ls|=o,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Do(e){var t=ht(),s=t.queue;if(s===null)throw Error(X(311));s.lastRenderedReducer=e;var r=s.dispatch,a=s.pending,o=t.memoizedState;if(a!==null){s.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);jt(o,t.memoizedState)||(We=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),s.lastRenderedState=o}return[o,r]}function dh(){}function uh(e,t){var s=ve,r=ht(),a=t(),o=!jt(r.memoizedState,a);if(o&&(r.memoizedState=a,We=!0),r=r.queue,_l(fh.bind(null,s,r,e),[e]),r.getSnapshot!==t||o||Te!==null&&Te.memoizedState.tag&1){if(s.flags|=2048,cr(9,hh.bind(null,s,r,a,t),void 0,null),Ae===null)throw Error(X(349));Rs&30||mh(s,t,a)}return a}function mh(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function hh(e,t,s,r){t.value=s,t.getSnapshot=r,ph(t)&&gh(e)}function fh(e,t,s){return s(function(){ph(t)&&gh(e)})}function ph(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!jt(e,s)}catch{return!0}}function gh(e){var t=Vt(e,1);t!==null&&yt(t,e,1,-1)}function id(e){var t=wt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:e},t.queue=e,e=e.dispatch=Px.bind(null,ve,e),[t.memoizedState,e]}function cr(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e)),e}function xh(){return ht().memoizedState}function ea(e,t,s,r){var a=wt();ve.flags|=e,a.memoizedState=cr(1|t,s,void 0,r===void 0?null:r)}function Wa(e,t,s,r){var a=ht();r=r===void 0?null:r;var o=void 0;if(Pe!==null){var i=Pe.memoizedState;if(o=i.destroy,r!==null&&$l(r,i.deps)){a.memoizedState=cr(t,s,o,r);return}}ve.flags|=e,a.memoizedState=cr(1|t,s,o,r)}function ld(e,t){return ea(8390656,8,e,t)}function _l(e,t){return Wa(2048,8,e,t)}function vh(e,t){return Wa(4,2,e,t)}function yh(e,t){return Wa(4,4,e,t)}function bh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jh(e,t,s){return s=s!=null?s.concat([e]):null,Wa(4,4,bh.bind(null,t,e),s)}function zl(){}function Nh(e,t){var s=ht();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&$l(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function wh(e,t){var s=ht();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&$l(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function Sh(e,t,s){return Rs&21?(jt(s,t)||(s=Tm(),ve.lanes|=s,Ls|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,We=!0),e.memoizedState=s)}function Cx(e,t){var s=ce;ce=s!==0&&4>s?s:4,e(!0);var r=Ro.transition;Ro.transition={};try{e(!1),t()}finally{ce=s,Ro.transition=r}}function Ch(){return ht().memoizedState}function kx(e,t,s){var r=rs(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},kh(e))Ph(t,s);else if(s=ih(e,t,s,r),s!==null){var a=Ue();yt(s,e,r,a),Eh(s,t,r)}}function Px(e,t,s){var r=rs(e),a={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(kh(e))Ph(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,s);if(a.hasEagerState=!0,a.eagerState=l,jt(l,i)){var c=t.interleaved;c===null?(a.next=a,Ll(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=ih(e,t,a,r),s!==null&&(a=Ue(),yt(s,e,r,a),Eh(s,t,r))}}function kh(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function Ph(e,t){_n=Sa=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Eh(e,t,s){if(s&4194240){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,vl(e,s)}}var Ca={readContext:mt,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},Ex={readContext:mt,useCallback:function(e,t){return wt().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:ld,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,ea(4194308,4,bh.bind(null,t,e),s)},useLayoutEffect:function(e,t){return ea(4194308,4,e,t)},useInsertionEffect:function(e,t){return ea(4,2,e,t)},useMemo:function(e,t){var s=wt();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=wt();return t=s!==void 0?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=kx.bind(null,ve,e),[r.memoizedState,e]},useRef:function(e){var t=wt();return e={current:e},t.memoizedState=e},useState:id,useDebugValue:zl,useDeferredValue:function(e){return wt().memoizedState=e},useTransition:function(){var e=id(!1),t=e[0];return e=Cx.bind(null,e[1]),wt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=ve,a=wt();if(pe){if(s===void 0)throw Error(X(407));s=s()}else{if(s=t(),Ae===null)throw Error(X(349));Rs&30||mh(r,t,s)}a.memoizedState=s;var o={value:s,getSnapshot:t};return a.queue=o,ld(fh.bind(null,r,o,e),[e]),r.flags|=2048,cr(9,hh.bind(null,r,o,s,t),void 0,null),s},useId:function(){var e=wt(),t=Ae.identifierPrefix;if(pe){var s=Rt,r=At;s=(r&~(1<<32-vt(r)-1)).toString(32)+s,t=":"+t+"R"+s,s=ir++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Sx++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Tx={readContext:mt,useCallback:Nh,useContext:mt,useEffect:_l,useImperativeHandle:jh,useInsertionEffect:vh,useLayoutEffect:yh,useMemo:wh,useReducer:Lo,useRef:xh,useState:function(){return Lo(lr)},useDebugValue:zl,useDeferredValue:function(e){var t=ht();return Sh(t,Pe.memoizedState,e)},useTransition:function(){var e=Lo(lr)[0],t=ht().memoizedState;return[e,t]},useMutableSource:dh,useSyncExternalStore:uh,useId:Ch,unstable_isNewReconciler:!1},Ax={readContext:mt,useCallback:Nh,useContext:mt,useEffect:_l,useImperativeHandle:jh,useInsertionEffect:vh,useLayoutEffect:yh,useMemo:wh,useReducer:Do,useRef:xh,useState:function(){return Do(lr)},useDebugValue:zl,useDeferredValue:function(e){var t=ht();return Pe===null?t.memoizedState=e:Sh(t,Pe.memoizedState,e)},useTransition:function(){var e=Do(lr)[0],t=ht().memoizedState;return[e,t]},useMutableSource:dh,useSyncExternalStore:uh,useId:Ch,unstable_isNewReconciler:!1};function pt(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Ri(e,t,s,r){t=e.memoizedState,s=s(r,t),s=s==null?t:ye({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Xa={isMounted:function(e){return(e=e._reactInternals)?Is(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=Ue(),a=rs(e),o=Dt(r,a);o.payload=t,s!=null&&(o.callback=s),t=ss(e,o,a),t!==null&&(yt(t,e,a,r),Zr(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=Ue(),a=rs(e),o=Dt(r,a);o.tag=1,o.payload=t,s!=null&&(o.callback=s),t=ss(e,o,a),t!==null&&(yt(t,e,a,r),Zr(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Ue(),r=rs(e),a=Dt(s,r);a.tag=2,t!=null&&(a.callback=t),t=ss(e,a,r),t!==null&&(yt(t,e,r,s),Zr(t,e,r))}};function cd(e,t,s,r,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!tr(s,r)||!tr(a,o):!0}function Th(e,t,s){var r=!1,a=ds,o=t.contextType;return typeof o=="object"&&o!==null?o=mt(o):(a=Qe(t)?Ts:_e.current,r=t.contextTypes,o=(r=r!=null)?cn(e,a):ds),t=new t(s,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xa,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function dd(e,t,s,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&Xa.enqueueReplaceState(t,t.state,null)}function Li(e,t,s,r){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},Dl(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=mt(o):(o=Qe(t)?Ts:_e.current,a.context=cn(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Ri(e,t,o,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Xa.enqueueReplaceState(a,a.state,null),Na(e,s,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function hn(e,t){try{var s="",r=t;do s+=rg(r),r=r.return;while(r);var a=s}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function Mo(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Di(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Rx=typeof WeakMap=="function"?WeakMap:Map;function Ah(e,t,s){s=Dt(-1,s),s.tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){Pa||(Pa=!0,Ui=r),Di(e,t)},s}function Rh(e,t,s){s=Dt(-1,s),s.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;s.payload=function(){return r(a)},s.callback=function(){Di(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(s.callback=function(){Di(e,t),typeof r!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),s}function ud(e,t,s){var r=e.pingCache;if(r===null){r=e.pingCache=new Rx;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(s)||(a.add(s),e=Gx.bind(null,e,t,s),t.then(e,e))}function md(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function hd(e,t,s,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Dt(-1,1),t.tag=2,ss(s,t,1))),s.lanes|=1),e)}var Lx=zt.ReactCurrentOwner,We=!1;function Be(e,t,s,r){t.child=e===null?oh(t,null,s,r):un(t,e.child,s,r)}function fd(e,t,s,r,a){s=s.render;var o=t.ref;return an(t,a),r=Vl(e,t,s,r,o,a),s=Ol(),e!==null&&!We?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ot(e,t,a)):(pe&&s&&kl(t),t.flags|=1,Be(e,t,r,a),t.child)}function pd(e,t,s,r,a){if(e===null){var o=s.type;return typeof o=="function"&&!Ql(o)&&o.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=o,Lh(e,t,o,r,a)):(e=ra(s.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var i=o.memoizedProps;if(s=s.compare,s=s!==null?s:tr,s(i,r)&&e.ref===t.ref)return Ot(e,t,a)}return t.flags|=1,e=as(o,r),e.ref=t.ref,e.return=t,t.child=e}function Lh(e,t,s,r,a){if(e!==null){var o=e.memoizedProps;if(tr(o,r)&&e.ref===t.ref)if(We=!1,t.pendingProps=r=o,(e.lanes&a)!==0)e.flags&131072&&(We=!0);else return t.lanes=e.lanes,Ot(e,t,a)}return Mi(e,t,s,r,a)}function Dh(e,t,s){var r=t.pendingProps,a=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(Ys,Ze),Ze|=s;else{if(!(s&1073741824))return e=o!==null?o.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ue(Ys,Ze),Ze|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:s,ue(Ys,Ze),Ze|=r}else o!==null?(r=o.baseLanes|s,t.memoizedState=null):r=s,ue(Ys,Ze),Ze|=r;return Be(e,t,a,s),t.child}function Mh(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Mi(e,t,s,r,a){var o=Qe(s)?Ts:_e.current;return o=cn(t,o),an(t,a),s=Vl(e,t,s,r,o,a),r=Ol(),e!==null&&!We?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ot(e,t,a)):(pe&&r&&kl(t),t.flags|=1,Be(e,t,s,a),t.child)}function gd(e,t,s,r,a){if(Qe(s)){var o=!0;xa(t)}else o=!1;if(an(t,a),t.stateNode===null)ta(e,t),Th(t,s,r),Li(t,s,r,a),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=s.contextType;typeof d=="object"&&d!==null?d=mt(d):(d=Qe(s)?Ts:_e.current,d=cn(t,d));var m=s.getDerivedStateFromProps,u=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function";u||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==d)&&dd(t,i,r,d),Gt=!1;var g=t.memoizedState;i.state=g,Na(t,r,i,a),c=t.memoizedState,l!==r||g!==c||Xe.current||Gt?(typeof m=="function"&&(Ri(t,s,m,r),c=t.memoizedState),(l=Gt||cd(t,s,l,r,g,c,d))?(u||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=d,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,lh(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:pt(t.type,l),i.props=d,u=t.pendingProps,g=i.context,c=s.contextType,typeof c=="object"&&c!==null?c=mt(c):(c=Qe(s)?Ts:_e.current,c=cn(t,c));var p=s.getDerivedStateFromProps;(m=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==u||g!==c)&&dd(t,i,r,c),Gt=!1,g=t.memoizedState,i.state=g,Na(t,r,i,a);var k=t.memoizedState;l!==u||g!==k||Xe.current||Gt?(typeof p=="function"&&(Ri(t,s,p,r),k=t.memoizedState),(d=Gt||cd(t,s,d,r,g,k,c)||!1)?(m||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,k,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,k,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),i.props=r,i.state=k,i.context=c,r=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Ii(e,t,s,r,o,a)}function Ii(e,t,s,r,a,o){Mh(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return a&&td(t,s,!1),Ot(e,t,o);r=t.stateNode,Lx.current=t;var l=i&&typeof s.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=un(t,e.child,null,o),t.child=un(t,null,l,o)):Be(e,t,l,o),t.memoizedState=r.state,a&&td(t,s,!0),t.child}function Ih(e){var t=e.stateNode;t.pendingContext?ed(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ed(e,t.context,!1),Ml(e,t.containerInfo)}function xd(e,t,s,r,a){return dn(),El(a),t.flags|=256,Be(e,t,s,r),t.child}var Fi={dehydrated:null,treeContext:null,retryLane:0};function $i(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fh(e,t,s){var r=t.pendingProps,a=ge.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ue(ge,a&1),e===null)return Ti(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Ka(i,r,0,null),e=Ps(e,r,s,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=$i(s),t.memoizedState=Fi,e):Bl(t,i));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Dx(e,t,i,r,l,a,s);if(o){o=r.fallback,i=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=as(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?o=as(l,o):(o=Ps(o,i,s,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?$i(s):{baseLanes:i.baseLanes|s,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~s,t.memoizedState=Fi,r}return o=e.child,e=o.sibling,r=as(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=s),r.return=t,r.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function Bl(e,t){return t=Ka({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vr(e,t,s,r){return r!==null&&El(r),un(t,e.child,null,s),e=Bl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dx(e,t,s,r,a,o,i){if(s)return t.flags&256?(t.flags&=-257,r=Mo(Error(X(422))),Vr(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=Ka({mode:"visible",children:r.children},a,0,null),o=Ps(o,a,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&un(t,e.child,null,i),t.child.memoizedState=$i(i),t.memoizedState=Fi,o);if(!(t.mode&1))return Vr(e,t,i,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(X(419)),r=Mo(o,r,void 0),Vr(e,t,i,r)}if(l=(i&e.childLanes)!==0,We||l){if(r=Ae,r!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|i)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Vt(e,a),yt(r,e,a,-1))}return Xl(),r=Mo(Error(X(421))),Vr(e,t,i,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Hx.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,Je=ts(a.nextSibling),tt=t,pe=!0,xt=null,e!==null&&(lt[ct++]=At,lt[ct++]=Rt,lt[ct++]=As,At=e.id,Rt=e.overflow,As=t),t=Bl(t,r.children),t.flags|=4096,t)}function vd(e,t,s){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ai(e.return,t,s)}function Io(e,t,s,r,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=s,o.tailMode=a)}function $h(e,t,s){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(Be(e,t,r.children,s),r=ge.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vd(e,s,t);else if(e.tag===19)vd(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ue(ge,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&wa(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Io(t,!1,a,s,o);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&wa(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Io(t,!0,s,null,o);break;case"together":Io(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ta(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ot(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ls|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,s=as(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=as(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Mx(e,t,s){switch(t.tag){case 3:Ih(t),dn();break;case 5:ch(t);break;case 1:Qe(t.type)&&xa(t);break;case 4:Ml(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;ue(ba,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ue(ge,ge.current&1),t.flags|=128,null):s&t.child.childLanes?Fh(e,t,s):(ue(ge,ge.current&1),e=Ot(e,t,s),e!==null?e.sibling:null);ue(ge,ge.current&1);break;case 19:if(r=(s&t.childLanes)!==0,e.flags&128){if(r)return $h(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ue(ge,ge.current),r)break;return null;case 22:case 23:return t.lanes=0,Dh(e,t,s)}return Ot(e,t,s)}var Vh,Vi,Oh,_h;Vh=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Vi=function(){};Oh=function(e,t,s,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ss(kt.current);var o=null;switch(s){case"input":a=oi(e,a),r=oi(e,r),o=[];break;case"select":a=ye({},a,{value:void 0}),r=ye({},r,{value:void 0}),o=[];break;case"textarea":a=ci(e,a),r=ci(e,r),o=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=pa)}ui(s,r);var i;s=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(i in l)l.hasOwnProperty(i)&&(s||(s={}),s[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Xn.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(l=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(s||(s={}),s[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(s||(s={}),s[i]=c[i])}else s||(o||(o=[]),o.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Xn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&me("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}s&&(o=o||[]).push("style",s);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};_h=function(e,t,s,r){s!==r&&(t.flags|=4)};function kn(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Fe(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function Ix(e,t,s){var r=t.pendingProps;switch(Pl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(t),null;case 1:return Qe(t.type)&&ga(),Fe(t),null;case 3:return r=t.stateNode,mn(),he(Xe),he(_e),Fl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Fr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xt!==null&&(Hi(xt),xt=null))),Vi(e,t),Fe(t),null;case 5:Il(t);var a=Ss(or.current);if(s=t.type,e!==null&&t.stateNode!=null)Oh(e,t,s,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(X(166));return Fe(t),null}if(e=Ss(kt.current),Fr(t)){r=t.stateNode,s=t.type;var o=t.memoizedProps;switch(r[St]=t,r[rr]=o,e=(t.mode&1)!==0,s){case"dialog":me("cancel",r),me("close",r);break;case"iframe":case"object":case"embed":me("load",r);break;case"video":case"audio":for(a=0;a<Dn.length;a++)me(Dn[a],r);break;case"source":me("error",r);break;case"img":case"image":case"link":me("error",r),me("load",r);break;case"details":me("toggle",r);break;case"input":Pc(r,o),me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},me("invalid",r);break;case"textarea":Tc(r,o),me("invalid",r)}ui(s,o),a=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Ir(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Ir(r.textContent,l,e),a=["children",""+l]):Xn.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&me("scroll",r)}switch(s){case"input":Pr(r),Ec(r,o,!0);break;case"textarea":Pr(r),Ac(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=pa)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fm(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(s,{is:r.is}):(e=i.createElement(s),s==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,s),e[St]=t,e[rr]=r,Vh(e,t,!1,!1),t.stateNode=e;e:{switch(i=mi(s,r),s){case"dialog":me("cancel",e),me("close",e),a=r;break;case"iframe":case"object":case"embed":me("load",e),a=r;break;case"video":case"audio":for(a=0;a<Dn.length;a++)me(Dn[a],e);a=r;break;case"source":me("error",e),a=r;break;case"img":case"image":case"link":me("error",e),me("load",e),a=r;break;case"details":me("toggle",e),a=r;break;case"input":Pc(e,r),a=oi(e,r),me("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=ye({},r,{value:void 0}),me("invalid",e);break;case"textarea":Tc(e,r),a=ci(e,r),me("invalid",e);break;default:a=r}ui(s,a),l=a;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?xm(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&pm(e,c)):o==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Qn(e,c):typeof c=="number"&&Qn(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Xn.hasOwnProperty(o)?c!=null&&o==="onScroll"&&me("scroll",e):c!=null&&ml(e,o,c,i))}switch(s){case"input":Pr(e),Ec(e,r,!1);break;case"textarea":Pr(e),Ac(e);break;case"option":r.value!=null&&e.setAttribute("value",""+cs(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?tn(e,!!r.multiple,o,!1):r.defaultValue!=null&&tn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=pa)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fe(t),null;case 6:if(e&&t.stateNode!=null)_h(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(X(166));if(s=Ss(or.current),Ss(kt.current),Fr(t)){if(r=t.stateNode,s=t.memoizedProps,r[St]=t,(o=r.nodeValue!==s)&&(e=tt,e!==null))switch(e.tag){case 3:Ir(r.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ir(r.nodeValue,s,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[St]=t,t.stateNode=r}return Fe(t),null;case 13:if(he(ge),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pe&&Je!==null&&t.mode&1&&!(t.flags&128))rh(),dn(),t.flags|=98560,o=!1;else if(o=Fr(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(X(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(X(317));o[St]=t}else dn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fe(t),o=!1}else xt!==null&&(Hi(xt),xt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ge.current&1?Ee===0&&(Ee=3):Xl())),t.updateQueue!==null&&(t.flags|=4),Fe(t),null);case 4:return mn(),Vi(e,t),e===null&&sr(t.stateNode.containerInfo),Fe(t),null;case 10:return Rl(t.type._context),Fe(t),null;case 17:return Qe(t.type)&&ga(),Fe(t),null;case 19:if(he(ge),o=t.memoizedState,o===null)return Fe(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)kn(o,!1);else{if(Ee!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=wa(e),i!==null){for(t.flags|=128,kn(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;s!==null;)o=s,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return ue(ge,ge.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ne()>fn&&(t.flags|=128,r=!0,kn(o,!1),t.lanes=4194304)}else{if(!r)if(e=wa(i),e!==null){if(t.flags|=128,r=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),kn(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!pe)return Fe(t),null}else 2*Ne()-o.renderingStartTime>fn&&s!==1073741824&&(t.flags|=128,r=!0,kn(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(s=o.last,s!==null?s.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ne(),t.sibling=null,s=ge.current,ue(ge,r?s&1|2:s&1),t):(Fe(t),null);case 22:case 23:return Wl(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ze&1073741824&&(Fe(t),t.subtreeFlags&6&&(t.flags|=8192)):Fe(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function Fx(e,t){switch(Pl(t),t.tag){case 1:return Qe(t.type)&&ga(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mn(),he(Xe),he(_e),Fl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Il(t),null;case 13:if(he(ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));dn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return he(ge),null;case 4:return mn(),null;case 10:return Rl(t.type._context),null;case 22:case 23:return Wl(),null;case 24:return null;default:return null}}var Or=!1,Ve=!1,$x=typeof WeakSet=="function"?WeakSet:Set,J=null;function Qs(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){be(e,t,r)}else s.current=null}function Oi(e,t,s){try{s()}catch(r){be(e,t,r)}}var yd=!1;function Vx(e,t){if(Ni=ma,e=Gm(),Cl(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{s.nodeType,o.nodeType}catch{s=null;break e}var i=0,l=-1,c=-1,d=0,m=0,u=e,g=null;t:for(;;){for(var p;u!==s||a!==0&&u.nodeType!==3||(l=i+a),u!==o||r!==0&&u.nodeType!==3||(c=i+r),u.nodeType===3&&(i+=u.nodeValue.length),(p=u.firstChild)!==null;)g=u,u=p;for(;;){if(u===e)break t;if(g===s&&++d===a&&(l=i),g===o&&++m===r&&(c=i),(p=u.nextSibling)!==null)break;u=g,g=u.parentNode}u=p}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(wi={focusedElem:e,selectionRange:s},ma=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var P=k.memoizedProps,S=k.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?P:pt(t.type,P),S);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(v){be(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return k=yd,yd=!1,k}function zn(e,t,s){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&Oi(t,s,o)}a=a.next}while(a!==r)}}function Qa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function _i(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function zh(e){var t=e.alternate;t!==null&&(e.alternate=null,zh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[St],delete t[rr],delete t[ki],delete t[bx],delete t[jx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bh(e){return e.tag===5||e.tag===3||e.tag===4}function bd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zi(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=pa));else if(r!==4&&(e=e.child,e!==null))for(zi(e,t,s),e=e.sibling;e!==null;)zi(e,t,s),e=e.sibling}function Bi(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Bi(e,t,s),e=e.sibling;e!==null;)Bi(e,t,s),e=e.sibling}var Re=null,gt=!1;function Bt(e,t,s){for(s=s.child;s!==null;)Uh(e,t,s),s=s.sibling}function Uh(e,t,s){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(za,s)}catch{}switch(s.tag){case 5:Ve||Qs(s,t);case 6:var r=Re,a=gt;Re=null,Bt(e,t,s),Re=r,gt=a,Re!==null&&(gt?(e=Re,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Re.removeChild(s.stateNode));break;case 18:Re!==null&&(gt?(e=Re,s=s.stateNode,e.nodeType===8?Eo(e.parentNode,s):e.nodeType===1&&Eo(e,s),Jn(e)):Eo(Re,s.stateNode));break;case 4:r=Re,a=gt,Re=s.stateNode.containerInfo,gt=!0,Bt(e,t,s),Re=r,gt=a;break;case 0:case 11:case 14:case 15:if(!Ve&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Oi(s,t,i),a=a.next}while(a!==r)}Bt(e,t,s);break;case 1:if(!Ve&&(Qs(s,t),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(l){be(s,t,l)}Bt(e,t,s);break;case 21:Bt(e,t,s);break;case 22:s.mode&1?(Ve=(r=Ve)||s.memoizedState!==null,Bt(e,t,s),Ve=r):Bt(e,t,s);break;default:Bt(e,t,s)}}function jd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new $x),t.forEach(function(r){var a=Wx.bind(null,e,r);s.has(r)||(s.add(r),r.then(a,a))})}}function ft(e,t){var s=t.deletions;if(s!==null)for(var r=0;r<s.length;r++){var a=s[r];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:Re=l.stateNode,gt=!1;break e;case 3:Re=l.stateNode.containerInfo,gt=!0;break e;case 4:Re=l.stateNode.containerInfo,gt=!0;break e}l=l.return}if(Re===null)throw Error(X(160));Uh(o,i,a),Re=null,gt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){be(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qh(t,e),t=t.sibling}function qh(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ft(t,e),Nt(e),r&4){try{zn(3,e,e.return),Qa(3,e)}catch(P){be(e,e.return,P)}try{zn(5,e,e.return)}catch(P){be(e,e.return,P)}}break;case 1:ft(t,e),Nt(e),r&512&&s!==null&&Qs(s,s.return);break;case 5:if(ft(t,e),Nt(e),r&512&&s!==null&&Qs(s,s.return),e.flags&32){var a=e.stateNode;try{Qn(a,"")}catch(P){be(e,e.return,P)}}if(r&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,i=s!==null?s.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&mm(a,o),mi(l,i);var d=mi(l,o);for(i=0;i<c.length;i+=2){var m=c[i],u=c[i+1];m==="style"?xm(a,u):m==="dangerouslySetInnerHTML"?pm(a,u):m==="children"?Qn(a,u):ml(a,m,u,d)}switch(l){case"input":ii(a,o);break;case"textarea":hm(a,o);break;case"select":var g=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?tn(a,!!o.multiple,p,!1):g!==!!o.multiple&&(o.defaultValue!=null?tn(a,!!o.multiple,o.defaultValue,!0):tn(a,!!o.multiple,o.multiple?[]:"",!1))}a[rr]=o}catch(P){be(e,e.return,P)}}break;case 6:if(ft(t,e),Nt(e),r&4){if(e.stateNode===null)throw Error(X(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(P){be(e,e.return,P)}}break;case 3:if(ft(t,e),Nt(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{Jn(t.containerInfo)}catch(P){be(e,e.return,P)}break;case 4:ft(t,e),Nt(e);break;case 13:ft(t,e),Nt(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(Gl=Ne())),r&4&&jd(e);break;case 22:if(m=s!==null&&s.memoizedState!==null,e.mode&1?(Ve=(d=Ve)||m,ft(t,e),Ve=d):ft(t,e),Nt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(J=e,m=e.child;m!==null;){for(u=J=m;J!==null;){switch(g=J,p=g.child,g.tag){case 0:case 11:case 14:case 15:zn(4,g,g.return);break;case 1:Qs(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,s=g.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(P){be(r,s,P)}}break;case 5:Qs(g,g.return);break;case 22:if(g.memoizedState!==null){wd(u);continue}}p!==null?(p.return=g,J=p):wd(u)}m=m.sibling}e:for(m=null,u=e;;){if(u.tag===5){if(m===null){m=u;try{a=u.stateNode,d?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=u.stateNode,c=u.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=gm("display",i))}catch(P){be(e,e.return,P)}}}else if(u.tag===6){if(m===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(P){be(e,e.return,P)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:ft(t,e),Nt(e),r&4&&jd(e);break;case 21:break;default:ft(t,e),Nt(e)}}function Nt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Bh(s)){var r=s;break e}s=s.return}throw Error(X(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Qn(a,""),r.flags&=-33);var o=bd(e);Bi(e,o,a);break;case 3:case 4:var i=r.stateNode.containerInfo,l=bd(e);zi(e,l,i);break;default:throw Error(X(161))}}catch(c){be(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ox(e,t,s){J=e,Gh(e)}function Gh(e,t,s){for(var r=(e.mode&1)!==0;J!==null;){var a=J,o=a.child;if(a.tag===22&&r){var i=a.memoizedState!==null||Or;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Ve;l=Or;var d=Ve;if(Or=i,(Ve=c)&&!d)for(J=a;J!==null;)i=J,c=i.child,i.tag===22&&i.memoizedState!==null?Sd(a):c!==null?(c.return=i,J=c):Sd(a);for(;o!==null;)J=o,Gh(o),o=o.sibling;J=a,Or=l,Ve=d}Nd(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,J=o):Nd(e)}}function Nd(e){for(;J!==null;){var t=J;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ve||Qa(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ve)if(s===null)r.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:pt(t.type,s.memoizedProps);r.componentDidUpdate(a,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&od(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}od(t,i,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var u=m.dehydrated;u!==null&&Jn(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Ve||t.flags&512&&_i(t)}catch(g){be(t,t.return,g)}}if(t===e){J=null;break}if(s=t.sibling,s!==null){s.return=t.return,J=s;break}J=t.return}}function wd(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var s=t.sibling;if(s!==null){s.return=t.return,J=s;break}J=t.return}}function Sd(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Qa(4,t)}catch(c){be(t,s,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){be(t,a,c)}}var o=t.return;try{_i(t)}catch(c){be(t,o,c)}break;case 5:var i=t.return;try{_i(t)}catch(c){be(t,i,c)}}}catch(c){be(t,t.return,c)}if(t===e){J=null;break}var l=t.sibling;if(l!==null){l.return=t.return,J=l;break}J=t.return}}var _x=Math.ceil,ka=zt.ReactCurrentDispatcher,Ul=zt.ReactCurrentOwner,ut=zt.ReactCurrentBatchConfig,le=0,Ae=null,ke=null,Le=0,Ze=0,Ys=fs(0),Ee=0,dr=null,Ls=0,Ya=0,ql=0,Bn=null,He=null,Gl=0,fn=1/0,Et=null,Pa=!1,Ui=null,ns=null,_r=!1,Kt=null,Ea=0,Un=0,qi=null,sa=-1,na=0;function Ue(){return le&6?Ne():sa!==-1?sa:sa=Ne()}function rs(e){return e.mode&1?le&2&&Le!==0?Le&-Le:wx.transition!==null?(na===0&&(na=Tm()),na):(e=ce,e!==0||(e=window.event,e=e===void 0?16:Fm(e.type)),e):1}function yt(e,t,s,r){if(50<Un)throw Un=0,qi=null,Error(X(185));pr(e,s,r),(!(le&2)||e!==Ae)&&(e===Ae&&(!(le&2)&&(Ya|=s),Ee===4&&Qt(e,Le)),Ye(e,r),s===1&&le===0&&!(t.mode&1)&&(fn=Ne()+500,Ha&&ps()))}function Ye(e,t){var s=e.callbackNode;wg(e,t);var r=ua(e,e===Ae?Le:0);if(r===0)s!==null&&Dc(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(s!=null&&Dc(s),t===1)e.tag===0?Nx(Cd.bind(null,e)):th(Cd.bind(null,e)),vx(function(){!(le&6)&&ps()}),s=null;else{switch(Am(r)){case 1:s=xl;break;case 4:s=Pm;break;case 16:s=da;break;case 536870912:s=Em;break;default:s=da}s=Jh(s,Hh.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Hh(e,t){if(sa=-1,na=0,le&6)throw Error(X(327));var s=e.callbackNode;if(on()&&e.callbackNode!==s)return null;var r=ua(e,e===Ae?Le:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ta(e,r);else{t=r;var a=le;le|=2;var o=Xh();(Ae!==e||Le!==t)&&(Et=null,fn=Ne()+500,ks(e,t));do try{Ux();break}catch(l){Wh(e,l)}while(!0);Al(),ka.current=o,le=a,ke!==null?t=0:(Ae=null,Le=0,t=Ee)}if(t!==0){if(t===2&&(a=xi(e),a!==0&&(r=a,t=Gi(e,a))),t===1)throw s=dr,ks(e,0),Qt(e,r),Ye(e,Ne()),s;if(t===6)Qt(e,r);else{if(a=e.current.alternate,!(r&30)&&!zx(a)&&(t=Ta(e,r),t===2&&(o=xi(e),o!==0&&(r=o,t=Gi(e,o))),t===1))throw s=dr,ks(e,0),Qt(e,r),Ye(e,Ne()),s;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(X(345));case 2:ys(e,He,Et);break;case 3:if(Qt(e,r),(r&130023424)===r&&(t=Gl+500-Ne(),10<t)){if(ua(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Ue(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ci(ys.bind(null,e,He,Et),t);break}ys(e,He,Et);break;case 4:if(Qt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var i=31-vt(r);o=1<<i,i=t[i],i>a&&(a=i),r&=~o}if(r=a,r=Ne()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_x(r/1960))-r,10<r){e.timeoutHandle=Ci(ys.bind(null,e,He,Et),r);break}ys(e,He,Et);break;case 5:ys(e,He,Et);break;default:throw Error(X(329))}}}return Ye(e,Ne()),e.callbackNode===s?Hh.bind(null,e):null}function Gi(e,t){var s=Bn;return e.current.memoizedState.isDehydrated&&(ks(e,t).flags|=256),e=Ta(e,t),e!==2&&(t=He,He=s,t!==null&&Hi(t)),e}function Hi(e){He===null?He=e:He.push.apply(He,e)}function zx(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var a=s[r],o=a.getSnapshot;a=a.value;try{if(!jt(o(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qt(e,t){for(t&=~ql,t&=~Ya,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-vt(t),r=1<<s;e[s]=-1,t&=~r}}function Cd(e){if(le&6)throw Error(X(327));on();var t=ua(e,0);if(!(t&1))return Ye(e,Ne()),null;var s=Ta(e,t);if(e.tag!==0&&s===2){var r=xi(e);r!==0&&(t=r,s=Gi(e,r))}if(s===1)throw s=dr,ks(e,0),Qt(e,t),Ye(e,Ne()),s;if(s===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ys(e,He,Et),Ye(e,Ne()),null}function Hl(e,t){var s=le;le|=1;try{return e(t)}finally{le=s,le===0&&(fn=Ne()+500,Ha&&ps())}}function Ds(e){Kt!==null&&Kt.tag===0&&!(le&6)&&on();var t=le;le|=1;var s=ut.transition,r=ce;try{if(ut.transition=null,ce=1,e)return e()}finally{ce=r,ut.transition=s,le=t,!(le&6)&&ps()}}function Wl(){Ze=Ys.current,he(Ys)}function ks(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,xx(s)),ke!==null)for(s=ke.return;s!==null;){var r=s;switch(Pl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ga();break;case 3:mn(),he(Xe),he(_e),Fl();break;case 5:Il(r);break;case 4:mn();break;case 13:he(ge);break;case 19:he(ge);break;case 10:Rl(r.type._context);break;case 22:case 23:Wl()}s=s.return}if(Ae=e,ke=e=as(e.current,null),Le=Ze=t,Ee=0,dr=null,ql=Ya=Ls=0,He=Bn=null,ws!==null){for(t=0;t<ws.length;t++)if(s=ws[t],r=s.interleaved,r!==null){s.interleaved=null;var a=r.next,o=s.pending;if(o!==null){var i=o.next;o.next=a,r.next=i}s.pending=r}ws=null}return e}function Wh(e,t){do{var s=ke;try{if(Al(),Jr.current=Ca,Sa){for(var r=ve.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Sa=!1}if(Rs=0,Te=Pe=ve=null,_n=!1,ir=0,Ul.current=null,s===null||s.return===null){Ee=1,dr=t,ke=null;break}e:{var o=e,i=s.return,l=s,c=t;if(t=Le,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=l,u=m.tag;if(!(m.mode&1)&&(u===0||u===11||u===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var p=md(i);if(p!==null){p.flags&=-257,hd(p,i,l,o,t),p.mode&1&&ud(o,d,t),t=p,c=d;var k=t.updateQueue;if(k===null){var P=new Set;P.add(c),t.updateQueue=P}else k.add(c);break e}else{if(!(t&1)){ud(o,d,t),Xl();break e}c=Error(X(426))}}else if(pe&&l.mode&1){var S=md(i);if(S!==null){!(S.flags&65536)&&(S.flags|=256),hd(S,i,l,o,t),El(hn(c,l));break e}}o=c=hn(c,l),Ee!==4&&(Ee=2),Bn===null?Bn=[o]:Bn.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=Ah(o,c,t);ad(o,x);break e;case 1:l=c;var y=o.type,f=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ns===null||!ns.has(f)))){o.flags|=65536,t&=-t,o.lanes|=t;var v=Rh(o,l,t);ad(o,v);break e}}o=o.return}while(o!==null)}Yh(s)}catch(R){t=R,ke===s&&s!==null&&(ke=s=s.return);continue}break}while(!0)}function Xh(){var e=ka.current;return ka.current=Ca,e===null?Ca:e}function Xl(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),Ae===null||!(Ls&268435455)&&!(Ya&268435455)||Qt(Ae,Le)}function Ta(e,t){var s=le;le|=2;var r=Xh();(Ae!==e||Le!==t)&&(Et=null,ks(e,t));do try{Bx();break}catch(a){Wh(e,a)}while(!0);if(Al(),le=s,ka.current=r,ke!==null)throw Error(X(261));return Ae=null,Le=0,Ee}function Bx(){for(;ke!==null;)Qh(ke)}function Ux(){for(;ke!==null&&!fg();)Qh(ke)}function Qh(e){var t=Zh(e.alternate,e,Ze);e.memoizedProps=e.pendingProps,t===null?Yh(e):ke=t,Ul.current=null}function Yh(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=Fx(s,t),s!==null){s.flags&=32767,ke=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ee=6,ke=null;return}}else if(s=Ix(s,t,Ze),s!==null){ke=s;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);Ee===0&&(Ee=5)}function ys(e,t,s){var r=ce,a=ut.transition;try{ut.transition=null,ce=1,qx(e,t,s,r)}finally{ut.transition=a,ce=r}return null}function qx(e,t,s,r){do on();while(Kt!==null);if(le&6)throw Error(X(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var o=s.lanes|s.childLanes;if(Sg(e,o),e===Ae&&(ke=Ae=null,Le=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||_r||(_r=!0,Jh(da,function(){return on(),null})),o=(s.flags&15990)!==0,s.subtreeFlags&15990||o){o=ut.transition,ut.transition=null;var i=ce;ce=1;var l=le;le|=4,Ul.current=null,Vx(e,s),qh(s,e),dx(wi),ma=!!Ni,wi=Ni=null,e.current=s,Ox(s),pg(),le=l,ce=i,ut.transition=o}else e.current=s;if(_r&&(_r=!1,Kt=e,Ea=a),o=e.pendingLanes,o===0&&(ns=null),vg(s.stateNode),Ye(e,Ne()),t!==null)for(r=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],r(a.value,{componentStack:a.stack,digest:a.digest});if(Pa)throw Pa=!1,e=Ui,Ui=null,e;return Ea&1&&e.tag!==0&&on(),o=e.pendingLanes,o&1?e===qi?Un++:(Un=0,qi=e):Un=0,ps(),null}function on(){if(Kt!==null){var e=Am(Ea),t=ut.transition,s=ce;try{if(ut.transition=null,ce=16>e?16:e,Kt===null)var r=!1;else{if(e=Kt,Kt=null,Ea=0,le&6)throw Error(X(331));var a=le;for(le|=4,J=e.current;J!==null;){var o=J,i=o.child;if(J.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(J=d;J!==null;){var m=J;switch(m.tag){case 0:case 11:case 15:zn(8,m,o)}var u=m.child;if(u!==null)u.return=m,J=u;else for(;J!==null;){m=J;var g=m.sibling,p=m.return;if(zh(m),m===d){J=null;break}if(g!==null){g.return=p,J=g;break}J=p}}}var k=o.alternate;if(k!==null){var P=k.child;if(P!==null){k.child=null;do{var S=P.sibling;P.sibling=null,P=S}while(P!==null)}}J=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,J=i;else e:for(;J!==null;){if(o=J,o.flags&2048)switch(o.tag){case 0:case 11:case 15:zn(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,J=x;break e}J=o.return}}var y=e.current;for(J=y;J!==null;){i=J;var f=i.child;if(i.subtreeFlags&2064&&f!==null)f.return=i,J=f;else e:for(i=y;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Qa(9,l)}}catch(R){be(l,l.return,R)}if(l===i){J=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,J=v;break e}J=l.return}}if(le=a,ps(),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(za,e)}catch{}r=!0}return r}finally{ce=s,ut.transition=t}}return!1}function kd(e,t,s){t=hn(s,t),t=Ah(e,t,1),e=ss(e,t,1),t=Ue(),e!==null&&(pr(e,1,t),Ye(e,t))}function be(e,t,s){if(e.tag===3)kd(e,e,s);else for(;t!==null;){if(t.tag===3){kd(t,e,s);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ns===null||!ns.has(r))){e=hn(s,e),e=Rh(t,e,1),t=ss(t,e,1),e=Ue(),t!==null&&(pr(t,1,e),Ye(t,e));break}}t=t.return}}function Gx(e,t,s){var r=e.pingCache;r!==null&&r.delete(t),t=Ue(),e.pingedLanes|=e.suspendedLanes&s,Ae===e&&(Le&s)===s&&(Ee===4||Ee===3&&(Le&130023424)===Le&&500>Ne()-Gl?ks(e,0):ql|=s),Ye(e,t)}function Kh(e,t){t===0&&(e.mode&1?(t=Ar,Ar<<=1,!(Ar&130023424)&&(Ar=4194304)):t=1);var s=Ue();e=Vt(e,t),e!==null&&(pr(e,t,s),Ye(e,s))}function Hx(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Kh(e,s)}function Wx(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(t),Kh(e,s)}var Zh;Zh=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xe.current)We=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return We=!1,Mx(e,t,s);We=!!(e.flags&131072)}else We=!1,pe&&t.flags&1048576&&sh(t,ya,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ta(e,t),e=t.pendingProps;var a=cn(t,_e.current);an(t,s),a=Vl(null,t,r,e,a,s);var o=Ol();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Qe(r)?(o=!0,xa(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Dl(t),a.updater=Xa,t.stateNode=a,a._reactInternals=t,Li(t,r,e,s),t=Ii(null,t,r,!0,o,s)):(t.tag=0,pe&&o&&kl(t),Be(null,t,a,s),t=t.child),t;case 16:r=t.elementType;e:{switch(ta(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=Qx(r),e=pt(r,e),a){case 0:t=Mi(null,t,r,e,s);break e;case 1:t=gd(null,t,r,e,s);break e;case 11:t=fd(null,t,r,e,s);break e;case 14:t=pd(null,t,r,pt(r.type,e),s);break e}throw Error(X(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:pt(r,a),Mi(e,t,r,a,s);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:pt(r,a),gd(e,t,r,a,s);case 3:e:{if(Ih(t),e===null)throw Error(X(387));r=t.pendingProps,o=t.memoizedState,a=o.element,lh(e,t),Na(t,r,null,s);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=hn(Error(X(423)),t),t=xd(e,t,r,s,a);break e}else if(r!==a){a=hn(Error(X(424)),t),t=xd(e,t,r,s,a);break e}else for(Je=ts(t.stateNode.containerInfo.firstChild),tt=t,pe=!0,xt=null,s=oh(t,null,r,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(dn(),r===a){t=Ot(e,t,s);break e}Be(e,t,r,s)}t=t.child}return t;case 5:return ch(t),e===null&&Ti(t),r=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,i=a.children,Si(r,a)?i=null:o!==null&&Si(r,o)&&(t.flags|=32),Mh(e,t),Be(e,t,i,s),t.child;case 6:return e===null&&Ti(t),null;case 13:return Fh(e,t,s);case 4:return Ml(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=un(t,null,r,s):Be(e,t,r,s),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:pt(r,a),fd(e,t,r,a,s);case 7:return Be(e,t,t.pendingProps,s),t.child;case 8:return Be(e,t,t.pendingProps.children,s),t.child;case 12:return Be(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,ue(ba,r._currentValue),r._currentValue=i,o!==null)if(jt(o.value,i)){if(o.children===a.children&&!Xe.current){t=Ot(e,t,s);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Dt(-1,s&-s),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}o.lanes|=s,c=o.alternate,c!==null&&(c.lanes|=s),Ai(o.return,s,t),l.lanes|=s;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(X(341));i.lanes|=s,l=i.alternate,l!==null&&(l.lanes|=s),Ai(i,s,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Be(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,an(t,s),a=mt(a),r=r(a),t.flags|=1,Be(e,t,r,s),t.child;case 14:return r=t.type,a=pt(r,t.pendingProps),a=pt(r.type,a),pd(e,t,r,a,s);case 15:return Lh(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:pt(r,a),ta(e,t),t.tag=1,Qe(r)?(e=!0,xa(t)):e=!1,an(t,s),Th(t,r,a),Li(t,r,a,s),Ii(null,t,r,!0,e,s);case 19:return $h(e,t,s);case 22:return Dh(e,t,s)}throw Error(X(156,t.tag))};function Jh(e,t){return km(e,t)}function Xx(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dt(e,t,s,r){return new Xx(e,t,s,r)}function Ql(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qx(e){if(typeof e=="function")return Ql(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fl)return 11;if(e===pl)return 14}return 2}function as(e,t){var s=e.alternate;return s===null?(s=dt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function ra(e,t,s,r,a,o){var i=2;if(r=e,typeof e=="function")Ql(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case _s:return Ps(s.children,a,o,t);case hl:i=8,a|=8;break;case si:return e=dt(12,s,t,a|2),e.elementType=si,e.lanes=o,e;case ni:return e=dt(13,s,t,a),e.elementType=ni,e.lanes=o,e;case ri:return e=dt(19,s,t,a),e.elementType=ri,e.lanes=o,e;case cm:return Ka(s,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case im:i=10;break e;case lm:i=9;break e;case fl:i=11;break e;case pl:i=14;break e;case qt:i=16,r=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=dt(i,s,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function Ps(e,t,s,r){return e=dt(7,e,r,t),e.lanes=s,e}function Ka(e,t,s,r){return e=dt(22,e,r,t),e.elementType=cm,e.lanes=s,e.stateNode={isHidden:!1},e}function Fo(e,t,s){return e=dt(6,e,null,t),e.lanes=s,e}function $o(e,t,s){return t=dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yx(e,t,s,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xo(0),this.expirationTimes=xo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xo(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Yl(e,t,s,r,a,o,i,l,c){return e=new Yx(e,t,s,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=dt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dl(o),e}function Kx(e,t,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Os,key:r==null?null:""+r,children:e,containerInfo:t,implementation:s}}function ef(e){if(!e)return ds;e=e._reactInternals;e:{if(Is(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Qe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var s=e.type;if(Qe(s))return eh(e,s,t)}return t}function tf(e,t,s,r,a,o,i,l,c){return e=Yl(s,r,!0,e,a,o,i,l,c),e.context=ef(null),s=e.current,r=Ue(),a=rs(s),o=Dt(r,a),o.callback=t??null,ss(s,o,a),e.current.lanes=a,pr(e,a,r),Ye(e,r),e}function Za(e,t,s,r){var a=t.current,o=Ue(),i=rs(a);return s=ef(s),t.context===null?t.context=s:t.pendingContext=s,t=Dt(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ss(a,t,i),e!==null&&(yt(e,a,i,o),Zr(e,a,i)),i}function Aa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Pd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Kl(e,t){Pd(e,t),(e=e.alternate)&&Pd(e,t)}function Zx(){return null}var sf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zl(e){this._internalRoot=e}Ja.prototype.render=Zl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));Za(e,t,null,null)};Ja.prototype.unmount=Zl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ds(function(){Za(null,e,null,null)}),t[$t]=null}};function Ja(e){this._internalRoot=e}Ja.prototype.unstable_scheduleHydration=function(e){if(e){var t=Dm();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Xt.length&&t!==0&&t<Xt[s].priority;s++);Xt.splice(s,0,e),s===0&&Im(e)}};function Jl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function eo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ed(){}function Jx(e,t,s,r,a){if(a){if(typeof r=="function"){var o=r;r=function(){var d=Aa(i);o.call(d)}}var i=tf(t,r,e,0,null,!1,!1,"",Ed);return e._reactRootContainer=i,e[$t]=i.current,sr(e.nodeType===8?e.parentNode:e),Ds(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var d=Aa(c);l.call(d)}}var c=Yl(e,0,!1,null,null,!1,!1,"",Ed);return e._reactRootContainer=c,e[$t]=c.current,sr(e.nodeType===8?e.parentNode:e),Ds(function(){Za(t,c,s,r)}),c}function to(e,t,s,r,a){var o=s._reactRootContainer;if(o){var i=o;if(typeof a=="function"){var l=a;a=function(){var c=Aa(i);l.call(c)}}Za(t,i,e,a)}else i=Jx(s,t,e,a,r);return Aa(i)}Rm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Ln(t.pendingLanes);s!==0&&(vl(t,s|1),Ye(t,Ne()),!(le&6)&&(fn=Ne()+500,ps()))}break;case 13:Ds(function(){var r=Vt(e,1);if(r!==null){var a=Ue();yt(r,e,1,a)}}),Kl(e,1)}};yl=function(e){if(e.tag===13){var t=Vt(e,134217728);if(t!==null){var s=Ue();yt(t,e,134217728,s)}Kl(e,134217728)}};Lm=function(e){if(e.tag===13){var t=rs(e),s=Vt(e,t);if(s!==null){var r=Ue();yt(s,e,t,r)}Kl(e,t)}};Dm=function(){return ce};Mm=function(e,t){var s=ce;try{return ce=e,t()}finally{ce=s}};fi=function(e,t,s){switch(t){case"input":if(ii(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var a=Ga(r);if(!a)throw Error(X(90));um(r),ii(r,a)}}}break;case"textarea":hm(e,s);break;case"select":t=s.value,t!=null&&tn(e,!!s.multiple,t,!1)}};bm=Hl;jm=Ds;var e0={usingClientEntryPoint:!1,Events:[xr,qs,Ga,vm,ym,Hl]},Pn={findFiberByHostInstance:Ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},t0={bundleType:Pn.bundleType,version:Pn.version,rendererPackageName:Pn.rendererPackageName,rendererConfig:Pn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Sm(e),e===null?null:e.stateNode},findFiberByHostInstance:Pn.findFiberByHostInstance||Zx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zr.isDisabled&&zr.supportsFiber)try{za=zr.inject(t0),Ct=zr}catch{}}rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e0;rt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jl(t))throw Error(X(200));return Kx(e,t,null,s)};rt.createRoot=function(e,t){if(!Jl(e))throw Error(X(299));var s=!1,r="",a=sf;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Yl(e,1,!1,null,null,s,!1,r,a),e[$t]=t.current,sr(e.nodeType===8?e.parentNode:e),new Zl(t)};rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=Sm(t),e=e===null?null:e.stateNode,e};rt.flushSync=function(e){return Ds(e)};rt.hydrate=function(e,t,s){if(!eo(t))throw Error(X(200));return to(null,e,t,!0,s)};rt.hydrateRoot=function(e,t,s){if(!Jl(e))throw Error(X(405));var r=s!=null&&s.hydratedSources||null,a=!1,o="",i=sf;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onRecoverableError!==void 0&&(i=s.onRecoverableError)),t=tf(t,null,e,1,s??null,a,!1,o,i),e[$t]=t.current,sr(e),r)for(e=0;e<r.length;e++)s=r[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new Ja(t)};rt.render=function(e,t,s){if(!eo(t))throw Error(X(200));return to(null,e,t,!1,s)};rt.unmountComponentAtNode=function(e){if(!eo(e))throw Error(X(40));return e._reactRootContainer?(Ds(function(){to(null,null,e,!1,function(){e._reactRootContainer=null,e[$t]=null})}),!0):!1};rt.unstable_batchedUpdates=Hl;rt.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!eo(s))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return to(e,t,s,!1,r)};rt.version="18.3.1-next-f1338f8080-20240426";function nf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nf)}catch(e){console.error(e)}}nf(),nm.exports=rt;var rf=nm.exports;const s0=Gu(rf);var af,Td=rf;af=Td.createRoot,Td.hydrateRoot;const Vo=({setActiveScreen:e})=>{const[t,s]=w.useState(!1),[r,a]=w.useState(!1);return n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen auth-background p-4 animate-fadeIn",children:[n.jsxs("div",{className:"animate-bounce-in",children:[n.jsx("h1",{className:"text-6xl font-yufin text-white mb-4 drop-shadow-lg text-center",children:"YFin"}),n.jsx("p",{className:"text-xl lg:text-2xl xl:text-3xl text-white mb-10 text-center max-w-md lg:max-w-lg xl:max-w-xl animate-slideIn",children:"Desvende o mundo das finanas de forma divertida e gamificada!"})]}),n.jsxs("div",{className:"flex flex-col space-y-4 w-full max-w-xs lg:max-w-sm xl:max-w-md animate-slideIn",children:[n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>s(!t),className:"w-full bg-primary text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-opacity-90 transition-all duration-300 text-lg hover-lift",children:"Entrar"}),t&&n.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2 mt-2 animate-fadeIn",children:[n.jsx("button",{onClick:()=>{e("login-student"),s(!1)},className:"w-full bg-white text-primary border-2 text-sm py-2 rounded-lg shadow-sm hover:bg-primary hover:text-white transition-colors duration-200 hover-lift",style:{borderColor:"rgb(238, 145, 22)"},children:"Sou Aluno"}),n.jsx("button",{onClick:()=>{e("login-parent"),s(!1)},className:"w-full bg-white text-primary border-2 text-sm py-2 rounded-lg shadow-sm hover:bg-primary hover:text-white transition-colors duration-200 hover-lift",style:{borderColor:"rgb(238, 145, 22)"},children:"Sou Pai/Responsvel"}),n.jsx("button",{onClick:()=>{e("login-school"),s(!1)},className:"w-full bg-white text-primary border-2 text-sm py-2 rounded-lg shadow-sm hover:bg-primary hover:text-white transition-colors duration-200 hover-lift",style:{borderColor:"rgb(238, 145, 22)"},children:"Sou Escola"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>a(!r),className:"w-full bg-teal text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-opacity-90 transition-all duration-300 text-lg hover-lift",children:"Registrar"}),r&&n.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2 mt-2 animate-fadeIn",children:[n.jsx("button",{onClick:()=>{e("register-student"),a(!1)},className:"w-full bg-white text-teal border-2 text-sm py-2 rounded-lg shadow-sm hover:bg-teal hover:text-white transition-colors duration-200 hover-lift",style:{borderColor:"rgb(238, 145, 22)"},children:"Sou Aluno"}),n.jsx("button",{onClick:()=>{e("register-parent"),a(!1)},className:"w-full bg-white text-teal border-2 text-sm py-2 rounded-lg shadow-sm hover:bg-teal hover:text-white transition-colors duration-200 hover-lift",style:{borderColor:"rgb(238, 145, 22)"},children:"Sou Pai/Responsvel"}),n.jsx("button",{onClick:()=>{e("register-school"),a(!1)},className:"w-full bg-white text-teal border-2 text-sm py-2 rounded-lg shadow-sm hover:bg-teal hover:text-white transition-colors duration-200 hover-lift",style:{borderColor:"rgb(238, 145, 22)"},children:"Sou Escola"})]})]})]})]})},n0=({role:e,activeScreen:t,setActiveScreen:s})=>{const a=(()=>{switch(e){case"student":return[{id:"home",label:"Incio",icon:"",screen:"home"},{id:"intelligent-dashboard",label:"IA",icon:"",screen:"intelligent-dashboard"},{id:"friends",label:"Amigos",icon:"",screen:"friends"},{id:"challenges",label:"Desafios",icon:"",screen:"challenges"},{id:"store",label:"Loja",icon:"",screen:"store"},{id:"wallet",label:"Carteira",icon:"",screen:"wallet"},{id:"settings",label:"Config",icon:"",screen:"settings"}];case"parent":return[{id:"parent-dashboard",label:"Dashboard",icon:"",screen:"parent-dashboard"},{id:"savings-config",label:"Poupana",icon:"",screen:"savings-config"},{id:"reports",label:"Relatrios",icon:"",screen:"reports"},{id:"settings",label:"Config",icon:"",screen:"settings"}];case"school":return[{id:"school-dashboard",label:"Dashboard",icon:"",screen:"school-dashboard"},{id:"classes",label:"Turmas",icon:"",screen:"classes"},{id:"reports",label:"Relatrios",icon:"",screen:"reports"},{id:"news",label:"Notcias",icon:"",screen:"news"},{id:"settings",label:"Config",icon:"",screen:"settings"}];default:return[]}})();return n.jsx("nav",{className:"fixed bottom-0 left-0 right-0 w-full bg-white shadow-lg z-50 rounded-t-xl",style:{borderTop:"3px solid #EE9116"},children:n.jsx("div",{className:"flex justify-around items-center h-16 px-2 w-full",children:a.map(o=>{const i=t===o.screen;return n.jsxs("button",{onClick:()=>s(o.screen),style:{color:i?"#EE9116":"#9CA3AF",outline:"none",border:"none",boxShadow:"none"},className:"flex flex-col items-center justify-center flex-1 h-full rounded-lg transition-all duration-200 mx-1 hover:bg-gray-50 focus:outline-none focus:ring-0",children:[n.jsx("span",{style:{color:i?"#EE9116":"#9CA3AF",transform:i?"scale(1.1)":"scale(1)"},className:"text-2xl mb-2 transition-transform duration-200",children:o.icon}),n.jsx("span",{style:{color:i?"#EE9116":"#9CA3AF"},className:"text-sm font-medium transition-all duration-200",children:o.label})]},o.id)})})})},Oo=({handleLogin:e,setActiveScreen:t,role:s})=>{const[r,a]=w.useState(""),[o,i]=w.useState(""),[l,c]=w.useState(""),[d,m]=w.useState(!1),u=async p=>{if(p.preventDefault(),c(""),m(!0),!r||!o){c("Por favor, preencha todos os campos."),m(!1);return}try{const k=await e(r,o,s);k.success?s==="student"?t("home"):s==="parent"?t("parent-dashboard"):s==="school"&&t("school-dashboard"):c(k.message)}catch(k){c("Ocorreu um erro inesperado. Tente novamente."),console.error("Erro no login:",k)}finally{m(!1)}},g=p=>{switch(p){case"student":return"Aluno";case"parent":return"Pai/Responsvel";case"school":return"Escola";default:return""}};return n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen auth-background p-4 animate-fadeIn",children:[n.jsxs("h2",{className:"text-4xl font-bold text-white mb-6 text-center",children:["Entrar como ",n.jsx("span",{className:"font-yufin",children:g(s)})]}),n.jsxs("form",{onSubmit:u,className:"bg-white p-8 lg:p-10 xl:p-12 rounded-xl shadow-lg w-full max-w-sm lg:max-w-md xl:max-w-lg flex flex-col space-y-4 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("input",{type:"email",id:"email-login",name:"email",placeholder:"E-mail",value:r,onChange:p=>a(p.target.value),className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:d,autoComplete:"email"}),n.jsx("input",{type:"password",id:"password-login",name:"password",placeholder:"Senha",value:o,onChange:p=>i(p.target.value),className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:d,autoComplete:"current-password"}),l&&n.jsx("p",{className:"text-red-500 text-sm",children:l}),n.jsxs("button",{type:"submit",className:"text-white font-bold py-3 px-6 rounded-xl shadow-md hover:opacity-90 transition-all duration-300 text-lg flex items-center justify-center relative",style:{backgroundColor:"rgb(238, 145, 22)"},disabled:d,children:[d&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsxs("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),n.jsx("span",{className:`${d?"opacity-0":"opacity-100"} transition-opacity duration-300`,children:"Entrar"})]})]}),n.jsx("button",{onClick:()=>t("welcome"),className:"mt-6 text-white text-md hover:underline transition-colors duration-300",disabled:d,children:"Voltar"}),n.jsx("button",{onClick:()=>t(`register-${s}`),className:"mt-2 text-white text-md hover:underline transition-colors duration-300",disabled:d,children:"No tem conta? Registre-se aqui!"})]})},yr="http://localhost:3001";async function de(e){const t=await fetch(`${yr}${e}`);if(!t.ok){const s=await t.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(s.error||`Erro ${t.status}: ${t.statusText}`)}return t.json()}async function Oe(e,t){const s=await fetch(`${yr}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const r=await s.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(r.error||`Erro ${s.status}: ${s.statusText}`)}return s.json()}async function os(e,t){const s=await fetch(`${yr}${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const r=await s.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(r.error||`Erro ${s.status}: ${s.statusText}`)}return s.json()}async function r0(e,t){const s=await fetch(`${yr}${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const r=await s.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(r.error||`Erro ${s.status}: ${s.statusText}`)}return s.json()}async function so(e){const t=await fetch(`${yr}${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok){const s=await t.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(s.error||`Erro ${t.status}: ${t.statusText}`)}return t.json()}const _o=({handleRegister:e,setActiveScreen:t,role:s})=>{var A,$;const[r,a]=w.useState(""),[o,i]=w.useState(""),[l,c]=w.useState(""),[d,m]=w.useState(""),[u,g]=w.useState(""),[p,k]=w.useState(""),[P,S]=w.useState(null),[x,y]=w.useState(!1),[f,v]=w.useState(""),[R,E]=w.useState(!1),N=["6 Ano","7 Ano","8 Ano","9 Ano","1 Ano EM","2 Ano EM","3 Ano EM"],h=async D=>{if(D.preventDefault(),v(""),E(!0),!r||!o||!l||!d){v("Por favor, preencha todos os campos obrigatrios."),E(!1);return}if(s==="student"&&!u){v("Por favor, selecione sua srie."),E(!1);return}if(s==="student"){if(!p){v("Por favor, insira o token de registro."),E(!1);return}if(!P){v("Por favor, insira um token vlido."),E(!1);return}}if(l!==d){v("As senhas no coincidem."),E(!1);return}try{const V=await e({name:r,email:o,password:l,role:s,gradeId:s==="student"?u:void 0,token:p.trim()||void 0});V.success?s==="student"?t("home"):s==="parent"?t("parent-dashboard"):s==="school"&&t("school-dashboard"):v(V.message)}catch(V){v("Ocorreu um erro inesperado. Tente novamente."),console.error("Erro no registro:",V)}finally{E(!1)}},j=async D=>{if(!D.trim()){S(null);return}try{y(!0),v("");const V=await de(`/registration-tokens/validate/${D}`);S(V)}catch{S(null),v("Token invlido ou expirado")}finally{y(!1)}},C=D=>{const V=D.target.value;if(k(V),V.trim()){const z=setTimeout(()=>j(V),1e3);return()=>clearTimeout(z)}else S(null),v("")},b=()=>{p.trim()&&j(p)},T=D=>{switch(D){case"student":return"Aluno";case"parent":return"Pai/Responsvel";case"school":return"Escola";default:return""}};return n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen auth-background-teal p-4 animate-fadeIn",children:[n.jsxs("h2",{className:"text-4xl font-bold text-white mb-6 text-center",children:["Registrar como ",n.jsx("span",{className:"font-yufin",children:T(s)})]}),s==="student"&&n.jsx("div",{className:"bg-white bg-opacity-90 rounded-lg p-4 mb-6 max-w-sm text-center border border-white border-opacity-50 shadow-lg",children:n.jsxs("p",{className:"text-gray-800 text-sm font-medium",children:[n.jsx("strong",{children:" Token Obrigatrio:"})," Para se registrar como aluno, voc precisa de um token gerado pela sua escola ou responsvel."]})}),n.jsxs("form",{onSubmit:h,className:"bg-white p-8 lg:p-10 xl:p-12 rounded-xl shadow-lg w-full max-w-sm lg:max-w-md xl:max-w-lg flex flex-col space-y-4 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("input",{type:"text",id:"name-register",name:"name",placeholder:"Nome completo",value:r,onChange:D=>a(D.target.value),className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:R,autoComplete:"name"}),n.jsx("input",{type:"email",id:"email-register",name:"email",placeholder:"E-mail",value:o,onChange:D=>i(D.target.value),className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:R,autoComplete:"email"}),s==="student"&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"text",id:"token-register",name:"token",placeholder:"Token de registro",value:p,onChange:C,onBlur:b,className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:R}),x&&n.jsxs("div",{className:"flex items-center text-blue-600 text-sm -mt-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Validando token..."]}),P&&!x&&n.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md -mt-2",children:[n.jsxs("div",{className:"flex items-center text-green-700 text-sm",children:[n.jsx("span",{className:"mr-2",children:""}),n.jsx("span",{className:"font-medium",children:"Token vlido!"})]}),n.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[P.type==="school"?" Escola":" Responsvel",": ",((A=P.metadata)==null?void 0:A.description)||"Registro autorizado",(($=P.metadata)==null?void 0:$.grade)&&n.jsxs("div",{children:["Srie sugerida: ",P.metadata.grade]})]})]})]}),s==="student"&&n.jsxs("select",{id:"grade-register",name:"gradeId",value:u,onChange:D=>g(D.target.value),className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-gray-500 placeholder-gray-400",required:!0,disabled:R,style:{color:u?"#6B7280":"#9CA3AF"},children:[n.jsx("option",{value:"",disabled:!0,className:"text-gray-400",children:"Selecione sua srie"}),N.map(D=>n.jsx("option",{value:D,className:"text-gray-700",children:D},D))]}),n.jsx("input",{type:"password",id:"password-register",name:"password",placeholder:"Senha",value:l,onChange:D=>c(D.target.value),className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:R,autoComplete:"new-password"}),n.jsx("input",{type:"password",id:"confirm-password-register",name:"confirmPassword",placeholder:"Confirmar senha",value:d,onChange:D=>m(D.target.value),className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:R,autoComplete:"new-password"}),f&&n.jsx("p",{className:"text-red-500 text-sm",children:f}),n.jsxs("button",{type:"submit",className:"text-white font-bold py-3 px-6 rounded-xl shadow-md hover:opacity-90 transition-all duration-300 text-lg flex items-center justify-center relative",style:{backgroundColor:"rgb(238, 145, 22)"},disabled:R,children:[R&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsxs("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),n.jsx("span",{className:`${R?"opacity-0":"opacity-100"} transition-opacity duration-300`,children:"Registrar"})]})]}),n.jsx("button",{onClick:()=>t("welcome"),className:"mt-6 text-white text-md hover:underline transition-colors duration-300",disabled:R,children:"Voltar"}),n.jsx("button",{onClick:()=>t(`login-${s}`),className:"mt-2 text-white text-md hover:underline transition-colors duration-300",disabled:R,children:"J tem conta? Faa login aqui!"})]})},a0=({token:e,onSuccess:t,onCancel:s})=>{var p,k;const[r,a]=w.useState(null),[o,i]=w.useState(!0),[l,c]=w.useState(""),[d,m]=w.useState({name:"",email:"",password:"",confirmPassword:""});w.useEffect(()=>{u()},[e]);const u=async()=>{try{i(!0);const P=await de(`/registration-tokens/${e}`);a(P)}catch{c("Token invlido ou expirado")}finally{i(!1)}},g=async P=>{var S,x,y;if(P.preventDefault(),c(""),!d.name||!d.email||!d.password||!d.confirmPassword){c("Por favor, preencha todos os campos.");return}if(d.password!==d.confirmPassword){c("As senhas no coincidem.");return}if(d.password.length<6){c("A senha deve ter pelo menos 6 caracteres.");return}try{i(!0);const f=await Oe("/register-with-token",{token:e,userData:{name:d.name,email:d.email,password:d.password,role:"student",gradeId:((S=r==null?void 0:r.metadata)==null?void 0:S.grade)||""}});t(f.user)}catch(f){c(((y=(x=f.response)==null?void 0:x.data)==null?void 0:y.error)||"Erro ao registrar usurio")}finally{i(!1)}};return o&&!r?n.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-teal to-blue p-4",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-sm text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Validando token..."})]})}):l&&!r?n.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-teal to-blue p-4",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-sm text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:""}),n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Token Invlido"}),n.jsx("p",{className:"text-gray-600 mb-4",children:l}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition",children:"Voltar"})]})}):n.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-teal to-blue p-4",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-sm",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Registro de Aluno"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Token vlido para: ",((p=r==null?void 0:r.metadata)==null?void 0:p.description)||"Registro de aluno"]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(r==null?void 0:r.type)==="school"?" Escola (B2B)":" Responsvel (B2C)"}),((k=r==null?void 0:r.metadata)==null?void 0:k.grade)&&n.jsxs("p",{className:"text-sm text-primary font-medium mt-1",children:["Srie sugerida: ",r.metadata.grade]})]}),n.jsxs("form",{onSubmit:g,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),n.jsx("input",{type:"text",value:d.name,onChange:P=>m({...d,name:P.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Digite seu nome completo",required:!0,disabled:o})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsx("input",{type:"email",value:d.email,onChange:P=>m({...d,email:P.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Digite seu email",required:!0,disabled:o})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha"}),n.jsx("input",{type:"password",value:d.password,onChange:P=>m({...d,password:P.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Digite sua senha",required:!0,disabled:o})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar Senha"}),n.jsx("input",{type:"password",value:d.confirmPassword,onChange:P=>m({...d,confirmPassword:P.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Confirme sua senha",required:!0,disabled:o})]}),l&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:n.jsx("p",{className:"text-red-600 text-sm",children:l})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"submit",disabled:o,className:"flex-1 bg-primary text-white py-3 rounded-lg font-semibold hover:bg-primary-dark transition disabled:opacity-50",children:o?"Registrando...":"Registrar"}),n.jsx("button",{type:"button",onClick:s,disabled:o,className:"px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition disabled:opacity-50",children:"Cancelar"})]})]}),n.jsxs("div",{className:"mt-6 p-3 bg-blue-50 rounded-lg",children:[n.jsx("p",{className:"text-sm text-blue-700",children:n.jsx("strong",{children:"Informaes do token:"})}),n.jsxs("ul",{className:"text-xs text-blue-600 mt-1 space-y-1",children:[n.jsxs("li",{children:[" Tipo: ",(r==null?void 0:r.type)==="school"?"Escola":"Responsvel"]}),n.jsxs("li",{children:[" Usos: ",r==null?void 0:r.usedCount,"/",(r==null?void 0:r.maxUses)||""]}),(r==null?void 0:r.expiresAt)&&n.jsxs("li",{children:[" Expira em: ",new Date(r.expiresAt).toLocaleDateString("pt-BR")]})]})]})]})})},of=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),no=w.createContext({}),ec=w.createContext(null),ro=typeof document<"u",o0=ro?w.useLayoutEffect:w.useEffect,lf=w.createContext({strict:!1}),tc=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i0="framerAppearId",cf="data-"+tc(i0);function l0(e,t,s,r){const{visualElement:a}=w.useContext(no),o=w.useContext(lf),i=w.useContext(ec),l=w.useContext(of).reducedMotion,c=w.useRef();r=r||o.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:a,props:s,presenceContext:i,blockInitialAnimation:i?i.initial===!1:!1,reducedMotionConfig:l}));const d=c.current;w.useInsertionEffect(()=>{d&&d.update(s,i)});const m=w.useRef(!!(s[cf]&&!window.HandoffComplete));return o0(()=>{d&&(d.render(),m.current&&d.animationState&&d.animationState.animateChanges())}),w.useEffect(()=>{d&&(d.updateFeatures(),!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),d}function Ks(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function c0(e,t,s){return w.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),s&&(typeof s=="function"?s(r):Ks(s)&&(s.current=r))},[t])}function ur(e){return typeof e=="string"||Array.isArray(e)}function ao(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const sc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nc=["initial",...sc];function oo(e){return ao(e.animate)||nc.some(t=>ur(e[t]))}function df(e){return!!(oo(e)||e.variants)}function d0(e,t){if(oo(e)){const{initial:s,animate:r}=e;return{initial:s===!1||ur(s)?s:void 0,animate:ur(r)?r:void 0}}return e.inherit!==!1?t:{}}function u0(e){const{initial:t,animate:s}=d0(e,w.useContext(no));return w.useMemo(()=>({initial:t,animate:s}),[Ad(t),Ad(s)])}function Ad(e){return Array.isArray(e)?e.join(" "):e}const Rd={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},mr={};for(const e in Rd)mr[e]={isEnabled:t=>Rd[e].some(s=>!!t[s])};function m0(e){for(const t in e)mr[t]={...mr[t],...e[t]}}const uf=w.createContext({}),mf=w.createContext({}),h0=Symbol.for("motionComponentSymbol");function f0({preloadedFeatures:e,createVisualElement:t,useRender:s,useVisualState:r,Component:a}){e&&m0(e);function o(l,c){let d;const m={...w.useContext(of),...l,layoutId:p0(l)},{isStatic:u}=m,g=u0(l),p=r(l,u);if(!u&&ro){g.visualElement=l0(a,p,m,t);const k=w.useContext(mf),P=w.useContext(lf).strict;g.visualElement&&(d=g.visualElement.loadFeatures(m,P,e,k))}return w.createElement(no.Provider,{value:g},d&&g.visualElement?w.createElement(d,{visualElement:g.visualElement,...m}):null,s(a,l,c0(p,g.visualElement,c),p,u,g.visualElement))}const i=w.forwardRef(o);return i[h0]=a,i}function p0({layoutId:e}){const t=w.useContext(uf).id;return t&&e!==void 0?t+"-"+e:e}function g0(e){function t(r,a={}){return f0(e(r,a))}if(typeof Proxy>"u")return t;const s=new Map;return new Proxy(t,{get:(r,a)=>(s.has(a)||s.set(a,t(a)),s.get(a))})}const x0=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rc(e){return typeof e!="string"||e.includes("-")?!1:!!(x0.indexOf(e)>-1||/[A-Z]/.test(e))}const Ra={};function v0(e){Object.assign(Ra,e)}const br=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fs=new Set(br);function hf(e,{layout:t,layoutId:s}){return Fs.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!Ra[e]||e==="opacity")}const Ke=e=>!!(e&&e.getVelocity),y0={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},b0=br.length;function j0(e,{enableHardwareAcceleration:t=!0,allowTransformNone:s=!0},r,a){let o="";for(let i=0;i<b0;i++){const l=br[i];if(e[l]!==void 0){const c=y0[l]||l;o+=`${c}(${e[l]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),a?o=a(e,r?"":o):s&&r&&(o="none"),o}const ff=e=>t=>typeof t=="string"&&t.startsWith(e),pf=ff("--"),Wi=ff("var(--"),N0=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,w0=(e,t)=>t&&typeof e=="number"?t.transform(e):e,us=(e,t,s)=>Math.min(Math.max(s,e),t),$s={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},qn={...$s,transform:e=>us(0,1,e)},Br={...$s,default:1},Gn=e=>Math.round(e*1e5)/1e5,io=/(-)?([\d]*\.?[\d])+/g,gf=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,S0=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function jr(e){return typeof e=="string"}const Nr=e=>({test:t=>jr(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ut=Nr("deg"),Pt=Nr("%"),te=Nr("px"),C0=Nr("vh"),k0=Nr("vw"),Ld={...Pt,parse:e=>Pt.parse(e)/100,transform:e=>Pt.transform(e*100)},Dd={...$s,transform:Math.round},xf={borderWidth:te,borderTopWidth:te,borderRightWidth:te,borderBottomWidth:te,borderLeftWidth:te,borderRadius:te,radius:te,borderTopLeftRadius:te,borderTopRightRadius:te,borderBottomRightRadius:te,borderBottomLeftRadius:te,width:te,maxWidth:te,height:te,maxHeight:te,size:te,top:te,right:te,bottom:te,left:te,padding:te,paddingTop:te,paddingRight:te,paddingBottom:te,paddingLeft:te,margin:te,marginTop:te,marginRight:te,marginBottom:te,marginLeft:te,rotate:Ut,rotateX:Ut,rotateY:Ut,rotateZ:Ut,scale:Br,scaleX:Br,scaleY:Br,scaleZ:Br,skew:Ut,skewX:Ut,skewY:Ut,distance:te,translateX:te,translateY:te,translateZ:te,x:te,y:te,z:te,perspective:te,transformPerspective:te,opacity:qn,originX:Ld,originY:Ld,originZ:te,zIndex:Dd,fillOpacity:qn,strokeOpacity:qn,numOctaves:Dd};function ac(e,t,s,r){const{style:a,vars:o,transform:i,transformOrigin:l}=e;let c=!1,d=!1,m=!0;for(const u in t){const g=t[u];if(pf(u)){o[u]=g;continue}const p=xf[u],k=w0(g,p);if(Fs.has(u)){if(c=!0,i[u]=k,!m)continue;g!==(p.default||0)&&(m=!1)}else u.startsWith("origin")?(d=!0,l[u]=k):a[u]=k}if(t.transform||(c||r?a.transform=j0(e.transform,s,m,r):a.transform&&(a.transform="none")),d){const{originX:u="50%",originY:g="50%",originZ:p=0}=l;a.transformOrigin=`${u} ${g} ${p}`}}const oc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vf(e,t,s){for(const r in t)!Ke(t[r])&&!hf(r,s)&&(e[r]=t[r])}function P0({transformTemplate:e},t,s){return w.useMemo(()=>{const r=oc();return ac(r,t,{enableHardwareAcceleration:!s},e),Object.assign({},r.vars,r.style)},[t])}function E0(e,t,s){const r=e.style||{},a={};return vf(a,r,e),Object.assign(a,P0(e,t,s)),e.transformValues?e.transformValues(a):a}function T0(e,t,s){const r={},a=E0(e,t,s);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=a,r}const A0=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function La(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||A0.has(e)}let yf=e=>!La(e);function R0(e){e&&(yf=t=>t.startsWith("on")?!La(t):e(t))}try{R0(require("@emotion/is-prop-valid").default)}catch{}function L0(e,t,s){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(yf(a)||s===!0&&La(a)||!t&&!La(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}function Md(e,t,s){return typeof e=="string"?e:te.transform(t+s*e)}function D0(e,t,s){const r=Md(t,e.x,e.width),a=Md(s,e.y,e.height);return`${r} ${a}`}const M0={offset:"stroke-dashoffset",array:"stroke-dasharray"},I0={offset:"strokeDashoffset",array:"strokeDasharray"};function F0(e,t,s=1,r=0,a=!0){e.pathLength=1;const o=a?M0:I0;e[o.offset]=te.transform(-r);const i=te.transform(t),l=te.transform(s);e[o.array]=`${i} ${l}`}function ic(e,{attrX:t,attrY:s,attrScale:r,originX:a,originY:o,pathLength:i,pathSpacing:l=1,pathOffset:c=0,...d},m,u,g){if(ac(e,d,m,g),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:k,dimensions:P}=e;p.transform&&(P&&(k.transform=p.transform),delete p.transform),P&&(a!==void 0||o!==void 0||k.transform)&&(k.transformOrigin=D0(P,a!==void 0?a:.5,o!==void 0?o:.5)),t!==void 0&&(p.x=t),s!==void 0&&(p.y=s),r!==void 0&&(p.scale=r),i!==void 0&&F0(p,i,l,c,!1)}const bf=()=>({...oc(),attrs:{}}),lc=e=>typeof e=="string"&&e.toLowerCase()==="svg";function $0(e,t,s,r){const a=w.useMemo(()=>{const o=bf();return ic(o,t,{enableHardwareAcceleration:!1},lc(r),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};vf(o,e.style,e),a.style={...o,...a.style}}return a}function V0(e=!1){return(s,r,a,{latestValues:o},i)=>{const c=(rc(s)?$0:T0)(r,o,i,s),m={...L0(r,typeof s=="string",e),...c,ref:a},{children:u}=r,g=w.useMemo(()=>Ke(u)?u.get():u,[u]);return w.createElement(s,{...m,children:g})}}function jf(e,{style:t,vars:s},r,a){Object.assign(e.style,t,a&&a.getProjectionStyles(r));for(const o in s)e.style.setProperty(o,s[o])}const Nf=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wf(e,t,s,r){jf(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(Nf.has(a)?a:tc(a),t.attrs[a])}function cc(e,t){const{style:s}=e,r={};for(const a in s)(Ke(s[a])||t.style&&Ke(t.style[a])||hf(a,e))&&(r[a]=s[a]);return r}function Sf(e,t){const s=cc(e,t);for(const r in e)if(Ke(e[r])||Ke(t[r])){const a=br.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[a]=e[r]}return s}function dc(e,t,s,r={},a={}){return typeof t=="function"&&(t=t(s!==void 0?s:e.custom,r,a)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(s!==void 0?s:e.custom,r,a)),t}function O0(e){const t=w.useRef(null);return t.current===null&&(t.current=e()),t.current}const Da=e=>Array.isArray(e),_0=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),z0=e=>Da(e)?e[e.length-1]||0:e;function aa(e){const t=Ke(e)?e.get():e;return _0(t)?t.toValue():t}function B0({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:s},r,a,o){const i={latestValues:U0(r,a,o,e),renderState:t()};return s&&(i.mount=l=>s(r,l,i)),i}const Cf=e=>(t,s)=>{const r=w.useContext(no),a=w.useContext(ec),o=()=>B0(e,t,r,a);return s?o():O0(o)};function U0(e,t,s,r){const a={},o=r(e,{});for(const g in o)a[g]=aa(o[g]);let{initial:i,animate:l}=e;const c=oo(e),d=df(e);t&&d&&!c&&e.inherit!==!1&&(i===void 0&&(i=t.initial),l===void 0&&(l=t.animate));let m=s?s.initial===!1:!1;m=m||i===!1;const u=m?l:i;return u&&typeof u!="boolean"&&!ao(u)&&(Array.isArray(u)?u:[u]).forEach(p=>{const k=dc(e,p);if(!k)return;const{transitionEnd:P,transition:S,...x}=k;for(const y in x){let f=x[y];if(Array.isArray(f)){const v=m?f.length-1:0;f=f[v]}f!==null&&(a[y]=f)}for(const y in P)a[y]=P[y]}),a}const we=e=>e;class Id{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const s=this.order.indexOf(t);s!==-1&&(this.order.splice(s,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function q0(e){let t=new Id,s=new Id,r=0,a=!1,o=!1;const i=new WeakSet,l={schedule:(c,d=!1,m=!1)=>{const u=m&&a,g=u?t:s;return d&&i.add(c),g.add(c)&&u&&a&&(r=t.order.length),c},cancel:c=>{s.remove(c),i.delete(c)},process:c=>{if(a){o=!0;return}if(a=!0,[t,s]=[s,t],s.clear(),r=t.order.length,r)for(let d=0;d<r;d++){const m=t.order[d];m(c),i.has(m)&&(l.schedule(m),e())}a=!1,o&&(o=!1,l.process(c))}};return l}const Ur=["prepare","read","update","preRender","render","postRender"],G0=40;function H0(e,t){let s=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=Ur.reduce((u,g)=>(u[g]=q0(()=>s=!0),u),{}),i=u=>o[u].process(a),l=()=>{const u=performance.now();s=!1,a.delta=r?1e3/60:Math.max(Math.min(u-a.timestamp,G0),1),a.timestamp=u,a.isProcessing=!0,Ur.forEach(i),a.isProcessing=!1,s&&t&&(r=!1,e(l))},c=()=>{s=!0,r=!0,a.isProcessing||e(l)};return{schedule:Ur.reduce((u,g)=>{const p=o[g];return u[g]=(k,P=!1,S=!1)=>(s||c(),p.schedule(k,P,S)),u},{}),cancel:u=>Ur.forEach(g=>o[g].cancel(u)),state:a,steps:o}}const{schedule:fe,cancel:_t,state:$e,steps:zo}=H0(typeof requestAnimationFrame<"u"?requestAnimationFrame:we,!0),W0={useVisualState:Cf({scrapeMotionValuesFromProps:Sf,createRenderState:bf,onMount:(e,t,{renderState:s,latestValues:r})=>{fe.read(()=>{try{s.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}),fe.render(()=>{ic(s,r,{enableHardwareAcceleration:!1},lc(t.tagName),e.transformTemplate),wf(t,s)})}})},X0={useVisualState:Cf({scrapeMotionValuesFromProps:cc,createRenderState:oc})};function Q0(e,{forwardMotionProps:t=!1},s,r){return{...rc(e)?W0:X0,preloadedFeatures:s,useRender:V0(t),createVisualElement:r,Component:e}}function Lt(e,t,s,r={passive:!0}){return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s)}const kf=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function lo(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const Y0=e=>t=>kf(t)&&e(t,lo(t));function Mt(e,t,s,r){return Lt(e,t,Y0(s),r)}const K0=(e,t)=>s=>t(e(s)),is=(...e)=>e.reduce(K0);function Pf(e){let t=null;return()=>{const s=()=>{t=null};return t===null?(t=e,s):!1}}const Fd=Pf("dragHorizontal"),$d=Pf("dragVertical");function Ef(e){let t=!1;if(e==="y")t=$d();else if(e==="x")t=Fd();else{const s=Fd(),r=$d();s&&r?t=()=>{s(),r()}:(s&&s(),r&&r())}return t}function Tf(){const e=Ef(!0);return e?(e(),!1):!0}class gs{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Vd(e,t){const s="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),a=(o,i)=>{if(o.pointerType==="touch"||Tf())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[r]&&fe.update(()=>l[r](o,i))};return Mt(e.current,s,a,{passive:!e.getProps()[r]})}class Z0 extends gs{mount(){this.unmount=is(Vd(this.node,!0),Vd(this.node,!1))}unmount(){}}class J0 extends gs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=is(Lt(this.node.current,"focus",()=>this.onFocus()),Lt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Af=(e,t)=>t?e===t?!0:Af(e,t.parentElement):!1;function Bo(e,t){if(!t)return;const s=new PointerEvent("pointer"+e);t(s,lo(s))}class ev extends gs{constructor(){super(...arguments),this.removeStartListeners=we,this.removeEndListeners=we,this.removeAccessibleListeners=we,this.startPointerPress=(t,s)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=Mt(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:m,globalTapTarget:u}=this.node.getProps();fe.update(()=>{!u&&!Af(this.node.current,l.target)?m&&m(l,c):d&&d(l,c)})},{passive:!(r.onTap||r.onPointerUp)}),i=Mt(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=is(o,i),this.startPress(t,s)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const i=l=>{l.key!=="Enter"||!this.checkPressEnd()||Bo("up",(c,d)=>{const{onTap:m}=this.node.getProps();m&&fe.update(()=>m(c,d))})};this.removeEndListeners(),this.removeEndListeners=Lt(this.node.current,"keyup",i),Bo("down",(l,c)=>{this.startPress(l,c)})},s=Lt(this.node.current,"keydown",t),r=()=>{this.isPressing&&Bo("cancel",(o,i)=>this.cancelPress(o,i))},a=Lt(this.node.current,"blur",r);this.removeAccessibleListeners=is(s,a)}}startPress(t,s){this.isPressing=!0;const{onTapStart:r,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&fe.update(()=>r(t,s))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Tf()}cancelPress(t,s){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&fe.update(()=>r(t,s))}mount(){const t=this.node.getProps(),s=Mt(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Lt(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=is(s,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Xi=new WeakMap,Uo=new WeakMap,tv=e=>{const t=Xi.get(e.target);t&&t(e)},sv=e=>{e.forEach(tv)};function nv({root:e,...t}){const s=e||document;Uo.has(s)||Uo.set(s,{});const r=Uo.get(s),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(sv,{root:e,...t})),r[a]}function rv(e,t,s){const r=nv(t);return Xi.set(e,s),r.observe(e),()=>{Xi.delete(e),r.unobserve(e)}}const av={some:0,all:1};class ov extends gs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:r,amount:a="some",once:o}=t,i={root:s?s.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:av[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:m,onViewportLeave:u}=this.node.getProps(),g=d?m:u;g&&g(c)};return rv(this.node.current,i,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(iv(t,s))&&this.startObserver()}unmount(){}}function iv({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const lv={inView:{Feature:ov},tap:{Feature:ev},focus:{Feature:J0},hover:{Feature:Z0}};function Rf(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let r=0;r<s;r++)if(t[r]!==e[r])return!1;return!0}function cv(e){const t={};return e.values.forEach((s,r)=>t[r]=s.get()),t}function dv(e){const t={};return e.values.forEach((s,r)=>t[r]=s.getVelocity()),t}function co(e,t,s){const r=e.getProps();return dc(r,t,s!==void 0?s:r.custom,cv(e),dv(e))}let uc=we;const Es=e=>e*1e3,It=e=>e/1e3,uv={current:!1},Lf=e=>Array.isArray(e)&&typeof e[0]=="number";function Df(e){return!!(!e||typeof e=="string"&&Mf[e]||Lf(e)||Array.isArray(e)&&e.every(Df))}const Mn=([e,t,s,r])=>`cubic-bezier(${e}, ${t}, ${s}, ${r})`,Mf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Mn([0,.65,.55,1]),circOut:Mn([.55,0,1,.45]),backIn:Mn([.31,.01,.66,-.59]),backOut:Mn([.33,1.53,.69,.99])};function If(e){if(e)return Lf(e)?Mn(e):Array.isArray(e)?e.map(If):Mf[e]}function mv(e,t,s,{delay:r=0,duration:a,repeat:o=0,repeatType:i="loop",ease:l,times:c}={}){const d={[t]:s};c&&(d.offset=c);const m=If(l);return Array.isArray(m)&&(d.easing=m),e.animate(d,{delay:r,duration:a,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:i==="reverse"?"alternate":"normal"})}function hv(e,{repeat:t,repeatType:s="loop"}){const r=t&&s!=="loop"&&t%2===1?0:e.length-1;return e[r]}const Ff=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,fv=1e-7,pv=12;function gv(e,t,s,r,a){let o,i,l=0;do i=t+(s-t)/2,o=Ff(i,r,a)-e,o>0?s=i:t=i;while(Math.abs(o)>fv&&++l<pv);return i}function wr(e,t,s,r){if(e===t&&s===r)return we;const a=o=>gv(o,0,1,e,s);return o=>o===0||o===1?o:Ff(a(o),t,r)}const xv=wr(.42,0,1,1),vv=wr(0,0,.58,1),$f=wr(.42,0,.58,1),yv=e=>Array.isArray(e)&&typeof e[0]!="number",Vf=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Of=e=>t=>1-e(1-t),mc=e=>1-Math.sin(Math.acos(e)),_f=Of(mc),bv=Vf(mc),zf=wr(.33,1.53,.69,.99),hc=Of(zf),jv=Vf(hc),Nv=e=>(e*=2)<1?.5*hc(e):.5*(2-Math.pow(2,-10*(e-1))),wv={linear:we,easeIn:xv,easeInOut:$f,easeOut:vv,circIn:mc,circInOut:bv,circOut:_f,backIn:hc,backInOut:jv,backOut:zf,anticipate:Nv},Od=e=>{if(Array.isArray(e)){uc(e.length===4);const[t,s,r,a]=e;return wr(t,s,r,a)}else if(typeof e=="string")return wv[e];return e},fc=(e,t)=>s=>!!(jr(s)&&S0.test(s)&&s.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(s,t)),Bf=(e,t,s)=>r=>{if(!jr(r))return r;const[a,o,i,l]=r.match(io);return{[e]:parseFloat(a),[t]:parseFloat(o),[s]:parseFloat(i),alpha:l!==void 0?parseFloat(l):1}},Sv=e=>us(0,255,e),qo={...$s,transform:e=>Math.round(Sv(e))},Cs={test:fc("rgb","red"),parse:Bf("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:r=1})=>"rgba("+qo.transform(e)+", "+qo.transform(t)+", "+qo.transform(s)+", "+Gn(qn.transform(r))+")"};function Cv(e){let t="",s="",r="",a="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,s+=s,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const Qi={test:fc("#"),parse:Cv,transform:Cs.transform},Zs={test:fc("hsl","hue"),parse:Bf("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:r=1})=>"hsla("+Math.round(e)+", "+Pt.transform(Gn(t))+", "+Pt.transform(Gn(s))+", "+Gn(qn.transform(r))+")"},ze={test:e=>Cs.test(e)||Qi.test(e)||Zs.test(e),parse:e=>Cs.test(e)?Cs.parse(e):Zs.test(e)?Zs.parse(e):Qi.parse(e),transform:e=>jr(e)?e:e.hasOwnProperty("red")?Cs.transform(e):Zs.transform(e)},xe=(e,t,s)=>-s*e+s*t+e;function Go(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function kv({hue:e,saturation:t,lightness:s,alpha:r}){e/=360,t/=100,s/=100;let a=0,o=0,i=0;if(!t)a=o=i=s;else{const l=s<.5?s*(1+t):s+t-s*t,c=2*s-l;a=Go(c,l,e+1/3),o=Go(c,l,e),i=Go(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(i*255),alpha:r}}const Ho=(e,t,s)=>{const r=e*e;return Math.sqrt(Math.max(0,s*(t*t-r)+r))},Pv=[Qi,Cs,Zs],Ev=e=>Pv.find(t=>t.test(e));function _d(e){const t=Ev(e);let s=t.parse(e);return t===Zs&&(s=kv(s)),s}const Uf=(e,t)=>{const s=_d(e),r=_d(t),a={...s};return o=>(a.red=Ho(s.red,r.red,o),a.green=Ho(s.green,r.green,o),a.blue=Ho(s.blue,r.blue,o),a.alpha=xe(s.alpha,r.alpha,o),Cs.transform(a))};function Tv(e){var t,s;return isNaN(e)&&jr(e)&&(((t=e.match(io))===null||t===void 0?void 0:t.length)||0)+(((s=e.match(gf))===null||s===void 0?void 0:s.length)||0)>0}const qf={regex:N0,countKey:"Vars",token:"${v}",parse:we},Gf={regex:gf,countKey:"Colors",token:"${c}",parse:ze.parse},Hf={regex:io,countKey:"Numbers",token:"${n}",parse:$s.parse};function Wo(e,{regex:t,countKey:s,token:r,parse:a}){const o=e.tokenised.match(t);o&&(e["num"+s]=o.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...o.map(a)))}function Ma(e){const t=e.toString(),s={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&Wo(s,qf),Wo(s,Gf),Wo(s,Hf),s}function Wf(e){return Ma(e).values}function Xf(e){const{values:t,numColors:s,numVars:r,tokenised:a}=Ma(e),o=t.length;return i=>{let l=a;for(let c=0;c<o;c++)c<r?l=l.replace(qf.token,i[c]):c<r+s?l=l.replace(Gf.token,ze.transform(i[c])):l=l.replace(Hf.token,Gn(i[c]));return l}}const Av=e=>typeof e=="number"?0:e;function Rv(e){const t=Wf(e);return Xf(e)(t.map(Av))}const ms={test:Tv,parse:Wf,createTransformer:Xf,getAnimatableNone:Rv},Qf=(e,t)=>s=>`${s>0?t:e}`;function Yf(e,t){return typeof e=="number"?s=>xe(e,t,s):ze.test(e)?Uf(e,t):e.startsWith("var(")?Qf(e,t):Zf(e,t)}const Kf=(e,t)=>{const s=[...e],r=s.length,a=e.map((o,i)=>Yf(o,t[i]));return o=>{for(let i=0;i<r;i++)s[i]=a[i](o);return s}},Lv=(e,t)=>{const s={...e,...t},r={};for(const a in s)e[a]!==void 0&&t[a]!==void 0&&(r[a]=Yf(e[a],t[a]));return a=>{for(const o in r)s[o]=r[o](a);return s}},Zf=(e,t)=>{const s=ms.createTransformer(t),r=Ma(e),a=Ma(t);return r.numVars===a.numVars&&r.numColors===a.numColors&&r.numNumbers>=a.numNumbers?is(Kf(r.values,a.values),s):Qf(e,t)},hr=(e,t,s)=>{const r=t-e;return r===0?1:(s-e)/r},zd=(e,t)=>s=>xe(e,t,s);function Dv(e){return typeof e=="number"?zd:typeof e=="string"?ze.test(e)?Uf:Zf:Array.isArray(e)?Kf:typeof e=="object"?Lv:zd}function Mv(e,t,s){const r=[],a=s||Dv(e[0]),o=e.length-1;for(let i=0;i<o;i++){let l=a(e[i],e[i+1]);if(t){const c=Array.isArray(t)?t[i]||we:t;l=is(c,l)}r.push(l)}return r}function Jf(e,t,{clamp:s=!0,ease:r,mixer:a}={}){const o=e.length;if(uc(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=Mv(t,r,a),l=i.length,c=d=>{let m=0;if(l>1)for(;m<e.length-2&&!(d<e[m+1]);m++);const u=hr(e[m],e[m+1],d);return i[m](u)};return s?d=>c(us(e[0],e[o-1],d)):c}function Iv(e,t){const s=e[e.length-1];for(let r=1;r<=t;r++){const a=hr(0,t,r);e.push(xe(s,1,a))}}function Fv(e){const t=[0];return Iv(t,e.length-1),t}function $v(e,t){return e.map(s=>s*t)}function Vv(e,t){return e.map(()=>t||$f).splice(0,e.length-1)}function Ia({duration:e=300,keyframes:t,times:s,ease:r="easeInOut"}){const a=yv(r)?r.map(Od):Od(r),o={done:!1,value:t[0]},i=$v(s&&s.length===t.length?s:Fv(t),e),l=Jf(i,t,{ease:Array.isArray(a)?a:Vv(t,a)});return{calculatedDuration:e,next:c=>(o.value=l(c),o.done=c>=e,o)}}function ep(e,t){return t?e*(1e3/t):0}const Ov=5;function tp(e,t,s){const r=Math.max(t-Ov,0);return ep(s-e(r),t-r)}const Xo=.001,_v=.01,zv=10,Bv=.05,Uv=1;function qv({duration:e=800,bounce:t=.25,velocity:s=0,mass:r=1}){let a,o,i=1-t;i=us(Bv,Uv,i),e=us(_v,zv,It(e)),i<1?(a=d=>{const m=d*i,u=m*e,g=m-s,p=Yi(d,i),k=Math.exp(-u);return Xo-g/p*k},o=d=>{const u=d*i*e,g=u*s+s,p=Math.pow(i,2)*Math.pow(d,2)*e,k=Math.exp(-u),P=Yi(Math.pow(d,2),i);return(-a(d)+Xo>0?-1:1)*((g-p)*k)/P}):(a=d=>{const m=Math.exp(-d*e),u=(d-s)*e+1;return-Xo+m*u},o=d=>{const m=Math.exp(-d*e),u=(s-d)*(e*e);return m*u});const l=5/e,c=Hv(a,o,l);if(e=Es(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:i*2*Math.sqrt(r*d),duration:e}}}const Gv=12;function Hv(e,t,s){let r=s;for(let a=1;a<Gv;a++)r=r-e(r)/t(r);return r}function Yi(e,t){return e*Math.sqrt(1-t*t)}const Wv=["duration","bounce"],Xv=["stiffness","damping","mass"];function Bd(e,t){return t.some(s=>e[s]!==void 0)}function Qv(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Bd(e,Xv)&&Bd(e,Wv)){const s=qv(e);t={...t,...s,mass:1},t.isResolvedFromDuration=!0}return t}function sp({keyframes:e,restDelta:t,restSpeed:s,...r}){const a=e[0],o=e[e.length-1],i={done:!1,value:a},{stiffness:l,damping:c,mass:d,duration:m,velocity:u,isResolvedFromDuration:g}=Qv({...r,velocity:-It(r.velocity||0)}),p=u||0,k=c/(2*Math.sqrt(l*d)),P=o-a,S=It(Math.sqrt(l/d)),x=Math.abs(P)<5;s||(s=x?.01:2),t||(t=x?.005:.5);let y;if(k<1){const f=Yi(S,k);y=v=>{const R=Math.exp(-k*S*v);return o-R*((p+k*S*P)/f*Math.sin(f*v)+P*Math.cos(f*v))}}else if(k===1)y=f=>o-Math.exp(-S*f)*(P+(p+S*P)*f);else{const f=S*Math.sqrt(k*k-1);y=v=>{const R=Math.exp(-k*S*v),E=Math.min(f*v,300);return o-R*((p+k*S*P)*Math.sinh(E)+f*P*Math.cosh(E))/f}}return{calculatedDuration:g&&m||null,next:f=>{const v=y(f);if(g)i.done=f>=m;else{let R=p;f!==0&&(k<1?R=tp(y,f,v):R=0);const E=Math.abs(R)<=s,N=Math.abs(o-v)<=t;i.done=E&&N}return i.value=i.done?o:v,i}}}function Ud({keyframes:e,velocity:t=0,power:s=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:i,min:l,max:c,restDelta:d=.5,restSpeed:m}){const u=e[0],g={done:!1,value:u},p=h=>l!==void 0&&h<l||c!==void 0&&h>c,k=h=>l===void 0?c:c===void 0||Math.abs(l-h)<Math.abs(c-h)?l:c;let P=s*t;const S=u+P,x=i===void 0?S:i(S);x!==S&&(P=x-u);const y=h=>-P*Math.exp(-h/r),f=h=>x+y(h),v=h=>{const j=y(h),C=f(h);g.done=Math.abs(j)<=d,g.value=g.done?x:C};let R,E;const N=h=>{p(g.value)&&(R=h,E=sp({keyframes:[g.value,k(g.value)],velocity:tp(f,h,g.value),damping:a,stiffness:o,restDelta:d,restSpeed:m}))};return N(0),{calculatedDuration:null,next:h=>{let j=!1;return!E&&R===void 0&&(j=!0,v(h),N(h)),R!==void 0&&h>R?E.next(h-R):(!j&&v(h),g)}}}const Yv=e=>{const t=({timestamp:s})=>e(s);return{start:()=>fe.update(t,!0),stop:()=>_t(t),now:()=>$e.isProcessing?$e.timestamp:performance.now()}},qd=2e4;function Gd(e){let t=0;const s=50;let r=e.next(t);for(;!r.done&&t<qd;)t+=s,r=e.next(t);return t>=qd?1/0:t}const Kv={decay:Ud,inertia:Ud,tween:Ia,keyframes:Ia,spring:sp};function Fa({autoplay:e=!0,delay:t=0,driver:s=Yv,keyframes:r,type:a="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:l="loop",onPlay:c,onStop:d,onComplete:m,onUpdate:u,...g}){let p=1,k=!1,P,S;const x=()=>{S=new Promise(O=>{P=O})};x();let y;const f=Kv[a]||Ia;let v;f!==Ia&&typeof r[0]!="number"&&(v=Jf([0,100],r,{clamp:!1}),r=[0,100]);const R=f({...g,keyframes:r});let E;l==="mirror"&&(E=f({...g,keyframes:[...r].reverse(),velocity:-(g.velocity||0)}));let N="idle",h=null,j=null,C=null;R.calculatedDuration===null&&o&&(R.calculatedDuration=Gd(R));const{calculatedDuration:b}=R;let T=1/0,A=1/0;b!==null&&(T=b+i,A=T*(o+1)-i);let $=0;const D=O=>{if(j===null)return;p>0&&(j=Math.min(j,O)),p<0&&(j=Math.min(O-A/p,j)),h!==null?$=h:$=Math.round(O-j)*p;const H=$-t*(p>=0?1:-1),ne=p>=0?H<0:H>A;$=Math.max(H,0),N==="finished"&&h===null&&($=A);let Y=$,B=R;if(o){const K=Math.min($,A)/T;let G=Math.floor(K),ee=K%1;!ee&&K>=1&&(ee=1),ee===1&&G--,G=Math.min(G,o+1),!!(G%2)&&(l==="reverse"?(ee=1-ee,i&&(ee-=i/T)):l==="mirror"&&(B=E)),Y=us(0,1,ee)*T}const q=ne?{done:!1,value:r[0]}:B.next(Y);v&&(q.value=v(q.value));let{done:M}=q;!ne&&b!==null&&(M=p>=0?$>=A:$<=0);const U=h===null&&(N==="finished"||N==="running"&&M);return u&&u(q.value),U&&I(),q},V=()=>{y&&y.stop(),y=void 0},z=()=>{N="idle",V(),P(),x(),j=C=null},I=()=>{N="finished",m&&m(),V(),P()},F=()=>{if(k)return;y||(y=s(D));const O=y.now();c&&c(),h!==null?j=O-h:(!j||N==="finished")&&(j=O),N==="finished"&&x(),C=j,h=null,N="running",y.start()};e&&F();const L={then(O,H){return S.then(O,H)},get time(){return It($)},set time(O){O=Es(O),$=O,h!==null||!y||p===0?h=O:j=y.now()-O/p},get duration(){const O=R.calculatedDuration===null?Gd(R):R.calculatedDuration;return It(O)},get speed(){return p},set speed(O){O===p||!y||(p=O,L.time=It($))},get state(){return N},play:F,pause:()=>{N="paused",h=$},stop:()=>{k=!0,N!=="idle"&&(N="idle",d&&d(),z())},cancel:()=>{C!==null&&D(C),z()},complete:()=>{N="finished"},sample:O=>(j=0,D(O))};return L}function Zv(e){let t;return()=>(t===void 0&&(t=e()),t)}const Jv=Zv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ey=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),qr=10,ty=2e4,sy=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Df(t.ease);function ny(e,t,{onUpdate:s,onComplete:r,...a}){if(!(Jv()&&ey.has(t)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let i=!1,l,c,d=!1;const m=()=>{c=new Promise(f=>{l=f})};m();let{keyframes:u,duration:g=300,ease:p,times:k}=a;if(sy(t,a)){const f=Fa({...a,repeat:0,delay:0});let v={done:!1,value:u[0]};const R=[];let E=0;for(;!v.done&&E<ty;)v=f.sample(E),R.push(v.value),E+=qr;k=void 0,u=R,g=E-qr,p="linear"}const P=mv(e.owner.current,t,u,{...a,duration:g,ease:p,times:k}),S=()=>{d=!1,P.cancel()},x=()=>{d=!0,fe.update(S),l(),m()};return P.onfinish=()=>{d||(e.set(hv(u,a)),r&&r(),x())},{then(f,v){return c.then(f,v)},attachTimeline(f){return P.timeline=f,P.onfinish=null,we},get time(){return It(P.currentTime||0)},set time(f){P.currentTime=Es(f)},get speed(){return P.playbackRate},set speed(f){P.playbackRate=f},get duration(){return It(g)},play:()=>{i||(P.play(),_t(S))},pause:()=>P.pause(),stop:()=>{if(i=!0,P.playState==="idle")return;const{currentTime:f}=P;if(f){const v=Fa({...a,autoplay:!1});e.setWithVelocity(v.sample(f-qr).value,v.sample(f).value,qr)}x()},complete:()=>{d||P.finish()},cancel:x}}function ry({keyframes:e,delay:t,onUpdate:s,onComplete:r}){const a=()=>(s&&s(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:we,pause:we,stop:we,then:o=>(o(),Promise.resolve()),cancel:we,complete:we});return t?Fa({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}const ay={type:"spring",stiffness:500,damping:25,restSpeed:10},oy=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),iy={type:"keyframes",duration:.8},ly={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cy=(e,{keyframes:t})=>t.length>2?iy:Fs.has(e)?e.startsWith("scale")?oy(t[1]):ay:ly,Ki=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ms.test(t)||t==="0")&&!t.startsWith("url(")),dy=new Set(["brightness","contrast","saturate","opacity"]);function uy(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=s.match(io)||[];if(!r)return e;const a=s.replace(r,"");let o=dy.has(t)?1:0;return r!==s&&(o*=100),t+"("+o+a+")"}const my=/([a-z-]*)\(.*?\)/g,Zi={...ms,getAnimatableNone:e=>{const t=e.match(my);return t?t.map(uy).join(" "):e}},hy={...xf,color:ze,backgroundColor:ze,outlineColor:ze,fill:ze,stroke:ze,borderColor:ze,borderTopColor:ze,borderRightColor:ze,borderBottomColor:ze,borderLeftColor:ze,filter:Zi,WebkitFilter:Zi},pc=e=>hy[e];function np(e,t){let s=pc(e);return s!==Zi&&(s=ms),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const rp=e=>/^0[^.\s]+$/.test(e);function fy(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||rp(e)}function py(e,t,s,r){const a=Ki(t,s);let o;Array.isArray(s)?o=[...s]:o=[null,s];const i=r.from!==void 0?r.from:e.get();let l;const c=[];for(let d=0;d<o.length;d++)o[d]===null&&(o[d]=d===0?i:o[d-1]),fy(o[d])&&c.push(d),typeof o[d]=="string"&&o[d]!=="none"&&o[d]!=="0"&&(l=o[d]);if(a&&c.length&&l)for(let d=0;d<c.length;d++){const m=c[d];o[m]=np(t,l)}return o}function gy({when:e,delay:t,delayChildren:s,staggerChildren:r,staggerDirection:a,repeat:o,repeatType:i,repeatDelay:l,from:c,elapsed:d,...m}){return!!Object.keys(m).length}function gc(e,t){return e[t]||e.default||e}const xy={skipAnimations:!1},xc=(e,t,s,r={})=>a=>{const o=gc(r,e)||{},i=o.delay||r.delay||0;let{elapsed:l=0}=r;l=l-Es(i);const c=py(t,e,s,o),d=c[0],m=c[c.length-1],u=Ki(e,d),g=Ki(e,m);let p={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-l,onUpdate:k=>{t.set(k),o.onUpdate&&o.onUpdate(k)},onComplete:()=>{a(),o.onComplete&&o.onComplete()}};if(gy(o)||(p={...p,...cy(e,p)}),p.duration&&(p.duration=Es(p.duration)),p.repeatDelay&&(p.repeatDelay=Es(p.repeatDelay)),!u||!g||uv.current||o.type===!1||xy.skipAnimations)return ry(p);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const k=ny(t,e,p);if(k)return k}return Fa(p)};function $a(e){return!!(Ke(e)&&e.add)}const ap=e=>/^\-?\d*\.?\d+$/.test(e);function vc(e,t){e.indexOf(t)===-1&&e.push(t)}function yc(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class bc{constructor(){this.subscriptions=[]}add(t){return vc(this.subscriptions,t),()=>yc(this.subscriptions,t)}notify(t,s,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,s,r);else for(let o=0;o<a;o++){const i=this.subscriptions[o];i&&i(t,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vy=e=>!isNaN(parseFloat(e));class yy{constructor(t,s={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,a=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:i}=$e;this.lastUpdated!==i&&(this.timeDelta=o,this.lastUpdated=i,fe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>fe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=vy(this.current),this.owner=s.owner}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new bc);const r=this.events[t].add(s);return t==="change"?()=>{r(),fe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,r){this.set(s),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?ep(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pn(e,t){return new yy(e,t)}const op=e=>t=>t.test(e),by={test:e=>e==="auto",parse:e=>e},ip=[$s,te,Pt,Ut,k0,C0,by],En=e=>ip.find(op(e)),jy=[...ip,ze,ms],Ny=e=>jy.find(op(e));function wy(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,pn(s))}function Sy(e,t){const s=co(e,t);let{transitionEnd:r={},transition:a={},...o}=s?e.makeTargetAnimatable(s,!1):{};o={...o,...r};for(const i in o){const l=z0(o[i]);wy(e,i,l)}}function Cy(e,t,s){var r,a;const o=Object.keys(t).filter(l=>!e.hasValue(l)),i=o.length;if(i)for(let l=0;l<i;l++){const c=o[l],d=t[c];let m=null;Array.isArray(d)&&(m=d[0]),m===null&&(m=(a=(r=s[c])!==null&&r!==void 0?r:e.readValue(c))!==null&&a!==void 0?a:t[c]),m!=null&&(typeof m=="string"&&(ap(m)||rp(m))?m=parseFloat(m):!Ny(m)&&ms.test(d)&&(m=np(c,d)),e.addValue(c,pn(m,{owner:e})),s[c]===void 0&&(s[c]=m),m!==null&&e.setBaseTarget(c,m))}}function ky(e,t){return t?(t[e]||t.default||t).from:void 0}function Py(e,t,s){const r={};for(const a in e){const o=ky(a,t);if(o!==void 0)r[a]=o;else{const i=s.getValue(a);i&&(r[a]=i.get())}}return r}function Ey({protectedKeys:e,needsAnimating:t},s){const r=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,r}function Ty(e,t){const s=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==s)return!0}else return s!==t}function lp(e,t,{delay:s=0,transitionOverride:r,type:a}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:i,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");r&&(o=r);const d=[],m=a&&e.animationState&&e.animationState.getState()[a];for(const u in l){const g=e.getValue(u),p=l[u];if(!g||p===void 0||m&&Ey(m,u))continue;const k={delay:s,elapsed:0,...gc(o||{},u)};if(window.HandoffAppearAnimations){const x=e.getProps()[cf];if(x){const y=window.HandoffAppearAnimations(x,u,g,fe);y!==null&&(k.elapsed=y,k.isHandoff=!0)}}let P=!k.isHandoff&&!Ty(g,p);if(k.type==="spring"&&(g.getVelocity()||k.velocity)&&(P=!1),g.animation&&(P=!1),P)continue;g.start(xc(u,g,p,e.shouldReduceMotion&&Fs.has(u)?{type:!1}:k));const S=g.animation;$a(c)&&(c.add(u),S.then(()=>c.remove(u))),d.push(S)}return i&&Promise.all(d).then(()=>{i&&Sy(e,i)}),d}function Ji(e,t,s={}){const r=co(e,t,s.custom);let{transition:a=e.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(a=s.transitionOverride);const o=r?()=>Promise.all(lp(e,r,s)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:m,staggerDirection:u}=a;return Ay(e,t,d+c,m,u,s)}:()=>Promise.resolve(),{when:l}=a;if(l){const[c,d]=l==="beforeChildren"?[o,i]:[i,o];return c().then(()=>d())}else return Promise.all([o(),i(s.delay)])}function Ay(e,t,s=0,r=0,a=1,o){const i=[],l=(e.variantChildren.size-1)*r,c=a===1?(d=0)=>d*r:(d=0)=>l-d*r;return Array.from(e.variantChildren).sort(Ry).forEach((d,m)=>{d.notify("AnimationStart",t),i.push(Ji(d,t,{...o,delay:s+c(m)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(i)}function Ry(e,t){return e.sortNodePosition(t)}function Ly(e,t,s={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(o=>Ji(e,o,s));r=Promise.all(a)}else if(typeof t=="string")r=Ji(e,t,s);else{const a=typeof t=="function"?co(e,t,s.custom):t;r=Promise.all(lp(e,a,s))}return r.then(()=>e.notify("AnimationComplete",t))}const Dy=[...sc].reverse(),My=sc.length;function Iy(e){return t=>Promise.all(t.map(({animation:s,options:r})=>Ly(e,s,r)))}function Fy(e){let t=Iy(e);const s=Vy();let r=!0;const a=(c,d)=>{const m=co(e,d);if(m){const{transition:u,transitionEnd:g,...p}=m;c={...c,...p,...g}}return c};function o(c){t=c(e)}function i(c,d){const m=e.getProps(),u=e.getVariantContext(!0)||{},g=[],p=new Set;let k={},P=1/0;for(let x=0;x<My;x++){const y=Dy[x],f=s[y],v=m[y]!==void 0?m[y]:u[y],R=ur(v),E=y===d?f.isActive:null;E===!1&&(P=x);let N=v===u[y]&&v!==m[y]&&R;if(N&&r&&e.manuallyAnimateOnMount&&(N=!1),f.protectedKeys={...k},!f.isActive&&E===null||!v&&!f.prevProp||ao(v)||typeof v=="boolean")continue;let j=$y(f.prevProp,v)||y===d&&f.isActive&&!N&&R||x>P&&R,C=!1;const b=Array.isArray(v)?v:[v];let T=b.reduce(a,{});E===!1&&(T={});const{prevResolvedValues:A={}}=f,$={...A,...T},D=V=>{j=!0,p.has(V)&&(C=!0,p.delete(V)),f.needsAnimating[V]=!0};for(const V in $){const z=T[V],I=A[V];if(k.hasOwnProperty(V))continue;let F=!1;Da(z)&&Da(I)?F=!Rf(z,I):F=z!==I,F?z!==void 0?D(V):p.add(V):z!==void 0&&p.has(V)?D(V):f.protectedKeys[V]=!0}f.prevProp=v,f.prevResolvedValues=T,f.isActive&&(k={...k,...T}),r&&e.blockInitialAnimation&&(j=!1),j&&(!N||C)&&g.push(...b.map(V=>({animation:V,options:{type:y,...c}})))}if(p.size){const x={};p.forEach(y=>{const f=e.getBaseTarget(y);f!==void 0&&(x[y]=f)}),g.push({animation:x})}let S=!!g.length;return r&&(m.initial===!1||m.initial===m.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(g):Promise.resolve()}function l(c,d,m){var u;if(s[c].isActive===d)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(p=>{var k;return(k=p.animationState)===null||k===void 0?void 0:k.setActive(c,d)}),s[c].isActive=d;const g=i(m,c);for(const p in s)s[p].protectedKeys={};return g}return{animateChanges:i,setActive:l,setAnimateFunction:o,getState:()=>s}}function $y(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Rf(t,e):!1}function xs(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Vy(){return{animate:xs(!0),whileInView:xs(),whileHover:xs(),whileTap:xs(),whileDrag:xs(),whileFocus:xs(),exit:xs()}}class Oy extends gs{constructor(t){super(t),t.animationState||(t.animationState=Fy(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),ao(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){}}let _y=0;class zy extends gs{constructor(){super(...arguments),this.id=_y++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s,custom:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const o=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});s&&!t&&o.then(()=>s(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const By={animation:{Feature:Oy},exit:{Feature:zy}},Hd=(e,t)=>Math.abs(e-t);function Uy(e,t){const s=Hd(e.x,t.x),r=Hd(e.y,t.y);return Math.sqrt(s**2+r**2)}class cp{constructor(t,s,{transformPagePoint:r,contextWindow:a,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=Yo(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,p=Uy(u.offset,{x:0,y:0})>=3;if(!g&&!p)return;const{point:k}=u,{timestamp:P}=$e;this.history.push({...k,timestamp:P});const{onStart:S,onMove:x}=this.handlers;g||(S&&S(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,u)},this.handlePointerMove=(u,g)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=Qo(g,this.transformPagePoint),fe.update(this.updatePoint,!0)},this.handlePointerUp=(u,g)=>{this.end();const{onEnd:p,onSessionEnd:k,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Yo(u.type==="pointercancel"?this.lastMoveEventInfo:Qo(g,this.transformPagePoint),this.history);this.startEvent&&p&&p(u,S),k&&k(u,S)},!kf(t))return;this.dragSnapToOrigin=o,this.handlers=s,this.transformPagePoint=r,this.contextWindow=a||window;const i=lo(t),l=Qo(i,this.transformPagePoint),{point:c}=l,{timestamp:d}=$e;this.history=[{...c,timestamp:d}];const{onSessionStart:m}=s;m&&m(t,Yo(l,this.history)),this.removeListeners=is(Mt(this.contextWindow,"pointermove",this.handlePointerMove),Mt(this.contextWindow,"pointerup",this.handlePointerUp),Mt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),_t(this.updatePoint)}}function Qo(e,t){return t?{point:t(e.point)}:e}function Wd(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Yo({point:e},t){return{point:e,delta:Wd(e,dp(t)),offset:Wd(e,qy(t)),velocity:Gy(t,.1)}}function qy(e){return e[0]}function dp(e){return e[e.length-1]}function Gy(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,r=null;const a=dp(e);for(;s>=0&&(r=e[s],!(a.timestamp-r.timestamp>Es(t)));)s--;if(!r)return{x:0,y:0};const o=It(a.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const i={x:(a.x-r.x)/o,y:(a.y-r.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function nt(e){return e.max-e.min}function el(e,t=0,s=.01){return Math.abs(e-t)<=s}function Xd(e,t,s,r=.5){e.origin=r,e.originPoint=xe(t.min,t.max,e.origin),e.scale=nt(s)/nt(t),(el(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=xe(s.min,s.max,e.origin)-e.originPoint,(el(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Hn(e,t,s,r){Xd(e.x,t.x,s.x,r?r.originX:void 0),Xd(e.y,t.y,s.y,r?r.originY:void 0)}function Qd(e,t,s){e.min=s.min+t.min,e.max=e.min+nt(t)}function Hy(e,t,s){Qd(e.x,t.x,s.x),Qd(e.y,t.y,s.y)}function Yd(e,t,s){e.min=t.min-s.min,e.max=e.min+nt(t)}function Wn(e,t,s){Yd(e.x,t.x,s.x),Yd(e.y,t.y,s.y)}function Wy(e,{min:t,max:s},r){return t!==void 0&&e<t?e=r?xe(t,e,r.min):Math.max(e,t):s!==void 0&&e>s&&(e=r?xe(s,e,r.max):Math.min(e,s)),e}function Kd(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function Xy(e,{top:t,left:s,bottom:r,right:a}){return{x:Kd(e.x,s,a),y:Kd(e.y,t,r)}}function Zd(e,t){let s=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,r]=[r,s]),{min:s,max:r}}function Qy(e,t){return{x:Zd(e.x,t.x),y:Zd(e.y,t.y)}}function Yy(e,t){let s=.5;const r=nt(e),a=nt(t);return a>r?s=hr(t.min,t.max-r,e.min):r>a&&(s=hr(e.min,e.max-a,t.min)),us(0,1,s)}function Ky(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const tl=.35;function Zy(e=tl){return e===!1?e=0:e===!0&&(e=tl),{x:Jd(e,"left","right"),y:Jd(e,"top","bottom")}}function Jd(e,t,s){return{min:eu(e,t),max:eu(e,s)}}function eu(e,t){return typeof e=="number"?e:e[t]||0}const tu=()=>({translate:0,scale:1,origin:0,originPoint:0}),Js=()=>({x:tu(),y:tu()}),su=()=>({min:0,max:0}),Ce=()=>({x:su(),y:su()});function it(e){return[e("x"),e("y")]}function up({top:e,left:t,right:s,bottom:r}){return{x:{min:t,max:s},y:{min:e,max:r}}}function Jy({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function eb(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function Ko(e){return e===void 0||e===1}function sl({scale:e,scaleX:t,scaleY:s}){return!Ko(e)||!Ko(t)||!Ko(s)}function bs(e){return sl(e)||mp(e)||e.z||e.rotate||e.rotateX||e.rotateY}function mp(e){return nu(e.x)||nu(e.y)}function nu(e){return e&&e!=="0%"}function Va(e,t,s){const r=e-s,a=t*r;return s+a}function ru(e,t,s,r,a){return a!==void 0&&(e=Va(e,a,r)),Va(e,s,r)+t}function nl(e,t=0,s=1,r,a){e.min=ru(e.min,t,s,r,a),e.max=ru(e.max,t,s,r,a)}function hp(e,{x:t,y:s}){nl(e.x,t.translate,t.scale,t.originPoint),nl(e.y,s.translate,s.scale,s.originPoint)}function tb(e,t,s,r=!1){const a=s.length;if(!a)return;t.x=t.y=1;let o,i;for(let l=0;l<a;l++){o=s[l],i=o.projectionDelta;const c=o.instance;c&&c.style&&c.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&en(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,hp(e,i)),r&&bs(o.latestValues)&&en(e,o.latestValues))}t.x=au(t.x),t.y=au(t.y)}function au(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ht(e,t){e.min=e.min+t,e.max=e.max+t}function ou(e,t,[s,r,a]){const o=t[a]!==void 0?t[a]:.5,i=xe(e.min,e.max,o);nl(e,t[s],t[r],i,t.scale)}const sb=["x","scaleX","originX"],nb=["y","scaleY","originY"];function en(e,t){ou(e.x,t,sb),ou(e.y,t,nb)}function fp(e,t){return up(eb(e.getBoundingClientRect(),t))}function rb(e,t,s){const r=fp(e,s),{scroll:a}=t;return a&&(Ht(r.x,a.offset.x),Ht(r.y,a.offset.y)),r}const pp=({current:e})=>e?e.ownerDocument.defaultView:null,ab=new WeakMap;class ob{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ce(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(lo(m,"page").point)},o=(m,u)=>{const{drag:g,dragPropagation:p,onDragStart:k}=this.getProps();if(g&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Ef(g),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),it(S=>{let x=this.getAxisMotionValue(S).get()||0;if(Pt.test(x)){const{projection:y}=this.visualElement;if(y&&y.layout){const f=y.layout.layoutBox[S];f&&(x=nt(f)*(parseFloat(x)/100))}}this.originPoint[S]=x}),k&&fe.update(()=>k(m,u),!1,!0);const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},i=(m,u)=>{const{dragPropagation:g,dragDirectionLock:p,onDirectionLock:k,onDrag:P}=this.getProps();if(!g&&!this.openGlobalLock)return;const{offset:S}=u;if(p&&this.currentDirection===null){this.currentDirection=ib(S),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",u.point,S),this.updateAxis("y",u.point,S),this.visualElement.render(),P&&P(m,u)},l=(m,u)=>this.stop(m,u),c=()=>it(m=>{var u;return this.getAnimationState(m)==="paused"&&((u=this.getAxisMotionValue(m).animation)===null||u===void 0?void 0:u.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new cp(t,{onSessionStart:a,onStart:o,onMove:i,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:pp(this.visualElement)})}stop(t,s){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&fe.update(()=>o(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,r){const{drag:a}=this.getProps();if(!r||!Gr(t,a,this.currentDirection))return;const o=this.getAxisMotionValue(t);let i=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(i=Wy(i,this.constraints[t],this.elastic[t])),o.set(i)}resolveConstraints(){var t;const{dragConstraints:s,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;s&&Ks(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&a?this.constraints=Xy(a.layoutBox,s):this.constraints=!1,this.elastic=Zy(r),o!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&it(i=>{this.getAxisMotionValue(i)&&(this.constraints[i]=Ky(a.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Ks(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=rb(r,a.root,this.visualElement.getTransformPagePoint());let i=Qy(a.layout.layoutBox,o);if(s){const l=s(Jy(i));this.hasMutatedConstraints=!!l,l&&(i=up(l))}return i}startAnimation(t){const{drag:s,dragMomentum:r,dragElastic:a,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=it(m=>{if(!Gr(m,s,this.currentDirection))return;let u=c&&c[m]||{};i&&(u={min:0,max:0});const g=a?200:1e6,p=a?40:1e7,k={type:"inertia",velocity:r?t[m]:0,bounceStiffness:g,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...o,...u};return this.startAxisValueAnimation(m,k)});return Promise.all(d).then(l)}startAxisValueAnimation(t,s){const r=this.getAxisMotionValue(t);return r.start(xc(t,r,0,s))}stopAnimation(){it(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){it(t=>{var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(t){const s="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),a=r[s];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){it(s=>{const{drag:r}=this.getProps();if(!Gr(s,r,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(s);if(a&&a.layout){const{min:i,max:l}=a.layout.layoutBox[s];o.set(t[s]-xe(i,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!Ks(s)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};it(i=>{const l=this.getAxisMotionValue(i);if(l){const c=l.get();a[i]=Yy({min:c,max:c},this.constraints[i])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),it(i=>{if(!Gr(i,t,null))return;const l=this.getAxisMotionValue(i),{min:c,max:d}=this.constraints[i];l.set(xe(c,d,a[i]))})}addListeners(){if(!this.visualElement.current)return;ab.set(this.visualElement,this);const t=this.visualElement.current,s=Mt(t,"pointerdown",c=>{const{drag:d,dragListener:m=!0}=this.getProps();d&&m&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Ks(c)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),r();const i=Lt(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(it(m=>{const u=this.getAxisMotionValue(m);u&&(this.originPoint[m]+=c[m].translate,u.set(u.get()+c[m].translate))}),this.visualElement.render())});return()=>{i(),s(),o(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:i=tl,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:r,dragPropagation:a,dragConstraints:o,dragElastic:i,dragMomentum:l}}}function Gr(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function ib(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class lb extends gs{constructor(t){super(t),this.removeGroupControls=we,this.removeListeners=we,this.controls=new ob(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||we}unmount(){this.removeGroupControls(),this.removeListeners()}}const iu=e=>(t,s)=>{e&&fe.update(()=>e(t,s))};class cb extends gs{constructor(){super(...arguments),this.removePointerDownListener=we}onPointerDown(t){this.session=new cp(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pp(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:iu(t),onStart:iu(s),onMove:r,onEnd:(o,i)=>{delete this.session,a&&fe.update(()=>a(o,i))}}}mount(){this.removePointerDownListener=Mt(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function db(){const e=w.useContext(ec);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:r}=e,a=w.useId();return w.useEffect(()=>r(a),[]),!t&&s?[!1,()=>s&&s(a)]:[!0]}const oa={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lu(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Tn={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(te.test(e))e=parseFloat(e);else return e;const s=lu(e,t.target.x),r=lu(e,t.target.y);return`${s}% ${r}%`}},ub={correct:(e,{treeScale:t,projectionDelta:s})=>{const r=e,a=ms.parse(e);if(a.length>5)return r;const o=ms.createTransformer(e),i=typeof a[0]!="number"?1:0,l=s.x.scale*t.x,c=s.y.scale*t.y;a[0+i]/=l,a[1+i]/=c;const d=xe(l,c,.5);return typeof a[2+i]=="number"&&(a[2+i]/=d),typeof a[3+i]=="number"&&(a[3+i]/=d),o(a)}};class mb extends bt.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r,layoutId:a}=this.props,{projection:o}=t;v0(hb),o&&(s.group&&s.group.add(o),r&&r.register&&a&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),oa.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:r,drag:a,isPresent:o}=this.props,i=r.projection;return i&&(i.isPresent=o,a||t.layoutDependency!==s||s===void 0?i.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?i.promote():i.relegate()||fe.postRender(()=>{const l=i.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function gp(e){const[t,s]=db(),r=w.useContext(uf);return bt.createElement(mb,{...e,layoutGroup:r,switchLayoutGroup:w.useContext(mf),isPresent:t,safeToRemove:s})}const hb={borderRadius:{...Tn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tn,borderTopRightRadius:Tn,borderBottomLeftRadius:Tn,borderBottomRightRadius:Tn,boxShadow:ub},xp=["TopLeft","TopRight","BottomLeft","BottomRight"],fb=xp.length,cu=e=>typeof e=="string"?parseFloat(e):e,du=e=>typeof e=="number"||te.test(e);function pb(e,t,s,r,a,o){a?(e.opacity=xe(0,s.opacity!==void 0?s.opacity:1,gb(r)),e.opacityExit=xe(t.opacity!==void 0?t.opacity:1,0,xb(r))):o&&(e.opacity=xe(t.opacity!==void 0?t.opacity:1,s.opacity!==void 0?s.opacity:1,r));for(let i=0;i<fb;i++){const l=`border${xp[i]}Radius`;let c=uu(t,l),d=uu(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||du(c)===du(d)?(e[l]=Math.max(xe(cu(c),cu(d),r),0),(Pt.test(d)||Pt.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||s.rotate)&&(e.rotate=xe(t.rotate||0,s.rotate||0,r))}function uu(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const gb=vp(0,.5,_f),xb=vp(.5,.95,we);function vp(e,t,s){return r=>r<e?0:r>t?1:s(hr(e,t,r))}function mu(e,t){e.min=t.min,e.max=t.max}function ot(e,t){mu(e.x,t.x),mu(e.y,t.y)}function hu(e,t,s,r,a){return e-=t,e=Va(e,1/s,r),a!==void 0&&(e=Va(e,1/a,r)),e}function vb(e,t=0,s=1,r=.5,a,o=e,i=e){if(Pt.test(t)&&(t=parseFloat(t),t=xe(i.min,i.max,t/100)-i.min),typeof t!="number")return;let l=xe(o.min,o.max,r);e===o&&(l-=t),e.min=hu(e.min,t,s,l,a),e.max=hu(e.max,t,s,l,a)}function fu(e,t,[s,r,a],o,i){vb(e,t[s],t[r],t[a],t.scale,o,i)}const yb=["x","scaleX","originX"],bb=["y","scaleY","originY"];function pu(e,t,s,r){fu(e.x,t,yb,s?s.x:void 0,r?r.x:void 0),fu(e.y,t,bb,s?s.y:void 0,r?r.y:void 0)}function gu(e){return e.translate===0&&e.scale===1}function yp(e){return gu(e.x)&&gu(e.y)}function jb(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function bp(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function xu(e){return nt(e.x)/nt(e.y)}class Nb{constructor(){this.members=[]}add(t){vc(this.members,t),t.scheduleRender()}remove(t){if(yc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(a=>t===a);if(s===0)return!1;let r;for(let a=s;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(t,s){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,s&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:r}=t;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vu(e,t,s){let r="";const a=e.x.translate/t.x,o=e.y.translate/t.y;if((a||o)&&(r=`translate3d(${a}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),s){const{rotate:c,rotateX:d,rotateY:m}=s;c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),m&&(r+=`rotateY(${m}deg) `)}const i=e.x.scale*t.x,l=e.y.scale*t.y;return(i!==1||l!==1)&&(r+=`scale(${i}, ${l})`),r||"none"}const wb=(e,t)=>e.depth-t.depth;class Sb{constructor(){this.children=[],this.isDirty=!1}add(t){vc(this.children,t),this.isDirty=!0}remove(t){yc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(wb),this.isDirty=!1,this.children.forEach(t)}}function Cb(e,t){const s=performance.now(),r=({timestamp:a})=>{const o=a-s;o>=t&&(_t(r),e(o-t))};return fe.read(r,!0),()=>_t(r)}function kb(e){window.MotionDebug&&window.MotionDebug.record(e)}function Pb(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Eb(e,t,s){const r=Ke(e)?e:pn(e);return r.start(xc("",r,t,s)),r.animation}const yu=["","X","Y","Z"],Tb={visibility:"hidden"},bu=1e3;let Ab=0;const js={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function jp({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(i={},l=t==null?void 0:t()){this.id=Ab++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,js.totalNodes=js.resolvedTargetDeltas=js.recalculatedProjection=0,this.nodes.forEach(Db),this.nodes.forEach(Vb),this.nodes.forEach(Ob),this.nodes.forEach(Mb),kb(js)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Sb)}addEventListener(i,l){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new bc),this.eventHandlers.get(i).add(l)}notifyListeners(i,...l){const c=this.eventHandlers.get(i);c&&c.notify(...l)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Pb(i),this.instance=i;const{layoutId:c,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let u;const g=()=>this.root.updateBlockedByResize=!1;e(i,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=Cb(g,250),oa.hasAnimatedSinceResize&&(oa.hasAnimatedSinceResize=!1,this.nodes.forEach(Nu))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&m&&(c||d)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:g,hasRelativeTargetChanged:p,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||m.getDefaultTransition()||qb,{onLayoutAnimationStart:S,onLayoutAnimationComplete:x}=m.getProps(),y=!this.targetLayout||!bp(this.targetLayout,k)||p,f=!g&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||f||g&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,f);const v={...gc(P,"layout"),onPlay:S,onComplete:x};(m.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v)}else g||Nu(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,_t(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_b),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const u=this.path[m];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ju);return}this.isUpdating||this.nodes.forEach(Fb),this.isUpdating=!1,this.nodes.forEach($b),this.nodes.forEach(Rb),this.nodes.forEach(Lb),this.clearAllSnapshots();const l=performance.now();$e.delta=us(0,1e3/60,l-$e.timestamp),$e.timestamp=l,$e.isProcessing=!0,zo.update.process($e),zo.preRender.process($e),zo.render.process($e),$e.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Ib),this.sharedNodes.forEach(zb)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,fe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){fe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ce(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:i,isRoot:r(this.instance),offset:s(this.instance)})}resetTransform(){if(!a)return;const i=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!yp(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,m=d!==this.prevTransformTemplateValue;i&&(l||bs(this.latestValues)||m)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return i&&(c=this.removeTransform(c)),Gb(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return Ce();const l=i.measureViewportBox(),{scroll:c}=this.root;return c&&(Ht(l.x,c.offset.x),Ht(l.y,c.offset.y)),l}removeElementScroll(i){const l=Ce();ot(l,i);for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:m,options:u}=d;if(d!==this.root&&m&&u.layoutScroll){if(m.isRoot){ot(l,i);const{scroll:g}=this.root;g&&(Ht(l.x,-g.offset.x),Ht(l.y,-g.offset.y))}Ht(l.x,m.offset.x),Ht(l.y,m.offset.y)}}return l}applyTransform(i,l=!1){const c=Ce();ot(c,i);for(let d=0;d<this.path.length;d++){const m=this.path[d];!l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&en(c,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),bs(m.latestValues)&&en(c,m.latestValues)}return bs(this.latestValues)&&en(c,this.latestValues),c}removeTransform(i){const l=Ce();ot(l,i);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!bs(d.latestValues))continue;sl(d.latestValues)&&d.updateSnapshot();const m=Ce(),u=d.measurePageBox();ot(m,u),pu(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,m)}return bs(this.latestValues)&&pu(l,this.latestValues),l}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$e.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(i||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:g}=this.options;if(!(!this.layout||!(u||g))){if(this.resolvedRelativeTargetAt=$e.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ce(),this.relativeTargetOrigin=Ce(),Wn(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ot(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ce(),this.targetWithTransforms=Ce()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Hy(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ot(this.target,this.layout.layoutBox),hp(this.target,this.targetDelta)):ot(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ce(),this.relativeTargetOrigin=Ce(),Wn(this.relativeTargetOrigin,this.target,p.target),ot(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}js.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||sl(this.parent.latestValues)||mp(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===$e.timestamp&&(d=!1),d)return;const{layout:m,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||u))return;ot(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,p=this.treeScale.y;tb(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:k}=l;if(!k){this.projectionTransform&&(this.projectionDelta=Js(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Js(),this.projectionDeltaWithTransform=Js());const P=this.projectionTransform;Hn(this.projectionDelta,this.layoutCorrected,k,this.latestValues),this.projectionTransform=vu(this.projectionDelta,this.treeScale),(this.projectionTransform!==P||this.treeScale.x!==g||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k)),js.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(i,l=!1){const c=this.snapshot,d=c?c.latestValues:{},m={...this.latestValues},u=Js();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=Ce(),p=c?c.source:void 0,k=this.layout?this.layout.source:void 0,P=p!==k,S=this.getStack(),x=!S||S.members.length<=1,y=!!(P&&!x&&this.options.crossfade===!0&&!this.path.some(Ub));this.animationProgress=0;let f;this.mixTargetDelta=v=>{const R=v/1e3;wu(u.x,i.x,R),wu(u.y,i.y,R),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wn(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Bb(this.relativeTarget,this.relativeTargetOrigin,g,R),f&&jb(this.relativeTarget,f)&&(this.isProjectionDirty=!1),f||(f=Ce()),ot(f,this.relativeTarget)),P&&(this.animationValues=m,pb(m,d,this.latestValues,R,y,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(_t(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=fe.update(()=>{oa.hasAnimatedSinceResize=!0,this.currentAnimation=Eb(0,bu,{...i,onUpdate:l=>{this.mixTargetDelta(l),i.onUpdate&&i.onUpdate(l)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bu),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:m}=i;if(!(!l||!c||!d)){if(this!==i&&this.layout&&d&&Np(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Ce();const u=nt(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+u;const g=nt(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+g}ot(l,c),en(l,m),Hn(this.projectionDeltaWithTransform,this.layoutCorrected,l,m)}}registerSharedNode(i,l){this.sharedNodes.has(i)||this.sharedNodes.set(i,new Nb),this.sharedNodes.get(i).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:l}=this.options;return l?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:l}=this.options;return l?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetRotation(){const{visualElement:i}=this.options;if(!i)return;let l=!1;const{latestValues:c}=i;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const d={};for(let m=0;m<yu.length;m++){const u="rotate"+yu[m];c[u]&&(d[u]=c[u],i.setStaticValue(u,0))}i.render();for(const m in d)i.setStaticValue(m,d[m]);i.scheduleRender()}getProjectionStyles(i){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Tb;const d={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=aa(i==null?void 0:i.pointerEvents)||"",d.transform=m?m(this.latestValues,""):"none",d;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const P={};return this.options.layoutId&&(P.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,P.pointerEvents=aa(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!bs(this.latestValues)&&(P.transform=m?m({},""):"none",this.hasProjected=!1),P}const g=u.animationValues||u.latestValues;this.applyTransformsToTarget(),d.transform=vu(this.projectionDeltaWithTransform,this.treeScale,g),m&&(d.transform=m(g,d.transform));const{x:p,y:k}=this.projectionDelta;d.transformOrigin=`${p.origin*100}% ${k.origin*100}% 0`,u.animationValues?d.opacity=u===this?(c=(l=g.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:d.opacity=u===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const P in Ra){if(g[P]===void 0)continue;const{correct:S,applyTo:x}=Ra[P],y=d.transform==="none"?g[P]:S(g[P],u);if(x){const f=x.length;for(let v=0;v<f;v++)d[x[v]]=y}else d[P]=y}return this.options.layoutId&&(d.pointerEvents=u===this?aa(i==null?void 0:i.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var l;return(l=i.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(ju),this.root.sharedNodes.clear()}}}function Rb(e){e.updateLayout()}function Lb(e){var t;const s=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:o}=e.options,i=s.source!==e.layout.source;o==="size"?it(u=>{const g=i?s.measuredBox[u]:s.layoutBox[u],p=nt(g);g.min=r[u].min,g.max=g.min+p}):Np(o,s.layoutBox,r)&&it(u=>{const g=i?s.measuredBox[u]:s.layoutBox[u],p=nt(r[u]);g.max=g.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+p)});const l=Js();Hn(l,r,s.layoutBox);const c=Js();i?Hn(c,e.applyTransform(a,!0),s.measuredBox):Hn(c,r,s.layoutBox);const d=!yp(l);let m=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:g,layout:p}=u;if(g&&p){const k=Ce();Wn(k,s.layoutBox,g.layoutBox);const P=Ce();Wn(P,r,p.layoutBox),bp(k,P)||(m=!0),u.options.layoutRoot&&(e.relativeTarget=P,e.relativeTargetOrigin=k,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:s,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:m})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Db(e){js.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Mb(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Ib(e){e.clearSnapshot()}function ju(e){e.clearMeasurements()}function Fb(e){e.isLayoutDirty=!1}function $b(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Nu(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Vb(e){e.resolveTargetDelta()}function Ob(e){e.calcProjection()}function _b(e){e.resetRotation()}function zb(e){e.removeLeadSnapshot()}function wu(e,t,s){e.translate=xe(t.translate,0,s),e.scale=xe(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function Su(e,t,s,r){e.min=xe(t.min,s.min,r),e.max=xe(t.max,s.max,r)}function Bb(e,t,s,r){Su(e.x,t.x,s.x,r),Su(e.y,t.y,s.y,r)}function Ub(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const qb={duration:.45,ease:[.4,0,.1,1]},Cu=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),ku=Cu("applewebkit/")&&!Cu("chrome/")?Math.round:we;function Pu(e){e.min=ku(e.min),e.max=ku(e.max)}function Gb(e){Pu(e.x),Pu(e.y)}function Np(e,t,s){return e==="position"||e==="preserve-aspect"&&!el(xu(t),xu(s),.2)}const Hb=jp({attachResizeListener:(e,t)=>Lt(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zo={current:void 0},wp=jp({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Zo.current){const e=new Hb({});e.mount(window),e.setOptions({layoutScroll:!0}),Zo.current=e}return Zo.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Wb={pan:{Feature:cb},drag:{Feature:lb,ProjectionNode:wp,MeasureLayout:gp}},Xb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Qb(e){const t=Xb.exec(e);if(!t)return[,];const[,s,r]=t;return[s,r]}function rl(e,t,s=1){const[r,a]=Qb(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const i=o.trim();return ap(i)?parseFloat(i):i}else return Wi(a)?rl(a,t,s+1):a}function Yb(e,{...t},s){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:s};s&&(s={...s}),e.values.forEach(a=>{const o=a.get();if(!Wi(o))return;const i=rl(o,r);i&&a.set(i)});for(const a in t){const o=t[a];if(!Wi(o))continue;const i=rl(o,r);i&&(t[a]=i,s||(s={}),s[a]===void 0&&(s[a]=o))}return{target:t,transitionEnd:s}}const Kb=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Sp=e=>Kb.has(e),Zb=e=>Object.keys(e).some(Sp),Eu=e=>e===$s||e===te,Tu=(e,t)=>parseFloat(e.split(", ")[t]),Au=(e,t)=>(s,{transform:r})=>{if(r==="none"||!r)return 0;const a=r.match(/^matrix3d\((.+)\)$/);if(a)return Tu(a[1],t);{const o=r.match(/^matrix\((.+)\)$/);return o?Tu(o[1],e):0}},Jb=new Set(["x","y","z"]),ej=br.filter(e=>!Jb.has(e));function tj(e){const t=[];return ej.forEach(s=>{const r=e.getValue(s);r!==void 0&&(t.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),t.length&&e.render(),t}const gn={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Au(4,13),y:Au(5,14)};gn.translateX=gn.x;gn.translateY=gn.y;const sj=(e,t,s)=>{const r=t.measureViewportBox(),a=t.current,o=getComputedStyle(a),{display:i}=o,l={};i==="none"&&t.setStaticValue("display",e.display||"block"),s.forEach(d=>{l[d]=gn[d](r,o)}),t.render();const c=t.measureViewportBox();return s.forEach(d=>{const m=t.getValue(d);m&&m.jump(l[d]),e[d]=gn[d](c,o)}),e},nj=(e,t,s={},r={})=>{t={...t},r={...r};const a=Object.keys(t).filter(Sp);let o=[],i=!1;const l=[];if(a.forEach(c=>{const d=e.getValue(c);if(!e.hasValue(c))return;let m=s[c],u=En(m);const g=t[c];let p;if(Da(g)){const k=g.length,P=g[0]===null?1:0;m=g[P],u=En(m);for(let S=P;S<k&&g[S]!==null;S++)p?uc(En(g[S])===p):p=En(g[S])}else p=En(g);if(u!==p)if(Eu(u)&&Eu(p)){const k=d.get();typeof k=="string"&&d.set(parseFloat(k)),typeof g=="string"?t[c]=parseFloat(g):Array.isArray(g)&&p===te&&(t[c]=g.map(parseFloat))}else u!=null&&u.transform&&(p!=null&&p.transform)&&(m===0||g===0)?m===0?d.set(p.transform(m)):t[c]=u.transform(g):(i||(o=tj(e),i=!0),l.push(c),r[c]=r[c]!==void 0?r[c]:t[c],d.jump(g))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,d=sj(t,e,l);return o.length&&o.forEach(([m,u])=>{e.getValue(m).set(u)}),e.render(),ro&&c!==null&&window.scrollTo({top:c}),{target:d,transitionEnd:r}}else return{target:t,transitionEnd:r}};function rj(e,t,s,r){return Zb(t)?nj(e,t,s,r):{target:t,transitionEnd:r}}const aj=(e,t,s,r)=>{const a=Yb(e,t,r);return t=a.target,r=a.transitionEnd,rj(e,t,s,r)},al={current:null},Cp={current:!1};function oj(){if(Cp.current=!0,!!ro)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>al.current=e.matches;e.addListener(t),t()}else al.current=!1}function ij(e,t,s){const{willChange:r}=t;for(const a in t){const o=t[a],i=s[a];if(Ke(o))e.addValue(a,o),$a(r)&&r.add(a);else if(Ke(i))e.addValue(a,pn(o,{owner:e})),$a(r)&&r.remove(a);else if(i!==o)if(e.hasValue(a)){const l=e.getValue(a);!l.hasAnimated&&l.set(o)}else{const l=e.getStaticValue(a);e.addValue(a,pn(l!==void 0?l:o,{owner:e}))}}for(const a in s)t[a]===void 0&&e.removeValue(a);return t}const Ru=new WeakMap,kp=Object.keys(mr),lj=kp.length,Lu=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],cj=nc.length;class dj{constructor({parent:t,props:s,presenceContext:r,reducedMotionConfig:a,visualState:o},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>fe.render(this.render,!1,!0);const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=s,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=i,this.isControllingVariants=oo(s),this.isVariantNode=df(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(s,{});for(const u in m){const g=m[u];l[u]!==void 0&&Ke(g)&&(g.set(l[u],!1),$a(d)&&d.add(u))}}scrapeMotionValuesFromProps(t,s){return{}}mount(t){this.current=t,Ru.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),Cp.current||oj(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:al.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Ru.delete(this.current),this.projection&&this.projection.unmount(),_t(this.notifyUpdate),_t(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,s){const r=Fs.has(t),a=s.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&fe.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=s.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{a(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...s},r,a,o){let i,l;for(let c=0;c<lj;c++){const d=kp[c],{isEnabled:m,Feature:u,ProjectionNode:g,MeasureLayout:p}=mr[d];g&&(i=g),m(s)&&(!this.features[d]&&u&&(this.features[d]=new u(this)),p&&(l=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:d,drag:m,dragConstraints:u,layoutScroll:g,layoutRoot:p}=s;this.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!m||u&&Ks(u),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:o,layoutScroll:g,layoutRoot:p})}return l}updateFeatures(){for(const t in this.features){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ce()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}makeTargetAnimatable(t,s=!0){return this.makeTargetAnimatableFromInstance(t,this.props,s)}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<Lu.length;r++){const a=Lu[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o=t["on"+a];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=ij(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const s={};for(let r=0;r<cj;r++){const a=nc[r],o=this.props[a];(ur(o)||o===!1)&&(s[a]=o)}return s}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){s!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,s)),this.values.set(t,s),this.latestValues[t]=s.get()}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&s!==void 0&&(r=pn(s,{owner:this}),this.addValue(t,r)),r}readValue(t){var s;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var s;const{initial:r}=this.props,a=typeof r=="string"||typeof r=="object"?(s=dc(this.props,r))===null||s===void 0?void 0:s[t]:void 0;if(r&&a!==void 0)return a;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Ke(o)?o:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new bc),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class Pp extends dj{sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:r}){delete s[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:s,...r},{transformValues:a},o){let i=Py(r,t||{},this);if(a&&(s&&(s=a(s)),r&&(r=a(r)),i&&(i=a(i))),o){Cy(this,r,i);const l=aj(this,r,i,s);s=l.transitionEnd,r=l.target}return{transition:t,transitionEnd:s,...r}}}function uj(e){return window.getComputedStyle(e)}class mj extends Pp{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,s){if(Fs.has(s)){const r=pc(s);return r&&r.default||0}else{const r=uj(t),a=(pf(s)?r.getPropertyValue(s):r[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:s}){return fp(t,s)}build(t,s,r,a){ac(t,s,r,a.transformTemplate)}scrapeMotionValuesFromProps(t,s){return cc(t,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ke(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}renderInstance(t,s,r,a){jf(t,s,r,a)}}class hj extends Pp{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Fs.has(s)){const r=pc(s);return r&&r.default||0}return s=Nf.has(s)?s:tc(s),t.getAttribute(s)}measureInstanceViewportBox(){return Ce()}scrapeMotionValuesFromProps(t,s){return Sf(t,s)}build(t,s,r,a){ic(t,s,r,this.isSVGTag,a.transformTemplate)}renderInstance(t,s,r,a){wf(t,s,r,a)}mount(t){this.isSVGTag=lc(t.tagName),super.mount(t)}}const fj=(e,t)=>rc(e)?new hj(t,{enableHardwareAcceleration:!1}):new mj(t,{enableHardwareAcceleration:!0}),pj={layout:{ProjectionNode:wp,MeasureLayout:gp}},gj={...By,...lv,...Wb,...pj},Jo=g0((e,t)=>Q0(e,t,gj,fj));class xj{constructor(){this.notifications=[],this.nextId=1,this.container=null,this.init()}init(){document.getElementById("notification-container")?this.container=document.getElementById("notification-container"):(this.container=document.createElement("div"),this.container.id="notification-container",this.container.className="fixed top-4 right-4 z-50 space-y-2 max-w-sm",document.body.appendChild(this.container))}show(t,s="info",r=4e3){const a=this.nextId++,o={id:a,message:t,type:s,timestamp:Date.now()};return this.notifications.push(o),this.renderNotification(o),setTimeout(()=>{this.remove(a)},r),a}renderNotification(t){const s=document.createElement("div");s.id=`notification-${t.id}`,s.className="notification-item transform transition-all duration-300 ease-out opacity-0 translate-x-full";const r={success:"background-color: #10b981 !important; color: white !important; border: 2px solid #059669 !important;",error:"background-color: #ef4444 !important; color: white !important; border: 2px solid #dc2626 !important;",warning:"background-color: #eab308 !important; color: black !important; border: 2px solid #ca8a04 !important;",info:"background-color: #3b82f6 !important; color: white !important; border: 2px solid #2563eb !important;",achievement:"background-color: #8b5cf6 !important; color: white !important; border: 2px solid #7c3aed !important;"};s.innerHTML=`
      <div class="rounded-lg shadow-lg p-4 flex items-center justify-between" style="${r[t.type]}">
        <div class="flex items-center space-x-3">
          <span class="text-xl">${this.getIcon(t.type)}</span>
          <p class="font-medium">${t.message}</p>
        </div>
        <button onclick="window.notificationService.remove(${t.id})" class="text-white hover:text-gray-200 ml-2">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
    `,this.container.appendChild(s),setTimeout(()=>{s.classList.remove("opacity-0","translate-x-full")},10)}getIcon(t){const s={success:"",error:"",warning:"",info:"",achievement:""};return s[t]||s.info}remove(t){const s=document.getElementById(`notification-${t}`);s&&(s.classList.add("opacity-0","translate-x-full"),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},300)),this.notifications=this.notifications.filter(r=>r.id!==t)}success(t,s){return this.show(t,"success",s)}error(t,s){return this.show(t,"error",s)}warning(t,s){return this.show(t,"warning",s)}info(t,s){return this.show(t,"info",s)}achievement(t,s){return this.show(t,"achievement",s||6e3)}clear(){this.notifications.forEach(t=>{this.remove(t.id)})}showAchievement(t){const s=` ${t.title}: ${t.description}`;return this.achievement(s,8e3)}showLevelUp(t){const s=` Parabns! Voc chegou ao nvel ${t}!`;return this.achievement(s,6e3)}showStreak(t){const s=` Incrvel! Streak de ${t} dias!`;return this.success(s,5e3)}}const Q=new xj;window.notificationService=Q;const se={save:(e,t)=>{try{return localStorage.setItem(e,JSON.stringify(t)),{success:!0}}catch(s){return console.error("Erro ao salvar dados:",s),{success:!1,error:s.message}}},load:e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.error("Erro ao carregar dados:",t),null}},remove:e=>{try{return localStorage.removeItem(e),{success:!0}}catch(t){return console.error("Erro ao remover dados:",t),{success:!1,error:t.message}}},clear:()=>{try{return localStorage.clear(),{success:!0}}catch(e){return console.error("Erro ao limpar dados:",e),{success:!1,error:e.message}}},hasData:e=>localStorage.getItem(e)!==null},oe={USER:"yufinUser",SESSION:"yufinSession",PROGRESS:"yufinProgress",SETTINGS:"yufinSettings",ACHIEVEMENTS:"yufinAchievements",STREAK:"yufinStreak",DAILY_GOALS:"yufinDailyGoals",ANALYTICS:"yufinAnalytics",CACHE:"yufinCache",PREFERENCES:"yufinPreferences",CURRENT_MODULE:"yufinCurrentModule"},Hr="yufin_dev_mode_enabled";class vj{constructor(){this.isEnabled=this.isDevModeEnabled()}checkAdminStatus(t){var r;return t?["admin@yufin.com","dev@yufin.com","test@yufin.com"].includes((r=t.email)==null?void 0:r.toLowerCase()):!1}enableDevMode(t){return this.checkAdminStatus(t)?(localStorage.setItem(Hr,"true"),this.isEnabled=!0,console.log(" Modo Dev ATIVADO para:",t.email),this.logAction("DEV_MODE_ENABLED",{userId:t.id,email:t.email},t),!0):(console.warn(" Acesso negado ao Modo Dev - usurio no autorizado"),!1)}disableDevMode(t){return localStorage.setItem(Hr,"false"),this.isEnabled=!1,console.log(" Modo Dev DESATIVADO para:",t.email),this.logAction("DEV_MODE_DISABLED",{userId:t.id,email:t.email},t),!0}toggleDevMode(t){return this.checkAdminStatus(t)?this.isEnabled?this.disableDevMode(t):this.enableDevMode(t):(console.warn(" Acesso negado ao Modo Dev - usurio no autorizado"),!1)}isDevModeEnabled(){const s=localStorage.getItem(Hr)==="true";return this.isEnabled=s,s}logAction(t,s,r){const a={timestamp:new Date().toISOString(),action:t,userId:r==null?void 0:r.id,userEmail:r==null?void 0:r.email,data:s,devMode:!0};console.log(" [DEV MODE LOG]",a);const o=JSON.parse(localStorage.getItem("yufin_dev_logs")||"[]");o.push(a),o.length>50&&o.splice(0,o.length-50),localStorage.setItem("yufin_dev_logs",JSON.stringify(o))}clearLogs(){localStorage.removeItem("yufin_dev_logs"),console.log(" Logs do Modo Dev limpos")}getLogs(){return JSON.parse(localStorage.getItem("yufin_dev_logs")||"[]")}reset(){localStorage.removeItem(Hr),this.clearLogs(),this.isEnabled=!1,console.log(" Modo Dev resetado completamente")}}const Se=new vj,Du=({user:e,setUser:t,onNavigate:s,currentModule:r=1})=>{var Y,B,q,M,U,K,G,ee,Z;const[a,o]=w.useState(null),[i,l]=w.useState(!0),[c,d]=w.useState(r),[m,u]=w.useState(0),[g,p]=w.useState(null),[k,P]=w.useState(!1),S=w.useRef(null),[x,y]=w.useState([]);w.useEffect(()=>{R(),f()},[e]),w.useEffect(()=>{const _=()=>{console.log(" Modo Dev alterado, recarregando progresso..."),R()};return window.addEventListener("devModeChanged",_),()=>{window.removeEventListener("devModeChanged",_)}},[]),w.useEffect(()=>{a&&!i&&N()},[a,i]),w.useEffect(()=>{d(r)},[r]),w.useEffect(()=>{if(a&&S.current){const _=a.progress.progressPercentage;console.log(" Iniciando animao da barra:",{targetProgress:_});const W=2e3,ae=Date.now(),ie=()=>{const Me=Date.now()-ae,Sr=Math.min(Me/W,1),Ap=1-Math.pow(1-Sr,3),uo=Math.round(_*Ap);u(uo),S.current&&S.current.style.setProperty("--target-width",`${uo}%`),Sr<1?requestAnimationFrame(ie):console.log(" Animao concluda:",{finalValue:uo})};setTimeout(()=>{ie()},300)}},[a]);const f=async()=>{try{const _=await de("/classes");y(_)}catch(_){console.error("Erro ao carregar turmas:",_)}},v=_=>{const W=x.find(ae=>ae.id===_);return W?W.name:"Turma no encontrada"},R=async()=>{var _;try{l(!0),console.log(" Carregando progresso da srie...");const W=Se.isDevModeEnabled(),ae=W?`/users/${e.id}/grade-progress?devMode=true`:`/users/${e.id}/grade-progress`,ie=await de(ae);if(console.log(" Progresso recebido:",ie),W&&((_=ie.progress)!=null&&_.byModule)&&typeof ie.progress.byModule=="object"&&!Array.isArray(ie.progress.byModule)){const Me=ie.progress.byModule[e.gradeId];Me&&(ie.progress.byModule=Me,console.log(" [DEV MODE] Usando dados da srie:",e.gradeId))}o(ie)}catch(W){console.error("Erro ao carregar progresso:",W),Q.error("Erro ao carregar progresso da srie")}finally{l(!1)}},E=()=>{if(!a||!a.progress||!a.progress.hasContent)return!1;const{byModule:_}=a.progress;return Object.values(_).every(W=>W&&W.completed===W.total&&W.total>0)},N=async()=>{try{const _=await de(`/users/${e.id}/grade-progression-status`);p(_)}catch(_){console.error("Erro ao carregar status da progresso:",_)}},h=async()=>{if(Se.isDevModeEnabled()){console.log(" [DEV MODE] Solicitando progresso real via backend");try{P(!0);const W=await Oe(`/users/${e.id}/request-grade-progression`,{devMode:!0});if(W.devMode){const ae={...e,gradeId:W.nextGrade};t(ae),await R(),Se.logAction("GRADE_PROGRESSION_DEV",{userId:e.id,fromGrade:e.gradeId,toGrade:W.nextGrade,devModeBypass:!0},e),Q.success(W.message)}}catch(W){console.error("Erro na progresso em modo dev:",W),Q.error("Erro ao navegar para prxima srie")}finally{P(!1)}return}try{P(!0);const W=await Oe(`/users/${e.id}/request-grade-progression`);Q.success(W.message),await N()}catch(W){console.error("Erro ao solicitar progresso:",W),Q.error(W.message||"Erro ao solicitar progresso")}finally{P(!1)}},j=async()=>{if(Se.isDevModeEnabled()){console.log(" [DEV MODE] Solicitando retorno real via backend");try{const W=await Oe(`/users/${e.id}/return-to-previous-grade`,{devMode:!0});if(W.devMode){const ae={...e,gradeId:W.previousGrade};t(ae),await R(),Se.logAction("GRADE_RETURN_DEV",{userId:e.id,fromGrade:e.gradeId,toGrade:W.previousGrade,devModeBypass:!0},e),Q.success(W.message)}}catch(W){console.error("Erro no retorno em modo dev:",W),Q.error("Erro ao retornar ao ano anterior")}return}try{const W=await Oe(`/users/${e.id}/return-to-previous-grade`);Q.success(W.message);const ae={...e};ae.gradeId=W.previousGrade,t(ae),await R(),await N()}catch(W){console.error("Erro ao voltar ao ano anterior:",W),Q.error(W.message||"Erro ao voltar ao ano anterior")}},C=async _=>{try{await os(`/users/${e.id}/current-module`,{currentModule:_}),d(_),se.save(oe.CURRENT_MODULE,_);const W={...e,currentModule:_};t(W)}catch(W){console.error("Erro ao atualizar mdulo:",W),Q.error("Erro ao atualizar mdulo")}},b=_=>{console.log(" Clique na lio:",_.title),console.log("  - canAccess:",_.canAccess),console.log("  - isCompleted:",_.isCompleted),console.log("  - Mdulo:",_.module,"Ordem:",_.order);const W=Se.isDevModeEnabled();if(W&&Se.logAction("LESSON_ACCESS",{lessonId:_._id,lessonTitle:_.title,module:_.module,order:_.order,canAccess:_.canAccess,isCompleted:_.isCompleted,devModeBypass:!0},e),!W&&!_.canAccess){console.log(" Lio bloqueada!"),Q.warning("Complete as lies anteriores primeiro!");return}console.log(" Lio liberada, navegando..."),s("lesson",{lessonId:_._id,currentModule:c,lessonModule:_.module})},T=_=>{const W={"6 Ano":{1:"O que  dinheiro?",2:"Contas Simples",3:"Consumo Consciente",4:"Projeto Prtico"},"7 Ano":{1:"Oramento e Controle",2:"Consumo e Publicidade",3:"Introduo a Investimentos",4:"Segurana Financeira"},"8 Ano":{1:"Oramento Familiar Avanado",2:"Crdito e Consumo",3:"Investimentos Bsicos",4:"Impacto e Segurana"},"9 Ano":{1:"Finanas Pessoais",2:"Empreendedorismo Bsico",3:"Introduo  Economia",4:"tica e Segurana"},"1 Ano EM":{1:"Renda e Oramento",2:"Investimentos e Poupana",3:"Tributao Bsica",4:"Segurana e Conscincia"},"2 Ano EM":{1:"Economia do Dia a Dia",2:"Mercado Financeiro",3:"Proteo e Risco",4:"Tecnologia e Inovao"},"3 Ano EM":{1:"Projeto de Vida Financeiro",2:"Economia Global",3:"Inovao e Futuro",4:"Legado e Cidadania Financeira"}};return(W[e.gradeId]||W["6 Ano"])[_]||`Mdulo ${_}`},A=_=>{if(_.title&&_.title.toLowerCase().includes("reviso e celebrao"))return"Revise tudo que aprendeu, celebre suas conquistas e prepare-se para novos desafios";const W={"6 Ano":{1:{1:"Descubra o que  dinheiro e como ele funciona no nosso dia a dia",2:"Aprenda a contar e calcular com moedas e notas",3:"Entenda como o dinheiro  usado para comprar coisas"},2:{1:"Aprenda a fazer contas simples de adio e subtrao com dinheiro",2:"Pratique clculos bsicos com preos e troco",3:"Desenvolva habilidades matemticas fundamentais"},3:{1:"Entenda a diferena entre necessidades e desejos",2:"Aprenda a fazer escolhas inteligentes de consumo",3:"Desenvolva conscincia sobre gastos e economia"},4:{1:"Aplique tudo que aprendeu em um projeto prtico",2:"Crie seu primeiro oramento pessoal",3:"Celebre suas conquistas e planeje o futuro"}},"7 Ano":{1:{1:"Aprenda a criar e gerenciar oramentos pessoais",2:"Controle seus gastos e receitas de forma organizada",3:"Desenvolva disciplina financeira bsica"},2:{1:"Entenda como a publicidade influencia suas compras",2:"Aprenda a resistir a impulsos de consumo",3:"Torne-se um consumidor mais consciente"},3:{1:"Descubra o que so investimentos e como funcionam",2:"Aprenda sobre poupana e rendimento",3:"Planeje seu futuro financeiro"},4:{1:"Proteja-se contra fraudes e golpes financeiros",2:"Aprenda sobre seguros e proteo",3:"Mantenha sua segurana financeira"}},"8 Ano":{1:{1:"Crie e gerencie oramentos familiares completos",2:"Planeje finanas pessoais avanadas",3:"Desenvolva estratgias de planejamento financeiro"},2:{1:"Entenda como funciona o crdito e financiamento",2:"Aprenda sobre juros e parcelamentos",3:"Tome decises conscientes sobre emprstimos"},3:{1:"Explore diferentes tipos de investimentos",2:"Aprenda sobre renda fixa e varivel",3:"Construa uma carteira de investimentos"},4:{1:"Entenda o impacto social e ambiental do dinheiro",2:"Aprenda sobre investimento responsvel",3:"Proteja-se contra riscos financeiros"}},"9 Ano":{1:{1:"Domine conceitos avanados de finanas pessoais",2:"Planeje objetivos financeiros de longo prazo",3:"Desenvolva estratgias de crescimento patrimonial"},2:{1:"Descubra o mundo do empreendedorismo",2:"Aprenda a criar e gerenciar um negcio",3:"Desenvolva habilidades de liderana financeira"},3:{1:"Entenda como a economia afeta suas finanas",2:"Aprenda sobre inflao e polticas econmicas",3:"Compreenda o contexto macroeconmico"},4:{1:"Desenvolva tica e responsabilidade financeira",2:"Aprenda sobre investimento sustentvel",3:"Proteja-se contra riscos e fraudes avanadas"}},"1 Ano EM":{1:{1:"Gerencie renda e despesas de forma profissional",2:"Planeje oramentos complexos e detalhados",3:"Desenvolva controle financeiro avanado"},2:{1:"Explore estratgias avanadas de investimento",2:"Aprenda sobre diversificao de carteira",3:"Maximize retornos com gesto de risco"},3:{1:"Entenda o sistema tributrio brasileiro",2:"Aprenda sobre impostos e declaraes",3:"Otimize sua situao fiscal"},4:{1:"Mantenha segurana em transaes digitais",2:"Desenvolva conscincia sobre privacidade financeira",3:"Proteja-se contra cibercrimes financeiros"}},"2 Ano EM":{1:{1:"Analise indicadores econmicos do dia a dia",2:"Entenda como a economia impacta suas decises",3:"Desenvolva viso macroeconmica"},2:{1:"Explore o funcionamento do mercado financeiro",2:"Aprenda sobre bolsa de valores e derivativos",3:"Desenvolva estratgias de trading"},3:{1:"Proteja-se contra riscos financeiros complexos",2:"Aprenda sobre hedge e proteo de carteira",3:"Desenvolva gesto avanada de risco"},4:{1:"Explore fintechs e inovaes financeiras",2:"Aprenda sobre blockchain e criptomoedas",3:"Prepare-se para o futuro das finanas"}},"3 Ano EM":{1:{1:"Planeje seu projeto de vida financeiro completo",2:"Defina metas de longo prazo e estratgias",3:"Prepare-se para a vida adulta financeira"},2:{1:"Entenda a economia global e seus impactos",2:"Aprenda sobre investimentos internacionais",3:"Desenvolva viso global das finanas"},3:{1:"Explore inovaes e tendncias futuras",2:"Prepare-se para mudanas no mercado financeiro",3:"Desenvolva adaptabilidade financeira"},4:{1:"Construa um legado financeiro responsvel",2:"Desenvolva cidadania financeira ativa",3:"Contribua para uma sociedade financeiramente saudvel"}}};return((W[_.gradeId]||W["6 Ano"])[_.module]||{})[_.order]||_.description||"Aprenda conceitos importantes de educao financeira"},$=_=>{if(_.title&&_.title.toLowerCase().includes("reviso e celebrao"))return[" celebrao"," reviso"," conquistas"," futuro"];const W={"6 Ano":{1:["dinheiro","bsico","introduo"],2:["matemtica","clculos","prtica"],3:["consumo","conscincia","escolhas"],4:["projeto","aplicao","celebrao"]},"7 Ano":{1:["oramento","controle","organizao"],2:["publicidade","consumo","conscincia"],3:["investimentos","poupana","futuro"],4:["segurana","proteo","preveno"]},"8 Ano":{1:["oramento","famlia","planejamento"],2:["crdito","juros","financiamento"],3:["investimentos","carteira","risco"],4:["impacto","sustentabilidade","responsabilidade"]},"9 Ano":{1:["finanas","pessoais","avanado"],2:["empreendedorismo","negcios","liderana"],3:["economia","inflao","polticas"],4:["tica","sustentabilidade","responsabilidade"]},"1 Ano EM":{1:["renda","oramento","profissional"],2:["investimentos","diversificao","retorno"],3:["tributao","impostos","otimizao"],4:["segurana","digital","privacidade"]},"2 Ano EM":{1:["economia","indicadores","macro"],2:["mercado","financeiro","trading"],3:["risco","proteo","hedge"],4:["tecnologia","fintech","inovao"]},"3 Ano EM":{1:["projeto","vida","planejamento"],2:["global","internacional","economia"],3:["futuro","inovao","adaptabilidade"],4:["legado","cidadania","responsabilidade"]}},ie=(W[_.gradeId]||W["6 Ano"])[_.module]||["educao financeira"],Sr={"budget-distribution":["oramento","distribuio"],comparison:["comparao","anlise"],calculation:["clculo","matemtica"],simulation:["simulao","prtica"],project:["projeto","aplicao"]}[_.type]||[];return[...ie,...Sr]},D=_=>_<=3?"bg-green-500":_<=6?"bg-yellow-500":"bg-red-500",V=_=>{if(a&&a.grade&&a.grade.achievements){const ie=a.grade.achievements.find(Me=>Me.id===`module_${_}_complete`);if(ie)return{title:`${ie.icon} ${ie.title}`,description:ie.description,reward:`${ie.rewards.yuCoins} YCoins + ${ie.rewards.xp} XP`,icon:ie.icon}}const W={"6 Ano":{1:{title:" Mestre do Dinheiro",description:"Complete todas as lies do mdulo de introduo",reward:"50 YCoins + 100 XP",icon:""},2:{title:" Calculadora Humana",description:"Domine a matemtica financeira bsica",reward:"75 YCoins + 150 XP",icon:""},3:{title:" Conscincia Total",description:"Desenvolva conscincia financeira completa",reward:"100 YCoins + 200 XP",icon:""},4:{title:" Projetista Financeiro",description:"Execute projetos prticos com sucesso",reward:"150 YCoins + 300 XP",icon:""}},"7 Ano":{1:{title:" Gestor de Oramento",description:"Complete todas as lies do mdulo de oramento",reward:"75 YCoins + 150 XP",icon:""},2:{title:" Consumidor Inteligente",description:"Domine o consumo consciente e inteligente",reward:"100 YCoins + 200 XP",icon:""},3:{title:" Investidor Iniciante",description:"Desenvolva conhecimentos sobre poupana e investimentos",reward:"125 YCoins + 250 XP",icon:""},4:{title:" Protetor Financeiro",description:"Execute projetos de segurana financeira com sucesso",reward:"175 YCoins + 350 XP",icon:""}}};return(W[e.gradeId]||W["6 Ano"])[_]};if(i)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500"})});if(!a)return n.jsx("div",{className:"text-center p-8",children:n.jsx("p",{className:"text-gray-600",children:"Nenhuma srie atribuda. Entre em contato com sua escola."})});const{grade:z,progress:I}=a,F=V(c),L=I.byModule[c],O=L&&L.completed===L.total&&L.total>0,H=`module_${c}_complete`,ne=(B=(Y=e.progress)==null?void 0:Y.achievements)==null?void 0:B.includes(H);return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50",children:[n.jsx("div",{className:"fixed top-0 left-0 right-0 w-full bg-white shadow-lg z-50 rounded-b-xl",style:{borderBottom:"3px solid #EE9116"},children:n.jsxs("div",{className:"flex justify-between items-center h-16 lg:h-18 xl:h-20 px-6 lg:px-8 xl:px-12 w-full",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-lg",children:""})}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-base font-semibold text-gray-800",children:e.name}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-xs text-gray-500",children:["Nvel ",((q=e.progress)==null?void 0:q.level)||1]}),n.jsxs("span",{className:"text-xs text-primary font-medium",children:[" ",((M=e.progress)==null?void 0:M.totalXp)||((U=e.progress)==null?void 0:U.xp)||0,"/",((K=e.progress)==null?void 0:K.xpToNextLevel)||100," XP"]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-lg px-4 py-2 border-2 border-yellow-300 shadow-sm",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-bold",style:{color:"#EE9116"},children:((G=e.progress)==null?void 0:G.yuCoins)||0}),n.jsx("div",{className:"text-xs text-gray-600",children:"YCoins"})]})]})}),n.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-lg px-4 py-2 border-2 border-yellow-300 shadow-sm",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-bold",style:{color:"#EE9116"},children:((ee=e.progress)==null?void 0:ee.streak)||0}),n.jsx("div",{className:"text-xs text-gray-600",children:"Dias"})]})]})})]})]})}),n.jsxs("div",{className:"pt-0",children:[Se.isDevModeEnabled()&&n.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-40 bg-red-500 text-white text-sm px-4 py-2 rounded-lg shadow-lg animate-pulse",children:" MODO DEV ATIVO - Todas as sries e lies liberadas"}),n.jsx("div",{className:"mt-12 h-64 pb-20"}),n.jsx("div",{className:"max-w-6xl lg:max-w-7xl xl:max-w-8xl 2xl:max-w-9xl mx-auto p-6 lg:p-8 xl:p-12",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-lg border-2 border-orange-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-orange-600",children:z.name}),n.jsx("p",{className:"text-gray-600",children:z.description})]}),n.jsx("div",{className:"text-right",children:I.hasContent?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[I.totalCompleted,"/",I.totalLessons]}),n.jsx("div",{className:"text-gray-600",children:"lies concludas"})]}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"Em breve"})})})]}),n.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-700",children:e.classId?`Turma: ${v(e.classId)}`:"Sem turma atribuda"}),n.jsxs("div",{className:"text-xs text-gray-500",children:[e.gradeId,"  ",e.classId?"Turma ativa":"Aguardando atribuio"]})]})]}),!e.classId&&n.jsx("div",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium",children:" Aguardando"})]})}),I.hasContent?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 shadow-inner",children:n.jsx("div",{ref:S,className:"progress-fill-animated rounded-full h-4 shadow-lg",style:{width:`${m}%`,"--target-width":`${m}%`,background:"linear-gradient(90deg, #EE9116, #FFB300, #FF8F00, #EE9116)",backgroundSize:"200% 100%"}})}),n.jsxs("div",{className:"text-center mt-3",children:[n.jsxs("span",{className:"text-xl font-bold text-orange-600",children:[m,"%"]}),n.jsx("span",{className:"text-gray-600 ml-1",children:" completo"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 shadow-inner",children:n.jsx("div",{className:"w-full bg-gray-300 rounded-full h-4"})}),n.jsx("div",{className:"text-center mt-3",children:n.jsx("span",{className:"text-xl font-bold text-orange-600",children:"Contedo em desenvolvimento"})})]})]})}),n.jsxs("div",{className:"max-w-6xl lg:max-w-7xl xl:max-w-8xl 2xl:max-w-9xl mx-auto p-6 lg:p-8 xl:p-12",children:[n.jsxs("div",{className:"flex space-x-3 mb-8 overflow-x-auto",children:[[1,2,3,4].map(_=>{const W=I.byModule[_],ae=W&&W.completed===W.total&&W.total>0;return n.jsx("button",{onClick:()=>C(_),className:`flex-shrink-0 px-6 py-4 rounded-xl font-semibold transition-all shadow-lg ${c===_?"bg-white text-orange-600 border-2 border-orange-500 transform scale-105":ae?"bg-green-500 text-white":"bg-white text-gray-700 hover:bg-yellow-50 border-2 border-yellow-200"}`,children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-lg font-bold",children:["Mdulo ",_]}),n.jsx("div",{className:"text-sm opacity-90",children:W?`${W.completed}/${W.total}`:"0/0"})]})},_)}),(E()||Se.isDevModeEnabled())&&n.jsx("div",{className:"flex-shrink-0",children:(Z=g==null?void 0:g.progression)!=null&&Z.requested&&!Se.isDevModeEnabled()?n.jsx("div",{className:"px-6 py-4 rounded-xl bg-blue-100 border-2 border-blue-300 shadow-lg",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold text-blue-700",children:""}),n.jsx("div",{className:"text-sm text-blue-600",children:"Aguardando"}),n.jsx("div",{className:"text-xs text-blue-500",children:"Autorizao"})]})}):n.jsx("button",{onClick:h,disabled:k,className:`px-6 py-4 rounded-xl font-semibold transition-all shadow-lg transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed ${Se.isDevModeEnabled()?"bg-gradient-to-b from-purple-500 to-purple-600 text-white hover:from-purple-600 hover:to-purple-700":"bg-gradient-to-b from-primary to-secondary text-white hover:from-primary-dark hover:to-secondary-dark"}`,children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:Se.isDevModeEnabled()?"":""}),n.jsx("div",{className:"text-sm",children:"Prximo"}),n.jsx("div",{className:"text-xs",children:"Ano"})]})})}),(e.gradeId!=="6 Ano"||Se.isDevModeEnabled())&&n.jsx("div",{className:"flex-shrink-0",children:n.jsx("button",{onClick:j,className:`px-6 py-4 rounded-xl font-semibold transition-all shadow-lg transform hover:scale-105 ${Se.isDevModeEnabled()?"bg-gradient-to-b from-purple-500 to-purple-600 text-white hover:from-purple-600 hover:to-purple-700":"bg-gradient-to-b from-primary to-secondary text-white hover:from-primary-dark hover:to-secondary-dark"}`,children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:Se.isDevModeEnabled()?"":""}),n.jsx("div",{className:"text-sm",children:"Ano"}),n.jsx("div",{className:"text-xs",children:"Anterior"})]})})})]}),n.jsxs(Jo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[n.jsxs("h3",{className:"text-3xl font-bold text-gray-800 mb-2 flex items-center",children:[n.jsx("span",{className:"mr-3 text-4xl",children:""}),T(c)]}),n.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-yellow-400 to-orange-500 rounded"})]},c),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-6",children:[L&&L.lessons?L.lessons.map((_,W)=>{const ae=Se.isDevModeEnabled(),ie=ae||_.canAccess;return console.log(` Renderizando lio ${W+1}:`,{title:_.title,canAccess:_.canAccess,devModeAccess:ie,isCompleted:_.isCompleted,module:_.module,order:_.order,id:_.id}),n.jsx(Jo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:W*.1},className:`relative bg-white rounded-xl shadow-lg border-2 transition-all cursor-pointer transform hover:scale-105 h-80 hover:shadow-2xl ${_.isCompleted?"border-green-500 shadow-green-200":ie?ae&&!_.canAccess?"border-purple-300 hover:border-purple-400 shadow-purple-200":"border-yellow-300 hover:border-orange-400 shadow-yellow-200":"border-gray-300 opacity-60"}`,onClick:()=>b(_),children:n.jsxs("div",{className:"p-6 flex flex-col h-full",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",style:{height:"3rem"},children:[n.jsx("h4",{className:"font-bold text-gray-800 text-lg flex-1 pr-2 leading-tight",style:{display:"flex",alignItems:"center",height:"100%"},children:_.title}),n.jsx("div",{className:`w-3 h-3 rounded-full flex-shrink-0 ${D(_.difficulty)}`,style:{marginTop:"0.5rem"}})]}),n.jsx("div",{className:"mb-4",style:{height:"3rem",display:"flex",alignItems:"flex-start"},children:n.jsx("p",{className:"text-gray-600 text-sm leading-tight",style:{lineHeight:"1.4rem"},children:A(_)})}),n.jsx("div",{className:"mb-4",style:{height:"2.5rem",display:"flex",alignItems:"center"},children:n.jsx("div",{className:"flex flex-wrap gap-1",children:$(_).length>0?$(_).slice(0,2).map(Me=>n.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:Me},Me)):n.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs font-medium",children:"Sem tags"})})}),n.jsx("div",{className:"mb-4",style:{height:"2rem",display:"flex",alignItems:"center"},children:n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 w-full",children:[n.jsxs("span",{children:[" ",_.estimatedTime," min"]}),n.jsxs("span",{children:[" ",_.order,"/12"]})]})}),n.jsx("div",{className:"flex-grow"}),n.jsx("button",{className:`w-full py-3 px-4 rounded-lg font-semibold transition-colors ${ie?_.isCompleted?"bg-green-500 text-white hover:bg-green-600":ae&&!_.canAccess?"bg-purple-600 text-white hover:bg-purple-700":"bg-orange-600 text-white hover:bg-orange-700":"bg-orange-400 text-white cursor-not-allowed"}`,style:{backgroundColor:ie?_.isCompleted?"#10b981":ae&&!_.canAccess?"#7c3aed":"#ea580c":"#fb923c",color:"white",height:"3rem"},children:ie?_.isCompleted?"Revisar":ae&&!_.canAccess?" Dev":"Comear":"Bloqueado"})]})},_.id)}):n.jsx("div",{className:"col-span-full text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"Nenhuma lio disponvel para este mdulo."})}),n.jsx(Jo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:`relative bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl shadow-lg border-2 transition-all hover:shadow-2xl ${O?"border-yellow-400 shadow-yellow-200":"border-gray-300"}`,children:n.jsxs("div",{className:"p-6 text-white",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("div",{className:"text-4xl mb-2",children:F.icon}),n.jsx("h4",{className:"font-bold text-lg mb-2",children:F.title}),n.jsx("p",{className:"text-purple-100 text-sm mb-4",children:F.description})]}),n.jsx("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 mb-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm text-purple-600 font-semibold",children:"Recompensa"}),n.jsx("div",{className:"font-bold text-purple-900 !important",style:{color:"#581c87"},children:F.reward})]})}),n.jsx("div",{className:"text-center",children:O?n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx("span",{className:"text-2xl",children:""}),n.jsx("span",{className:"font-bold text-white",children:ne?"Conquistado!":"Mdulo Completo!"})]}):n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm text-purple-100 mb-2",children:"Progresso"}),n.jsx("div",{className:"font-bold text-white",children:L?`${L.completed}/${L.total}`:"0/0"})]})})]})})]}),n.jsx("div",{className:"mt-12 h-64 pb-20"})]})]})]})},je=({title:e,timeSpent:t,onExit:s,children:r,icon:a,reviewMode:o})=>n.jsxs("div",{className:"h-screen lesson-background flex flex-col font-sans",children:[n.jsx("div",{className:"bg-white/90 backdrop-blur-md p-4 shadow-xl border-b-4 border-primary-dark rounded-b-3xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{onClick:s,className:"text-gray-600 hover:text-primary transition text-2xl font-bold px-2 py-1 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Sair da lio",children:""}),n.jsxs("div",{className:"flex items-center gap-2",children:[a&&n.jsx("span",{className:"text-3xl",children:a}),n.jsx("h1",{className:"text-2xl lg:text-3xl xl:text-4xl font-yufin font-bold text-primary drop-shadow-sm tracking-tight",children:e})]}),n.jsxs("div",{className:"text-sm text-gray-500 font-semibold min-w-[48px] text-right font-sans",children:[t,"s"]})]})}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-6 lg:p-8 xl:p-12 pb-20 lesson-content-background",children:n.jsxs("div",{className:"bg-white/95 rounded-2xl shadow-2xl border-2 border-primary/20 p-6 lg:p-8 xl:p-12 max-w-2xl lg:max-w-4xl xl:max-w-5xl 2xl:max-w-6xl w-full animate-fade-in font-sans transition-all duration-300 overflow-y-auto",children:[o&&n.jsxs("div",{className:"mb-4 p-3 rounded-xl bg-yellow-50 border border-yellow-300 text-yellow-800 text-center font-bold flex items-center justify-center gap-2 animate-fadeIn",children:[n.jsx("span",{className:"text-xl",children:""})," Modo Reviso Ativo  Nenhuma recompensa ser computada"]}),r]})})]}),yj=({lesson:e,onComplete:t,onExit:s})=>{var S,x,y,f,v,R,E;const[r,a]=w.useState([]),[o,i]=w.useState(null),[l,c]=w.useState(0),[d,m]=w.useState(0),[u]=w.useState(Date.now());w.useEffect(()=>{var T,A,$,D,V,z,I,F,L;let N=[],h=!1,j=!1;(T=e.content)!=null&&T.items&&((A=e.content)!=null&&A.zones)?(N=e.content.items.map(O=>O.text||O),h=!0):($=e.content)!=null&&$.items&&((D=e.content)!=null&&D.dropZones)?(N=e.content.items.map(O=>O.text||O),h=!0):(V=e.content)!=null&&V.items&&((z=e.content)!=null&&z.categories)?(N=e.content.items.map(O=>O.text||O),j=!0):(I=e.content)!=null&&I.items?N=e.content.items:(F=e.content)!=null&&F.zones?(N=e.content.zones.flatMap(O=>O.items),h=!0):(L=e.content)!=null&&L.pairs&&(N=e.content.pairs.flatMap(O=>[O.left,O.right]));const b=[...N].sort(()=>Math.random()-.5).map((O,H)=>({text:typeof O=="string"?O:O.text||O.name||"Item",id:typeof O=="object"&&O.id?O.id:H,isPlaced:!1,order:H+1,isZonesFormat:h,isCategoriesFormat:j,originalItem:O}));a(b)},[e]),w.useEffect(()=>{const N=setInterval(()=>{m(Math.floor((Date.now()-u)/1e3))},1e3);return()=>clearInterval(N)},[u]),w.useEffect(()=>{r.length>0&&r.every(h=>h.isPlaced)&&setTimeout(()=>{P()},500)},[r]);const g=(N,h)=>{i(h),N.dataTransfer.effectAllowed="move"},p=N=>{N.preventDefault(),N.dataTransfer.dropEffect="move"},k=(N,h)=>{if(N.preventDefault(),o){let j=!1;if(e.content.zones||e.content.dropZones){const C=e.content.items.find(b=>(typeof b=="object"?b.text:b)===o.text);j=C&&C.correctZone===h}else if(e.content.categories){const C=e.content.items.find(b=>(typeof b=="object"?b.text:b)===o.text);j=C&&C.correctCategory===h}j&&(a(C=>C.map(b=>b.id===o.id?{...b,isPlaced:!0,zone:h}:b)),c(C=>C+25)),i(null)}},P=()=>{setTimeout(()=>{let N=0;const h=r.length;r.forEach(b=>{if(b.isPlaced&&b.zone){const T=e.content.items.find(A=>(typeof A=="object"?A.text:A)===b.text);if(T){const A=e.content.zones||e.content.dropZones?T.correctZone:T.correctCategory;b.zone===A&&N++}}});const j=N===h,C=j?100:Math.round(N/h*100);t({score:C,timeSpent:d,isPerfect:j,correctAnswers:N,totalQuestions:h})},100)};return n.jsxs(je,{title:e.title,timeSpent:d,onExit:s,icon:"",children:[n.jsxs("div",{className:"text-center mb-6 font-sans",children:[((S=e.content)==null?void 0:S.scenario)&&typeof e.content.scenario=="string"&&n.jsx("p",{className:"text-gray-600 mb-4 font-sans",children:e.content.scenario}),((y=(x=e.content)==null?void 0:x.scenario)==null?void 0:y.description)&&n.jsx("p",{className:"text-gray-600 mb-4 font-sans",children:e.content.scenario.description}),((f=e.content)==null?void 0:f.instructions)&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[n.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:e.content.instructions.title}),n.jsx("p",{className:"text-blue-700 text-sm",children:e.content.instructions.description})]})]}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center",children:"Categorias:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-4xl mx-auto",children:(v=e.content)!=null&&v.zones||(R=e.content)!=null&&R.dropZones?(e.content.zones||e.content.dropZones).map((N,h)=>n.jsx("div",{onDragOver:p,onDrop:j=>k(j,N.id),className:`p-6 border-2 border-dashed rounded-2xl transition-all duration-200 text-center font-medium shadow-lg font-sans min-h-[120px] flex flex-col justify-center ${r.find(j=>j.isPlaced&&j.zone===N.id)?"bg-green-50 border-green-300":"bg-white border-gray-300 hover:bg-gray-50 hover:border-blue-400"}`,style:{borderColor:N.color+"40"},children:(()=>{const j=r.filter(C=>C.isPlaced&&C.zone===N.id);return j.length>0?n.jsxs("div",{className:"space-y-2 font-sans",children:[n.jsxs("div",{className:"flex items-center justify-center mb-2",children:[n.jsx("span",{className:"text-2xl mr-2",children:N.icon}),n.jsx("p",{className:"text-gray-800 font-bold font-sans",children:N.name})]}),j.map((C,b)=>n.jsxs("div",{className:"flex items-center justify-between bg-green-100 p-2 rounded-lg border border-green-300",children:[n.jsx("p",{className:"text-gray-800 font-medium font-sans text-sm",children:C.text}),n.jsx("span",{className:"text-green-600 text-lg font-sans",children:""})]},b))]}):n.jsxs("div",{className:"text-center font-sans",children:[n.jsxs("div",{className:"flex items-center justify-center mb-2",children:[n.jsx("span",{className:"text-2xl mr-2",children:N.icon}),n.jsx("p",{className:"text-gray-800 font-bold font-sans",children:N.name})]}),n.jsx("p",{className:"text-gray-500 text-sm font-sans",children:"Arraste um item aqui"})]})})()},h)):(E=e.content)!=null&&E.categories?e.content.categories.map((N,h)=>n.jsx("div",{onDragOver:p,onDrop:j=>k(j,N.id),className:`p-6 border-2 border-dashed rounded-2xl transition-all duration-200 text-center font-medium shadow-lg font-sans min-h-[120px] flex flex-col justify-center ${r.find(j=>j.isPlaced&&j.zone===N.id)?"bg-green-50 border-green-300":"bg-white border-gray-300 hover:bg-gray-50 hover:border-blue-400"}`,style:{borderColor:N.color+"40"},children:(()=>{const j=r.filter(C=>C.isPlaced&&C.zone===N.id);return j.length>0?n.jsxs("div",{className:"space-y-2 font-sans",children:[n.jsx("p",{className:"text-gray-800 font-bold font-sans text-center mb-2",children:N.name}),j.map((C,b)=>n.jsxs("div",{className:"flex items-center justify-between bg-green-100 p-2 rounded-lg border border-green-300",children:[n.jsx("p",{className:"text-gray-800 font-medium font-sans text-sm",children:C.text}),n.jsx("span",{className:"text-green-600 text-lg font-sans",children:""})]},b))]}):n.jsxs("div",{className:"text-center font-sans",children:[n.jsx("p",{className:"text-gray-800 font-bold font-sans mb-2",children:N.name}),n.jsx("p",{className:"text-gray-500 text-sm font-sans",children:"Arraste um item aqui"})]})})()},h)):null})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center",children:"Itens:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-w-6xl mx-auto",children:r.filter(N=>!N.isPlaced).map((N,h)=>n.jsx("div",{draggable:!0,onDragStart:j=>g(j,N),className:"p-4 bg-white border-2 border-gray-300 rounded-xl shadow-md cursor-move hover:shadow-lg hover:border-blue-400 transition-all duration-200 font-sans h-20 flex items-center justify-center",children:n.jsx("p",{className:"text-gray-800 font-medium text-center font-sans text-sm leading-tight",children:N.text})},N.id))})]})]})]})},bj=({lesson:e,onComplete:t,onExit:s})=>{var h;const[r,a]=w.useState(0),[o,i]=w.useState([]),[l,c]=w.useState(null),[d,m]=w.useState(!1),[u,g]=w.useState(!1),[p,k]=w.useState(0),[P,S]=w.useState(!1),[x,y]=w.useState(0),f=bt.useMemo(()=>e.content.questions&&e.content.questions.length>0?{questions:e.content.questions.map(j=>({id:j.id,category:j.category||"geral",difficulty:j.difficulty||"medio",question:j.question,options:j.options,correctAnswer:j.correctAnswer,explanation:j.explanation,points:j.points||10}))}:e.content.question&&e.content.options?{questions:[{id:1,category:"geral",difficulty:"medio",question:e.content.question,options:e.content.options,correctAnswer:0,explanation:"Explicao no disponvel",points:10}]}:{questions:[]},[e.content]);w.useEffect(()=>{const j=setInterval(()=>{k(C=>C+1)},1e3);return()=>clearInterval(j)},[]);const v=(h=f.questions)==null?void 0:h[r],R=j=>{if(d)return;c(j),m(!0);const C=j===v.correctAnswer;g(C);const b=C?v.points:0;y(T=>T+b),i(T=>[...T,{questionIndex:r,answer:j,isCorrect:C,points:b}]),setTimeout(()=>{S(!0)},500)},E=()=>{if(r<f.questions.length-1)a(j=>j+1),c(null),m(!1),g(!1),S(!1);else{const j=f.questions.reduce((T,A)=>T+A.points,0),C=Math.round(x/j*100);t({score:C,timeSpent:p,isPerfect:x===j,totalScore:x,totalPossiblePoints:j,correctAnswers:o.filter(T=>T.isCorrect).length,totalQuestions:f.questions.length,selectedAnswers:[...o,{questionIndex:r,answer:l,isCorrect:u,points:u?v.points:0}]})}},N=j=>{if(!d)return"bg-white border-2 border-gray-300 hover:border-primary transition-colors";const C=j===v.correctAnswer;return C?"bg-green-100 border-2 border-green-500 text-green-800":l===j&&!C?"bg-red-100 border-2 border-red-500 text-red-800":"bg-gray-100 border-2 border-gray-300 text-gray-500"};return!f.questions||f.questions.length===0?n.jsx(je,{title:e.title,timeSpent:p,onExit:s,icon:"",children:n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dados da lio no disponveis"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Esta lio est sendo preparada."}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Voltar"})]})})}):n.jsxs(je,{title:e.title,timeSpent:p,onExit:s,children:[n.jsx("div",{className:"text-center mb-6",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Pergunta ",r+1," de ",f.questions.length]})}),v&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary p-6 text-white",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-bold",style:{background:"linear-gradient(to right, #EE9116, #FFB300)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:r+1})}),n.jsxs("div",{children:[n.jsx("span",{className:"text-lg font-semibold",children:"Pergunta"}),n.jsx("div",{className:"text-sm opacity-90",children:"Escolha a resposta correta"})]})]}),n.jsx("p",{className:"text-xl leading-relaxed",children:v.question})]}),n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:v.options.map((j,C)=>n.jsx("button",{onClick:()=>R(C),disabled:d,className:`group relative p-4 rounded-lg text-left transition-all duration-200 ${d?N(C):"bg-gray-50 hover:bg-orange-50 border border-gray-200 hover:border-orange-300 hover:shadow-md"} ${d?"cursor-default":"cursor-pointer"}`,children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg ${d?C===v.correctAnswer?"bg-green-500 text-white":l===C?"bg-red-500 text-white":"bg-gray-200 text-gray-500":"bg-gradient-to-r from-primary to-secondary text-white"}`,children:String.fromCharCode(65+C)}),n.jsx("span",{className:"text-sm font-medium flex-1",children:j}),d&&C===v.correctAnswer&&n.jsx("div",{className:"text-xl",children:""}),d&&l===C&&C!==v.correctAnswer&&n.jsx("div",{className:"text-xl",children:""})]})},C))})})]}),P&&v&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center mr-3",children:n.jsx("span",{className:"text-yellow-600 text-lg",children:""})}),n.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:"Explicao"})]}),n.jsx("p",{className:"text-gray-700 leading-relaxed",children:v.explanation})]}),d&&n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("button",{onClick:E,className:"gradient-primary text-white px-8 py-3 rounded-lg font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary",children:r<f.questions.length-1?"Prxima Pergunta ":"Finalizar Quiz "})})]})},jj=({lesson:e,onComplete:t,onExit:s,reviewMode:r})=>{var v,R;const[a,o]=w.useState(null),[i,l]=w.useState(!1),[c,d]=w.useState(!1),[m,u]=w.useState(0),[g,p]=w.useState(!1),[k,P]=w.useState(0);w.useEffect(()=>{const E=setInterval(()=>{u(N=>N+1)},1e3);return()=>clearInterval(E)},[]);const S=bt.useMemo(()=>{if(!e.content)return{options:[],question:"",currentSituation:null};if(e.content.scenario&&e.content.options&&e.content.comparison)return{scenario:e.content.scenario,options:e.content.options.map(E=>({text:E.choice,correct:E.correct,feedback:E.feedback,details:E.details,analysis:E.analysis})),comparison:e.content.comparison,conclusion:e.content.conclusion,isDetailedFormat:!0};if(e.content.situations&&e.content.situations.length>0){const E=e.content.situations[k];if(E.options&&E.options[0]&&E.options[0].brand)return{options:E.options.map(N=>({text:`${N.brand} - R$ ${N.price.toFixed(2).replace(".",",")}${N.quantity?` (${N.quantity} unidades)`:""} - ${N.quality}`,correct:N.brand===E.correctAnswer,explanation:E.explanation,details:N})),question:E.question,currentSituation:E,totalSituations:e.content.situations.length,scenario:e.content.scenario};if(E.options&&E.options[0]&&E.options[0].choice)return{options:E.options.map(N=>({text:N.choice,correct:N.quality==="excelente"||N.quality==="boa",explanation:N.feedback,consequence:N.consequence,impact:N.impact,quality:N.quality,details:N})),question:E.situation,currentSituation:E,totalSituations:e.content.situations.length,scenario:e.content.scenario}}return e.content.options&&e.content.options.length>0?{options:e.content.options,question:e.content.question||e.content.text,currentSituation:null,totalSituations:1,scenario:e.content.scenario}:e.content.choices&&e.content.choices.length>0?{options:e.content.choices.map(E=>({text:E.text,correct:E.correct,feedback:E.feedback,explanation:E.feedback,points:E.points||(E.correct?100:50)})),question:e.content.question||"Escolha a melhor opo",currentSituation:null,totalSituations:1,scenario:e.content.scenario}:{options:[],question:"",currentSituation:null}},[e.content,k]),x=E=>{if(i)return;o(E),l(!0);const N=(S.currentSituation&&S.currentSituation.options&&S.currentSituation.options[0]&&S.currentSituation.options[0].choice,E.correct);d(N),setTimeout(()=>{p(!0)},500)},y=()=>{if(S.totalSituations>1&&k<S.totalSituations-1){P(h=>h+1),o(null),l(!1),d(!1),p(!1);return}t({score:c?100:50,timeSpent:m,isPerfect:c,feedback:a.explanation||a.feedback})},f=E=>i?E.correct?"bg-green-100 border-2 border-green-500 text-green-800":a===E&&!E.correct?"bg-red-100 border-2 border-red-500 text-red-800":"bg-gray-100 border-2 border-gray-300 text-gray-500":"bg-white border-2 border-gray-300 hover:border-primary transition-colors";return console.log(" ChoicesLesson - lesson title:",e.title),console.log(" ChoicesLesson - options count:",((R=(v=e.content)==null?void 0:v.options)==null?void 0:R.length)||0),n.jsxs(je,{title:e.title,timeSpent:m,onExit:s,icon:"",reviewMode:r,children:[n.jsxs("div",{className:"text-center mb-8 font-sans",children:[S.isDetailedFormat&&S.scenario&&n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4 font-sans",children:S.scenario.title}),n.jsx("p",{className:"text-gray-600 font-sans mb-4",children:S.scenario.description}),n.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 mb-4",children:n.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:[" ",S.scenario.objective]})})]}),!S.isDetailedFormat&&S.scenario&&n.jsx("p",{className:"text-sm text-gray-500 mb-2 font-sans",children:S.scenario}),!S.isDetailedFormat&&n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4 font-sans",children:S.question}),S.totalSituations>1&&n.jsxs("p",{className:"text-sm text-gray-600 font-sans",children:["Situao ",k+1," de ",S.totalSituations]}),n.jsx("p",{className:"text-gray-600 font-sans",children:S.isDetailedFormat?"Analise as opes e escolha a melhor deciso":"Escolha a melhor opo"})]}),n.jsx("div",{className:"space-y-4 mb-6 font-sans",children:S.options&&S.options.length>0?S.options.map((E,N)=>n.jsx("button",{onClick:()=>x(E),disabled:i,className:`w-full p-4 rounded-2xl text-left font-medium shadow-md border-2 transition-all duration-200 font-sans ${f(E)} ${i?"cursor-default":"hover:scale-105 cursor-pointer"} focus:outline-none focus:ring-2 focus:ring-primary`,tabIndex:0,children:n.jsxs("div",{className:"flex items-start font-sans",children:[n.jsxs("span",{className:"text-lg font-semibold mr-3 font-sans mt-1",children:[String.fromCharCode(65+N),"."]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-lg font-sans block mb-2",children:E.text}),S.isDetailedFormat&&E.details&&n.jsx("div",{className:"text-sm text-gray-600 space-y-1",children:n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("span",{children:[n.jsx("strong",{children:"Marca:"})," ",E.details.brand]}),n.jsxs("span",{children:[n.jsx("strong",{children:"Preo:"})," R$ ",E.details.price]}),n.jsxs("span",{children:[n.jsx("strong",{children:"Qualidade:"})," ",E.details.quality]}),n.jsxs("span",{children:[n.jsx("strong",{children:"Durabilidade:"})," ",E.details.durability]})]})})]})]})},N)):n.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Opes no disponveis"}),n.jsx("p",{className:"text-gray-600",children:"Esta lio est sendo preparada ou h um problema de carregamento."}),n.jsx("div",{className:"mt-4 text-sm text-gray-500",children:n.jsxs("p",{children:["Contedo recebido: ",JSON.stringify(e.content,null,2)]})})]})}),g&&n.jsxs("div",{className:`p-4 rounded-2xl mb-6 text-center shadow-lg border-2 font-sans transition-all duration-200 ${(a==null?void 0:a.quality)==="excelente"?"bg-green-50 text-green-800 border-green-200":(a==null?void 0:a.quality)==="boa"?"bg-blue-50 text-blue-800 border-blue-200":(a==null?void 0:a.quality)==="ruim"?"bg-red-50 text-red-800 border-red-200":c?"bg-green-50 text-green-800 border-green-200":"bg-red-50 text-red-800 border-red-200"}`,children:[n.jsx("div",{className:"text-2xl mb-2",children:(a==null?void 0:a.quality)==="excelente"?"":(a==null?void 0:a.quality)==="boa"?"":(a==null?void 0:a.quality)==="ruim"?"":c?"":""}),n.jsx("p",{className:"font-semibold font-sans",children:(a==null?void 0:a.quality)==="excelente"?"Excelente escolha!":(a==null?void 0:a.quality)==="boa"?"Boa escolha!":(a==null?void 0:a.quality)==="ruim"?"Pode melhorar!":c?"Excelente escolha!":"Tente novamente!"}),n.jsx("p",{className:"text-sm font-sans mb-2",children:(a==null?void 0:a.explanation)||(a==null?void 0:a.feedback)}),S.isDetailedFormat&&(a==null?void 0:a.analysis)&&n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[n.jsx("p",{className:"text-sm font-medium text-green-800 mb-2",children:" Pontos Positivos:"}),n.jsx("ul",{className:"text-sm text-green-700 space-y-1",children:a.analysis.pros.map((E,N)=>n.jsxs("li",{children:[" ",E]},N))})]}),n.jsxs("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:[n.jsx("p",{className:"text-sm font-medium text-red-800 mb-2",children:" Pontos de Ateno:"}),n.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:a.analysis.cons.map((E,N)=>n.jsxs("li",{children:[" ",E]},N))})]})]}),n.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:" Lio Aprendida:"}),n.jsx("p",{className:"text-sm text-blue-700",children:a.analysis.lesson})]})]}),!S.isDetailedFormat&&(a==null?void 0:a.consequence)&&n.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Consequncia:"}),n.jsx("p",{className:"text-sm text-blue-700",children:a.consequence}),(a==null?void 0:a.impact)&&n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1 mt-2",children:"Impacto:"}),n.jsx("p",{className:"text-sm text-blue-700",children:a.impact})]})]})]}),i&&n.jsx("div",{className:"mt-6",children:n.jsx("button",{onClick:y,className:"w-full bg-primary text-white py-4 rounded-2xl font-bold text-lg shadow-lg hover:bg-primary-dark transition-colors transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary font-sans",children:S.totalSituations>1&&k<S.totalSituations-1?"Prxima Situao":"Continuar"})})]})},Nj=({lesson:e,onComplete:t,onExit:s})=>{var x,y;const[r,a]=w.useState([]),[o,i]=w.useState({}),[l,c]=w.useState(0),[d,m]=w.useState(!1),u=bt.useMemo(()=>{if(!e.content)return{categories:[],items:[]};if(e.content.categories&&e.content.categories.length>0&&e.content.items&&e.content.items.length>0)return{categories:e.content.categories.map(f=>f.name),items:e.content.items.map(f=>({text:f.text||f,category:f.correctCategory||f.category,correctCategory:f.correctCategory||f.category}))};if(e.content.categories&&e.content.categories.length>0){const f=[];return e.content.categories.forEach(v=>{v.items&&Array.isArray(v.items)&&v.items.forEach(R=>{f.push({text:R,category:v.name,correctCategory:v.name})})}),{categories:e.content.categories.map(v=>v.name),items:f}}return e.content.items&&e.content.items.length>0?{categories:[...new Set(e.content.items.map(v=>v.category))],items:e.content.items}:{categories:[],items:[]}},[e.content]);w.useEffect(()=>{const f=[...u.items].sort(()=>Math.random()-.5);a(f),console.log(" Dados da lio recebidos:",{title:e.title,type:e.type,text:e.content.text,categories:u.categories,items:u.items});const v=setInterval(()=>{c(R=>R+1)},1e3);return()=>clearInterval(v)},[u.items,e.title,e.type,e.content.text]);const g=(f,v)=>{i(E=>({...E,[f.text]:v})),a(E=>E.filter(N=>N.text!==f.text));const R={...o,[f.text]:v};Object.keys(R).length===u.items.length&&p(R)},p=f=>{const v=u.items.filter(N=>f[N.text]===N.correctCategory||f[N.text]===N.category).length,R=Math.round(v/u.items.length*100),E=v===u.items.length;m(!0),setTimeout(()=>{t({score:R,timeSpent:l,isPerfect:E,correctAnswers:v,totalItems:u.items.length})},2e3)},k=()=>u.categories,P=f=>Object.entries(o).filter(([v,R])=>R===f).map(([v])=>v),S=f=>{i(v=>{const R={...v};return delete R[f],R}),a(v=>[...v,u.items.find(R=>R.text===f)])};return console.log(" ClassifyLesson - lesson title:",e.title),console.log(" ClassifyLesson - categories count:",((x=u.categories)==null?void 0:x.length)||0),console.log(" ClassifyLesson - items count:",((y=u.items)==null?void 0:y.length)||0),n.jsxs(je,{title:e.title,timeSpent:l,onExit:s,icon:"",children:[n.jsxs("div",{className:"text-center mb-8 font-sans",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4 font-sans",children:e.content.scenario?e.content.scenario.split(".")[0]+".":e.content.text||"Classifique os itens nas categorias corretas"}),n.jsx("p",{className:"text-gray-600 font-sans",children:e.content.scenario?e.content.scenario.split(".").slice(1).join(".").trim():"Classifique os itens nas categorias corretas"})]}),u.items&&u.items.length>0&&u.categories&&u.categories.length>0?n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8 font-sans",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-center font-sans",children:"Itens:"}),n.jsx("div",{className:"space-y-4 font-sans w-full max-w-md",children:r&&r.map((f,v)=>n.jsx("div",{draggable:!0,onDragStart:R=>R.dataTransfer.setData("item",JSON.stringify(f)),className:"p-4 border-2 border-dashed rounded-2xl bg-white shadow-md cursor-move text-center font-medium hover:bg-interface hover:border-primary transition-all duration-200 font-sans",children:f.text},v))})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-center font-sans",children:"Categorias:"}),n.jsx("div",{className:"space-y-4 font-sans w-full max-w-md",children:k()&&k().map(f=>n.jsxs("div",{onDrop:v=>{v.preventDefault();const R=JSON.parse(v.dataTransfer.getData("item"));g(R,f)},onDragOver:v=>v.preventDefault(),className:"border-2 border-dashed border-gray-300 rounded-2xl p-4 min-h-[100px] bg-gray-50 shadow-inner hover:border-primary transition-all duration-200 font-sans",children:[n.jsx("h4",{className:"font-semibold text-lg mb-2 text-center font-sans",children:f}),n.jsx("div",{className:"space-y-1 font-sans",children:P(f)&&P(f).map((v,R)=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded p-2 text-sm shadow-sm font-sans flex items-center justify-between",children:[n.jsx("span",{children:v}),n.jsx("button",{onClick:()=>S(v),className:"ml-2 text-red-400 hover:text-red-600 transition-colors rounded-full focus:outline-none focus:ring-2 focus:ring-red-300",title:"Remover da categoria","aria-label":"Remover da categoria",children:""})]},R))})]},f))})]})]}):n.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Contedo no disponvel"}),n.jsx("p",{className:"text-gray-600",children:"Esta lio est sendo preparada."})]}),d&&n.jsxs("div",{className:"mt-6 p-4 bg-green-50 text-green-800 rounded-2xl text-center shadow-lg border-2 border-green-200 font-sans transition-all duration-200",children:[n.jsx("div",{className:"text-2xl mb-2",children:""}),n.jsx("p",{className:"font-semibold font-sans",children:"Classificao concluda!"})]})]})},wj=({lesson:e,onComplete:t,onExit:s})=>{var D,V,z,I,F,L,O,H,ne,Y,B,q;const[r,a]=w.useState([]),[o,i]=w.useState([]),[l,c]=w.useState(null),[d,m]=w.useState(null),[u,g]=w.useState([]),[p,k]=w.useState(0),[P,S]=w.useState(!1),[x,y]=w.useState([]),[f,v]=w.useState([]),[R,E]=w.useState([]),[N,h]=w.useState(!1),j=bt.useMemo(()=>{var M;return e.content?e.content.gameConfig?{pairs:((M=e.content.pairs)==null?void 0:M.map(U=>({left:U.left||"Item esquerdo",right:U.right||"Item direito",text:`${U.left||""} - ${U.right||""}`,explanation:U.explanation||"",educationalTip:U.educationalTip||"",category:U.category||"",difficulty:U.difficulty||"mdio"})))||[],gameFormat:e.content.gameConfig.format||"association",gameConfig:e.content.gameConfig,instructions:e.content.instructions,visual:e.content.visual,feedback:e.content.feedback}:e.content.pairs&&e.content.pairs.length>0?{pairs:e.content.pairs.map(U=>{var K,G,ee,Z;return{left:((K=U.card1)==null?void 0:K.text)||U.left||"Item esquerdo",right:((G=U.card2)==null?void 0:G.text)||U.right||"Item direito",text:`${((ee=U.card1)==null?void 0:ee.text)||U.left||""} - ${((Z=U.card2)==null?void 0:Z.text)||U.right||""}`,explanation:U.explanation||"",educationalTip:U.educationalTip||""}}),gameFormat:e.content.gameFormat||"association",gameSettings:e.content.gameSettings||{}}:e.content.pairs&&e.content.pairs.length>0?{pairs:e.content.pairs.map(U=>{var K,G;return{left:U.left||((K=U.text)==null?void 0:K.split(" - ")[0])||"Item esquerdo",right:U.right||((G=U.text)==null?void 0:G.split(" - ")[1])||"Item direito",text:`${U.left||""} - ${U.right||""}`,explanation:U.explanation||"",educationalTip:U.educationalTip||""}}),gameFormat:"association",gameSettings:{}}:e.content.items&&e.content.items.length>0?{pairs:e.content.items.map(U=>{var K,G;return{left:((K=U.text)==null?void 0:K.split(" - ")[0])||"Item esquerdo",right:((G=U.text)==null?void 0:G.split(" - ")[1])||"Item direito",text:U.text||"Item",explanation:U.explanation||"",educationalTip:U.educationalTip||""}}),gameFormat:"association",gameSettings:{}}:{pairs:[],gameFormat:"association",gameSettings:{}}:{pairs:[],gameFormat:"association"}},[e.content]);w.useEffect(()=>{var K;if((j.gameFormat||((K=e.content)==null?void 0:K.gameFormat)||"association")==="memory"){const G=[];j.pairs.forEach((ee,Z)=>{G.push({id:`card-${Z}-left`,text:ee.left,pairId:Z,type:"left",isFlipped:!1,isMatched:!1}),G.push({id:`card-${Z}-right`,text:ee.right,pairId:Z,type:"right",isFlipped:!1,isMatched:!1})}),y(G.sort(()=>Math.random()-.5)),console.log(" Memory cards initialized:",G.length)}else{const G=j.pairs.map(Z=>({...Z,left:Z.left})),ee=j.pairs.map(Z=>({...Z,right:Z.right}));a(G.sort(()=>Math.random()-.5)),i(ee.sort(()=>Math.random()-.5)),console.log(" Association items initialized")}const U=setInterval(()=>{k(G=>G+1)},1e3);return()=>clearInterval(U)},[j.pairs,j.gameFormat,(D=e.content)==null?void 0:D.gameFormat]);const C=(M,U)=>{U==="left"?l===M?c(null):(c(M),m(null)):m(d===M?null:M)},b=()=>{if(l&&d){const M=l.left,U=d.right;j.pairs.find(G=>G.left===M&&G.right===U)&&(g(G=>[...G,{left:l,right:d}]),a(G=>G.filter(ee=>ee!==l)),i(G=>G.filter(ee=>ee!==d)),u.length+1===j.pairs.length&&T()),c(null),m(null)}},T=()=>{S(!0),setTimeout(()=>{t({score:100,timeSpent:p,isPerfect:!0,totalMatches:u.length+1})},2e3)},A=M=>{if(N||M.isFlipped||M.isMatched)return;const U=[...f,M];if(v(U),y(K=>K.map(G=>G.id===M.id?{...G,isFlipped:!0}:G)),U.length===2){h(!0);const[K,G]=U;K.pairId===G.pairId?(E(Z=>[...Z,K,G]),y(Z=>Z.map(_=>_.id===K.id||_.id===G.id?{..._,isMatched:!0,isFlipped:!0}:_)),R.length+2===x.length&&setTimeout(()=>{S(!0),t({score:100,timeSpent:p,isPerfect:!0,totalMatches:j.pairs.length})},1e3),setTimeout(()=>{v([]),h(!1)},500)):setTimeout(()=>{y(Z=>Z.map(_=>_.id===K.id||_.id===G.id?{..._,isFlipped:!1}:_)),setTimeout(()=>{v([]),h(!1)},500)},1500)}},$=(M,U)=>{const K=U==="left"?l===M:d===M;return u.some(ee=>U==="left"?ee.left===M:ee.right===M)?"bg-green-100 border-green-500 text-green-800":K?"bg-primary text-white":"bg-white border-gray-300 hover:border-primary"};return n.jsxs(je,{title:e.title,timeSpent:p,onExit:s,icon:"",children:[n.jsx("style",{children:`
        .backface-hidden {
          backface-visibility: hidden;
        }
        .transform-style-preserve-3d {
          transform-style: preserve-3d;
        }
        .rotate-y-180 {
          transform: rotateY(180deg);
        }
        [transform-style:preserve-3d] {
          transform-style: preserve-3d;
        }
        [perspective:1000px] {
          perspective: 1000px;
        }
        .card-120x80 {
          width: 120px;
          height: 80px;
        }
      `}),n.jsxs("div",{className:"text-center mb-8 font-sans",children:[((z=(V=e.content)==null?void 0:V.scenario)==null?void 0:z.description)&&n.jsx("p",{className:"text-gray-600 mb-4 font-sans",children:e.content.scenario.description}),((I=e.content)==null?void 0:I.scenario)&&typeof e.content.scenario=="string"&&n.jsx("p",{className:"text-gray-600 mb-4 font-sans",children:e.content.scenario}),j.instructions&&j.instructions[j.gameFormat]&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[n.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:j.instructions[j.gameFormat].title}),n.jsx("p",{className:"text-blue-700 text-sm",children:j.instructions[j.gameFormat].description})]}),((F=e.content)==null?void 0:F.instructions)&&Array.isArray(e.content.instructions)&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[n.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Instrues:"}),n.jsx("ul",{className:"text-blue-700 text-sm space-y-1",children:e.content.instructions.map((M,U)=>n.jsxs("li",{children:[" ",M]},U))})]}),j.gameSettings&&j.gameSettings[j.gameFormat]&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[n.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:j.gameSettings[j.gameFormat].title}),n.jsx("p",{className:"text-blue-700 text-sm",children:j.gameSettings[j.gameFormat].instructions})]})]}),j.pairs&&j.pairs.length>0?j.gameFormat==="memory"||((L=e.content)==null?void 0:L.gameFormat)==="memory"?n.jsx("div",{className:"mb-8 font-sans",children:n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"grid gap-8 max-w-5xl",style:{gridTemplateColumns:"repeat(4, 1fr)",display:"grid"},children:x.length>0?x.map(M=>n.jsx("div",{className:"relative cursor-pointer mx-auto",style:{width:"120px",height:"80px"},onClick:()=>A(M),children:n.jsx("div",{className:`w-full h-full rounded-lg shadow-lg flex items-center justify-center text-center text-sm font-medium transition-all duration-300 ${M.isFlipped||M.isMatched?"bg-white border-2 border-green-500 text-gray-800":"border-2 border-orange-600 text-white"}`,style:{background:M.isFlipped||M.isMatched?"white":"linear-gradient(135deg, #f97316 0%, #eab308 100%)"},children:M.isFlipped||M.isMatched?n.jsx("span",{className:"p-2 leading-tight",children:M.text}):n.jsx("span",{className:"text-2xl font-bold",children:"?"})})},M.id)):n.jsxs("div",{className:"col-span-4 text-center p-8",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Carregando cards..."}),n.jsx("p",{className:"text-gray-600",children:"Preparando o jogo da memria"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Cards: ",x.length]})]})})})}):n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8 font-sans",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-center font-sans",children:"Coluna A"}),n.jsx("div",{className:"space-y-4 font-sans",children:r.concat((u==null?void 0:u.map(M=>M.left))||[]).map((M,U)=>{const K=u.some(G=>G.left===M);return n.jsxs("div",{onClick:()=>!K&&C(M,"left"),className:`p-4 border-2 rounded-2xl text-center font-medium shadow-md cursor-pointer transition-all duration-200 font-sans h-20 flex items-center justify-center ${$(M,"left")} ${l===M?"ring-2 ring-primary":""} ${K?"opacity-60 cursor-not-allowed bg-green-50 border-green-200 text-green-800":""}`,children:[n.jsx("span",{className:"leading-tight",children:M.left}),K&&n.jsx("span",{className:"ml-2 text-green-600 font-bold font-sans",children:""})]},U)})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-center font-sans",children:"Coluna B"}),n.jsx("div",{className:"space-y-4 font-sans",children:o.concat((u==null?void 0:u.map(M=>M.right))||[]).map((M,U)=>{const K=u.some(G=>G.right===M);return n.jsxs("div",{onClick:()=>!K&&C(M,"right"),className:`p-4 border-2 rounded-2xl text-center font-medium shadow-md cursor-pointer transition-all duration-200 font-sans h-20 flex items-center justify-center ${$(M,"right")} ${d===M?"ring-2 ring-primary":""} ${K?"opacity-60 cursor-not-allowed bg-green-50 border-green-200 text-green-800":""}`,children:[n.jsx("span",{className:"leading-tight",children:M.right}),K&&n.jsx("span",{className:"ml-2 text-green-600 font-bold font-sans",children:""})]},U)})})]})]}):n.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Contedo no disponvel"}),n.jsx("p",{className:"text-gray-600",children:"Esta lio est sendo preparada."})]}),j.gameFormat==="association"&&l&&d&&n.jsx("div",{className:"flex justify-center mb-8 font-sans",children:n.jsx("button",{onClick:b,className:"bg-teal text-white px-8 py-4 rounded-2xl font-bold text-lg shadow-lg hover:bg-teal-dark transition-colors focus:outline-none focus:ring-2 focus:ring-teal font-sans",children:"Fazer Associao"})}),P&&n.jsxs("div",{className:"mt-6 p-4 bg-green-100 text-green-800 rounded-xl text-center shadow-lg border-2 border-green-400",children:[n.jsx("div",{className:"text-2xl mb-2",children:""}),n.jsx("h3",{className:"font-bold text-lg mb-2",children:((H=(O=j.feedback)==null?void 0:O.success)==null?void 0:H.title)||"Parabns! Jogo Concludo!"}),n.jsx("p",{className:"font-semibold mb-3",children:((Y=(ne=j.feedback)==null?void 0:ne.success)==null?void 0:Y.message)||"Voc completou a lio com sucesso!"}),((q=(B=j.feedback)==null?void 0:B.success)==null?void 0:q.tips)&&n.jsxs("div",{className:"text-left bg-green-50 p-3 rounded-lg",children:[n.jsx("h4",{className:"font-semibold mb-2",children:" Dicas importantes:"}),n.jsx("ul",{className:"list-disc list-inside text-sm space-y-1",children:j.feedback.success.tips.map((M,U)=>n.jsx("li",{children:M},U))})]})]})]})},Sj=({lesson:e,onComplete:t,onExit:s})=>{var h,j,C;const[r,a]=w.useState(null),[o,i]=w.useState(!1),[l,c]=w.useState(!1),[d,m]=w.useState(0),[u,g]=w.useState(!1),[p,k]=w.useState(0),[P,S]=w.useState([]),[x,y]=w.useState([]);w.useEffect(()=>{const b=setInterval(()=>{m(T=>T+1)},1e3);return()=>clearInterval(b)},[]);const f=b=>{const T=[...b];for(let A=T.length-1;A>0;A--){const $=Math.floor(Math.random()*(A+1));[T[A],T[$]]=[T[$],T[A]]}return T},v=bt.useMemo(()=>{if(!e.content)return{scenario:"",options:[],isProjectFormat:!1};if(e.content.scenario&&e.content.phases&&Array.isArray(e.content.phases)){const b=e.content.phases[p];if(b){const T=(b.choices||[]).map((A,$)=>({text:A.text||A.choice||`Opo ${String.fromCharCode(65+$)}`,choice:A.text||A.choice||`Opo ${String.fromCharCode(65+$)}`,value:A.value||A.text,correct:A.correct!==void 0?A.correct:!0,feedback:A.feedback||A.outcome||`Voc escolheu: ${A.text}`,outcome:A.feedback||A.outcome||`Voc escolheu: ${A.text}`}));return{scenario:e.content.scenario,currentPhase:b,totalPhases:e.content.phases.length,options:T,isProjectFormat:!1,isProgressiveFormat:!0,scoring:e.content.scoring||{},conclusion:e.content.conclusion||{}}}}if(e.content.scenario&&e.content.phases){const b=e.content.phases.map((T,A)=>({text:`Fase ${T.phase}: ${T.title}`,outcome:`Voc escolheu a ${T.title.toLowerCase()}. ${T.tasks.map($=>$.description).join(" ")}`,correct:!0,feedback:`Excelente! A ${T.title.toLowerCase()}  fundamental para o sucesso da feira.`,phase:T}));return{scenario:e.content.scenario,options:b,isProjectFormat:!0,phases:e.content.phases,materials:e.content.materials||[],successCriteria:e.content.successCriteria||[]}}return e.content.scenario&&e.content.options?{scenario:e.content.scenario,options:e.content.options.map((b,T)=>({text:b.choice||b.text||`Opo ${String.fromCharCode(65+T)}`,outcome:b.outcome||b.feedback||"",correct:b.correct!==void 0?b.correct:!1,feedback:b.outcome||b.feedback||""})),isProjectFormat:!1}:e.content.options&&e.content.options.length>0?{scenario:e.content.text||e.content.scenario||"Escolha a melhor ao para esta situao",options:e.content.options.map(b=>({text:b.text||b.choice||"Opo",outcome:b.outcome||b.feedback||"",correct:b.correct||!1,feedback:b.feedback||b.outcome||""})),isProjectFormat:!1}:{scenario:"Escolha a melhor ao para esta situao",options:[],isProjectFormat:!1}},[e.content,p]);w.useEffect(()=>{if(v.isProgressiveFormat&&v.options){const b=f(v.options);y(b)}},[p,v.isProgressiveFormat,v.options]);const R=b=>{o||(a(b),i(!0),c(b.correct),S(T=>[...T,{phase:p,option:b,correct:b.correct}]),setTimeout(()=>{g(!0)},500))},E=()=>{var A;if(v.isProgressiveFormat)if(p<v.totalPhases-1){k($=>$+1),a(null),i(!1),c(!1),g(!1);return}else{const $=P.every(V=>V.correct);t({score:$?100:50,timeSpent:d,isPerfect:$,feedback:((A=v.conclusion)==null?void 0:A.message)||"Simulao concluda!",phaseHistory:P,totalPhases:v.totalPhases});return}let b=l?100:50,T=l;e.title&&e.title.toLowerCase().includes("emprstimo")&&(r.text&&r.text.toLowerCase().includes("usado  vista")?(b=100,T=!0):r.text&&r.text.toLowerCase().includes("guardar dinheiro")?(b=80,T=!1):(b=50,T=!1)),t({score:b,timeSpent:d,isPerfect:T,feedback:r.feedback||r.outcome})},N=b=>o?r===b?b.correct?"bg-green-100 border-2 border-green-500 text-green-800":"bg-red-100 border-2 border-red-500 text-red-800":"bg-gray-100 border-2 border-gray-300 text-gray-500":"bg-white border-2 border-gray-300 hover:border-primary transition-colors";return console.log(" SimulationLesson - lesson title:",e.title),console.log(" SimulationLesson - options count:",((h=v.options)==null?void 0:h.length)||0),n.jsxs(je,{title:e.title,timeSpent:d,onExit:s,icon:"",children:[n.jsxs("div",{className:"text-center mb-8 font-sans",children:[v.isProgressiveFormat&&n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"flex justify-center items-center space-x-2 mb-2",children:n.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Fase ",p+1," de ",v.totalPhases]})}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${(p+1)/v.totalPhases*100}%`}})})]}),n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4 font-sans",children:v.isProgressiveFormat?(j=v.currentPhase)==null?void 0:j.title:typeof v.scenario=="object"?v.scenario.title:v.scenario}),v.isProgressiveFormat&&((C=v.currentPhase)==null?void 0:C.description)&&n.jsx("p",{className:"text-gray-600 font-sans mb-4",children:v.currentPhase.description}),typeof v.scenario=="object"&&v.scenario.description&&!v.isProgressiveFormat&&n.jsx("p",{className:"text-gray-600 font-sans",children:v.scenario.description}),n.jsx("p",{className:"text-gray-600 font-sans",children:v.isProjectFormat?"Escolha uma fase para comear a organizar sua feira de trocas":v.isProgressiveFormat?"Escolha a melhor resposta para esta situao histrica":"Escolha a melhor ao para esta situao"}),v.isProjectFormat&&n.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:" Informaes do Projeto"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Materiais necessrios:"}),n.jsxs("ul",{className:"text-blue-600 space-y-1",children:[v.materials.slice(0,3).map((b,T)=>n.jsxs("li",{children:[" ",b]},T)),v.materials.length>3&&n.jsxs("li",{children:[" E mais ",v.materials.length-3," itens..."]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Critrios de sucesso:"}),n.jsx("ul",{className:"text-blue-600 space-y-1",children:v.successCriteria.slice(0,2).map((b,T)=>n.jsxs("li",{children:[" ",b]},T))})]})]})]})]}),n.jsx("div",{className:"space-y-4 mb-6 font-sans",children:(v.isProgressiveFormat?x:v.options)&&(v.isProgressiveFormat?x:v.options).length>0?(v.isProgressiveFormat?x:v.options).map((b,T)=>n.jsx("button",{onClick:()=>R(b),disabled:o,className:`w-full p-4 rounded-2xl text-left font-medium shadow-md border-2 transition-all duration-200 font-sans ${N(b)} ${o?"cursor-default":"hover:scale-105 cursor-pointer"} focus:outline-none focus:ring-2 focus:ring-primary`,tabIndex:0,children:n.jsxs("div",{className:"flex items-center font-sans",children:[n.jsxs("span",{className:"text-lg font-semibold mr-3 font-sans",children:[String.fromCharCode(65+T),"."]}),n.jsx("span",{className:"text-lg font-sans",children:b.choice||b.text||`Opo ${String.fromCharCode(65+T)}`})]})},T)):n.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Contedo no disponvel"}),n.jsx("p",{className:"text-gray-600",children:"Esta lio est sendo preparada."})]})}),u&&r&&n.jsxs("div",{className:`p-4 rounded-2xl mb-6 text-center shadow-lg border-2 font-sans transition-all duration-200 ${l?"bg-green-50 text-green-800 border-green-200":"bg-red-50 text-red-800 border-red-200"}`,children:[n.jsx("h4",{className:"font-bold mb-2 font-sans",children:l?" Resposta Correta!":" Resposta Incorreta"}),n.jsx("p",{className:"font-sans mb-3",children:r.feedback||r.outcome||"Obrigado por participar desta simulao!"}),v.isProgressiveFormat&&r.historical_note&&n.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg border border-blue-300",children:[n.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:" Nota Histrica:"}),n.jsx("p",{className:"text-sm text-blue-700",children:r.historical_note})]}),v.isProjectFormat&&r.phase&&n.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg border border-green-300",children:[n.jsx("h5",{className:"font-semibold text-green-800 mb-2",children:" Tarefas desta fase:"}),n.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[r.phase.tasks.slice(0,3).map((b,T)=>n.jsxs("div",{className:"flex items-start",children:[n.jsx("span",{className:"text-green-600 mr-2",children:""}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:b.task}),n.jsx("p",{className:"text-green-600",children:b.description})]})]},T)),r.phase.tasks.length>3&&n.jsxs("p",{className:"text-green-600 text-xs",children:["E mais ",r.phase.tasks.length-3," tarefas..."]})]})]})]}),o&&n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:E,className:"bg-primary text-white px-8 py-3 rounded-lg font-bold text-lg hover:bg-primary-dark transition-colors transform hover:scale-105 shadow-lg font-sans",children:v.isProgressiveFormat?p<v.totalPhases-1?"Prxima Fase":"Finalizar Simulao":"Continuar"})})]})},Cj=({lesson:e,onComplete:t,onExit:s})=>{var R,E,N,h,j,C,b,T;const[r,a]=w.useState(0),[o,i]=w.useState(""),[l,c]=w.useState([]),[d,m]=w.useState(0),[u]=w.useState(Date.now()),[g,p]=w.useState(!1),[k,P]=w.useState(!1),S=bt.useMemo(()=>e.content?e.content.examples&&e.content.examples.length>0?{examples:e.content.examples.map(A=>({question:A.scenario||A.question||"Pergunta no encontrada",calculation:A.calculation||A.hint||"",answer:A.answer||A.expectedAnswer||"",explanation:A.explanation||A.feedback||"Explicao no disponvel"})),problems:[]}:e.content.problems&&e.content.problems.length>0?{examples:[],problems:e.content.problems.map(A=>({question:A.question||A.problem||"Pergunta no encontrada",calculation:A.calculation||A.hint||"",answer:A.correctAnswer||A.answer||A.expectedAnswer||"",explanation:A.explanation||A.feedback||"Explicao no disponvel",tolerance:A.tolerance||.01,context:A.context||"",stepByStep:A.stepByStep||[],formula:A.formula||""}))}:{examples:[],problems:[]}:{examples:[],problems:[]},[e.content]);w.useEffect(()=>{const A=setInterval(()=>{m(Math.floor((Date.now()-u)/1e3))},1e3);return()=>clearInterval(A)},[u]);const x=((R=S.examples)==null?void 0:R[r])||((E=S.problems)==null?void 0:E[r])||e.content,y=()=>{var L;if(!o.trim())return;const A=O=>{let H=O.trim().replace(/\s/g,"").replace(",",".");H=H.replace(/[,.]$/,"");const ne=H.split(".");return ne.length>2&&(H=ne[0]+"."+ne.slice(1).join("")),H.includes(".")&&(H=H.replace(/\.?0+$/,""),H.endsWith(".")&&(H=H.slice(0,-1))),H},$=A(o),D=A(((L=x.answer)==null?void 0:L.toString())||""),V=parseFloat($),z=parseFloat(D),I=x.tolerance||.01,F=!isNaN(V)&&!isNaN(z)&&Math.abs(V-z)<=I;P(F),p(!0),c(O=>[...O,{problemIndex:r,userAnswer:o.trim(),expectedAnswer:x.answer,isCorrect:F}]),setTimeout(()=>{var H,ne;p(!1);const O=(((H=S.examples)==null?void 0:H.length)||0)+(((ne=S.problems)==null?void 0:ne.length)||0);if(O>0&&r<O-1)a(Y=>Y+1),i("");else{const Y=l.filter(q=>q.isCorrect).length+(F?1:0),B=Math.round(Y/O*100);t({score:B,timeSpent:d,isPerfect:Y===O,correctAnswers:Y,totalQuestions:O,userAnswers:[...l,{problemIndex:r,userAnswer:o.trim(),expectedAnswer:x.answer,isCorrect:F}]})}},2e3)},f=A=>{A.key==="Enter"&&!g&&y()};if(!((N=S.examples)!=null&&N.length)&&!((h=S.problems)!=null&&h.length))return n.jsx(je,{title:e.title,timeSpent:d,onExit:s,icon:"",children:n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dados da lio no disponveis"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Esta lio est sendo preparada."}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Voltar"})]})})});const v=(((j=S.examples)==null?void 0:j.length)||0)+(((C=S.problems)==null?void 0:C.length)||0);return n.jsxs(je,{title:e.title,timeSpent:d,onExit:s,icon:"",children:[n.jsxs("div",{className:"text-center mb-6 font-sans",children:[((T=(b=e.content)==null?void 0:b.scenario)==null?void 0:T.description)&&n.jsx("p",{className:"text-gray-600 mb-4 font-sans",children:e.content.scenario.description}),v>0&&n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:[n.jsxs("p",{className:"text-sm text-blue-700 font-medium",children:["Problema ",r+1," de ",v]}),n.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2 mt-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/v*100}%`}})})]})]}),x?n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border-2 border-gray-200 mb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 font-sans",children:v>0?`Problema ${r+1}:`:"Pergunta:"}),x.context&&n.jsx("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:n.jsx("p",{className:"text-sm text-blue-700 font-sans",children:x.context})}),n.jsx("p",{className:"text-lg text-gray-700 mb-6 font-sans",children:x.question}),x.hint&&n.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg mb-4",children:n.jsxs("p",{className:"text-sm text-yellow-700 font-sans",children:[" Dica: ",x.hint]})}),x.formula&&n.jsx("div",{className:"bg-green-50 p-3 rounded-lg mb-4",children:n.jsxs("p",{className:"text-sm text-green-700 font-sans",children:[" Frmula: ",x.formula]})}),n.jsx("div",{className:"mb-4",children:n.jsx("input",{type:"text",value:o,onChange:A=>i(A.target.value),onKeyPress:f,disabled:g,placeholder:"Digite sua resposta...",className:`w-full p-4 border-2 rounded-lg text-lg focus:outline-none transition-colors font-sans ${g?k?"border-green-500 bg-green-50":"border-red-500 bg-red-50":"border-gray-300 focus:border-primary"}`})}),!g&&n.jsx("button",{onClick:y,disabled:!o.trim(),className:"w-full bg-primary text-white py-3 rounded-lg font-bold text-lg hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Verificar Resposta"})]}):n.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Problema no encontrado"}),n.jsx("p",{className:"text-gray-600",children:"Este problema est sendo preparado."})]}),g&&x&&n.jsxs("div",{className:`p-6 rounded-lg mb-6 text-center shadow-lg border-2 font-sans transition-all duration-200 ${k?"bg-green-50 text-green-800 border-green-200":"bg-red-50 text-red-800 border-red-200"}`,children:[n.jsx("div",{className:"text-4xl mb-3",children:k?"":""}),n.jsx("p",{className:"text-xl font-bold mb-2 font-sans",children:k?"Correto!":"Incorreto!"}),n.jsxs("p",{className:"text-lg mb-3 font-sans",children:["Sua resposta: ",n.jsxs("span",{className:"font-bold",children:['"',o,'"']})]}),!k&&x.answer&&n.jsxs("p",{className:"text-lg mb-3 font-sans",children:["Resposta correta: ",n.jsxs("span",{className:"font-bold",children:['"',x.answer,'"']})]}),x.explanation&&n.jsx("p",{className:"text-sm font-sans",children:x.explanation}),v>0&&r<v-1&&n.jsx("p",{className:"text-sm mt-3 font-sans",children:"Prximo problema em 2 segundos..."})]}),l.length>0&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-bold text-gray-800 mb-3 font-sans",children:"Respostas anteriores:"}),n.jsx("div",{className:"space-y-2",children:l.map((A,$)=>n.jsxs("div",{className:"flex justify-between items-center text-sm",children:[n.jsx("span",{className:"font-sans",children:v>0?`Problema ${A.problemIndex+1}:`:"Resposta:"}),n.jsxs("span",{className:`font-bold font-sans ${A.isCorrect?"text-green-600":"text-red-600"}`,children:[A.userAnswer," ",A.isCorrect?"":""]})]},$))})]})]})},kj=({lesson:e,onComplete:t,onExit:s,reviewMode:r})=>{const[a,o]=w.useState(null),[i,l]=w.useState(!1),[c,d]=w.useState(!1),[m,u]=w.useState(0),[g,p]=w.useState(!1);w.useEffect(()=>{const f=setInterval(()=>{u(v=>v+1)},1e3);return()=>clearInterval(f)},[]);const k=()=>{var f,v;if((f=e.content)!=null&&f.budget)return e.content.budget;if((v=e.content)!=null&&v.scenario){const R=e.content.scenario.match(/R\$ (\d+),00/);return R?parseInt(R[1]):0}return 0},P=f=>{if(i)return;const v=k(),R=(f.cost||f.price)<=v;o(f),l(!0),d(R),setTimeout(()=>{p(!0)},500)},S=()=>{const f=k(),v=a.cost||a.price||0;let R=0,E="";v>f?(R=0,E=`Voc escolheu uma opo que custa R$ ${v},00, mas seu oramento  de R$ ${f},00. Tente escolher algo dentro do seu oramento!`):v===0?(R=100,E="Excelente! Poupar tudo mostra disciplina financeira. Voc est construindo um futuro melhor!"):v<=f*.2?(R=90,E=`Muito bom! Voc gastou pouco e ainda pode poupar R$ ${f-v},00. Boa deciso financeira!`):v<=f*.5?(R=75,E=`Boa escolha! Voc gastou moderadamente e ainda pode poupar R$ ${f-v},00.`):(R=50,E="Voc gastou a maior parte da sua mesada. Tente pensar em opes mais econmicas na prxima vez!"),t({score:R,timeSpent:m,isPerfect:R>=90,feedback:E})},x=f=>{if(!i)return"bg-white border-2 border-gray-300 hover:border-primary transition-colors";const v=k(),R=(f.cost||f.price)<=v;return a===f?R?"bg-green-100 border-2 border-green-500 text-green-800":"bg-red-100 border-2 border-red-500 text-red-800":"bg-gray-100 border-2 border-gray-300 text-gray-500"},y=k();return n.jsxs(je,{title:e.title,timeSpent:m,onExit:s,icon:"",reviewMode:r,children:[n.jsxs("div",{className:"text-center mb-8 font-sans",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4 font-sans",children:e.content.text?e.content.text.replace(/^Poup: ?/i," "):e.content.text}),n.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:n.jsx("p",{className:"text-blue-800 font-semibold",children:e.content.scenario})})]}),n.jsx("div",{className:"space-y-4 mb-6 font-sans",children:e.content.options&&e.content.options.map((f,v)=>n.jsxs("button",{onClick:()=>P(f),disabled:i,className:`w-full p-4 rounded-2xl text-left font-medium shadow-md border-2 transition-all duration-200 font-sans ${x(f)} ${i?"cursor-default":"hover:scale-105 cursor-pointer"} focus:outline-none focus:ring-2 focus:ring-primary`,tabIndex:0,children:[n.jsxs("div",{className:"flex items-center justify-between font-sans",children:[n.jsxs("div",{className:"flex items-center font-sans",children:[n.jsxs("span",{className:"text-lg font-semibold mr-3 font-sans",children:[String.fromCharCode(65+v),"."]}),n.jsx("span",{className:"text-lg font-sans",children:f.item||f.text||"Opo no encontrada"})]}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:"text-sm font-bold text-blue-600",children:["R$ ",f.cost||f.price||0,",00"]})})]}),f.benefit&&n.jsxs("div",{className:"mt-2 text-sm text-gray-600 text-left",children:[" ",f.benefit]})]},v))}),g&&n.jsxs("div",{className:`p-4 rounded-2xl mb-6 text-center shadow-lg border-2 font-sans transition-all duration-200 ${c?"bg-green-50 text-green-800 border-green-200":"bg-yellow-50 text-yellow-800 border-yellow-200"}`,children:[n.jsx("div",{className:"text-2xl mb-2",children:c?"":""}),n.jsx("p",{className:"font-semibold font-sans",children:c?"Excelente escolha!":"Ajuste sua escolha!"}),n.jsx("p",{className:"text-sm font-sans mt-2",children:a.price>y?`Voc escolheu um item que custa R$ ${a.price},00, mas seu oramento  de R$ ${y},00.`:"Voc escolheu algo dentro do seu oramento. Boa deciso!"})]}),i&&n.jsx("div",{className:"mt-6",children:n.jsx("button",{onClick:S,className:"w-full bg-primary text-white py-4 rounded-2xl font-bold text-lg shadow-lg hover:bg-primary-dark transition-colors transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary font-sans",children:"Continuar"})})]})},Pj=({lesson:e,onComplete:t,onExit:s,reviewMode:r})=>{var I;const[a,o]=w.useState([]),[i,l]=w.useState(0),[c,d]=w.useState(!1),[m,u]=w.useState(""),[g,p]=w.useState(!1),[k,P]=w.useState(0),[S,x]=w.useState(!0);w.useEffect(()=>{const F=setInterval(()=>{l(L=>L+1)},1e3);return()=>clearInterval(F)},[]);const f=(()=>{var F;return((F=e.content)==null?void 0:F.budget)||100})(),v=((I=e.content)==null?void 0:I.products)||[],R=v.length,E=()=>{k<R-1?P(F=>F+1):x(!1)},N=()=>{k>0&&P(F=>F-1)},h=F=>{const L=a.find(O=>O.id===F.id);o(L?O=>O.map(H=>H.id===F.id?{...H,quantity:H.quantity+1}:H):O=>[...O,{...F,quantity:1}]),E()},j=()=>{x(!0),P(0)},C=F=>{o(L=>L.filter(O=>O.id!==F))},b=()=>a.reduce((F,L)=>{const O=L.promotion?L.promotionPrice:L.price;return F+O*L.quantity},0),T=()=>a.reduce((F,L)=>L.promotion?F+(L.price-L.promotionPrice)*L.quantity:F,0),A=()=>{const F=b(),L=T(),O=f-F;let H="";F>f?(H=`Voc ultrapassou o oramento! Total: R$ ${F.toFixed(2).replace(".",",")}, Oramento: R$ ${f.toFixed(2).replace(".",",")}. Remova alguns itens.`,p(!1)):F===0?(H=`Excelente! Voc no gastou nada e economizou R$ ${f.toFixed(2).replace(".",",")}. Disciplina financeira exemplar!`,p(!0)):O>=f*.3?(H=`Muito bom! Voc gastou R$ ${F.toFixed(2).replace(".",",")} e ainda tem R$ ${O.toFixed(2).replace(".",",")}. Economia: R$ ${L.toFixed(2).replace(".",",")}`,p(!0)):O>=f*.1?(H=`Boa escolha! Voc gastou R$ ${F.toFixed(2).replace(".",",")} e ainda tem R$ ${O.toFixed(2).replace(".",",")}. Economia: R$ ${L.toFixed(2).replace(".",",")}`,p(!0)):(H=`Voc gastou quase todo o oramento (R$ ${F.toFixed(2).replace(".",",")}). Tente ser mais seletivo nas prximas compras.`,p(!1)),u(H),d(!0)},$=()=>{const F=b();T();const L=f-F;let O=0;F>f?O=0:F===0?O=100:L>=f*.3?O=90:L>=f*.1?O=75:O=50,t({score:O,timeSpent:i,isPerfect:O>=90,feedback:m})},D=b();T();const V=f-D,z=v[k];return n.jsxs(je,{title:e.title,timeSpent:i,onExit:s,icon:"",reviewMode:r,children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:" Compras Coletivas no Supermercado"}),n.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:n.jsx("p",{className:"text-blue-800 font-semibold",children:e.content.scenario||"Voc e seus amigos tm R$ "+f.toFixed(2).replace(".",",")+" para fazer compras coletivas. Decida entre necessidades bsicas e desejos, considerando o oramento limitado!"})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[S&&z&&n.jsxs("div",{className:"bg-white p-6 rounded-lg border-2 border-gray-200",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Produto ",k+1," de ",R]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(k+1)/R*100}%`}})})]}),n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:z.name}),n.jsx("div",{className:"mb-3",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${z.category==="necessidade"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:z.category==="necessidade"?" Necessidade":" Desejo"})}),n.jsx("div",{className:"mb-4",children:z.promotion?n.jsxs("div",{children:[n.jsxs("span",{className:"text-lg text-gray-500 line-through",children:["R$ ",z.price.toFixed(2).replace(".",",")]}),n.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["R$ ",z.promotionPrice.toFixed(2).replace(".",",")]}),n.jsxs("span",{className:"text-sm bg-red-100 text-red-600 px-3 py-1 rounded-full",children:["-",Math.round((z.price-z.promotionPrice)/z.price*100),"% OFF"]})]}):n.jsxs("div",{className:"text-3xl font-bold text-gray-800",children:["R$ ",z.price.toFixed(2).replace(".",",")]})}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:a.some(F=>F.id===z.id)?()=>C(z.id):()=>h(z),className:`py-3 px-8 rounded-lg transition-colors font-bold text-lg ${a.some(F=>F.id===z.id)?"!bg-red-500 !text-white hover:!bg-red-600":"bg-green-500 text-white hover:bg-green-600"}`,style:a.some(F=>F.id===z.id)?{backgroundColor:"#ef4444",color:"white"}:{},children:a.some(F=>F.id===z.id)?"Remover":"Adicionar"})}),n.jsxs("div",{className:"flex justify-between mt-6",children:[n.jsx("button",{onClick:N,disabled:k===0,className:`px-4 py-2 rounded-lg transition-colors ${k===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:" Anterior"}),n.jsx("button",{onClick:E,disabled:k===R-1,className:`px-4 py-2 rounded-lg transition-colors ${k===R-1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:"Prximo "})]})]})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:" Seu Carrinho"}),!S&&n.jsx("button",{onClick:j,className:"!bg-blue-600 !text-white px-4 py-2 rounded-lg hover:!bg-blue-700 transition-colors text-sm font-medium shadow-sm border border-blue-600",style:{backgroundColor:"#2563eb",color:"white"},children:" Ver Mais Produtos"})]}),a.length===0?n.jsxs("div",{className:"text-center text-gray-500 py-8",children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("p",{children:"Seu carrinho est vazio"}),n.jsx("p",{className:"text-sm",children:"Adicione produtos para comear!"})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:a.length}),n.jsx("p",{className:"text-lg text-gray-700",children:"itens no carrinho"})]}),n.jsxs("div",{className:"border-t pt-4 space-y-2",children:[n.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{className:D>f?"text-red-600":"text-green-600",children:["R$ ",D.toFixed(2).replace(".",",")]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Oramento:"}),n.jsxs("span",{children:["R$ ",f.toFixed(2).replace(".",",")]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Restante:"}),n.jsxs("span",{className:V<0?"text-red-600":"text-green-600",children:["R$ ",V.toFixed(2).replace(".",",")]})]})]})]})]}),c&&n.jsxs("div",{className:`p-4 rounded-lg mb-6 text-center ${g?"bg-green-50 text-green-800 border-2 border-green-200":"bg-red-50 text-red-800 border-2 border-red-200"}`,children:[n.jsx("div",{className:"text-2xl mb-2",children:g?"":""}),n.jsx("p",{className:"font-semibold",children:m})]}),n.jsx("div",{className:"flex space-x-4",children:c?n.jsx("button",{onClick:$,className:"flex-1 bg-primary text-white py-3 rounded-lg font-bold text-lg hover:bg-primary-dark transition-colors",children:"Continuar"}):n.jsx("button",{onClick:A,disabled:a.length===0,className:`flex-1 py-3 rounded-lg font-bold text-lg transition-colors ${a.length===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-primary-dark"}`,children:" Finalizar Compra"})})]})},Ej=({lesson:e,onComplete:t,onExit:s})=>{var E,N,h;const[r,a]=w.useState({}),[o,i]=w.useState(0),[l,c]=w.useState(!1),[d,m]=w.useState(!1),[u,g]=w.useState(""),[p,k]=w.useState(!1);w.useEffect(()=>{const j=setInterval(()=>{i(C=>C+1)},1e3);return()=>clearInterval(j)},[]);const P=(j,C)=>{a(b=>({...b,[j]:parseInt(C)||0}))},S=()=>{var A,$;const j=Object.values(r).reduce((D,V)=>D+V,0),C=($=(A=e.content)==null?void 0:A.text)==null?void 0:$.match(/R\$ (\d+),00/),b=C?parseInt(C[1]):150,T=j===b;c(!0),k(T),m(!0),g(T?"Parabns! Voc distribuiu sua mesada perfeitamente! Isso mostra que voc sabe planejar seus gastos.":`Voc distribuiu R$ ${j},00 de R$ ${b},00. Tente novamente para distribuir exatamente R$ ${b},00.`)},x=()=>{var A,$;const j=Object.values(r).reduce((D,V)=>D+V,0),C=($=(A=e.content)==null?void 0:A.text)==null?void 0:$.match(/R\$ (\d+),00/),b=C?parseInt(C[1]):150,T=j===b;t({score:T?100:Math.max(0,100-Math.abs(j-b)*2),timeSpent:o,isPerfect:T,feedback:u})},y=Object.values(r).reduce((j,C)=>j+C,0),f=(N=(E=e.content)==null?void 0:E.text)==null?void 0:N.match(/R\$ (\d+),00/),v=f?parseInt(f[1]):150,R=v-y;return n.jsxs(je,{title:e.title,timeSpent:o,onExit:s,icon:"",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:e.content.text}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Distribua seu oramento entre as categorias abaixo:"}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-bold text-blue-800",children:"Oramento Total:"}),n.jsxs("span",{className:"font-bold text-blue-800",children:["R$ ",v,",00"]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-2",children:[n.jsx("span",{className:"text-sm text-blue-600",children:"Distribudo:"}),n.jsxs("span",{className:`font-bold ${y>v?"text-red-600":"text-green-600"}`,children:["R$ ",y,",00"]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-sm text-blue-600",children:"Restante:"}),n.jsxs("span",{className:`font-bold ${R<0?"text-red-600":"text-green-600"}`,children:["R$ ",R,",00"]})]})]})]}),n.jsx("div",{className:"space-y-4 mb-6",children:(h=e.content)!=null&&h.categories&&e.content.categories.length>0?e.content.categories.map((j,C)=>n.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("label",{className:"font-bold text-gray-800",children:j.name}),n.jsxs("span",{className:"text-sm text-gray-600",children:["Sugesto: R$ ",j.budget,",00"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-gray-600",children:"R$"}),n.jsx("input",{type:"number",min:"0",max:v,value:r[j.name]||"",onChange:b=>P(j.name,b.target.value),className:"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"0"}),n.jsx("span",{className:"text-gray-600",children:",00"})]})]},C)):n.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg border-2 border-yellow-200",children:n.jsx("p",{className:"text-yellow-800 text-center",children:" Categorias no disponveis. Esta lio est sendo preparada."})})}),d?n.jsxs("div",{className:"text-center space-y-4",children:[n.jsxs("div",{className:`p-4 rounded-lg border-2 ${p?"bg-green-50 border-green-200 text-green-800":"bg-yellow-50 border-yellow-200 text-yellow-800"}`,children:[n.jsxs("div",{className:"flex items-center justify-center mb-2",children:[n.jsx("span",{className:"text-2xl mr-2",children:p?"":""}),n.jsx("h3",{className:"font-bold text-lg",children:p?"Parabns!":"Quase l!"})]}),n.jsx("p",{className:"text-sm",children:u})]}),n.jsx("button",{onClick:x,className:"px-8 py-3 rounded-lg font-bold text-white bg-primary hover:bg-primary-dark transition-colors",children:p?"Continuar":"Tentar Novamente"})]}):n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:S,className:"px-8 py-3 rounded-lg font-bold text-white bg-primary hover:bg-primary-dark transition-colors",children:"Verificar Distribuio"})})]})},Tj=({lesson:e,onComplete:t,onExit:s})=>{var v,R,E;const[r,a]=w.useState(0),[o,i]=w.useState([]),[l,c]=w.useState(""),[d,m]=w.useState(0),[u]=w.useState(Date.now()),[g,p]=w.useState(!1),[k,P]=w.useState(!1),S=bt.useMemo(()=>e.content?e.content.problems&&e.content.problems.length>0?{problems:e.content.problems.map(N=>({id:N.id,level:N.level||"intermedirio",title:N.title||`Problema ${N.id}`,context:N.context||"",question:N.question||N.description||N.problem||"Problema no encontrado",givenData:N.givenData||{},formula:N.formula||"",steps:N.steps||[],hint:N.hint||"",answer:N.correctAnswer||N.solution||N.answer||0,explanation:N.explanation||N.feedback||"Explicao no disponvel",tolerance:N.tolerance||.01}))}:e.content.problems&&e.content.problems.length>0?{problems:e.content.problems.map(N=>({id:N.id||0,level:"intermedirio",title:`Problema ${N.id||0}`,context:"",question:N.question||N.problem||"Problema no encontrado",givenData:{},formula:"",steps:[],hint:"",answer:N.answer||N.solution||0,explanation:N.explanation||N.feedback||"Explicao no disponvel",tolerance:N.tolerance||.01}))}:{problems:[]}:{problems:[]},[e.content]);bt.useMemo(()=>S.problems.map(N=>({question:N.question})),[S]),w.useEffect(()=>{const N=setInterval(()=>{m(Math.floor((Date.now()-u)/1e3))},1e3);return()=>clearInterval(N)},[u]);const x=(v=S.problems)==null?void 0:v[r],y=()=>{var A;if(!l.trim())return;const N=l.trim().replace(",","."),h=parseFloat(N),j=x.answer,C=((A=S.problems[r])==null?void 0:A.tolerance)||.01,b=Math.abs(h-j),T=b<=C;console.log(" Debug Math Problems:"),console.log("  User Answer:",h),console.log("  Correct Answer:",j),console.log("  Tolerance:",C),console.log("  Difference:",b),console.log("  Is Correct:",T),P(T),p(!0),i($=>[...$,{problemIndex:r,userAnswer:h,correctAnswer:j,isCorrect:T}]),setTimeout(()=>{if(p(!1),r<S.problems.length-1)a($=>$+1),c("");else{const $=o.filter(z=>z.isCorrect).length+(T?1:0),D=S.problems.length,V=Math.round($/D*100);t({score:V,timeSpent:d,isPerfect:$===D,correctAnswers:$,totalQuestions:D,userAnswers:[...o,{problemIndex:r,userAnswer:h,correctAnswer:j,isCorrect:T}]})}},2e3)},f=N=>{N.key==="Enter"&&!g&&y()};return console.log(" MathProblemsLesson - lesson title:",e.title),console.log(" MathProblemsLesson - problems count:",S.problems.length),console.log(" MathProblemsLesson - current problem question:",x==null?void 0:x.question),!S.problems||S.problems.length===0?n.jsx(je,{title:e.title,timeSpent:d,onExit:s,icon:"",children:n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dados da lio no disponveis"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Esta lio est sendo preparada."}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Voltar"})]})})}):n.jsxs(je,{title:e.title,timeSpent:d,onExit:s,icon:"",children:[n.jsxs("div",{className:"text-center mb-6 font-sans",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4 font-sans",children:((R=e.content)==null?void 0:R.text)||"Problemas Matemticos"}),S.problems&&S.problems.length>0&&n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:[n.jsxs("p",{className:"text-sm text-blue-700 font-medium",children:["Problema ",r+1," de ",S.problems.length]}),n.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2 mt-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/S.problems.length*100}%`}})})]}),((E=e.content)==null?void 0:E.instructions)&&e.content.instructions.length>0&&n.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg mb-6",children:[n.jsx("h3",{className:"font-bold text-yellow-800 mb-2",children:"Instrues:"}),n.jsx("ul",{className:"text-sm text-yellow-700 text-left",children:e.content.instructions.map((N,h)=>n.jsxs("li",{className:"mb-1",children:[" ",N]},h))})]})]}),x?n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border-2 border-gray-200 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800 font-sans",children:["Problema ",r+1,": ",x.title]}),n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${x.level==="bsico"?"bg-green-100 text-green-800":x.level==="intermedirio"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:x.level})]}),x.context&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[n.jsx("h4",{className:"font-bold text-blue-800 mb-2",children:" Situao:"}),n.jsx("p",{className:"text-sm text-blue-700",children:x.context})]}),x.givenData&&Object.keys(x.givenData).length>0&&n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mb-4 border border-green-200",children:[n.jsxs("h4",{className:"font-bold text-green-800 mb-3 flex items-center",children:[n.jsx("span",{className:"text-lg mr-2",children:""}),"Dados Fornecidos:"]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(x.givenData).map(([N,h])=>n.jsxs("div",{className:"bg-white p-3 rounded-lg border border-green-200 shadow-sm",children:[n.jsx("div",{className:"text-xs text-green-600 font-medium uppercase tracking-wide mb-1",children:N.replace(/([A-Z])/g," $1").replace(/^./,j=>j.toUpperCase())}),n.jsx("div",{className:"text-lg font-bold text-green-800",children:typeof h=="number"?h.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):h})]},N))})]}),n.jsx("p",{className:"text-lg text-gray-700 mb-6 font-sans",children:x.question}),x.hint&&n.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg mb-4",children:[n.jsx("h4",{className:"font-bold text-yellow-800 mb-1",children:" Dica:"}),n.jsx("p",{className:"text-sm text-yellow-700",children:x.hint})]}),n.jsx("div",{className:"mb-4",children:n.jsx("input",{type:"number",value:l,onChange:N=>c(N.target.value),onKeyPress:f,disabled:g,placeholder:"Digite sua resposta (ex: 2,30 ou 2.30)...",className:`w-full p-4 border-2 rounded-lg text-lg focus:outline-none transition-colors font-sans ${g?k?"border-green-500 bg-green-50":"border-red-500 bg-red-50":"border-gray-300 focus:border-primary"}`})}),!g&&n.jsx("button",{onClick:y,disabled:!l.trim(),className:"w-full bg-primary text-white py-3 rounded-lg font-bold text-lg hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Verificar Resposta"})]}):n.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Problema no encontrado"}),n.jsx("p",{className:"text-gray-600",children:"Este problema est sendo preparado."})]}),g&&x&&n.jsxs("div",{className:`p-6 rounded-lg mb-6 shadow-lg border-2 font-sans transition-all duration-200 ${k?"bg-green-50 text-green-800 border-green-200":"bg-red-50 text-red-800 border-red-200"}`,children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("div",{className:"text-4xl mb-3",children:k?"":""}),n.jsx("p",{className:"text-xl font-bold mb-2 font-sans",children:k?"Correto!":"Incorreto!"}),n.jsxs("p",{className:"text-lg mb-3 font-sans",children:["Sua resposta: ",n.jsx("span",{className:"font-bold",children:l})]})]}),r<S.problems.length-1&&n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-sm mt-3 font-sans",children:"Prximo problema em 2 segundos..."})})]}),o.length>0&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-bold text-gray-800 mb-3 font-sans",children:"Respostas anteriores:"}),n.jsx("div",{className:"space-y-2",children:o.map((N,h)=>n.jsxs("div",{className:"flex justify-between items-center text-sm",children:[n.jsxs("span",{className:"font-sans",children:["Problema ",N.problemIndex+1,":"]}),n.jsxs("span",{className:`font-bold font-sans ${N.isCorrect?"text-green-600":"text-red-600"}`,children:[N.userAnswer," ",N.isCorrect?"":""]})]},h))})]})]})},Aj=({lesson:e,onComplete:t,onExit:s})=>{var f,v,R,E,N,h;if(console.log(" ShoppingSimulationLesson - lesson title:",e==null?void 0:e.title),console.log(" ShoppingSimulationLesson - products count:",((v=(f=e==null?void 0:e.content)==null?void 0:f.products)==null?void 0:v.length)||0),console.log(" ShoppingSimulationLesson - budget:",(R=e==null?void 0:e.content)==null?void 0:R.budget),!e)return n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Erro ao carregar lio"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"A lio no foi encontrada ou est corrompida."}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Voltar"})]})});if(!e.content)return n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Contedo no encontrado"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Esta lio no possui contedo vlido."}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Voltar"})]})});const[r,a]=w.useState([]),[o,i]=w.useState(0),[l,c]=w.useState(0),[d]=w.useState(Date.now()),[m,u]=w.useState(!1),[g,p]=w.useState("");w.useEffect(()=>{const j=setInterval(()=>{c(Math.floor((Date.now()-d)/1e3))},1e3);return()=>clearInterval(j)},[d]);const k=j=>{var C;if(r.find(b=>b.name===j.name))a(b=>b.filter(T=>T.name!==j.name)),i(b=>b-j.price);else{const b=((C=e.content.scenario)==null?void 0:C.budget)||e.content.budget||0;o+j.price<=b&&(a(T=>[...T,j]),i(T=>T+j.price))}},P=()=>{var D,V,z,I;const j=((D=e.content.scenario)==null?void 0:D.budget)||e.content.budget||0,C=r.filter(F=>F.type==="necessidade").length,b=r.filter(F=>F.type==="desejo").length,T=r.filter(F=>F.type==="investimento").length;let A=0,$="";o<=j?A+=30:A-=20,C>=1&&(A+=25),T>=1&&(A+=25),b===0&&(A+=20),A>=80?$=((V=e.content.feedback)==null?void 0:V.success)||"Excelente! Voc fez escolhas muito inteligentes!":A>=50?$=((z=e.content.feedback)==null?void 0:z.warning)||"Bom trabalho! Voc pode melhorar ainda mais!":$=((I=e.content.feedback)==null?void 0:I.failure)||"Continue praticando! Voc vai melhorar!",p($),u(!0)},S=j=>{var A;const C=r.find($=>$.name===j.name),b=((A=e.content.scenario)==null?void 0:A.budget)||e.content.budget||0,T=o+j.price<=b;return C?"bg-green-100 border-green-500 text-green-800":T?"bg-white border-gray-300 hover:border-primary hover:bg-blue-50 cursor-pointer":"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed"},x=j=>{switch(j){case"necessidade":return"text-blue-600";case"desejo":return"text-purple-600";case"investimento":return"text-green-600";default:return"text-gray-600"}},y=j=>{switch(j){case"necessidade":return"";case"desejo":return"";case"investimento":return"";default:return""}};return n.jsxs(je,{title:e.title,timeSpent:l,onExit:s,icon:"",children:[n.jsx("div",{className:"text-center mb-6 font-sans",children:e.content.scenario&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[n.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:e.content.scenario.title||"Cenrio"}),n.jsx("p",{className:"text-blue-700 text-sm",children:e.content.scenario.description||"Escolha os itens corretos"})]})}),n.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg mb-6 text-center",children:[n.jsxs("p",{className:"text-lg font-bold text-yellow-800",children:["Oramento: R$ ",((E=e.content.scenario)==null?void 0:E.budget)||e.content.budget||0]}),n.jsxs("p",{className:"text-sm text-yellow-700",children:["Gasto: R$ ",o," | Restante: R$ ",(((N=e.content.scenario)==null?void 0:N.budget)||e.content.budget||0)-o]})]}),e.content.objectives&&e.content.objectives.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:"Objetivos:"}),n.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:e.content.objectives.map((j,C)=>n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),j]},C))})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:(((h=e.content.scenario)==null?void 0:h.items)||e.content.products||e.content.items||[]).map((j,C)=>{const b={...j,type:j.type||(j.category==="Essencial"?"necessidade":j.category==="Desejo"?"desejo":j.category==="Investimento"?"investimento":"necessidade")};return n.jsx("div",{onClick:()=>k(b),className:`p-4 rounded-lg border-2 transition-all duration-200 ${S(b)}`,children:n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h3",{className:"font-bold text-lg text-gray-800 leading-tight flex-1 mr-3",children:b.name}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:"text-xl font-bold text-green-600",children:["R$ ",b.price]})})]}),b.description&&n.jsx("div",{className:"mb-3",children:n.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:b.description})}),b.persuasion&&n.jsx("div",{className:"mb-3",children:n.jsx("p",{className:"text-sm text-orange-600 leading-relaxed font-medium",children:b.persuasion})}),n.jsx("div",{className:"flex-1"}),n.jsxs("div",{className:"flex items-center justify-end pt-2 border-t border-gray-100",children:[n.jsx("span",{className:"mr-1",children:y(b.type)}),n.jsx("span",{className:`text-xs font-medium capitalize ${x(b.type)}`,children:b.type})]})]})},C)})}),r.length>0&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[n.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:"Itens Selecionados:"}),n.jsx("div",{className:"space-y-2",children:r.map((j,C)=>n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:j.name}),n.jsxs("span",{className:"text-green-600 font-bold",children:["R$ ",j.price]})]},C))}),n.jsx("div",{className:"border-t pt-2 mt-2",children:n.jsxs("div",{className:"flex justify-between items-center font-bold",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{className:"text-green-600",children:["R$ ",o]})]})})]}),m&&n.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg mb-6 text-center",children:[n.jsx("h3",{className:"text-xl font-bold text-blue-800 mb-4",children:"Resultado da Simulao"}),n.jsx("p",{className:"text-blue-700 mb-4",children:g}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"bg-white p-3 rounded",children:[n.jsx("p",{className:"font-bold text-blue-600",children:"Necessidades"}),n.jsx("p",{className:"text-2xl font-bold",children:r.filter(j=>j.type==="necessidade").length})]}),n.jsxs("div",{className:"bg-white p-3 rounded",children:[n.jsx("p",{className:"font-bold text-purple-600",children:"Desejos"}),n.jsx("p",{className:"text-2xl font-bold",children:r.filter(j=>j.type==="desejo").length})]}),n.jsxs("div",{className:"bg-white p-3 rounded",children:[n.jsx("p",{className:"font-bold text-green-600",children:"Poupana"}),n.jsx("p",{className:"text-2xl font-bold",children:r.filter(j=>j.type==="investimento").length})]})]})]}),n.jsx("div",{className:"flex gap-4",children:m?n.jsx("button",{onClick:()=>{var $;const j=(($=e.content.scenario)==null?void 0:$.budget)||e.content.budget||0,C=r.filter(D=>D.type==="necessidade").length,b=r.filter(D=>D.type==="desejo").length,T=r.filter(D=>D.type==="investimento").length;let A=0;o<=j&&(A+=30),C>=1&&(A+=25),T>=1&&(A+=25),b===0&&(A+=20),t({score:Math.max(0,Math.min(100,A)),timeSpent:l,isPerfect:C>=1&&T>=1&&o<=j,correctAnswers:C+T,totalQuestions:r.length,feedback:g})},className:"flex-1 bg-primary text-white py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Continuar"}):n.jsx("button",{onClick:P,disabled:r.length===0,className:"flex-1 bg-primary text-white py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Finalizar Compra"})})]})},Mu=({lesson:e,onComplete:t,onExit:s})=>{var N;const[r,a]=w.useState(""),[o,i]=w.useState([]),[l,c]=w.useState([]),[d,m]=w.useState("search"),[u,g]=w.useState(0),[p,k]=w.useState(!1),[P,S]=w.useState(!1);w.useEffect(()=>{const h=setInterval(()=>{g(j=>j+1)},1e3);return()=>clearInterval(h)},[]);const x=bt.useMemo(()=>e.content?e.content.productDatabase&&e.content.productDatabase.length>0?{productDatabase:e.content.productDatabase,searchTerms:e.content.searchTerms||[],scenario:e.content.scenario||{title:"Pesquisa de Preos",description:"Use a barra de pesquisa para encontrar produtos"}}:e.content.products&&e.content.products.length>0?{productDatabase:e.content.products,searchTerms:[],scenario:e.content.scenario||{title:"Comparao de Preos",description:"Compare as opes disponveis"}}:{productDatabase:[],searchTerms:[],scenario:""}:{productDatabase:[],searchTerms:[],scenario:""},[e.content]),y=()=>{if(!r.trim())return;const h=x.productDatabase.filter(j=>j.searchKeywords.some(C=>C.toLowerCase().includes(r.toLowerCase())));i(h),m("results")},f=h=>["smartphone","celular","telefone","mobile","android","iphone","samsung","xiaomi","motorola","lg","nokia","huawei"].some(C=>h.toLowerCase().includes(C.toLowerCase())),v=h=>{l.length<3&&!l.find(j=>j.id===h.id)&&c([...l,h])},R=h=>{c(l.filter(j=>j.id!==h))},E=()=>{l.length!==0&&(l.reduce((h,j)=>{const C=j.rating*20-j.price/10+(j.warranty==="Grtis"?10:0),b=h.rating*20-h.price/10+(h.warranty==="Grtis"?10:0);return C>b?j:h}),S(l.some(h=>h.isBestValue)),m("final"),k(!0))};return!x.productDatabase||x.productDatabase.length===0?n.jsx(je,{title:e.title,timeSpent:u,onExit:s,icon:"",children:n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dados da lio no disponveis"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Esta lio est sendo preparada."}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Voltar"})]})})}):n.jsxs(je,{title:e.title,timeSpent:u,onExit:s,icon:"",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:x.scenario.title}),n.jsx("p",{className:"text-gray-600 mb-4",children:x.scenario.description})]}),d==="search"&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border-2 border-gray-200 mb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:" Pesquisar Produtos"}),n.jsxs("div",{className:"flex gap-4 mb-4",children:[n.jsx("input",{type:"text",placeholder:"Digite o que voc est procurando...",value:r,onChange:h=>a(h.target.value),className:"flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",onKeyPress:h=>h.key==="Enter"&&y()}),n.jsx("button",{onClick:y,disabled:!r.trim(),className:"bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Pesquisar"})]}),x.searchTerms.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Sugestes:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:x.searchTerms.map((h,j)=>n.jsx("button",{onClick:()=>a(h),className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm hover:bg-gray-200 transition-colors",children:h},j))})]})]}),d==="results"&&n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:[' Resultados para "',r,'" (',o.length," produtos encontrados)"]}),n.jsx("button",{onClick:()=>m("search"),className:"text-primary hover:text-primary-dark font-medium",children:"Nova Pesquisa"})]}),o.length===0&&!f(r)&&n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[n.jsx("div",{className:"text-4xl mb-3",children:""}),n.jsx("h4",{className:"text-lg font-bold text-yellow-800 mb-2",children:"Produto no encontrado"}),n.jsx("p",{className:"text-yellow-700 mb-4",children:"Esta loja especializa-se em smartphones. Tente pesquisar por termos como:"}),n.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:x.searchTerms.map((h,j)=>n.jsx("button",{onClick:()=>{a(h),y()},className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm hover:bg-yellow-200 transition-colors",children:h},j))})]}),o.length===0&&f(r)&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[n.jsx("div",{className:"text-4xl mb-3",children:""}),n.jsx("h4",{className:"text-lg font-bold text-blue-800 mb-2",children:"Nenhum produto encontrado"}),n.jsxs("p",{className:"text-blue-700 mb-4",children:['No encontramos produtos para "',r,'". Tente termos mais especficos:']}),n.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:x.searchTerms.map((h,j)=>n.jsx("button",{onClick:()=>{a(h),y()},className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm hover:bg-blue-200 transition-colors",children:h},j))})]}),o.map((h,j)=>n.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-bold text-gray-800 mb-1",children:h.name}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:h.description}),n.jsxs("div",{className:"flex gap-4 text-xs text-gray-500",children:[n.jsxs("span",{children:[" ",h.store]}),n.jsxs("span",{children:[" ",h.rating,"/5"]}),n.jsxs("span",{children:[" ",h.warranty]}),n.jsxs("span",{children:[" ",h.delivery]})]})]}),n.jsxs("div",{className:"text-right ml-4",children:[n.jsxs("div",{className:"font-bold text-lg text-green-600",children:["R$ ",h.price.toFixed(2).replace(".",",")]}),n.jsx("button",{onClick:()=>v(h),disabled:l.length>=3||l.find(C=>C.id===h.id),className:"mt-2 bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-dark transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:l.find(C=>C.id===h.id)?"Adicionado":"Comparar"})]})]})},h.id))]}),l.length>0&&d!=="final"&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 mb-6",children:[n.jsxs("h3",{className:"text-lg font-bold text-blue-800 mb-3",children:[" Produtos Selecionados para Comparao (",l.length,"/3)"]}),n.jsx("div",{className:"space-y-2",children:l.map(h=>n.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg",children:[n.jsxs("span",{className:"font-medium",children:[h.name," - R$ ",h.price.toFixed(2).replace(".",",")," - ",h.store]}),n.jsx("button",{onClick:()=>R(h.id),className:"text-red-500 hover:text-red-700 font-medium",children:"Remover"})]},h.id))}),l.length>=2&&n.jsx("button",{onClick:E,className:"mt-4 w-full bg-primary text-white py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Finalizar Comparao"})]}),d==="final"&&((N=e.content)==null?void 0:N.comparisonTable)&&l.length>0&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border-2 border-gray-200 mb-6",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:[" ",e.content.comparisonTable.title]}),n.jsx("p",{className:"text-gray-600 mb-6",children:e.content.comparisonTable.description}),n.jsx("div",{className:"overflow-x-auto max-w-full",children:n.jsxs("table",{className:"w-full border-collapse bg-gray-100 min-w-max",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-200",children:[n.jsx("th",{className:"border border-gray-300 p-3 text-left font-semibold text-gray-800 min-w-[150px]",children:"Diferenciais"}),l.map(h=>{const j=l.find(b=>b.isBestValue),C=j&&h.id===j.id;return n.jsx("th",{className:`border border-gray-300 p-3 text-center font-semibold min-w-[120px] ${C?"bg-green-100 text-green-800 border-green-300":"text-gray-800"}`,children:h.store},h.id)})]})}),n.jsx("tbody",{children:e.content.comparisonTable.differentials.map((h,j)=>n.jsxs("tr",{className:"bg-white",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium text-gray-800",children:h.name}),l.map(C=>{const b=l.find($=>$.isBestValue),T=b&&C.id===b.id;let A=!1;if(h.id==="frete-gratis")A=C.delivery.toLowerCase().includes("grtis")||C.delivery.toLowerCase().includes("gratis");else if(h.id==="garantia-estendida")A=C.warranty.includes("18")||C.warranty.includes("24")||C.warranty.includes("36");else if(h.id==="avaliacao-alta")A=C.rating>=4.5;else if(h.id==="preco-competitivo"){const $=l.reduce((D,V)=>V.price<D.price?V:D);A=C.id===$.id}return n.jsx("td",{className:`border border-gray-300 p-3 text-center ${T?"bg-green-50 border-green-200":""}`,children:A?n.jsx("span",{className:"text-green-600 text-2xl",children:""}):n.jsx("span",{className:"text-red-500 text-2xl",children:""})},C.id)})]},h.id))})]})})]}),p&&n.jsxs("div",{className:`p-6 rounded-lg mb-6 text-center shadow-lg border-2 ${P?"bg-green-50 text-green-800 border-green-200":"bg-yellow-50 text-yellow-800 border-yellow-200"}`,children:[n.jsx("div",{className:"text-4xl mb-3",children:P?"":""}),n.jsx("h3",{className:"text-xl font-bold mb-2",children:P?"Excelente Pesquisa!":"Boa Pesquisa!"}),n.jsx("p",{className:"mb-4",children:P?"Voc encontrou o melhor custo-benefcio! Parabns pela pesquisa detalhada!":"Voc fez uma boa pesquisa! Continue praticando para encontrar sempre as melhores ofertas!"})]}),p&&n.jsx("div",{className:"text-center mb-6",children:n.jsx("button",{onClick:()=>{t({score:P?100:75,timeSpent:u,isPerfect:P,selectedProducts:l.map(j=>j.name),totalProducts:l.length})},className:"bg-primary text-white px-8 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Finalizar Lio"})})]})},Iu=({lesson:e,onComplete:t,onExit:s})=>{var b,T,A,$;const[r,a]=w.useState({}),[o,i]=w.useState(0),[l,c]=w.useState(!1),[d,m]=w.useState(""),[u,g]=w.useState(!1),[p,k]=w.useState(null),[P,S]=w.useState(new Set),[x,y]=w.useState({}),v=(()=>{var D,V,z,I,F;if(p!=null&&p.totalBudget)return p.totalBudget;if((V=(D=e.content)==null?void 0:D.gameConfig)!=null&&V.totalBudget)return e.content.gameConfig.totalBudget;if((z=e.content)!=null&&z.totalBudget)return e.content.totalBudget;if((I=e.content)!=null&&I.budget)return e.content.budget;if((F=e.content)!=null&&F.scenario){const L=e.content.scenario.match(/R\$ (\d+),00/);return L?parseInt(L[1]):5e3}return 5e3})(),R=w.useMemo(()=>{var z;if(!p||!((z=e.content)!=null&&z.categories))return{};if(["Oramento de Viagem","Meu Primeiro Oramento","Anlise de fluxo de caixa","Gesto de risco de portflio"].includes(e.title)){const F={"Oramento de Viagem":{label:"Planejamento",icon:""},"Meu Primeiro Oramento":{label:"Meu Oramento",icon:""},"Anlise de fluxo de caixa":{label:"Fluxo de Caixa",icon:""},"Gesto de risco de portflio":{label:"Portflio",icon:""}}[e.title],L={single:{categories:[],total:0,maxTotal:0,label:F.label,icon:F.icon}};return e.content.categories.forEach(O=>{const H=r[O.name]||0;L.single.categories.push({...O,allocated:H}),L.single.total+=H}),L.single.maxTotal=v,L}const V={necessidades:{categories:[],total:0,maxTotal:0,label:"Necessidades",icon:""},desejos:{categories:[],total:0,maxTotal:0,label:"Desejos/Lazer",icon:""},poupanca:{categories:[],total:0,maxTotal:0,label:"Poupana/Investimentos",icon:""},doacoes:{categories:[],total:0,maxTotal:0,label:"Doaes/Legado",icon:""}};return p.adjustments?Object.keys(p.adjustments).forEach(I=>{const L=p.adjustments[I].maxPercentage/100;I==="Necessidades"?V.necessidades.maxTotal=Math.round(v*L):I==="Desejos/Lazer"?V.desejos.maxTotal=Math.round(v*L):I==="Poupana/Investimentos"?V.poupanca.maxTotal=Math.round(v*L):I==="Doaes/Legado"&&(V.doacoes.maxTotal=Math.round(v*L))}):(V.necessidades.maxTotal=Math.round(v*.5),V.desejos.maxTotal=Math.round(v*.3),V.poupanca.maxTotal=Math.round(v*.2)),e.content.categories.forEach(I=>{const F=r[I.name]||0;e.title==="O Oramento da Famlia"?["alimentacao","moradia","transporte","saude"].includes(I.id)?(V.necessidades.categories.push({...I,allocated:F}),V.necessidades.total+=F):["educacao","lazer"].includes(I.id)?(V.desejos.categories.push({...I,allocated:F}),V.desejos.total+=F):["poupanca","investimentos","reserva","emergencia","renda-fixa","acoes","fundos","alternativos"].includes(I.id)?(V.poupanca.categories.push({...I,allocated:F}),V.poupanca.total+=F):(V.poupanca.categories.push({...I,allocated:F}),V.poupanca.total+=F):p.adjustments&&I.group?I.group==="Necessidades"?(V.necessidades.categories.push({...I,allocated:F}),V.necessidades.total+=F):I.group==="Desejos/Lazer"?(V.desejos.categories.push({...I,allocated:F}),V.desejos.total+=F):I.group==="Poupana/Investimentos"?(V.poupanca.categories.push({...I,allocated:F}),V.poupanca.total+=F):I.group==="Doaes/Legado"&&(V.doacoes.categories.push({...I,allocated:F}),V.doacoes.total+=F):p.adjustments||(I.priority==="high"||["alimentacao","moradia","transporte","saude","educacao","hospedagem","necessidades","essenciais","operacional"].includes(I.id)?(V.necessidades.categories.push({...I,allocated:F}),V.necessidades.total+=F):I.priority==="medium"||["lazer","atracoes","brinquedos","presentes","marketing","pesquisa"].includes(I.id)?(V.desejos.categories.push({...I,allocated:F}),V.desejos.total+=F):I.priority==="low"||["poupanca","investimentos","reserva","emergencia","renda-fixa","acoes","fundos","alternativos"].includes(I.id)?(V.poupanca.categories.push({...I,allocated:F}),V.poupanca.total+=F):(V.necessidades.categories.push({...I,allocated:F}),V.necessidades.total+=F))}),V},[p,r,v,(b=e.content)==null?void 0:b.categories]);w.useEffect(()=>{const D=setInterval(()=>{i(V=>V+1)},1e3);return()=>clearInterval(D)},[]);const E=(D,V)=>{if(V===""||V===null||V===void 0){a(I=>({...I,[D]:0}));return}const z=parseInt(V,10);!isNaN(z)&&z>=0&&a(I=>({...I,[D]:z}))},N=()=>{const D=Object.values(r).reduce((B,q)=>B+q,0),V=D<=v&&D>0,z=R;let I=!0,F=[],L=[];Object.entries(z).forEach(([B,q])=>{q.categories.forEach(M=>{(!M.allocated||M.allocated<1)&&(I=!1,L.push(M.name))})});const O=["Oramento familiar avanado","Planejamento financeiro pessoal","Planejamento financeiro familiar avanado","Planejamento financeiro corporativo","Planejamento financeiro estratgico"];if((p!=null&&p.adjustments||O.includes(e.title))&&Object.entries(z).forEach(([B,q])=>{q.maxTotal>0&&q.total>q.maxTotal&&(I=!1,F.push(`${q.label} (R$ ${q.total} > R$ ${q.maxTotal})`))}),["Oramento de Viagem","Meu Primeiro Oramento","Anlise de fluxo de caixa","Gesto de risco de portflio","Planejamento financeiro corporativo","Planejamento financeiro estratgico"].includes(e.title)&&D>v){I=!1;const B={"Oramento de Viagem":"Planejamento","Meu Primeiro Oramento":"Meu Oramento","Anlise de fluxo de caixa":"Fluxo de Caixa","Gesto de risco de portflio":"Portflio","Planejamento financeiro corporativo":"Oramento Corporativo","Planejamento financeiro estratgico":"Estratgia Financeira"};F.push(`${B[e.title]} (R$ ${D} > R$ ${v})`)}D<v*.9&&(I=!1);const ne=V&&I,Y=ne?100:Math.max(0,100-Math.abs(D-v)*2);if(g(ne),c(!0),ne&&p&&(S(B=>new Set([...B,p.id])),y(B=>({...B,[p.id]:{scenario:p,score:Y,totalAllocated:D,groups:z}}))),ne)if(e.content.scenarios&&e.content.scenarios.length>1){const B=e.content.scenarios.filter(q=>!P.has(q.id)&&q.id!==p.id);B.length>0?m(`Excelente! Cenrio "${p.title}" concludo! Ainda faltam ${B.length} cenrio(s) para completar a lio.`):m("Parabns! Voc completou todos os cenrios! A lio est concluda.")}else m(`Excelente! Cenrio "${p.title}" concludo! A lio est concluda.`);else L.length>0?m(`Voc precisa alocar pelo menos R$ 1,00 em cada categoria! Categorias vazias: ${L.join(", ")}`):D>v?m(`Voc ultrapassou o oramento! Distribuiu R$ ${D.toLocaleString("pt-BR")},00 de R$ ${v.toLocaleString("pt-BR")},00. Tente reduzir alguns gastos.`):D===0?m(`Voc precisa distribuir o oramento! Planeje como gastar os R$ ${v.toLocaleString("pt-BR")},00 entre as categorias.`):F.length>0?m(`Ajuste necessrio! Grupos que excederam o limite: ${F.join(", ")}`):p!=null&&p.adjustments?m(`Voc distribuiu R$ ${D.toLocaleString("pt-BR")},00 de R$ ${v.toLocaleString("pt-BR")},00. Tente usar mais do oramento disponvel!`):m(`Excelente! Voc distribuiu R$ ${D.toLocaleString("pt-BR")},00 de R$ ${v.toLocaleString("pt-BR")},00. Distribuio equilibrada!`)},h=()=>{if(e.content.scenarios&&e.content.scenarios.every(V=>P.has(V.id))){const z=Object.values(x).reduce((I,F)=>I+F.score,0)/Object.keys(x).length;t({score:Math.round(z),timeSpent:o,isPerfect:z>=90,feedback:`Lio concluda! Voc completou todos os ${e.content.scenarios.length} cenrio(s) com uma pontuao mdia de ${Math.round(z)} pontos.`,scenarioResults:x})}else a({}),c(!1),m(""),g(!1),k(null)},j=Object.values(r).reduce((D,V)=>D+V,0),C=v-j;return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-fadeIn {
          animation: fadeIn 0.5s ease-out;
        }
      `}),n.jsxs(je,{title:e.title,timeSpent:o,onExit:s,icon:"",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:e.content.scenario||"Distribua o oramento mensal da famlia"}),n.jsx("div",{className:"text-gray-600 mb-6",children:e.content.instructions&&Array.isArray(e.content.instructions)?n.jsx("ul",{className:"text-left max-w-2xl mx-auto space-y-2",children:e.content.instructions.map((D,V)=>n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-primary mr-2",children:""}),n.jsx("span",{children:D})]},V))}):n.jsx("p",{children:e.content.instructions||"Distribua o dinheiro entre as diferentes categorias respeitando os limites:"})}),((T=e.content)==null?void 0:T.scenarios)&&e.content.scenarios.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Escolha um cenrio:"}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Progresso: ",P.size,"/",((A=e.content.scenarios)==null?void 0:A.length)||0," cenrios"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:e.content.scenarios.map((D,V)=>{const I=(O=>({selected:"border-primary bg-primary/10 text-primary",unselected:"border-gray-200 bg-white hover:border-gray-300",completed:"border-green-500 bg-green-50 text-green-700"}))(D.classLevel),F=P.has(D.id),L=(p==null?void 0:p.id)===D.id;return n.jsxs("button",{onClick:()=>{(p==null?void 0:p.id)===D.id?(k(null),a({})):k(D)},className:`p-4 rounded-lg border-2 text-left transition-all h-full flex flex-col ${F?I.completed:L?I.selected:I.unselected}`,children:[n.jsx("h4",{className:"font-bold text-sm mb-3 h-8 flex items-center",children:D.title}),n.jsxs("div",{className:"text-xs text-gray-600 space-y-2 flex-1",children:[n.jsx("p",{className:"font-medium leading-tight",children:D.description.split(" - ")[0]}),n.jsx("p",{className:"text-gray-500 leading-tight",children:D.description.split(" - ")[1]})]}),F&&n.jsx("div",{className:"mt-3 text-xs text-green-600 font-medium h-4 flex items-center",children:"Concludo"})]},D.id)})})]}),p&&p.opportunities&&n.jsxs("div",{className:"p-4 rounded-lg mb-6 bg-gray-50 border border-gray-200",children:[n.jsxs("h3",{className:"font-bold text-lg mb-3 text-gray-800",children:[" Oportunidades Disponveis para ",p.title]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:p.opportunities.map((D,V)=>n.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[n.jsx("span",{className:"mr-2",children:""}),n.jsx("span",{children:D})]},V))})]})]}),n.jsx("div",{className:"space-y-6 mb-6",children:p&&(($=e.content)==null?void 0:$.categories)&&e.content.categories.length>0&&n.jsx("div",{className:"animate-fadeIn",children:Object.entries(R).map(([V,z])=>{if(e.title==="O Oramento da Famlia"&&V==="doacoes")return null;if(e.title!=="O Oramento da Famlia"){if(z.categories.length===0)return null}const I=["Oramento de Viagem","Meu Primeiro Oramento","Anlise de fluxo de caixa","Gesto de risco de portflio"],F=["O Oramento da Famlia","Oramento familiar avanado","Planejamento financeiro pessoal","Planejamento financeiro familiar avanado","Planejamento financeiro corporativo","Planejamento financeiro estratgico"],L=e.title==="O Oramento da Famlia"?"border-gray-200 bg-white":p!=null&&p.adjustments&&z.total>z.maxTotal?"border-red-300 bg-red-50":p!=null&&p.adjustments&&z.total===z.maxTotal?"border-green-300 bg-green-50":F.includes(e.title)&&z.total>z.maxTotal?"border-red-300 bg-red-50":F.includes(e.title)&&z.total===z.maxTotal?"border-green-300 bg-green-50":I.includes(e.title)&&z.total>z.maxTotal?"border-red-300 bg-red-50":"border-gray-200 bg-white";return n.jsxs("div",{className:`p-6 rounded-xl border-2 ${L} transition-all duration-300 hover:shadow-lg`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-3xl mr-4",children:z.icon}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800",children:z.label}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsxs("span",{className:"text-sm text-gray-600",children:["R$ ",z.total.toLocaleString("pt-BR"),",00"]}),(()=>{const O=["Oramento de Viagem","Meu Primeiro Oramento","Anlise de fluxo de caixa","Gesto de risco de portflio","Planejamento financeiro corporativo","Planejamento financeiro estratgico"],H=["O Oramento da Famlia","Oramento familiar avanado","Planejamento financeiro pessoal","Planejamento financeiro familiar avanado","Planejamento financeiro corporativo","Planejamento financeiro estratgico"];return e.title==="O Oramento da Famlia"||O.includes(e.title)||H.includes(e.title)||p!=null&&p.adjustments?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-gray-400",children:"/"}),n.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:["R$ ",z.maxTotal.toLocaleString("pt-BR"),",00"]})]}):null})()]})]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-bold ${e.title==="O Oramento da Famlia"?"bg-gray-100 text-gray-700":p!=null&&p.adjustments&&z.total>z.maxTotal?"bg-red-100 text-red-700":p!=null&&p.adjustments&&z.total===z.maxTotal?"bg-green-100 text-green-700":F.includes(e.title)&&z.total>z.maxTotal?"bg-red-100 text-red-700":F.includes(e.title)&&z.total===z.maxTotal?"bg-green-100 text-green-700":I.includes(e.title)&&z.total>z.maxTotal?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:e.title==="O Oramento da Famlia"?"Disponvel":p!=null&&p.adjustments&&z.total>z.maxTotal?"Excedeu":p!=null&&p.adjustments&&z.total===z.maxTotal?"Perfeito":F.includes(e.title)&&z.total>z.maxTotal?"Excedeu":F.includes(e.title)&&z.total===z.maxTotal?"Perfeito":I.includes(e.title)&&z.total>z.maxTotal?"Excedeu":"Disponvel"})})]}),n.jsx("div",{className:"space-y-4",children:z.categories.map((O,H)=>n.jsxs("div",{className:`flex items-center justify-between p-4 bg-white rounded-lg border transition-colors ${!O.allocated||O.allocated<1?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"text-2xl",children:O.icon}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:O.name}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:O.description}),(!O.allocated||O.allocated<1)&&n.jsx("p",{className:"text-xs text-red-600 mt-1 font-medium",children:"Mnimo: R$ 1,00"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-gray-700 font-medium",children:"R$"}),n.jsx("input",{type:"number",min:"0",step:"1",value:O.allocated||"",onChange:ne=>E(O.name,ne.target.value),className:`w-28 px-3 py-2 border-2 rounded-lg focus:outline-none text-right font-medium ${!O.allocated||O.allocated<1?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-primary"}`,placeholder:"1"}),n.jsx("span",{className:"text-gray-700 font-medium",children:",00"})]})]},H))})]},V)})})}),p&&n.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Distribudo:"}),n.jsxs("span",{className:`font-bold text-lg ${j>v?"text-red-600":"text-green-600"}`,children:["R$ ",j.toLocaleString("pt-BR"),",00"]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Oramento Total:"}),n.jsxs("span",{className:"font-bold text-lg text-gray-800",children:["R$ ",v.toLocaleString("pt-BR"),",00"]})]}),C!==0&&n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Restante:"}),n.jsxs("span",{className:`font-bold text-lg ${C<0?"text-red-600":"text-blue-600"}`,children:["R$ ",C.toLocaleString("pt-BR"),",00"]})]})]}),l&&n.jsxs("div",{className:`p-4 rounded-lg mb-6 text-center ${u?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[n.jsx("div",{className:"text-2xl mb-2",children:u?"":""}),n.jsx("p",{className:"font-semibold",children:d})]}),p&&(l?n.jsx("button",{onClick:h,className:"w-full bg-primary text-white py-3 rounded-lg font-bold text-lg hover:bg-primary-dark transition-colors",children:e.content.scenarios&&e.content.scenarios.every(D=>P.has(D.id))?"Concluir Lio":"Prximo Cenrio"}):n.jsx("button",{onClick:N,disabled:j===0,className:`w-full py-3 rounded-lg font-bold text-lg transition-colors ${j===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-primary-dark"}`,children:"Verificar Planejamento"}))]})]})},Fu=({lesson:e,onComplete:t,onExit:s})=>{var N,h,j,C,b,T,A,$;const[r,a]=w.useState(0),[o,i]=w.useState(0),[l,c]=w.useState(0),[d,m]=w.useState(!1),[u,g]=w.useState(""),[p,k]=w.useState(!1),[P,S]=w.useState(!1),x=((N=e.content)==null?void 0:N.months)||[],y=((j=(h=e.content)==null?void 0:h.goal)==null?void 0:j.price)||200,f=((b=(C=e.content)==null?void 0:C.goal)==null?void 0:b.item)||"Videogame";w.useEffect(()=>{const D=setInterval(()=>{c(V=>V+1)},1e3);return()=>clearInterval(D)},[]);const v=D=>{const V=o+D.savings;i(V),g(D.feedback),m(!0),k(D.isCorrect),r<x.length-1?setTimeout(()=>{a(z=>z+1),m(!1)},2e3):setTimeout(()=>{S(!0),m(!1)},2e3)},R=()=>{const D=P?100:Math.round(o/y*100),V=o>=y;t({score:D,timeSpent:l,isPerfect:V,feedback:P?`Parabns! Voc conseguiu economizar R$ ${o.toFixed(2).replace(".",",")} para seu ${f}!`:u})},E=x[r];return P?n.jsxs(je,{title:e.title,timeSpent:l,onExit:s,icon:"",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Jogo Concludo!"}),n.jsx("p",{className:"text-lg text-gray-600 mb-6",children:((T=e.content)==null?void 0:T.finalGoal)||"Parabns por completar o desafio!"}),n.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border-2 border-green-200 mb-6",children:[n.jsx("h3",{className:"text-xl font-bold text-green-800 mb-2",children:"Resultado Final:"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",o.toFixed(2).replace(".",",")," poupados"]}),n.jsxs("p",{className:"text-green-700",children:["Meta: R$ ",y.toFixed(2).replace(".",",")," para ",f]}),n.jsx("p",{className:"text-green-700 mt-2",children:o>=y?" Meta alcanada!":`Faltaram R$ ${(y-o).toFixed(2).replace(".",",")}`})]})]}),n.jsx("button",{onClick:R,className:"w-full bg-primary text-white py-3 rounded-lg font-bold text-lg hover:bg-primary-dark transition-colors",children:"Continuar"})]}):E?n.jsxs(je,{title:e.title,timeSpent:l,onExit:s,icon:"",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:((A=e.content)==null?void 0:A.scenario)||"Desafio de Poupana"}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsxs("span",{className:"text-sm text-blue-600",children:["Ms ",r+1," de ",x.length]}),n.jsxs("span",{className:"text-sm text-blue-600",children:["Meta: R$ ",y.toFixed(2).replace(".",",")]})]}),n.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(o/y*100,100)}%`}})}),n.jsxs("div",{className:"flex justify-between items-center mt-2",children:[n.jsxs("span",{className:"text-sm text-blue-600",children:["Poupado: R$ ",o.toFixed(2).replace(".",",")]}),n.jsxs("span",{className:"text-sm text-blue-600",children:["Faltam: R$ ",Math.max(0,y-o).toFixed(2).replace(".",",")]})]})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg border-2 border-gray-200 mb-6",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center",children:["Ms ",r+1,": Voc recebeu R$ ",E.income.toFixed(2).replace(".",",")]}),E.scenario&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[n.jsx("h4",{className:"text-md font-semibold text-blue-800 mb-2",children:"Situao:"}),n.jsx("p",{className:"text-blue-700",children:E.scenario})]}),n.jsx("div",{className:"space-y-3",children:($=E.choices)==null?void 0:$.map((D,V)=>n.jsx("button",{onClick:()=>v(D),disabled:d,className:`w-full p-4 rounded-lg text-left font-medium transition-all duration-200 ${d?"bg-gray-100 cursor-not-allowed":D.isCorrect?"bg-green-50 hover:bg-green-100 cursor-pointer hover:scale-105 border-2 border-green-200":"bg-orange-50 hover:bg-orange-100 cursor-pointer hover:scale-105 border-2 border-orange-200"}`,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h5",{className:"font-bold text-gray-800 mb-1",children:D.title}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:D.description}),D.expenses&&n.jsxs("div",{className:"text-xs text-gray-500",children:[n.jsx("p",{className:"font-semibold mb-1",children:"Gastos:"}),D.expenses.map((z,I)=>n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:z.item}),n.jsxs("span",{children:["R$ ",z.amount.toFixed(2).replace(".",",")]})]},I)),n.jsxs("div",{className:"border-t pt-1 mt-1 flex justify-between font-semibold",children:[n.jsx("span",{children:"Poupana:"}),n.jsxs("span",{className:"text-green-600",children:["R$ ",D.savings.toFixed(2).replace(".",",")]})]})]})]}),n.jsx("div",{className:"ml-4",children:n.jsx("span",{className:`text-2xl ${D.isCorrect?"text-green-600":"text-orange-600"}`,children:D.isCorrect?"":""})})]})},D.id))})]}),d&&n.jsxs("div",{className:`p-4 rounded-lg mb-6 text-center ${p?"bg-green-50 text-green-800":"bg-yellow-50 text-yellow-800"}`,children:[n.jsx("div",{className:"text-2xl mb-2",children:p?"":""}),n.jsx("p",{className:"font-semibold",children:u})]})]}):n.jsx(je,{title:e.title,timeSpent:l,onExit:s,icon:"",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-gray-600",children:"Carregando desafio..."})})})},Rj=({lesson:e,onComplete:t,onExit:s})=>{var C;const[r,a]=w.useState(0),[o,i]=w.useState(null),[l,c]=w.useState({item:"",cost:"",months:"",category:""}),[d,m]=w.useState(0),[u,g]=w.useState(!1),[p,k]=w.useState({}),[P,S]=w.useState("");w.useEffect(()=>{const b=setInterval(()=>{m(T=>T+1)},1e3);return()=>clearInterval(b)},[]);const x=()=>{r<2&&(a(b=>b+1),S(""),r===1&&(i(null),c({item:"",cost:"",months:"",category:""})))},y=()=>{r>0&&(a(b=>b-1),S(""))},f=b=>{S(b)},v=()=>{const b=e.content.examples[r],T=parseFloat(P),A=parseFloat(b.answer),$=Math.abs(T-A)<=1;k(D=>({...D,[r]:{userAnswer:T,isCorrect:$,correctAnswer:A,monthlySavings:A}}))},R=(b,T)=>{c(A=>({...A,[b]:T}))},E=b=>{i(b),c(T=>({...T,category:b.id}))},N=()=>{if(l.item&&l.cost&&l.months&&l.category){const b=Math.round(parseFloat(l.cost)/parseInt(l.months));g(!0),setTimeout(()=>{t({score:100,timeSpent:d,isPerfect:!0,userGoal:{...l,monthlySavings:b}})},2e3)}},h=e.content.examples[r],j=p[r];return n.jsxs(je,{title:e.title,timeSpent:d,onExit:s,icon:"",children:[n.jsxs("div",{className:"text-center mb-8 font-sans",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4 font-sans",children:e.content.scenario}),n.jsx("p",{className:"text-gray-600 font-sans",children:"Resolva os exemplos e depois crie sua prpria meta!"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:r<2?`Cenrio ${r+1} (${h.character})`:"Cenrio 3 (Sua Meta)"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:y,disabled:r===0,className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${r===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:" Anterior"}),n.jsx("button",{onClick:x,disabled:r===2,className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${r===2?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:"Prximo "})]})]}),n.jsx("div",{className:"space-y-4",children:r<2?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Situao:"}),n.jsx("p",{className:"text-gray-700",children:h.scenario}),h.category&&n.jsx("div",{className:"mt-2",children:n.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:(C=e.content.goalCategories.find(b=>b.id===h.category))==null?void 0:C.name})})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[n.jsx("h4",{className:"font-semibold text-purple-800 mb-3",children:" Sua vez! Calcule:"}),n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("input",{type:"number",placeholder:"Digite sua resposta...",value:P,onChange:b=>f(b.target.value),className:"flex-1 p-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500",disabled:j}),n.jsx("button",{onClick:v,disabled:!P||j,className:`px-4 py-2 rounded-lg font-medium transition-all duration-300 ${!P||j?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white shadow-lg transform hover:scale-105"}`,children:"Verificar"})]}),j&&n.jsxs("div",{className:`p-3 rounded-lg ${j.isCorrect?"bg-green-100 border border-green-300":"bg-red-100 border border-red-300"}`,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:"text-xl",children:j.isCorrect?"":""}),n.jsx("span",{className:`font-semibold ${j.isCorrect?"text-green-800":"text-red-800"}`,children:j.isCorrect?"Correto!":"Tente novamente!"})]}),j.isCorrect?n.jsx("p",{className:"text-green-700 text-sm",children:h.explanation}):n.jsxs("p",{className:"text-red-700 text-sm",children:["Resposta correta: R$ ",j.correctAnswer.toFixed(2).replace(".",",")," por ms"]})]})]})]}):n.jsx(n.Fragment,{children:o?n.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h4",{className:"font-semibold text-purple-800",children:" Defina sua meta:"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Categoria:"}),n.jsx("span",{className:"text-purple-800 font-semibold text-sm",children:o.name}),n.jsx("button",{onClick:()=>i(null),className:"text-xs text-gray-500 hover:text-gray-700 underline",children:"Trocar"})]})]}),n.jsx("div",{className:"space-y-4",children:e.content.inputFields.filter(b=>b.type!=="select").map((b,T)=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:b.label}),n.jsx("input",{type:b.type,placeholder:b.placeholder,value:b.label.includes("O que voc quer comprar")||b.label.includes("Qual produto")||b.label.includes("Para onde")||b.label.includes("Qual investimento")||b.label.includes("Qual empresa")||b.label.includes("Qual estratgia")||b.label.includes("Qual gasto")||b.label.includes("Qual hbito")||b.label.includes("Qual causa")?l.item||"":b.label.includes("Quanto custa")||b.label.includes("Qual seu oramento")||b.label.includes("Quanto quer gastar")||b.label.includes("Quanto quer investir")||b.label.includes("Quanto quer economizar")||b.label.includes("Quanto quer doar")?l.cost||"":(b.label.includes("Em quantos meses")||b.label.includes("Em quanto tempo")||b.label.includes("Por quantos meses")||b.label.includes("Por quantos anos"))&&l.months||"",onChange:A=>R(b.label.includes("O que voc quer comprar")||b.label.includes("Qual produto")||b.label.includes("Para onde")||b.label.includes("Qual investimento")||b.label.includes("Qual empresa")||b.label.includes("Qual estratgia")||b.label.includes("Qual gasto")||b.label.includes("Qual hbito")||b.label.includes("Qual causa")?"item":b.label.includes("Quanto custa")||b.label.includes("Qual seu oramento")||b.label.includes("Quanto quer gastar")||b.label.includes("Quanto quer investir")||b.label.includes("Quanto quer economizar")||b.label.includes("Quanto quer doar")?"cost":"months",A.target.value),className:"w-full p-3 border border-purple-300 rounded-lg focus:outline-none"})]},T))}),l.cost&&l.months&&n.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:" Seu plano de poupana:"}),n.jsxs("p",{className:"text-blue-700",children:["Para comprar ",n.jsx("strong",{children:l.item||"seu objetivo"})," por R$ ",l.cost," em ",l.months," meses, voc precisar guardar ",n.jsxs("strong",{children:["R$ ",Math.round(parseFloat(l.cost)/parseInt(l.months)),",00 por ms"]}),"."]}),n.jsxs("p",{className:"text-blue-600 text-sm mt-2",children:["Categoria: ",n.jsx("strong",{children:o.name})]})]}),n.jsx("button",{onClick:N,disabled:!l.item||!l.cost||!l.months,className:`w-full mt-4 py-3 px-6 rounded-lg font-bold text-lg transition-all duration-300 ${l.item&&l.cost&&l.months?"bg-primary text-white shadow-lg transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Criar Meta Financeira"})]}):n.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[n.jsx("h4",{className:"font-semibold text-purple-800 mb-4",children:" Primeiro, escolha uma categoria para sua meta:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.content.goalCategories.map(b=>n.jsx("div",{onClick:()=>E(b),className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 cursor-pointer hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl mb-2",children:b.icon}),n.jsx("h5",{className:"font-bold text-gray-800 mb-1",children:b.name}),n.jsx("p",{className:"text-gray-600 text-sm mb-3",children:b.description}),n.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[n.jsx("h6",{className:"font-semibold text-gray-700 text-xs mb-1",children:"Exemplos:"}),n.jsx("ul",{className:"text-xs text-gray-600 space-y-1",children:b.examples.slice(0,2).map((T,A)=>n.jsxs("li",{children:[" ",T]},A))})]})]})},b.id))})]})})})]}),n.jsx("div",{className:"text-center",children:n.jsxs("p",{className:"text-gray-600 text-sm",children:[r+1," de 3 cenrios"]})})]}),u&&n.jsxs("div",{className:"mt-6 p-6 bg-green-50 text-green-800 rounded-2xl text-center shadow-lg border-2 border-green-200",children:[n.jsx("div",{className:"text-4xl mb-3",children:""}),n.jsx("h3",{className:"text-xl font-bold mb-2",children:e.content.successMessage}),n.jsxs("p",{className:"text-sm",children:["Sua meta: ",l.item," - R$ ",l.cost," em ",l.months," meses"]}),n.jsxs("p",{className:"text-sm font-semibold mt-2",children:["Voc precisar guardar R$ ",Math.round(parseFloat(l.cost)/parseInt(l.months))," por ms!"]}),o&&n.jsxs("p",{className:"text-sm mt-1",children:["Categoria: ",o.name]})]})]})},Lj={"drag-drop":yj,quiz:bj,choices:jj,classify:Nj,match:wj,simulation:Sj,input:Cj,"budget-choices":kj,"shopping-cart":Pj,"categories-simulation":Ej,"math-problems":Tj,"shopping-simulation":Aj,"price-comparison":Mu,price_comparison:Mu,"budget-distribution":Iu,budget_distribution:Iu,"progress-game":Fu,progress_game:Fu,goals:Rj},Dj=({lesson:e,onComplete:t,onExit:s,reviewMode:r})=>{const a=Lj[e.type];return a?n.jsx(a,{lesson:e,onComplete:t,onExit:s,reviewMode:r}):n.jsx("div",{className:"min-h-screen bg-interface flex items-center justify-center",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-4",children:"Tipo de Lio No Suportado"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Este tipo de lio ainda no foi implementado."}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-dark transition",children:"Voltar"})]})})};class Mj{constructor(){this.initializeProgress()}initializeProgress(){if(!se.load(oe.PROGRESS)){const s={totalXp:0,currentLevel:1,xpToNextLevel:100,streak:0,lastActivityDate:null,dailyGoal:50,dailyProgress:0,achievements:[],completedLessons:[],totalLessonsCompleted:0,perfectLessons:0,timeSpent:0};se.save(oe.PROGRESS,s)}}updateProgress(t,s,r,a,o=!1){const i=se.load(oe.PROGRESS)||{},l=50,c=Math.floor(r*.5),d=l+c;i.totalXp=(i.totalXp||0)+d;const m=this.calculateLevel(i.totalXp),u=m>(i.currentLevel||1);return u?(i.currentLevel=m,i.xpToNextLevel=this.calculateXpToNextLevel(m),Q.success(` Parabns! Voc chegou ao nvel ${m}!`)):i.xpToNextLevel=this.calculateXpToNextLevel(i.currentLevel||1),i.streak=this.updateStreak(i.streak,i.lastActivityDate),i.lastActivityDate=new Date().toISOString(),i.dailyProgress=(i.dailyProgress||0)+d,i.dailyProgress>=(i.dailyGoal||50)&&Q.success(" Meta diria atingida! +10 YCoins!"),i.completedLessons||(i.completedLessons=[]),i.completedLessons.includes(s)||(i.completedLessons.push(s),i.totalLessonsCompleted=(i.totalLessonsCompleted||0)+1),o&&(i.perfectLessons=(i.perfectLessons||0)+1),i.timeSpent=(i.timeSpent||0)+a,se.save(oe.PROGRESS,i),{totalXp:i.totalXp,level:i.currentLevel,xpToNextLevel:i.xpToNextLevel,streak:i.streak,dailyProgress:i.dailyProgress,leveledUp:u,lessonXp:d}}calculateLevel(t){const s=Math.max(0,t||0);return Math.floor(1+Math.sqrt(s/100))}calculateXpToNextLevel(t){const s=Math.max(1,t||1),r=Math.pow(s,2)*100;return console.log(`ProgressService - XP para nvel ${s}: ${r}`),r}updateStreak(t,s){if(!s)return 1;const r=new Date(s),o=Math.abs(new Date-r),i=Math.ceil(o/(1e3*60*60*24));return i===1?(t||0)+1:i===0?t||0:1}getProgress(){const t=se.load(oe.PROGRESS)||{};if(t.totalXp!==void 0&&t.currentLevel!==void 0){const s=this.calculateXpToNextLevel(t.currentLevel);t.xpToNextLevel!==s&&(t.xpToNextLevel=s,se.save(oe.PROGRESS,t))}return t}setDailyGoal(t){const s=this.getProgress();s.dailyGoal=t,se.save(oe.PROGRESS,s)}resetDailyProgress(){const t=this.getProgress();t.dailyProgress=0,se.save(oe.PROGRESS,t)}checkAchievements(){const t=this.getProgress(),s=t.achievements||[],r=[];return t.totalLessonsCompleted===1&&!s.includes("first_lesson")&&r.push("first_lesson"),t.streak>=7&&!s.includes("week_streak")&&r.push("week_streak"),t.currentLevel>=5&&!s.includes("level_5")&&r.push("level_5"),t.perfectLessons>=10&&!s.includes("perfect_10")&&r.push("perfect_10"),r.length>0&&(t.achievements=[...s,...r],se.save(oe.PROGRESS,t),r.forEach(a=>{const o=this.getAchievementData(a);Q.success(` ${o.title}: ${o.description}`)})),r}getAchievementData(t){return{first_lesson:{title:"Primeira Lio",description:"Complete sua primeira lio",icon:"",reward:{xp:50,yuCoins:10}},week_streak:{title:"Semana Consistente",description:"Complete lies por 7 dias seguidos",icon:"",reward:{xp:200,yuCoins:50}},level_5:{title:"Nvel 5",description:"Alcance o nvel 5",icon:"",reward:{xp:100,yuCoins:25}},perfect_10:{title:"Perfeio",description:"Complete 10 lies com pontuao perfeita",icon:"",reward:{xp:300,yuCoins:75}}}[t]||{title:"Conquista Desconhecida",description:"Conquista no encontrada",icon:"",reward:{xp:0,yuCoins:0}}}generateReport(){const t=this.getProgress();return{level:t.currentLevel,totalXp:t.totalXp,xpToNextLevel:t.xpToNextLevel,streak:t.streak,totalLessonsCompleted:t.totalLessonsCompleted,perfectLessons:t.perfectLessons,achievements:t.achievements||[],timeSpent:t.timeSpent,dailyGoal:t.dailyGoal,dailyProgress:t.dailyProgress}}}const Ij=new Mj;class Fj{constructor(){this.achievements=[{id:"first_lesson",title:"Primeira Lio",description:"Complete sua primeira lio",icon:"",xpReward:50,condition:t=>{var s,r;return((r=(s=t.progress)==null?void 0:s.completedLessons)==null?void 0:r.length)>=1}},{id:"streak_3",title:"Consistente",description:"Mantenha um streak de 3 dias",icon:"",xpReward:100,condition:t=>{var s;return((s=t.progress)==null?void 0:s.streak)>=3}},{id:"streak_7",title:"Dedicado",description:"Mantenha um streak de 7 dias",icon:"",xpReward:250,condition:t=>{var s;return((s=t.progress)==null?void 0:s.streak)>=7}},{id:"streak_30",title:"Viciado",description:"Mantenha um streak de 30 dias",icon:"",xpReward:1e3,condition:t=>{var s;return((s=t.progress)==null?void 0:s.streak)>=30}},{id:"perfect_lesson",title:"Perfeio",description:"Complete uma lio com pontuao perfeita",icon:"",xpReward:100,condition:t=>{var s;return((s=t.progress)==null?void 0:s.perfectLessons)>=1}},{id:"level_5",title:"Aprendiz",description:"Alcance o nvel 5",icon:"",xpReward:200,condition:t=>{var s;return((s=t.progress)==null?void 0:s.level)>=5}},{id:"level_10",title:"Estudioso",description:"Alcance o nvel 10",icon:"",xpReward:500,condition:t=>{var s;return((s=t.progress)==null?void 0:s.level)>=10}},{id:"coins_100",title:"Economista Jnior",description:"Acumule 100 YCoins",icon:"",xpReward:150,condition:t=>{var s;return((s=t.progress)==null?void 0:s.yuCoins)>=100}},{id:"coins_500",title:"Economista Snior",description:"Acumule 500 YCoins",icon:"",xpReward:300,condition:t=>{var s;return((s=t.progress)==null?void 0:s.yuCoins)>=500}},{id:"lessons_10",title:"Persistente",description:"Complete 10 lies",icon:"",xpReward:200,condition:t=>{var s,r;return((r=(s=t.progress)==null?void 0:s.completedLessons)==null?void 0:r.length)>=10}},{id:"lessons_25",title:"Determinado",description:"Complete 25 lies",icon:"",xpReward:400,condition:t=>{var s,r;return((r=(s=t.progress)==null?void 0:s.completedLessons)==null?void 0:r.length)>=25}},{id:"daily_goal_week",title:"Meta Semanal",description:"Atinga sua meta diria por 7 dias seguidos",icon:"",xpReward:300,condition:t=>{var s;return((s=t.progress)==null?void 0:s.dailyGoalStreak)>=7}},{id:"module_1_complete",title:" Mestre do Dinheiro",description:"Complete todas as lies do mdulo de introduo",icon:"",xpReward:100,yuCoinsReward:50,condition:t=>{var a,o,i,l,c,d;const s=((i=(o=(a=t.progress)==null?void 0:a.moduleProgress)==null?void 0:o[1])==null?void 0:i.completed)||0,r=((d=(c=(l=t.progress)==null?void 0:l.moduleProgress)==null?void 0:c[1])==null?void 0:d.total)||3;return s>=r&&r>0}},{id:"module_2_complete",title:" Calculadora Humana",description:"Domine a matemtica financeira bsica",icon:"",xpReward:150,yuCoinsReward:75,condition:t=>{var a,o,i,l,c,d;const s=((i=(o=(a=t.progress)==null?void 0:a.moduleProgress)==null?void 0:o[2])==null?void 0:i.completed)||0,r=((d=(c=(l=t.progress)==null?void 0:l.moduleProgress)==null?void 0:c[2])==null?void 0:d.total)||3;return s>=r&&r>0}},{id:"module_3_complete",title:" Conscincia Total",description:"Desenvolva conscincia financeira completa",icon:"",xpReward:200,yuCoinsReward:100,condition:t=>{var a,o,i,l,c,d;const s=((i=(o=(a=t.progress)==null?void 0:a.moduleProgress)==null?void 0:o[3])==null?void 0:i.completed)||0,r=((d=(c=(l=t.progress)==null?void 0:l.moduleProgress)==null?void 0:c[3])==null?void 0:d.total)||3;return s>=r&&r>0}},{id:"module_4_complete",title:" Projetista Financeiro",description:"Execute projetos prticos com sucesso",icon:"",xpReward:300,yuCoinsReward:150,condition:t=>{var a,o,i,l,c,d;const s=((i=(o=(a=t.progress)==null?void 0:a.moduleProgress)==null?void 0:o[4])==null?void 0:i.completed)||0,r=((d=(c=(l=t.progress)==null?void 0:l.moduleProgress)==null?void 0:c[4])==null?void 0:d.total)||3;return s>=r&&r>0}}]}checkAchievements(t){const s=this.getUnlockedAchievements(t),r=[];return this.achievements.forEach(a=>{a.condition(t)&&!s.includes(a.id)&&r.push(a)}),r}getUnlockedAchievements(t){var s;return((s=t.progress)==null?void 0:s.achievements)||[]}unlockAchievement(t,s){var a,o,i;const r=((a=t.progress)==null?void 0:a.achievements)||[];if(!r.includes(s)){const l=this.getAchievementById(s);return{...t,progress:{...t.progress,achievements:[...r,s],xp:(((o=t.progress)==null?void 0:o.xp)||0)+((l==null?void 0:l.xpReward)||0),yuCoins:(((i=t.progress)==null?void 0:i.yuCoins)||0)+((l==null?void 0:l.yuCoinsReward)||0)}}}return t}processAchievementRewards(t,s){const r=this.getAchievementById(s);return r?{xp:r.xpReward||0,yuCoins:r.yuCoinsReward||0}:{xp:0,yuCoins:0}}getAllAchievements(){return this.achievements}getAchievementById(t){return this.achievements.find(s=>s.id===t)}getAchievementProgress(t){const s=this.getUnlockedAchievements(t).length,r=this.achievements.length;return{unlocked:s,total:r,percentage:Math.round(s/r*100)}}getNextAchievements(t){const s=this.getUnlockedAchievements(t);return this.achievements.filter(r=>!s.includes(r.id)).filter(r=>r.condition(t)).slice(0,3)}}const $j=new Fj,Vj=({onEnd:e})=>(w.useEffect(()=>{console.log("ConfettiEffect: MONTADO");const t=document.createElement("div");t.className="confetti-container",document.body.appendChild(t);const s=["#FFD700","#FF69B4","#00CFFF","#FF6347","#7CFC00","#EE9116"],r=40,a=[];for(let i=0;i<r;i++){const l=document.createElement("div");l.className="confetti",l.style.backgroundColor=s[Math.floor(Math.random()*s.length)],l.style.left=Math.random()*100+"vw",l.style.animationDelay=Math.random()*.5+"s",t.appendChild(l),a.push(l)}const o=setTimeout(()=>{a.forEach(i=>t.removeChild(i)),document.body.removeChild(t),e&&e(),console.log("ConfettiEffect: DESMONTADO")},2500);return()=>{clearTimeout(o),document.body.contains(t)&&(document.body.removeChild(t),console.log("ConfettiEffect: DESMONTADO (cleanup)"))}},[e]),s0.createPortal(null,document.body)),$u=e=>{const{lessonId:t,user:s,setUser:r,setActiveScreen:a}=e,o=e.reviewMode||typeof e.activeScreen=="object"&&e.activeScreen.reviewMode||!1,[i,l]=w.useState(null),[c,d]=w.useState(!1),[m,u]=w.useState(null),[g,p]=w.useState(!0),[k,P]=w.useState(!1),[S,x]=w.useState(!1),[y,f]=w.useState(0),[v,R]=w.useState(null);w.useEffect(()=>{E()},[t]);const E=async()=>{try{p(!0),R(null),d(!1),u(null);const C=await de(`/lessons/${t}`);l(C)}catch(C){console.error("Erro ao carregar lio:",C),Q.error("Erro ao carregar lio")}finally{p(!1)}},N=async C=>{if(u(C),d(!0),!o)try{const b=await Oe(`/users/${s.id}/complete-lesson`,{lessonId:t,score:C.score,timeSpent:C.timeSpent,isPerfect:C.isPerfect}),{student:T,reward:A,leveledUp:$,moduleAchievements:D,achievementRewards:V,xpBreakdown:z}=b;if(f(A||0),R(z||null),r(T),se.save(oe.USER,T),D&&D.length>0){console.log("Conquistas de mdulo desbloqueadas:",D),D.forEach(I=>{const F=I.split("_"),O=`module_${F[F.length-2]}_complete`,H=$j.getAchievementById(O);console.log("Conquista encontrada:",H),H?Q.success(` ${H.title}: ${H.description}`):console.log("Conquista no encontrada para ID:",O)});try{const I=await Oe(`/users/${T.id}/process-rewards`,{rewardType:"achievement",value:D.length});I.reward>0&&(Q.success(` +R$ ${I.reward.toFixed(2)} adicionados  poupana por conquistas!`),r(I.student),se.save(oe.USER,I.student))}catch(I){console.error("Erro ao processar recompensa de conquista:",I)}}$?(x(!0),P(!0),console.log("Confetti: Subiu de nvel!")):(x(!1),P(!1)),A>0&&(!D||D.length===0)&&Q.success(` +R$ ${A.toFixed(2)} adicionados  sua poupana!`)}catch(b){console.error("Erro ao processar lio:",b),b.message.includes("j foi recompensada")?(Q.warning("Esta lio j foi recompensada anteriormente."),f(0)):Q.error("Erro ao atualizar progresso: "+b.message)}},h=()=>{a&&typeof a=="function"?(c||window.confirm("Tem certeza que deseja sair? Seu progresso ser perdido."))&&a("home"):(console.error("setActiveScreen no est disponvel"),e.onNavigate?e.onNavigate("home"):window.location.reload())},j=()=>{a&&typeof a=="function"?a("home"):(console.error("setActiveScreen no est disponvel"),e.onNavigate?e.onNavigate("home"):window.location.reload())};if(g)return n.jsx("div",{className:"h-screen bg-interface flex items-center justify-center p-4 pb-20",children:n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center animate-fadeIn max-h-[70vh] overflow-y-auto",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Carregando lio..."})]})});if(!i)return n.jsx("div",{className:"h-screen bg-interface flex items-center justify-center p-4 pb-20",children:n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center max-h-[70vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-3",children:"Lio No Encontrada"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"A lio solicitada no existe."}),n.jsx("button",{onClick:()=>{a&&typeof a=="function"?a("home"):e.onNavigate?e.onNavigate("home"):window.location.reload()},className:"bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-dark transition",children:"Voltar ao Dashboard"})]})});if(c&&m){const C=m.isPerfect;return n.jsxs("div",{className:"h-screen bg-gradient-to-b from-primary to-secondary flex items-center justify-center p-4 pb-20",children:[k&&n.jsx(Vj,{onEnd:()=>P(!1)}),n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-md w-full text-center animate-bounce-in max-h-[70vh] overflow-y-auto",children:[n.jsx("div",{className:"text-6xl mb-3 animate-bounce",children:C?"":""}),n.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-3",children:C?"Perfeito!":"Lio Concluda!"}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-100 to-blue-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Pontuao"}),n.jsxs("p",{className:"text-3xl font-bold text-white",children:[m.score,"/100"]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-green-100 to-green-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Tempo"}),n.jsxs("p",{className:"text-xl font-semibold",children:[m.timeSpent,"s"]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-yellow-100 to-yellow-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"YCoins Ganhos"}),n.jsxs("p",{className:"text-xl font-semibold text-yellow-600",children:["+",10," "]})]}),y>0&&n.jsxs("div",{className:"bg-gradient-to-r from-green-100 to-green-200 rounded-lg p-4 animate-pulse",children:[n.jsx("p",{className:"text-sm text-gray-600",children:" Poupana Automtica"}),n.jsxs("p",{className:"text-xl font-semibold text-green-600",children:["+R$ ",y.toFixed(2)]}),n.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Adicionado  sua carteira!"})]}),C&&n.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-purple-200 rounded-lg p-4 animate-pulse",children:[n.jsx("p",{className:"text-sm text-gray-600",children:" Lio Perfeita!"}),n.jsx("p",{className:"text-lg font-bold text-purple-600",children:"Parabns!"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{onClick:j,className:"w-full bg-primary text-white py-3 rounded-lg font-bold text-lg hover:bg-primary-dark transition-colors transform hover:scale-105 shadow-lg",children:"Continuar"})})]})]})}return n.jsx(Dj,{lesson:i,onComplete:N,onExit:h,reviewMode:o})},Oj=({user:e})=>{const t=e.progress.completedLessons.length;return n.jsxs("div",{className:"min-h-screen bg-interface flex flex-col items-center p-4 pb-20",role:"main","aria-label":"Tela de Perfil",children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-8 animate-fadeIn","aria-label":"Ttulo do Perfil",children:"Perfil do Usurio "}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[n.jsx("div",{className:"w-20 h-20 bg-teal rounded-full flex items-center justify-center",children:n.jsxs("span",{className:"text-2xl",children:[" ",e.progress.avatar.accessory||"Sem acessrio"]})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold","aria-label":"Nome do Usurio",children:e.name}),n.jsxs("p",{className:"text-gray-600","aria-label":"Nvel do Usurio",children:["6 Ano - Nvel ",Math.floor(e.progress.xp/e.progress.maxXp)+1]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"XP:"})," ",e.progress.xp,"/",e.progress.maxXp]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:n.jsx("div",{className:"bg-teal h-4 rounded-full",style:{width:`${e.progress.xp/e.progress.maxXp*100}%`}})}),n.jsxs("p",{children:[n.jsx("strong",{children:"YCoins:"})," ",e.progress.yuCoins]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Streak:"})," ",e.progress.streak," dias "]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Medalhas:"})," ",t," "]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Coraes:"})," ",e.progress.hearts," "]})]}),n.jsx("button",{onClick:()=>alert("Poup: Edite seu avatar na loja!"),className:"mt-4 w-full text-white px-6 py-3 rounded-full font-semibold hover:opacity-90 transition transform hover:scale-105",style:{backgroundColor:"rgb(238, 145, 22)"},"aria-label":"Editar Perfil",children:"Editar Perfil"})]})]})},_j=({user:e})=>{var a,o,i,l,c;const s=(((a=e.savings)==null?void 0:a.balance)??0)*.1,r=(((o=e.savings)==null?void 0:o.balance)??0)+s;return n.jsxs("div",{className:"min-h-screen bg-interface flex flex-col items-center p-4 pb-20",children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-8",children:"Carteira Virtual "}),n.jsxs("div",{className:"bg-gradient-to-r from-green-400 to-green-600 rounded-lg shadow-lg p-6 max-w-md w-full border-2 mb-4",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Saldo Total"}),n.jsxs("p",{className:"text-4xl font-bold text-white mb-2",children:["R$ ",r.toFixed(2)]}),n.jsx("p",{className:"text-green-100 text-sm",children:"Incluindo incentivo educacional"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full border-2 mb-4",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-800",children:"Poupana Base"}),n.jsxs("p",{className:"text-2xl font-semibold text-teal mb-2",children:["R$ ",(((i=e.savings)==null?void 0:i.balance)??0).toFixed(2)]}),n.jsx("p",{className:"text-gray-600 text-sm mb-3",children:"Valor acumulado pelas suas conquistas"}),n.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3 border-l-4 border-yellow-400",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Incentivo Educacional"}),n.jsxs("span",{className:"text-lg font-bold text-yellow-600",children:["+",.1*100,"%"]})]}),n.jsxs("p",{className:"text-lg font-bold text-yellow-700 mt-1",children:["R$ ",s.toFixed(2)]}),n.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"Bnus por manter foco nos estudos"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"Histrico de Conquistas"}),n.jsx("div",{className:"space-y-3 max-h-40 overflow-y-auto",children:((c=(l=e.savings)==null?void 0:l.transactions)==null?void 0:c.length)>0?e.savings.transactions.map((d,m)=>n.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-800",children:d.reason}),n.jsx("p",{className:"text-xs text-gray-500",children:"Conquista recente"})]}),n.jsxs("span",{className:"text-green-600 font-bold",children:["+ R$ ",d.amount.toFixed(2)]})]},m)):n.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhuma transao registrada ainda."})}),n.jsx("p",{className:"text-center text-gray-500 text-sm mt-3",children:"Financiado por: Responsvel"})]})]})};class zj{constructor(){this.events=[],this.sessionStart=Date.now(),this.initializeAnalytics()}initializeAnalytics(){const t=se.load(oe.ANALYTICS)||[];this.events=t,this.trackEvent("session_start",{timestamp:this.sessionStart,userAgent:navigator.userAgent,screenSize:`${window.innerWidth}x${window.innerHeight}`})}trackEvent(t,s={}){const r={id:Date.now()+Math.random(),event:t,timestamp:Date.now(),sessionDuration:Date.now()-this.sessionStart,...s};this.events.push(r),this.saveEvents()}trackLessonStart(t,s){this.trackEvent("lesson_start",{lessonId:t,lessonType:s,userProgress:this.getUserProgress()})}trackLessonComplete(t,s,r,a){this.trackEvent("lesson_complete",{lessonId:t,score:s,timeSpent:r,isPerfect:a,userProgress:this.getUserProgress()})}trackLevelUp(t,s){this.trackEvent("level_up",{newLevel:t,totalXp:s,userProgress:this.getUserProgress()})}trackAchievementUnlock(t,s){this.trackEvent("achievement_unlock",{achievementId:t,achievementName:s,userProgress:this.getUserProgress()})}trackStreakUpdate(t){this.trackEvent("streak_update",{streak:t,userProgress:this.getUserProgress()})}trackStorePurchase(t,s,r){this.trackEvent("store_purchase",{itemId:t,itemName:s,cost:r,userProgress:this.getUserProgress()})}trackNavigation(t){this.trackEvent("navigation",{screenName:t,userProgress:this.getUserProgress()})}trackError(t,s){this.trackEvent("error",{errorType:t,errorMessage:s,userProgress:this.getUserProgress()})}getUserProgress(){var r,a,o,i,l,c;const t=se.load(oe.USER),s=se.load(oe.PROGRESS);return{userId:t==null?void 0:t.id,userRole:t==null?void 0:t.role,level:(s==null?void 0:s.currentLevel)||((r=t==null?void 0:t.progress)==null?void 0:r.level)||1,totalXp:(s==null?void 0:s.totalXp)||((a=t==null?void 0:t.progress)==null?void 0:a.xp)||0,yuCoins:((o=t==null?void 0:t.progress)==null?void 0:o.yuCoins)||0,streak:(s==null?void 0:s.streak)||((i=t==null?void 0:t.progress)==null?void 0:i.streak)||0,completedLessons:((c=(l=t==null?void 0:t.progress)==null?void 0:l.completedLessons)==null?void 0:c.length)||0,perfectLessons:(s==null?void 0:s.perfectLessons)||0}}saveEvents(){this.events.length>1e3&&(this.events=this.events.slice(-1e3)),se.save(oe.ANALYTICS,this.events)}generateReport(t="7d"){const s=Date.now(),r={"1d":24*60*60*1e3,"7d":7*24*60*60*1e3,"30d":30*24*60*60*1e3,all:1/0},a=s-(r[t]||r["7d"]),o=this.events.filter(i=>i.timestamp>=a);return{timeRange:t,totalEvents:o.length,sessionDuration:s-this.sessionStart,eventsByType:this.groupEventsByType(o),userEngagement:this.calculateEngagement(o),performance:this.calculatePerformance(o),errors:this.getErrors(o)}}groupEventsByType(t){return t.reduce((s,r)=>(s[r.event]=(s[r.event]||0)+1,s),{})}calculateEngagement(t){const s=t.filter(i=>i.event==="lesson_complete"),r=s.length,a=s.filter(i=>i.isPerfect).length,o=s.length>0?s.reduce((i,l)=>i+l.score,0)/s.length:0;return{totalLessons:r,perfectLessons:a,perfectRate:r>0?a/r*100:0,averageScore:Math.round(o),averageTimePerLesson:s.length>0?s.reduce((i,l)=>i+l.timeSpent,0)/s.length:0}}calculatePerformance(t){const s=t.filter(o=>o.event==="level_up").length,r=t.filter(o=>o.event==="achievement_unlock").length,a=t.filter(o=>o.event==="store_purchase").length;return{levelUps:s,achievements:r,storePurchases:a,totalSpent:a>0?t.filter(o=>o.event==="store_purchase").reduce((o,i)=>o+i.cost,0):0}}getErrors(t){return t.filter(s=>s.event==="error")}exportData(){return{events:this.events,sessionStart:this.sessionStart,userProgress:this.getUserProgress(),report:this.generateReport("all")}}cleanupOldData(){const t=Date.now()-2592e6;this.events=this.events.filter(s=>s.timestamp>=t),this.saveEvents()}}const ls=new zj;setInterval(()=>{ls.cleanupOldData()},24*60*60*1e3);const Bj=({user:e,setUser:t,setActiveScreen:s})=>{var x,y,f,v,R,E,N;const[r,a]=w.useState("all"),[o,i]=w.useState(""),l=[{id:"all",name:"Todos",icon:""},{id:"clothes",name:"Roupas",icon:""},{id:"accessories",name:"Acessrios",icon:""},{id:"effects",name:"Efeitos",icon:""},{id:"powerups",name:"Power-ups",icon:""},{id:"collectibles",name:"Colecionveis",icon:""}],c=[{id:"hat",name:"Chapu de Estudante",cost:50,category:"clothes",rarity:"common",icon:"",description:"Um chapu elegante para estudantes dedicados"},{id:"glasses",name:"culos Inteligentes",cost:30,category:"accessories",rarity:"common",icon:"",description:"culos que te fazem parecer mais inteligente"},{id:"backpack",name:"Mochila Financeira",cost:70,category:"clothes",rarity:"rare",icon:"",description:"Mochila especial para guardar seus conhecimentos"},{id:"tie",name:"Gravata Executiva",cost:40,category:"clothes",rarity:"common",icon:"",description:"Gravata para ocasies especiais"},{id:"watch",name:"Relgio de Ouro",cost:100,category:"accessories",rarity:"epic",icon:"",description:"Relgio de ouro para mostrar que voc  valioso"},{id:"crown",name:"Coroa de Rei",cost:200,category:"accessories",rarity:"legendary",icon:"",description:"Coroa para os verdadeiros reis do dinheiro"},{id:"necklace",name:"Colar de Diamantes",cost:150,category:"accessories",rarity:"epic",icon:"",description:"Colar brilhante para impressionar"},{id:"ring",name:"Anel Mgico",cost:80,category:"accessories",rarity:"rare",icon:"",description:"Anel que traz sorte financeira"},{id:"sparkles",name:"Efeito Brilhante",cost:60,category:"effects",rarity:"rare",icon:"",description:"Faz voc brilhar como uma estrela"},{id:"rainbow",name:"Arco-ris",cost:90,category:"effects",rarity:"epic",icon:"",description:"Arco-ris mgico que te segue"},{id:"fire",name:"Chamas de Sucesso",cost:120,category:"effects",rarity:"epic",icon:"",description:"Chamas que mostram seu sucesso"},{id:"xp_boost",name:"Boost de XP",cost:25,category:"powerups",rarity:"common",icon:"",description:"Ganha 50% mais XP por 1 hora"},{id:"coin_multiplier",name:"Multiplicador de YCoins",cost:35,category:"powerups",rarity:"rare",icon:"",description:"Ganha 2x YCoins por 30 minutos"},{id:"streak_protector",name:"Protetor de Streak",cost:45,category:"powerups",rarity:"rare",icon:"",description:"Protege seu streak por 1 dia"},{id:"perfect_boost",name:"Boost Perfeito",cost:55,category:"powerups",rarity:"epic",icon:"",description:"Aumenta chance de lio perfeita"},{id:"golden_pig",name:"Porquinho Dourado",cost:300,category:"collectibles",rarity:"legendary",icon:"",description:"Porquinho dourado raro e valioso"},{id:"crystal_coin",name:"Moeda de Cristal",cost:250,category:"collectibles",rarity:"legendary",icon:"",description:"Moeda de cristal colecionvel"},{id:"trophy",name:"Trofu de Campeo",cost:400,category:"collectibles",rarity:"legendary",icon:"",description:"Trofu para verdadeiros campees"},{id:"medal",name:"Medalha de Honra",cost:180,category:"collectibles",rarity:"epic",icon:"",description:"Medalha de honra por excelncia"}],d=h=>{const j={common:"text-gray-600",rare:"text-blue-600",epic:"text-purple-600",legendary:"text-yellow-600"};return j[h]||j.common},m=h=>{const j={common:"bg-gray-100",rare:"bg-blue-100",epic:"bg-purple-100",legendary:"bg-yellow-100"};return j[h]||j.common},u=c.filter(h=>{const j=r==="all"||h.category===r,C=h.name.toLowerCase().includes(o.toLowerCase())||h.description.toLowerCase().includes(o.toLowerCase());return j&&C}),g=h=>{var j,C,b;if((((j=e==null?void 0:e.progress)==null?void 0:j.yuCoins)??0)>=h.cost){const T={...e,progress:{...e==null?void 0:e.progress,yuCoins:(((C=e==null?void 0:e.progress)==null?void 0:C.yuCoins)??0)-h.cost,inventory:[...((b=e==null?void 0:e.progress)==null?void 0:b.inventory)??[],h.id]}};t(T),localStorage.setItem("yufinUser",JSON.stringify(T)),ls.trackStorePurchase(h.id,h.name,h.cost),Q.success(`Parabns! Voc comprou ${h.name}!`),h.category==="powerups"&&p(h)}else Q.error("YCoins insuficientes! Complete mais lies para ganhar YCoins.")},p=h=>{var b;const C={xp_boost:{type:"xp_multiplier",value:1.5,duration:36e5},coin_multiplier:{type:"coin_multiplier",value:2,duration:18e5},streak_protector:{type:"streak_protector",value:1,duration:864e5},perfect_boost:{type:"perfect_chance",value:1.3,duration:72e5}}[h.id];if(C){const T=((b=e==null?void 0:e.progress)==null?void 0:b.activeEffects)??[];T.push({...C,id:h.id,name:h.name,appliedAt:Date.now()});const A={...e,progress:{...e==null?void 0:e.progress,activeEffects:T}};t(A),localStorage.setItem("yufinUser",JSON.stringify(A)),Q.success(`Power-up ${h.name} ativado!`)}},k=((x=e==null?void 0:e.progress)==null?void 0:x.inventory)??[],P=k.length,S=c.length;return n.jsx("div",{className:"min-h-screen bg-interface p-3 pb-20",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-4 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("h1",{className:"text-2xl font-yufin text-primary",children:[" Loja YFin - ",((y=e==null?void 0:e.progress)==null?void 0:y.yuCoins)??0," "]})}),n.jsxs("div",{className:"text-right text-sm",children:[n.jsxs("div",{className:"text-gray-600",children:["Coleo: ",Math.round(P/S*100),"%"]}),n.jsxs("div",{className:"text-gray-600",children:["Power-ups: ",((v=(f=e==null?void 0:e.progress)==null?void 0:f.activeEffects)==null?void 0:v.length)??0]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-blue-100 text-blue-800 p-3 rounded-lg text-center border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("div",{className:"text-xs font-medium mb-1",children:"Possudos"}),n.jsxs("div",{className:"text-lg font-bold",children:[P,"/",S]})]}),n.jsxs("div",{className:"bg-green-100 text-green-800 p-3 rounded-lg text-center border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("div",{className:"text-xs font-medium mb-1",children:"Ativos"}),n.jsx("div",{className:"text-lg font-bold",children:((E=(R=e==null?void 0:e.progress)==null?void 0:R.activeEffects)==null?void 0:E.length)??0})]}),n.jsxs("div",{className:"bg-purple-100 text-purple-800 p-3 rounded-lg text-center border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("div",{className:"text-xs font-medium mb-1",children:"Raros"}),n.jsx("div",{className:"text-lg font-bold",children:c.filter(h=>h.rarity==="legendary").length})]})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-3 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx("div",{className:"flex flex-wrap gap-4",children:l.map(h=>n.jsxs("button",{onClick:()=>a(h.id),className:`px-3 py-1 rounded-lg text-sm font-medium transition ${r===h.id?"text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,style:{backgroundColor:r===h.id?"rgb(238, 145, 22)":"transparent"},children:[h.icon," ",h.name]},h.id))}),n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Buscar itens...",value:o,onChange:h=>i(h.target.value),className:"w-full bg-gray-100 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary"})})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-3 text-center",children:r==="all"?"Todos os Itens":(N=l.find(h=>h.id===r))==null?void 0:N.name}),u.length===0?n.jsxs("div",{className:"text-center py-6",children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("p",{className:"text-gray-600 text-sm",children:"Nenhum item encontrado com esses filtros."})]}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:u.map(h=>{var b;const j=k.includes(h.id),C=(((b=e==null?void 0:e.progress)==null?void 0:b.yuCoins)??0)>=h.cost;return n.jsxs("div",{className:`${m(h.rarity)} rounded-lg p-3 border-2 transition-all hover:scale-105 flex flex-col ${j?"border-green-500":"border-gray-200"}`,children:[n.jsxs("div",{className:"text-center mb-2 flex-1",children:[n.jsx("div",{className:"text-3xl mb-1",children:h.icon}),n.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-1",children:h.name}),n.jsx("p",{className:`text-xs font-medium ${d(h.rarity)} mb-1`,children:h.rarity.charAt(0).toUpperCase()+h.rarity.slice(1)}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:h.description}),n.jsxs("div",{className:"text-lg font-bold text-primary mb-2 flex items-center justify-center space-x-1",children:[n.jsx("span",{children:h.cost}),n.jsx("span",{className:"text-base",children:""})]})]}),n.jsx("button",{onClick:()=>g(h),disabled:j||!C,className:`w-full py-2 px-3 rounded-lg text-sm font-medium transition mt-auto ${j?"text-white cursor-not-allowed":C?"text-white hover:opacity-90":"text-white cursor-not-allowed opacity-50"}`,style:{backgroundColor:j?"#10B981":C?"rgb(238, 145, 22)":"#9CA3AF"},children:j?" Possudo":C?"Comprar":"YCoins Insuficientes"})]},h.id)})})]})]})})},et=[{id:1,module:"Introduo ao Dinheiro",title:"O que  o dinheiro?",type:"quiz",content:{question:"Qual  a funo principal do dinheiro?",options:[{text:"Facilitar trocas e compras",correct:!0},{text:"Apenas guardar em casa",correct:!1}],rewards:{xp:50,yuCoins:10,savings:.5}}},{id:2,module:"Introduo ao Dinheiro",title:"Histria do dinheiro",type:"drag-drop",content:{text:" Poup: Arraste na ordem correta da evoluo do dinheiro!",items:[{text:"Escambo (troca de bens)",order:1},{text:"Moedas de metal",order:2},{text:"Notas de papel",order:3},{text:"Dinheiro digital",order:4}],rewards:{xp:50,yuCoins:10,savings:.5}}},{id:3,module:"Introduo ao Dinheiro",title:"Tipos de dinheiro",type:"classify",content:{text:" Poup: Classifique cada tipo de dinheiro!",items:[{text:"Nota de R$10",category:"Fsico",correct:!0},{text:"Carto de dbito",category:"Digital",correct:!0},{text:"Pix",category:"Digital",correct:!0},{text:"Moeda de R$1",category:"Fsico",correct:!0}],rewards:{xp:50,yuCoins:10,savings:.5}}},{id:4,module:"Famlia e Finanas",title:"Receitas da famlia",type:"match",content:{text:" Poup: Associe cada fonte de renda ao membro da famlia!",items:[{text:"Pai - Salrio do trabalho",correct:!0},{text:"Me - Venda de produtos",correct:!0},{text:"Filho - Mesada",correct:!0},{text:"Av - Aposentadoria",correct:!0}],rewards:{xp:60,yuCoins:12,savings:.8}}},{id:5,module:"Famlia e Finanas",title:"Despesas bsicas",type:"classify",content:{text:" Poup: Classifique como despesa essencial ou no essencial!",items:[{text:"Aluguel",category:"Essencial",correct:!0},{text:"Comida",category:"Essencial",correct:!0},{text:"Videogame",category:"No Essencial",correct:!0},{text:"Conta de luz",category:"Essencial",correct:!0}],rewards:{xp:60,yuCoins:12,savings:.8}}},{id:6,module:"Famlia e Finanas",title:"Oramento familiar",type:"simulation",content:{text:" Poup: Organize um oramento familiar de R$2000!",options:[{text:"R$800 moradia, R$600 alimentao, R$400 transporte, R$200 lazer",correct:!0,feedback:"Perfeito! Oramento equilibrado!"},{text:"R$1800 lazer, R$200 outras despesas",correct:!1,feedback:"Priorize necessidades bsicas primeiro!"},{text:"R$1000 moradia, R$500 alimentao, R$300 transporte, R$200 poupana",correct:!0,feedback:"Excelente! Incluiu poupana!"}],rewards:{xp:60,yuCoins:12,savings:.8}}},{id:7,module:"Necessidades vs Desejos",title:"Diferenciando necessidades",type:"classify",content:{text:" Poup: Classifique como necessidade ou desejo!",items:[{text:"Comida",category:"Necessidade",correct:!0},{text:"Roupa",category:"Necessidade",correct:!0},{text:"Videogame novo",category:"Desejo",correct:!0},{text:"Remdio",category:"Necessidade",correct:!0}],rewards:{xp:70,yuCoins:15,savings:1}}},{id:8,module:"Necessidades vs Desejos",title:"Priorizando gastos",type:"choices",content:{text:" Poup: Voc tem R$50. O que deve comprar primeiro?",options:[{text:"Comida para a semana (R$30)",correct:!0,feedback:"Excelente! Priorizou necessidades bsicas!"},{text:"Um brinquedo (R$50)",correct:!1,feedback:"Pense nas necessidades primeiro!"},{text:"Comida (R$30) + poupar R$20",correct:!0,feedback:"Perfeito! Equilibrou gastos e poupana!"}],rewards:{xp:70,yuCoins:15,savings:1}}},{id:9,module:"Necessidades vs Desejos",title:"Consumo consciente",type:"simulation",content:{text:" Poup: Como fazer uma compra consciente?",options:[{text:"Pesquisar preos, comparar qualidade, pensar se realmente preciso",correct:!0,feedback:"Perfeito! Consumo consciente!"},{text:"Comprar o primeiro que vejo",correct:!1,feedback:"Sempre pesquise antes de comprar!"},{text:"Perguntar aos pais antes de comprar",correct:!0,feedback:"Boa ideia! Consulte sua famlia!"}],rewards:{xp:70,yuCoins:15,savings:1}}},{id:10,module:"Poupana e Metas",title:"O que  poupana?",type:"quiz",content:{question:"Para que serve a poupana?",options:[{text:"Guardar dinheiro para o futuro",correct:!0},{text:"Gastar tudo rapidamente",correct:!1}],rewards:{xp:80,yuCoins:18,savings:1.2}}},{id:11,module:"Poupana e Metas",title:"Criando metas financeiras",type:"input",content:{text:" Poup: Crie uma meta financeira!",input:{placeholder:"Ex: Comprar um livro (R$30 em 3 meses)",value:30,description:"Quanto voc quer economizar e em quanto tempo?"},rewards:{xp:80,yuCoins:18,savings:1.2}}},{id:12,module:"Poupana e Metas",title:"Planejamento de poupana",type:"simulation",content:{text:" Poup: Voc recebe R$20 de mesada. Como organizar?",options:[{text:"R$10 gastos, R$7 poupana, R$3 doao",correct:!0,feedback:"Excelente! Equilibrou tudo!"},{text:"R$20 gastos, R$0 poupana",correct:!1,feedback:"Tente poupar um pouco!"},{text:"R$15 gastos, R$5 poupana",correct:!0,feedback:"Bom! Comeou a poupar!"}],rewards:{xp:80,yuCoins:18,savings:1.2}}}],Vu={student:[{title:"Bem-vindo ao YuFin! ",description:"Aqui voc aprende sobre finanas brincando, ganha XP, sobe de nvel e conquista recompensas!"},{title:"Trilha de Aprendizagem",description:"Complete lies para ganhar XP, moedas e avanar no seu caminho de aprendizado."},{title:"Poupana Educativa",description:"Ao aprender, voc tambm acumula dinheiro virtual na sua poupana. Pea para seu responsvel configurar as regras!"},{title:"Conquistas e Ranking",description:"Desafie-se, conquiste medalhas e veja seu nome no ranking dos melhores alunos!"},{title:"Pronto para comear?",description:'Clique em "Comear" e aproveite sua jornada!'}],parent:[{title:"Bem-vindo ao Painel do Responsvel! ",description:"Acompanhe o progresso dos seus filhos, configure incentivos e veja relatrios detalhados."},{title:"Configurao de Poupana",description:"Defina quanto cada lio, streak ou conquista vale em dinheiro real para incentivar o aprendizado."},{title:"Relatrios e Recomendaes",description:"Receba dicas e veja o desempenho de cada filho por matria, progresso e engajamento."},{title:"Pronto para acompanhar?",description:'Clique em "Comear" para explorar o painel!'}],school:[{title:"Bem-vindo ao Painel da Escola! ",description:"Visualize o desempenho de todos os alunos, turmas e matrias em tempo real."},{title:"Ranking e Engajamento",description:"Veja os alunos e turmas de destaque, taxas de engajamento e conquistas."},{title:"Relatrios Detalhados",description:"Exporte relatrios e use os dados para melhorar o ensino."},{title:"Pronto para liderar?",description:'Clique em "Comear" para usar o painel escolar!'}]},Oa=({profile:e,onFinish:t})=>{const s=Vu[e]||Vu.student,[r,a]=w.useState(0),o=()=>{r<s.length-1?a(r+1):t()},i=()=>{t()},l=c=>e==="student"&&r===0?n.jsxs("span",{children:["Bem-vindo ao ",n.jsx("span",{className:"font-cherry",children:"YuFin"}),"! "]}):c;return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 max-w-md w-full text-center animate-fadeIn",children:[n.jsx("h2",{className:"text-2xl font-bold text-primary mb-4",children:l(s[r].title)}),n.jsx("p",{className:"text-gray-700 mb-6",children:s[r].description}),n.jsxs("div",{className:"flex justify-between items-center mt-6",children:[n.jsx("button",{onClick:i,className:"text-gray-500 hover:text-primary text-sm px-4 py-2 rounded",children:"Pular"}),n.jsx("button",{onClick:o,className:"bg-primary text-white px-6 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:r===s.length-1?"Comear":"Avanar"})]}),n.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:s.map((c,d)=>n.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${d===r?"bg-primary":"bg-gray-300"}`},d))})]})})},Uj=({user:e})=>{const[t,s]=w.useState([]),[r,a]=w.useState(!0),[o,i]=w.useState(!1),[l,c]=w.useState({maxUses:1,expiresAt:"",metadata:{description:"",grade:"",studentName:""}});w.useEffect(()=>{d()},[]);const d=async()=>{try{a(!0);const S=await de(`/registration-tokens?createdBy=${e.id}`);s(S)}catch(S){console.error("Erro ao carregar tokens:",S)}finally{a(!1)}},m=async()=>{try{const S={createdBy:e.id,type:"parent",maxUses:l.maxUses||null,expiresAt:l.expiresAt||null,metadata:l.metadata};await Oe("/registration-tokens",S),i(!1),c({maxUses:1,expiresAt:"",metadata:{description:"",grade:"",studentName:""}}),d()}catch(S){console.error("Erro ao criar token:",S)}},u=async S=>{if(window.confirm("Tem certeza que deseja excluir este token?"))try{await so(`/registration-tokens/${S}`),d()}catch(x){console.error("Erro ao excluir token:",x)}},g=S=>{navigator.clipboard.writeText(S),alert("Token copiado para a rea de transferncia!")},p=S=>new Date(S).toLocaleDateString("pt-BR"),k=S=>S.isActive?S.expiresAt&&new Date>new Date(S.expiresAt)?"text-orange-600":"text-green-600":"text-red-600",P=S=>S.isActive?S.expiresAt&&new Date>new Date(S.expiresAt)?"Expirado":S.maxUses&&S.usedCount>=S.maxUses?"Usado":"Ativo":"Inativo";return r?n.jsx("div",{className:"text-center py-8",children:"Carregando tokens..."}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Tokens para Filhos"}),n.jsx("button",{onClick:()=>i(!0),className:"bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Gerar Token para Filho"})]}),o&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border",children:[n.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Criar Token para Filho"}),n.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded-lg border border-green-200",children:[n.jsx("p",{className:"text-sm text-green-700",children:n.jsx("strong",{children:" Como funciona:"})}),n.jsxs("ul",{className:"text-xs text-green-600 mt-1 space-y-1",children:[n.jsx("li",{children:" Gere um token para seu filho se registrar"}),n.jsx("li",{children:" Seu filho usar o token para criar a conta"}),n.jsx("li",{children:" Ele ter acesso independente da escola"}),n.jsx("li",{children:" Voc pode acompanhar o progresso dele"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Filho"}),n.jsx("input",{type:"text",value:l.metadata.studentName,onChange:S=>c({...l,metadata:{...l.metadata,studentName:S.target.value}}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Nome do seu filho"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Srie/Ano"}),n.jsx("input",{type:"text",value:l.metadata.grade,onChange:S=>c({...l,metadata:{...l.metadata,grade:S.target.value}}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Ex: 6 Ano"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mximo de Usos"}),n.jsx("input",{type:"number",value:l.maxUses,onChange:S=>c({...l,maxUses:S.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Deixe vazio para ilimitado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Expirao"}),n.jsx("input",{type:"datetime-local",value:l.expiresAt,onChange:S=>c({...l,expiresAt:S.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio (Opcional)"}),n.jsx("textarea",{value:l.metadata.description,onChange:S=>c({...l,metadata:{...l.metadata,description:S.target.value}}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",rows:"3",placeholder:"Ex: Token para Joo estudar educao financeira"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:m,className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition",children:"Criar Token"}),n.jsx("button",{onClick:()=>i(!1),className:"bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 transition",children:"Cancelar"})]})]}),n.jsx("div",{className:"space-y-4",children:t.length===0?n.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[n.jsx("p",{className:"text-gray-600",children:"Nenhum token criado ainda."}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Crie um token para seu filho comear a estudar!"})]}):t.map(S=>n.jsxs("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k(S)}`,children:P(S)}),n.jsx("span",{className:"text-sm text-gray-500",children:" Responsvel (B2C)"})]}),n.jsx("button",{onClick:()=>u(S.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Excluir"})]}),n.jsx("div",{className:"mb-3",children:n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono",children:S.token}),n.jsx("button",{onClick:()=>g(S.token),className:"text-primary hover:text-primary-dark text-sm",children:" Copiar"})]})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Usos:"})," ",S.usedCount,S.maxUses&&`/${S.maxUses}`]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Criado:"})," ",p(S.createdAt)]}),S.expiresAt&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Expira:"})," ",p(S.expiresAt)]}),S.metadata.studentName&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Para:"})," ",S.metadata.studentName]})]}),S.usedBy&&S.usedBy.length>0&&n.jsxs("div",{className:"mt-3 pt-3 border-t",children:[n.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Usado por:"}),n.jsx("div",{className:"space-y-1",children:S.usedBy.map((x,y)=>n.jsxs("div",{className:"text-sm text-gray-600",children:[x.studentName," - ",p(x.usedAt)]},y))})]})]},S.id))})]})},Ou="onboarding_parent_seen",_u=({user:e,setActiveScreen:t,setUser:s})=>{var L,O,H,ne,Y,B,q;const[r,a]=w.useState(null),[o,i]=w.useState("7d"),[l,c]=w.useState(!1),[d,m]=w.useState(!1),[u,g]=w.useState(!1),[p,k]=w.useState(""),[P,S]=w.useState([]),[x,y]=w.useState(!1),[f,v]=w.useState([]),[R,E]=w.useState(!0),[N,h]=w.useState("overview");w.useEffect(()=>{localStorage.getItem(Ou)||m(!0)},[]),w.useEffect(()=>{u&&(y(!0),de("/users").then(M=>{S(M.filter(U=>U.role==="student")),y(!1)}).catch(()=>y(!1)))},[u]),w.useEffect(()=>{de("/users").then(M=>{v(M),E(!1)}).catch(()=>E(!1))},[]);const j=P.filter(M=>M.id&&!(e.linkedStudents||[]).includes(M.id.toString())&&!M.parentId&&M.playerId&&M.playerId.toLowerCase().includes(p.toLowerCase()));console.log("Debug - Alunos disponveis para vnculo:",{searchTerm:p,allStudentsCount:P.length,availableStudentsCount:j.length,allStudents:P.map(M=>({id:M.id,name:M.name,email:M.email,playerId:M.playerId,schoolId:M.schoolId})),availableStudents:j.map(M=>({id:M.id,name:M.name,email:M.email,playerId:M.playerId,schoolId:M.schoolId}))});const C=j[0]||null,b=()=>{m(!1),localStorage.setItem(Ou,"1")},T=e.linkedStudents?f.filter(M=>M.id&&e.linkedStudents.includes(M.id.toString())&&M.role==="student"):[];if(console.log("Debug - Alunos vinculados:",{userLinkedStudents:e.linkedStudents,allUsersCount:f.length,linkedStudentsCount:T.length,linkedStudents:T.map(M=>({id:M.id,name:M.name}))}),R)return n.jsx("div",{className:"min-h-screen flex items-center justify-center text-xl",children:"Carregando filhos vinculados..."});const $=(()=>{if(T.length===0)return null;const M=T.reduce((Z,_)=>{var W;return Z+(((W=_.progress)==null?void 0:W.xp)||0)},0),U=T.reduce((Z,_)=>{var W,ae;return Z+(((ae=(W=_.progress)==null?void 0:W.completedLessons)==null?void 0:ae.length)||0)},0),K=T.reduce((Z,_)=>{var W;return Z+(((W=_.savings)==null?void 0:W.balance)||0)},0),G=T.reduce((Z,_)=>{var W;return Z+(((W=_.progress)==null?void 0:W.level)||1)},0)/T.length,ee=T.reduce((Z,_)=>{var W;return Z+(((W=_.progress)==null?void 0:W.streak)||0)},0);return{totalXp:M,totalLessons:U,totalSavings:K,averageLevel:Math.round(G*10)/10,totalStreak:ee,activeStudents:T.length}})(),D=M=>{var G;const U=((G=M.progress)==null?void 0:G.completedLessons)||[],K={};return U.forEach(ee=>{const Z=et.find(_=>_.id===ee);Z&&Z.subject&&(K[Z.subject]||(K[Z.subject]={completed:0,total:0}),K[Z.subject].completed++)}),et.forEach(ee=>{ee.subject&&(K[ee.subject]||(K[ee.subject]={completed:0,total:0}),K[ee.subject].total++)}),K},V=M=>{var _,W,ae,ie;const U=((_=M.progress)==null?void 0:_.streak)||0,K=((W=M.progress)==null?void 0:W.level)||1,G=((ie=(ae=M.progress)==null?void 0:ae.completedLessons)==null?void 0:ie.length)||0;let ee="estvel",Z="text-gray-600";return U>=7?(ee="crescendo",Z="text-green-600"):U>=3?(ee="melhorando",Z="text-blue-600"):U===0&&(ee="precisa ateno",Z="text-red-600"),{trend:ee,trendColor:Z,streak:U,level:K,completedLessons:G}},z=M=>{a(M),c(!0)},I=()=>{a(null),c(!1)},F=async()=>{if(C){console.log("Debug - Vincular filho:",{userId:e.id,user_id:e._id,studentId:C.id,student_id:C._id});try{if(C.schoolId)await Oe(`/parents/${e.id}/request-link`,{studentId:C.id||C._id,message:"Solicitao de vnculo como responsvel"}),g(!1),k(""),Q.success("Solicitao de vnculo enviada! Aguarde a aprovao do aluno.");else{const M=await os(`/users/${e.id||e._id}/vincular-filho`,{studentId:C.id||C._id});s(M),g(!1),k("");try{const U=await de("/users");v(U)}catch(U){console.error("Erro ao recarregar usurios:",U)}Q.success("Filho vinculado com sucesso!")}}catch(M){console.error("Erro ao processar vnculo:",M),Q.error("Erro ao processar vnculo: "+M.message)}}};if(l&&r){const M=D(r),U=V(r);return n.jsxs("div",{className:"min-h-screen bg-interface p-4 pb-20",children:[d&&n.jsx(Oa,{profile:"parent",onFinish:b}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("button",{onClick:I,className:"text-primary hover:text-primary-dark mb-2 flex items-center",children:" Voltar ao Resumo"}),n.jsxs("h1",{className:"text-3xl font-yufin text-primary",children:[" Progresso de ",r.name]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Tendncia"}),n.jsx("p",{className:`text-lg font-semibold ${U.trendColor}`,children:U.trend})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #3b82f6, #2563eb)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Nvel Atual"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:((L=r.progress)==null?void 0:L.level)||1})]}),n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #10b981, #059669)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"XP Total"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:((O=r.progress)==null?void 0:O.xp)||0})]}),n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #8b5cf6, #7c3aed)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Streak"}),n.jsxs("p",{className:"text-2xl font-bold text-white",children:[U.streak," "]})]}),n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #f97316, #ea580c)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Poupana"}),n.jsxs("p",{className:"text-2xl font-bold text-white",children:["R$ ",(((H=r.savings)==null?void 0:H.balance)||0).toFixed(2)]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Progresso por Matria"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(M).map(([K,G])=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:K}),n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[n.jsxs("span",{children:[G.completed," de ",G.total," lies"]}),n.jsxs("span",{children:[Math.round(G.completed/G.total*100),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(G.completed/G.total*100,100)}%`}})})]},K))})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Lies Concludas"}),n.jsxs("div",{className:"space-y-3",children:[(Y=(ne=r.progress)==null?void 0:ne.completedLessons)==null?void 0:Y.slice(-5).reverse().map(K=>{const G=et.find(ee=>ee.id===K);return G?n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:G.title}),n.jsxs("p",{className:"text-sm text-gray-600",children:[G.subject,"  ",G.type]})]}),n.jsx("span",{className:"text-green-600 font-semibold",children:" Concluda"})]},K):null}),(!((B=r.progress)!=null&&B.completedLessons)||r.progress.completedLessons.length===0)&&n.jsx("p",{className:"text-gray-600 text-center py-4",children:"Nenhuma lio concluda ainda."})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Recomendaes"}),n.jsxs("div",{className:"space-y-3",children:[U.streak===0&&n.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:n.jsxs("p",{className:"text-yellow-800",children:[n.jsx("strong",{children:"Incentive a consistncia:"})," ",r.name," no tem feito lies regularmente. Que tal estabelecer uma rotina diria?"]})}),U.streak>=7&&n.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:n.jsxs("p",{className:"text-green-800",children:[n.jsx("strong",{children:"Excelente progresso!"})," ",r.name," est muito consistente. Continue incentivando essa dedicao!"]})}),((q=r.savings)==null?void 0:q.balance)>0&&n.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:n.jsxs("p",{className:"text-blue-800",children:[n.jsx("strong",{children:"Poupana em crescimento:"})," ",r.name," j tem R$ ",r.savings.balance.toFixed(2)," na poupana educativa. Que tal conversar sobre objetivos financeiros?"]})})]})]})]})]})}return n.jsxs("div",{className:"min-h-screen bg-interface p-4 pb-20",children:[d&&n.jsx(Oa,{profile:"parent",onFinish:b}),n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-4",children:" Dashboard da Famlia"}),n.jsx("p",{className:"text-gray-600",children:"Acompanhe o progresso educacional e financeiro dos seus filhos"}),n.jsxs("div",{className:"flex space-x-2 mt-6",children:[n.jsx("button",{onClick:()=>h("overview"),className:`px-6 py-3 rounded-lg font-semibold transition-all duration-200 shadow-sm ${N==="overview"?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-md transform scale-105":"bg-white text-gray-700 hover:bg-gray-50 border-2 border-gray-200 hover:border-orange-300"}`,children:" Viso Geral"}),n.jsx("button",{onClick:()=>h("tokens"),className:`px-6 py-3 rounded-lg font-semibold transition-all duration-200 shadow-sm ${N==="tokens"?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-md transform scale-105":"bg-white text-gray-700 hover:bg-gray-50 border-2 border-gray-200 hover:border-orange-300"}`,children:" Tokens para Filhos"})]})]}),N==="overview"&&n.jsxs(n.Fragment,{children:[$&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Resumo da Famlia"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:$.activeStudents}),n.jsx("p",{className:"text-gray-600",children:"Filhos Ativos"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:$.totalLessons}),n.jsx("p",{className:"text-gray-600",children:"Lies Concludas"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:$.totalXp}),n.jsx("p",{className:"text-gray-600",children:"XP Total"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:$.averageLevel}),n.jsx("p",{className:"text-gray-600",children:"Nvel Mdio"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:["R$ ",$.totalSavings.toFixed(2)]}),n.jsx("p",{className:"text-gray-600",children:"Poupana Total"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:" Seus Filhos"}),n.jsx("button",{onClick:()=>g(!0),className:"bg-primary text-white px-6 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Vincular Filho"})]}),T.length===0?n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-600 mb-4",children:"Nenhum filho vinculado ainda."})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(M=>{var Z,_,W,ae,ie;const U=V(M),K=D(M),G=Object.keys(K).length,ee=Object.values(K).filter(Me=>Me.completed>0).length;return n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:M.name}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${U.trendColor}`,children:U.trend}),n.jsx("button",{onClick:async()=>{try{const Me=await os(`/users/${e.id}/desvincular-filho`,{studentId:M.id});s(Me)}catch(Me){alert("Erro ao remover filho: "+Me.message)}},className:"ml-2 text-xs text-red-600 underline hover:text-red-800",children:"Remover"})]}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Nvel:"}),n.jsx("span",{className:"font-semibold",children:((Z=M.progress)==null?void 0:Z.level)||1})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"XP:"}),n.jsx("span",{className:"font-semibold",children:((_=M.progress)==null?void 0:_.xp)||0})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Streak:"}),n.jsxs("span",{className:"font-semibold",children:[" ",U.streak]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Lies:"}),n.jsx("span",{className:"font-semibold",children:((ae=(W=M.progress)==null?void 0:W.completedLessons)==null?void 0:ae.length)||0})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Poupana:"}),n.jsxs("span",{className:"font-semibold",children:["R$ ",(((ie=M.savings)==null?void 0:ie.balance)||0).toFixed(2)]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[n.jsx("span",{children:"Progresso Geral"}),n.jsxs("span",{children:[ee,"/",G," matrias"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${G>0?ee/G*100:0}%`}})})]}),n.jsx("button",{onClick:()=>z(M),className:"w-full bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Ver Detalhes"})]},M.id)})}),u&&n.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Vincular Filho"}),n.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:" Segurana:"})," Esta funcionalidade permite vincular alunos desvinculados via ID de jogador. Use o ID de jogador fornecido pelo aluno (ex: YUF123)."]})}),n.jsx("input",{type:"text",className:"w-full p-3 border border-gray-300 rounded-md mb-4",placeholder:"Digite o ID de jogador (ex: YUF123)...",value:p,onChange:M=>k(M.target.value)}),x&&n.jsx("p",{className:"text-gray-600 mb-4",children:"Carregando alunos..."}),!x&&p&&C&&n.jsx("div",{className:"mb-4 p-3 bg-gray-100 rounded text-gray-800",children:n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"font-semibold",children:"Aluno encontrado:"}),n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"font-bold text-lg",children:C.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[" ID: ",C.playerId]})]})]})}),!x&&p&&j.length===0&&n.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:n.jsx("p",{className:"text-sm text-yellow-800",children:"Nenhum aluno encontrado com esse ID de jogador. Verifique se o ID est correto e se o aluno est desvinculado."})}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancelar"}),n.jsx("button",{onClick:F,className:"px-4 py-2 rounded-lg bg-primary text-white font-semibold hover:bg-primary-dark",disabled:!C,children:"Vincular"})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:" Configuraes Financeiras"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Gerencie as regras de poupana educativa para seus filhos"}),n.jsx("button",{onClick:()=>t("savings-config"),className:"w-full bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Configurar Poupana"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:" Relatrios Detalhados"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Acesse relatrios completos de progresso e engajamento"}),n.jsx("button",{onClick:()=>t("reports"),className:"w-full bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Ver Relatrios"})]})]})]}),N==="tokens"&&n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:n.jsx(Uj,{user:e})})]})]})},qj=({user:e,setUser:t,setActiveScreen:s})=>{var P,S,x,y,f,v,R,E;console.log("SavingsConfig - Carregando configuraes:",{userSavingsConfig:e.savingsConfig,userSavingsConfigString:JSON.stringify(e.savingsConfig)});const[r,a]=w.useState({perLesson:((P=e.savingsConfig)==null?void 0:P.perLesson)||.5,perStreak:((S=e.savingsConfig)==null?void 0:S.perStreak)||2,perPerfectLesson:((x=e.savingsConfig)==null?void 0:x.perPerfectLesson)||1,perLevelUp:((y=e.savingsConfig)==null?void 0:y.perLevelUp)||5,perAchievement:((f=e.savingsConfig)==null?void 0:f.perAchievement)||3,autoTransfer:((v=e.savingsConfig)==null?void 0:v.autoTransfer)||!1,monthlyLimit:((R=e.savingsConfig)==null?void 0:R.monthlyLimit)||100,weeklyGoal:((E=e.savingsConfig)==null?void 0:E.weeklyGoal)||20}),[o,i]=w.useState([]),[l,c]=w.useState(null),[d,m]=w.useState(!1);w.useEffect(()=>{de("/users").then(N=>{const h=e.linkedStudents?N.filter(j=>e.linkedStudents.includes(j.id)&&j.role==="student"):[];i(h)})},[e.linkedStudents]);const u=(N,h)=>{a(j=>({...j,[N]:h}))},g=async()=>{try{console.log("Frontend - Salvando configuraes:",{userId:e.id,config:r,configString:JSON.stringify(r,null,2)});const N=await os(`/users/${e.id}`,{savingsConfig:r});console.log("Frontend - Configuraes salvas:",{updatedUser:N,savingsConfig:N.savingsConfig,savingsConfigString:JSON.stringify(N.savingsConfig)}),t(N),Q.success("Configuraes de poupana salvas com sucesso!")}catch(N){console.error("Frontend - Erro ao salvar:",N),Q.error("Erro ao salvar configuraes: "+N.message)}},p=N=>{if(!N)return 0;const h=5,j=4,C=.3,b=2,T=1,A=h*j,$=A*C,V=A*r.perLesson+7*r.perStreak+$*r.perPerfectLesson+b*r.perLevelUp+T*r.perAchievement;return Math.min(V,r.monthlyLimit)},k=N=>{var A,$,D,V,z,I,F;const h=((A=N.savings)==null?void 0:A.balance)||0,j=((D=($=N.progress)==null?void 0:$.completedLessons)==null?void 0:D.length)||0,C=((V=N.progress)==null?void 0:V.streak)||0,b=((z=N.progress)==null?void 0:z.level)||1,T=((F=(I=N.progress)==null?void 0:I.perfectLessons)==null?void 0:F.length)||0;return{currentSavings:h,completedLessons:j,streak:C,level:b,perfectLessons:T,monthlyProjection:p(N)}};return n.jsx("div",{className:"min-h-screen bg-interface p-4 pb-20",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("div",{children:[n.jsx("button",{onClick:()=>s("parent-dashboard"),className:"text-primary hover:text-primary-dark mb-2 flex items-center",children:" Voltar ao Dashboard"}),n.jsx("h1",{className:"text-3xl font-yufin text-primary",children:" Configurar Poupana Educativa"})]})}),n.jsx("p",{className:"text-gray-600",children:"Configure as regras de poupana para incentivar o aprendizado dos seus filhos"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:" Recompensas por Atividade"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Por Lio Concluda (R$)"}),n.jsx("input",{type:"number",step:"0.1",min:"0",value:r.perLesson,onChange:N=>u("perLesson",parseFloat(N.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"0.50"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Valor depositado automaticamente quando seu filho completa uma lio"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Por Streak Dirio (R$)"}),n.jsx("input",{type:"number",step:"0.1",min:"0",value:r.perStreak,onChange:N=>u("perStreak",parseFloat(N.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"2.00"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Bnus por manter consistncia diria"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Por Lio Perfeita (R$)"}),n.jsx("input",{type:"number",step:"0.1",min:"0",value:r.perPerfectLesson,onChange:N=>u("perPerfectLesson",parseFloat(N.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"1.00"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Bnus extra por pontuao perfeita (100%)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Por Subida de Nvel (R$)"}),n.jsx("input",{type:"number",step:"0.1",min:"0",value:r.perLevelUp,onChange:N=>u("perLevelUp",parseFloat(N.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"5.00"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Recompensa especial por evoluo no aprendizado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Por Conquista (R$)"}),n.jsx("input",{type:"number",step:"0.1",min:"0",value:r.perAchievement,onChange:N=>u("perAchievement",parseFloat(N.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"3.00"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Bnus por desbloquear conquistas especiais"})]})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:n.jsx("button",{onClick:g,className:"w-full bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-dark transition",children:" Salvar Configuraes"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:" Selecione um Filho"}),o.length===0?n.jsx("p",{className:"text-gray-600 text-center py-4",children:"Nenhum filho vinculado ainda."}):n.jsx("div",{className:"space-y-2",children:o.map(N=>{var h,j;return n.jsx("button",{onClick:()=>c(N),className:`w-full p-3 rounded-lg border-2 transition ${(l==null?void 0:l.id)===N.id?"border-primary bg-primary text-white":"border-gray-300 hover:border-primary"}`,children:n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-semibold",children:N.name}),n.jsxs("div",{className:"text-sm opacity-80",children:["Nvel ",((h=N.progress)==null?void 0:h.level)||1,"  R$ ",(((j=N.savings)==null?void 0:j.balance)||0).toFixed(2)]})]})},N.id)})})]}),l&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:[" Estatsticas de ",l.name]}),(()=>{const N=k(l);return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["R$ ",N.currentSavings.toFixed(2)]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Poupana Atual"})]}),n.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:N.completedLessons}),n.jsx("div",{className:"text-sm text-gray-600",children:"Lies Concludas"})]}),n.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[N.streak," "]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Streak Atual"})]}),n.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-orange-600",children:N.perfectLessons}),n.jsx("div",{className:"text-sm text-gray-600",children:"Lies Perfeitas"})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 text-white p-4 rounded-lg",children:[n.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",N.monthlyProjection.toFixed(2)]}),n.jsx("div",{className:"text-sm opacity-90",children:"Projeo Mensal com Configurao Atual"})]})]})})()]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:" Dicas e Recomendaes"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3",children:n.jsxs("p",{className:"text-yellow-800 text-sm",children:[n.jsx("strong",{children:"Comece pequeno:"})," R$ 0,50 por lio  um bom ponto de partida"]})}),n.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3",children:n.jsxs("p",{className:"text-blue-800 text-sm",children:[n.jsx("strong",{children:"Incentive consistncia:"})," Bnus por streak motiva hbitos dirios"]})}),n.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-3",children:n.jsxs("p",{className:"text-green-800 text-sm",children:[n.jsx("strong",{children:"Recompense qualidade:"})," Bnus por lies perfeitas incentiva esforo"]})}),n.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3",children:n.jsxs("p",{className:"text-purple-800 text-sm",children:[n.jsx("strong",{children:"Defina limites:"})," Evite gastos excessivos com limite mensal"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:" Configuraes Avanadas"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Limite Mensal (R$)"}),n.jsx("input",{type:"number",step:"1",min:"0",value:r.monthlyLimit,onChange:N=>u("monthlyLimit",parseFloat(N.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"100"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Limite mximo de depsitos por ms"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Meta Semanal (R$)"}),n.jsx("input",{type:"number",step:"1",min:"0",value:r.weeklyGoal,onChange:N=>u("weeklyGoal",parseFloat(N.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"20"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Meta de poupana semanal para incentivar consistncia"})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",id:"autoTransfer",checked:r.autoTransfer,onChange:N=>u("autoTransfer",N.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),n.jsx("label",{htmlFor:"autoTransfer",className:"font-semibold text-gray-700",children:"Transferncia Automtica"})]}),n.jsx("p",{className:"text-sm text-gray-600 ml-7",children:"Transferir automaticamente para conta bancria quando atingir meta"})]})]})]})]})]})})},Gj=({user:e})=>n.jsxs("div",{className:"min-h-screen bg-interface flex flex-col items-center p-4 pb-20",children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-8",children:"Conquistas "}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Suas Conquistas"}),n.jsx("p",{className:"text-gray-600",children:"Nenhuma conquista desbloqueada ainda. Continue aprendendo!"})]})]}),Hj=({user:e})=>n.jsxs("div",{className:"min-h-screen bg-interface flex flex-col items-center p-4 pb-20",children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-8",children:"Ranking "}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Seu Ranking"}),n.jsx("p",{className:"text-gray-600",children:"Voc est na posio #1 da sua turma!"})]})]}),Wj=({user:e})=>n.jsxs("div",{className:"min-h-screen bg-interface flex flex-col items-center p-4 pb-20",children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-8",children:"Notcias "}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"ltimas Novidades"}),n.jsx("p",{className:"text-gray-600",children:"Nenhuma notcia disponvel no momento."})]})]}),Xj=({user:e})=>{const[t,s]=w.useState([]),[r,a]=w.useState(!0),[o,i]=w.useState(!1),[l,c]=w.useState({type:"school",maxUses:1,expiresAt:"",metadata:{description:"",grade:"",classId:""}});w.useEffect(()=>{d()},[]);const d=async()=>{try{a(!0);const S=await de(`/registration-tokens?createdBy=${e.id}`);s(S)}catch(S){console.error("Erro ao carregar tokens:",S)}finally{a(!1)}},m=async()=>{try{const S={createdBy:e.id,type:l.type,maxUses:l.maxUses||null,expiresAt:l.expiresAt||null,metadata:l.metadata};await Oe("/registration-tokens",S),i(!1),c({type:"school",maxUses:1,expiresAt:"",metadata:{description:"",grade:"",classId:""}}),d()}catch(S){console.error("Erro ao criar token:",S)}},u=async S=>{if(window.confirm("Tem certeza que deseja excluir este token?"))try{await so(`/registration-tokens/${S}`),d()}catch(x){console.error("Erro ao excluir token:",x)}},g=S=>{navigator.clipboard.writeText(S),alert("Token copiado para a rea de transferncia!")},p=S=>new Date(S).toLocaleDateString("pt-BR"),k=S=>S.isActive?S.expiresAt&&new Date>new Date(S.expiresAt)?"text-orange-600":"text-green-600":"text-red-600",P=S=>S.isActive?S.expiresAt&&new Date>new Date(S.expiresAt)?"Expirado":S.maxUses&&S.usedCount>=S.maxUses?"Usado":"Ativo":"Inativo";return r?n.jsx("div",{className:"text-center py-8",children:"Carregando tokens..."}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Tokens de Registro"}),n.jsx("button",{onClick:()=>i(!0),className:"bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Gerar Novo Token"})]}),o&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border",children:[n.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Criar Novo Token"}),n.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("p",{className:"text-sm text-blue-700",children:n.jsx("strong",{children:" Tokens Escolares (B2B):"})}),n.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Gere tokens para que seus alunos possam se registrar na plataforma."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),n.jsx("select",{value:l.type,disabled:!0,className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-gray-100",children:n.jsx("option",{value:"school",children:" Escola (B2B)"})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mximo de Usos"}),n.jsx("input",{type:"number",value:l.maxUses,onChange:S=>c({...l,maxUses:S.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Deixe vazio para ilimitado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Expirao"}),n.jsx("input",{type:"datetime-local",value:l.expiresAt,onChange:S=>c({...l,expiresAt:S.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Srie Sugerida"}),n.jsx("input",{type:"text",value:l.metadata.grade,onChange:S=>c({...l,metadata:{...l.metadata,grade:S.target.value}}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Ex: 6 Ano"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),n.jsx("textarea",{value:l.metadata.description,onChange:S=>c({...l,metadata:{...l.metadata,description:S.target.value}}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",rows:"3",placeholder:"Descrio do token (opcional)"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:m,className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition",children:"Criar Token"}),n.jsx("button",{onClick:()=>i(!1),className:"bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 transition",children:"Cancelar"})]})]}),n.jsx("div",{className:"space-y-4",children:t.length===0?n.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:n.jsx("p",{className:"text-gray-600",children:"Nenhum token criado ainda."})}):t.map(S=>n.jsxs("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k(S)}`,children:P(S)}),n.jsx("span",{className:"text-sm text-gray-500",children:S.type==="school"?" Escola":" Responsvel"})]}),n.jsx("button",{onClick:()=>u(S.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Excluir"})]}),n.jsx("div",{className:"mb-3",children:n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono",children:S.token}),n.jsx("button",{onClick:()=>g(S.token),className:"text-primary hover:text-primary-dark text-sm",children:" Copiar"})]})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Usos:"})," ",S.usedCount,S.maxUses&&`/${S.maxUses}`]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Criado:"})," ",p(S.createdAt)]}),S.expiresAt&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Expira:"})," ",p(S.expiresAt)]}),S.metadata.description&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Descrio:"})," ",S.metadata.description]})]}),S.usedBy&&S.usedBy.length>0&&n.jsxs("div",{className:"mt-3 pt-3 border-t",children:[n.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Usado por:"}),n.jsx("div",{className:"space-y-1",children:S.usedBy.map((x,y)=>n.jsxs("div",{className:"text-sm text-gray-600",children:[x.studentName," - ",p(x.usedAt)]},y))})]})]},S.id))})]})},zu="onboarding_school_seen",Bu=({user:e,setActiveScreen:t})=>{var H,ne;const[s,r]=w.useState(null),[a,o]=w.useState("30d"),[i,l]=w.useState(!1),[c,d]=w.useState(!1),[m,u]=w.useState([]),[g,p]=w.useState(!0),[k,P]=w.useState([]),[S,x]=w.useState(!0),[y,f]=w.useState([]),[v,R]=w.useState(!0),[E,N]=w.useState(null),[h,j]=w.useState(!1),[C,b]=w.useState("overview");w.useEffect(()=>{localStorage.getItem(zu)||d(!0)},[]),w.useEffect(()=>{de("/users").then(Y=>{u(Y.filter(B=>B.role==="student")),p(!1)}).catch(()=>p(!1))},[]),w.useEffect(()=>{de("/classes").then(Y=>{P(Y),x(!1)}).catch(()=>x(!1))},[]),w.useEffect(()=>{T()},[m]);const T=async()=>{var Y,B;try{R(!0);const q=[];for(const M of m)if((Y=M.gradeProgression)!=null&&Y.nextGradeRequested&&!((B=M.gradeProgression)!=null&&B.nextGradeAuthorized)){const U=await de(`/users/${M.id}/grade-progression-status`);U.progression.requested&&q.push({student:M,status:U,requestDate:M.gradeProgression.nextGradeRequestDate})}f(q)}catch(q){console.error("Erro ao carregar solicitaes:",q)}finally{R(!1)}},A=async(Y,B="")=>{var q;try{const M=await Oe(`/users/${E.student.id}/authorize-grade-progression`,{authorized:Y,notes:B});if(Q.success(M.message),j(!1),N(null),!Y&&M.requestReset){console.log(` Progresso negada para ${M.studentName} - recarregando dados...`),await T();const U=await de("/users");u(U.filter(G=>G.role==="student"));const K=await de("/classes");P(K)}else if(M.studentUnlinked){console.log(` Aluno ${M.studentName} foi desvinculado da turma ${((q=M.previousClass)==null?void 0:q.name)||"anterior"}`);const U=await de("/users");u(U.filter(G=>G.role==="student"));const K=await de("/classes");P(K),await T()}else setTimeout(async()=>{await T();const U=await de("/users");u(U.filter(G=>G.role==="student"));const K=await de("/classes");P(K)},1e3)}catch(M){console.error("Erro ao autorizar progresso:",M),Q.error("Erro ao processar autorizao")}},$=()=>{d(!1),localStorage.setItem(zu,"1")},V=(()=>{const Y=new Set;k.forEach(Z=>{Array.isArray(Z.students)&&Z.students.forEach(_=>{Y.add(_)})});const B=m.filter(Z=>Y.has(Z.id)),q=B.length,M=B.reduce((Z,_)=>{var W;return Z+(((W=_.progress)==null?void 0:W.xp)||0)},0),U=B.reduce((Z,_)=>{var W,ae;return Z+(((ae=(W=_.progress)==null?void 0:W.completedLessons)==null?void 0:ae.length)||0)},0),K=q>0?B.reduce((Z,_)=>{var W;return Z+(((W=_.progress)==null?void 0:W.level)||1)},0)/q:0,G=B.filter(Z=>{var _;return(((_=Z.progress)==null?void 0:_.streak)||0)>0}).length,ee=B.reduce((Z,_)=>{var W;return Z+(((W=_.savings)==null?void 0:W.balance)||0)},0);return{totalStudents:q,totalXp:M,totalLessons:U,averageLevel:Math.round(K*10)/10,activeStudents:G,totalSavings:ee,engagementRate:q>0?Math.round(G/q*100):0}})();if(g)return n.jsx("div",{className:"min-h-screen flex items-center justify-center text-xl",children:"Carregando alunos..."});if(S)return n.jsx("div",{className:"min-h-screen flex items-center justify-center text-xl",children:"Carregando turmas..."});const z=Y=>{const B=m.filter(G=>Array.isArray(Y.students)&&Y.students.includes(G.id.toString())),q=B.reduce((G,ee)=>{var Z;return G+(((Z=ee.progress)==null?void 0:Z.xp)||0)},0),M=B.reduce((G,ee)=>{var Z,_;return G+(((_=(Z=ee.progress)==null?void 0:Z.completedLessons)==null?void 0:_.length)||0)},0),U=B.length>0?B.reduce((G,ee)=>{var Z;return G+(((Z=ee.progress)==null?void 0:Z.level)||1)},0)/B.length:0,K=B.filter(G=>{var ee;return(((ee=G.progress)==null?void 0:ee.streak)||0)>0}).length;return{totalStudents:B.length,totalXp:q,totalLessons:M,averageLevel:Math.round(U*10)/10,activeStudents:K,engagementRate:B.length>0?Math.round(K/B.length*100):0,classStudents:B}},I=Y=>{const B={};return Y.forEach(q=>{var U;(((U=q.progress)==null?void 0:U.completedLessons)||[]).forEach(K=>{const G=et.find(ee=>ee.id===K);G&&G.subject&&(B[G.subject]||(B[G.subject]={completed:0,total:0,students:new Set}),B[G.subject].completed++,B[G.subject].students.add(q.id))})}),et.forEach(q=>{q.subject&&(B[q.subject]||(B[q.subject]={completed:0,total:0,students:new Set}),B[q.subject].total+=Y.length)}),B},F=()=>{const Y=new Set;return k.forEach(q=>{Array.isArray(q.students)&&q.students.forEach(M=>{Y.add(M)})}),m.filter(q=>Y.has(q.id)).map(q=>{var M,U,K,G,ee;return{id:q.id,name:q.name,xp:((M=q.progress)==null?void 0:M.xp)||0,level:((U=q.progress)==null?void 0:U.level)||1,streak:((K=q.progress)==null?void 0:K.streak)||0,lessonsCompleted:((ee=(G=q.progress)==null?void 0:G.completedLessons)==null?void 0:ee.length)||0}}).sort((q,M)=>M.xp-q.xp).slice(0,10)},L=Y=>{r(Y),l(!0)},O=()=>{r(null),l(!1)};if(i&&s){const Y=z(s),B=Y.classStudents,q=I(B);return n.jsxs("div",{className:"min-h-screen bg-interface p-4 pb-20",children:[c&&n.jsx(Oa,{profile:"school",onFinish:$}),n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("button",{onClick:O,className:"text-primary hover:text-primary-dark mb-2 flex items-center",children:" Voltar ao Resumo"}),n.jsxs("h1",{className:"text-3xl font-yufin text-primary",children:[" ",s.name]}),n.jsxs("p",{className:"text-gray-600",children:["Professor: ",s.teacher]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Taxa de Engajamento"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[Y.engagementRate,"%"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #3b82f6, #2563eb)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Alunos"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:Y.totalStudents})]}),n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #10b981, #059669)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"XP Total"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:Y.totalXp})]}),n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #8b5cf6, #7c3aed)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Nvel Mdio"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:Y.averageLevel})]}),n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #f97316, #ea580c)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Lies"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:Y.totalLessons})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Progresso por Matria"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(q).map(([M,U])=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:M}),n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[n.jsxs("span",{children:[U.completed," lies concludas"]}),n.jsxs("span",{children:[U.students.size," alunos ativos"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(U.completed/U.total*100,100)}%`}})})]},M))})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Alunos da Turma"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:B.map((M,U)=>{var K,G,ee,Z,_;return n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:M.name}),n.jsxs("span",{className:"text-sm text-gray-600",children:["#",U+1]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Nvel:"}),n.jsx("span",{className:"font-semibold ml-1",children:((K=M.progress)==null?void 0:K.level)||1})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"XP:"}),n.jsx("span",{className:"font-semibold ml-1",children:((G=M.progress)==null?void 0:G.xp)||0})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Streak:"}),n.jsxs("span",{className:"font-semibold ml-1",children:[((ee=M.progress)==null?void 0:ee.streak)||0," "]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Lies:"}),n.jsx("span",{className:"font-semibold ml-1",children:((_=(Z=M.progress)==null?void 0:Z.completedLessons)==null?void 0:_.length)||0})]})]})]},M.id)})})]})]})]})}return n.jsxs("div",{className:"min-h-screen bg-interface p-4 pb-20",children:[c&&n.jsx(Oa,{profile:"school",onFinish:$}),n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-4",children:" Dashboard da Escola"}),n.jsx("p",{className:"text-gray-600",children:"Acompanhe o progresso educacional de toda a escola"}),n.jsxs("div",{className:"flex space-x-2 mt-6",children:[n.jsx("button",{onClick:()=>b("overview"),className:`px-6 py-3 rounded-lg font-semibold transition-all duration-200 shadow-sm ${C==="overview"?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-md transform scale-105":"bg-white text-gray-700 hover:bg-gray-50 border-2 border-gray-200 hover:border-orange-300"}`,children:" Viso Geral"}),n.jsx("button",{onClick:()=>b("tokens"),className:`px-6 py-3 rounded-lg font-semibold transition-all duration-200 shadow-sm ${C==="tokens"?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-md transform scale-105":"bg-white text-gray-700 hover:bg-gray-50 border-2 border-gray-200 hover:border-orange-300"}`,children:" Tokens de Registro"}),n.jsx("button",{onClick:()=>b("progression"),className:`px-6 py-3 rounded-lg font-semibold transition-all duration-200 shadow-sm ${C==="progression"?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-md transform scale-105":"bg-white text-gray-700 hover:bg-gray-50 border-2 border-gray-200 hover:border-orange-300"}`,children:" Progresso Escolar"})]})]}),C==="overview"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Resumo da Escola"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:V.totalStudents}),n.jsx("p",{className:"text-gray-600",children:"Total de Alunos"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:V.activeStudents}),n.jsx("p",{className:"text-gray-600",children:"Alunos Ativos"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:V.totalLessons}),n.jsx("p",{className:"text-gray-600",children:"Lies Concludas"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:V.totalXp}),n.jsx("p",{className:"text-gray-600",children:"XP Total"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:V.averageLevel}),n.jsx("p",{className:"text-gray-600",children:"Nvel Mdio"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-3xl font-bold text-teal-600 mb-2",children:[V.engagementRate,"%"]}),n.jsx("p",{className:"text-gray-600",children:"Engajamento"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Turmas"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:k.map(Y=>{const B=z(Y);return n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:Y.name}),n.jsx("span",{className:"text-sm text-gray-600",children:Y.grade})]}),n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Professor:"}),n.jsx("span",{className:"font-semibold",children:Y.teacher})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Alunos:"}),n.jsx("span",{className:"font-semibold",children:B.totalStudents})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Nvel Mdio:"}),n.jsx("span",{className:"font-semibold",children:B.averageLevel})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Engajamento:"}),n.jsxs("span",{className:"font-semibold",children:[B.engagementRate,"%"]})]})]}),n.jsx("button",{onClick:()=>L(Y),className:"w-full bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Ver Detalhes"})]},Y.id)})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Ranking da Escola"}),n.jsx("div",{className:"space-y-3",children:F().map((Y,B)=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center font-bold",children:B+1}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:Y.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Nvel ",Y.level,"  ",Y.lessonsCompleted," lies"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-lg font-bold text-primary",children:[Y.xp," XP"]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[Y.streak," "]})]})]},Y.id))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:" Relatrios Detalhados"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Acesse relatrios completos de progresso e engajamento"}),n.jsx("button",{onClick:()=>t("reports"),className:"w-full bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Ver Relatrios"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:" Anlise de Performance"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Analise tendncias e performance dos alunos"}),n.jsx("button",{onClick:()=>alert("Funcionalidade de anlise de performance em desenvolvimento!"),className:"w-full bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Ver Anlises"})]})]})]}),C==="tokens"&&n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:n.jsx(Xj,{user:e})}),C==="progression"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Progresso Escolar"}),y.length>0?n.jsx("div",{className:"space-y-4",children:y.map((Y,B)=>n.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-primary shadow-md hover:shadow-lg transition-all duration-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:Y.student.name}),n.jsxs("p",{className:"text-sm text-gray-700 mt-1",children:["Solicitou progresso de ",n.jsx("strong",{className:"text-primary",children:Y.status.currentGrade})," para ",n.jsx("strong",{className:"text-green-600",children:Y.status.nextGrade})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[" Solicitado em: ",new Date(Y.requestDate).toLocaleDateString("pt-BR")]})]}),n.jsx("div",{className:"flex space-x-2",children:n.jsx("button",{onClick:()=>{N(Y),j(!0)},className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-all duration-200 font-semibold shadow-md hover:shadow-lg transform hover:scale-105",children:"Revisar"})})]})},Y.student.id))}):n.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:n.jsx("p",{className:"text-gray-600",children:"Nenhuma solicitao de progresso pendente."})})]})]}),h&&E&&n.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 p-2 sm:p-4",style:{paddingBottom:"80px",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)"},children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-2xl mx-4 p-4 sm:p-6 border-2 overflow-y-auto",style:{borderColor:"rgb(238, 145, 22)",maxHeight:"calc(100vh - 120px)"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[n.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-800",children:" Revisar Progresso de Srie"}),n.jsx("button",{onClick:()=>{j(!1),N(null)},className:"text-gray-500 hover:text-gray-700 text-xl sm:text-2xl font-bold transition-colors cursor-pointer p-0 m-0 border-0 bg-transparent focus:outline-none",children:""})]}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 sm:p-3 border-l-4 border-primary",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 flex items-center text-sm sm:text-base",children:" Informaes do Aluno"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1 sm:gap-3 text-xs sm:text-sm",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-gray-600 font-medium",children:"Nome:"}),n.jsx("span",{className:"font-semibold ml-2 text-gray-800 truncate",children:E.student.name})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-gray-600 font-medium",children:"Srie Atual:"}),n.jsx("span",{className:"font-semibold ml-2 text-primary",children:E.status.currentGrade})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-gray-600 font-medium",children:"Nvel:"}),n.jsx("span",{className:"font-semibold ml-2 text-gray-800",children:((H=E.student.progress)==null?void 0:H.level)||1})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-gray-600 font-medium",children:"XP Total:"}),n.jsx("span",{className:"font-semibold ml-2 text-gray-800",children:((ne=E.student.progress)==null?void 0:ne.xp)||0})]})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 sm:p-3 border-l-4 border-green-500",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 flex items-center text-sm sm:text-base",children:" Progresso da Srie Atual"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[n.jsx("span",{className:"text-gray-600 font-medium",children:"Lies Completadas:"}),n.jsxs("span",{className:"font-semibold text-gray-800",children:[E.status.completedLessons,"/",E.status.totalLessons]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 sm:h-3 shadow-inner",children:n.jsx("div",{className:"bg-green-500 h-2 sm:h-3 rounded-full shadow-sm transition-all duration-300",style:{width:`${E.status.completedLessons/E.status.totalLessons*100}%`}})}),n.jsx("div",{className:"flex items-center",children:E.status.hasCompletedCurrentGrade?n.jsx("span",{className:"text-green-600 text-xs sm:text-sm font-medium flex items-center",children:" Srie atual completamente finalizada"}):n.jsx("span",{className:"text-orange-600 text-xs sm:text-sm font-medium flex items-center",children:" Srie atual no completamente finalizada"})})]})]}),n.jsxs("div",{className:"bg-orange-50 rounded-lg p-2 sm:p-3 border-l-4 border-orange-500",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 flex items-center text-sm sm:text-base",children:" Solicitao de Progresso"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs sm:text-sm text-gray-700",children:["O aluno solicitou progresso de ",n.jsx("strong",{className:"text-primary",children:E.status.currentGrade})," para ",n.jsx("strong",{className:"text-green-600",children:E.status.nextGrade})]}),n.jsxs("p",{className:"text-xs text-gray-500 flex items-center",children:[" Solicitado em: ",new Date(E.requestDate).toLocaleDateString("pt-BR")," s ",new Date(E.requestDate).toLocaleTimeString("pt-BR")]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[n.jsx("button",{onClick:()=>{A(!1,"")},className:"w-full bg-red-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold hover:bg-red-600 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 flex items-center justify-center text-xs sm:text-sm",children:" Negar"}),n.jsx("button",{onClick:()=>{A(!0,"")},className:"w-full bg-green-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold hover:bg-green-600 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 flex items-center justify-center text-xs sm:text-sm",children:" Autorizar"})]})]})]})})]})},Qj=({user:e,setActiveScreen:t})=>{var x,y,f,v,R,E,N;const[s,r]=w.useState(null),[a,o]=w.useState("7d"),[i,l]=w.useState(!0),[c,d]=w.useState("general"),[m,u]=w.useState([]);w.useEffect(()=>{de("/users").then(h=>u(h))},[]),w.useEffect(()=>{g()},[a,c,m]);const g=()=>{l(!0);let h;e.role==="parent"?h=p():e.role==="school"?h=k():h=ls.generateReport(a);const j=se.load(oe.PROGRESS),C={...h,progress:j||{},user:e};r(C),l(!1)},p=()=>{const h=e.linkedStudents?m.filter(b=>e.linkedStudents.includes(b.id)&&b.role==="student"):[],j={totalStudents:h.length,totalXp:h.reduce((b,T)=>{var A;return b+(((A=T.progress)==null?void 0:A.xp)||0)},0),totalLessons:h.reduce((b,T)=>{var A,$;return b+((($=(A=T.progress)==null?void 0:A.completedLessons)==null?void 0:$.length)||0)},0),totalSavings:h.reduce((b,T)=>{var A;return b+(((A=T.savings)==null?void 0:A.balance)||0)},0),averageLevel:h.length>0?h.reduce((b,T)=>{var A;return b+(((A=T.progress)==null?void 0:A.level)||1)},0)/h.length:0,totalStreak:h.reduce((b,T)=>{var A;return b+(((A=T.progress)==null?void 0:A.streak)||0)},0),activeStudents:h.filter(b=>{var T;return(((T=b.progress)==null?void 0:T.streak)||0)>0}).length},C={};return h.forEach(b=>{var A;(((A=b.progress)==null?void 0:A.completedLessons)||[]).forEach($=>{const D=et.find(V=>V.id===$);D&&D.subject&&(C[D.subject]||(C[D.subject]={completed:0,total:0,students:new Set}),C[D.subject].completed++,C[D.subject].students.add(b.id))})}),et.forEach(b=>{b.subject&&(C[b.subject]||(C[b.subject]={completed:0,total:0,students:new Set}),C[b.subject].total+=h.length)}),{familyStats:j,familySubjectProgress:C,linkedStudents:h,sessionDuration:0,userEngagement:{totalLessons:j.totalLessons,perfectLessons:h.reduce((b,T)=>{var A,$;return b+((($=(A=T.progress)==null?void 0:A.perfectLessons)==null?void 0:$.length)||0)},0),perfectRate:j.totalLessons>0?h.reduce((b,T)=>{var A,$;return b+((($=(A=T.progress)==null?void 0:A.perfectLessons)==null?void 0:$.length)||0)},0)/j.totalLessons*100:0,averageScore:85,averageTimePerLesson:300},performance:{achievements:h.reduce((b,T)=>{var A,$;return b+((($=(A=T.progress)==null?void 0:A.achievements)==null?void 0:$.length)||0)},0),levelUps:h.reduce((b,T)=>{var A;return b+(((A=T.progress)==null?void 0:A.level)||1)},0)-h.length},eventsByType:{lesson_complete:j.totalLessons,level_up:h.reduce((b,T)=>{var A;return b+(((A=T.progress)==null?void 0:A.level)||1)},0)-h.length,achievement_unlock:h.reduce((b,T)=>{var A,$;return b+((($=(A=T.progress)==null?void 0:A.achievements)==null?void 0:$.length)||0)},0)}}},k=()=>{const h=m.filter(T=>T.role==="student"&&T.schoolId===e.id),j={totalStudents:h.length,totalXp:h.reduce((T,A)=>{var $;return T+((($=A.progress)==null?void 0:$.xp)||0)},0),totalLessons:h.reduce((T,A)=>{var $,D;return T+(((D=($=A.progress)==null?void 0:$.completedLessons)==null?void 0:D.length)||0)},0),totalSavings:h.reduce((T,A)=>{var $;return T+((($=A.savings)==null?void 0:$.balance)||0)},0),averageLevel:h.length>0?h.reduce((T,A)=>{var $;return T+((($=A.progress)==null?void 0:$.level)||1)},0)/h.length:0,activeStudents:h.filter(T=>{var A;return(((A=T.progress)==null?void 0:A.streak)||0)>0}).length,engagementRate:h.length>0?h.filter(T=>{var A;return(((A=T.progress)==null?void 0:A.streak)||0)>0}).length/h.length*100:0},C={};h.forEach(T=>{var $;((($=T.progress)==null?void 0:$.completedLessons)||[]).forEach(D=>{const V=et.find(z=>z.id===D);V&&V.subject&&(C[V.subject]||(C[V.subject]={completed:0,total:0,students:new Set}),C[V.subject].completed++,C[V.subject].students.add(T.id))})}),et.forEach(T=>{T.subject&&(C[T.subject]||(C[T.subject]={completed:0,total:0,students:new Set}),C[T.subject].total+=h.length)});const b=h.map(T=>{var A,$,D,V,z;return{id:T.id,name:T.name,xp:((A=T.progress)==null?void 0:A.xp)||0,level:(($=T.progress)==null?void 0:$.level)||1,streak:((D=T.progress)==null?void 0:D.streak)||0,lessonsCompleted:((z=(V=T.progress)==null?void 0:V.completedLessons)==null?void 0:z.length)||0}}).sort((T,A)=>A.xp-T.xp).slice(0,10);return{schoolStats:j,schoolSubjectProgress:C,schoolRanking:b,schoolStudents:h,sessionDuration:0,userEngagement:{totalLessons:j.totalLessons,perfectLessons:h.reduce((T,A)=>{var $,D;return T+(((D=($=A.progress)==null?void 0:$.perfectLessons)==null?void 0:D.length)||0)},0),perfectRate:j.totalLessons>0?h.reduce((T,A)=>{var $,D;return T+(((D=($=A.progress)==null?void 0:$.perfectLessons)==null?void 0:D.length)||0)},0)/j.totalLessons*100:0,averageScore:82,averageTimePerLesson:280},performance:{achievements:h.reduce((T,A)=>{var $,D;return T+(((D=($=A.progress)==null?void 0:$.achievements)==null?void 0:D.length)||0)},0),levelUps:h.reduce((T,A)=>{var $;return T+((($=A.progress)==null?void 0:$.level)||1)},0)-h.length},eventsByType:{lesson_complete:j.totalLessons,level_up:h.reduce((T,A)=>{var $;return T+((($=A.progress)==null?void 0:$.level)||1)},0)-h.length,achievement_unlock:h.reduce((T,A)=>{var $,D;return T+(((D=($=A.progress)==null?void 0:$.achievements)==null?void 0:D.length)||0)},0)}}},P=h=>{const j=Math.floor(h/3600),C=Math.floor(h%3600/60),b=h%60;return j>0?`${j}h ${C}m ${b}s`:C>0?`${C}m ${b}s`:`${b}s`},S=h=>{const j=Math.floor(h/36e5),C=Math.floor(h%(1e3*60*60)/(1e3*60));return j>0?`${j}h ${C}m`:`${C}m`};return i?n.jsx("div",{className:"min-h-screen bg-interface flex items-center justify-center",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Gerando relatrio..."})]})}):n.jsx("div",{className:"min-h-screen bg-interface p-4 pb-20",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("button",{onClick:()=>t(e.role==="parent"?"parent-dashboard":e.role==="school"?"school-dashboard":"home"),className:"text-primary hover:text-primary-dark mb-2 flex items-center",children:" Voltar ao Dashboard"}),n.jsx("h1",{className:"text-3xl font-yufin text-primary",children:" Relatrios Detalhados"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[e.role==="parent"&&n.jsxs("select",{value:c,onChange:h=>d(h.target.value),className:"bg-white border-2 border-gray-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors hover:border-orange-300",children:[n.jsx("option",{value:"general",children:"Viso Geral"}),n.jsx("option",{value:"family",children:"Relatrio Familiar"}),n.jsx("option",{value:"individual",children:"Individual por Filho"})]}),e.role==="school"&&n.jsxs("select",{value:c,onChange:h=>d(h.target.value),className:"bg-white border-2 border-gray-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors hover:border-orange-300",children:[n.jsx("option",{value:"general",children:"Viso Geral"}),n.jsx("option",{value:"school",children:"Relatrio da Escola"}),n.jsx("option",{value:"classes",children:"Por Turmas"})]}),n.jsxs("select",{value:a,onChange:h=>o(h.target.value),className:"bg-white border-2 border-gray-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors hover:border-orange-300",children:[n.jsx("option",{value:"1d",children:"ltimo dia"}),n.jsx("option",{value:"7d",children:"ltima semana"}),n.jsx("option",{value:"30d",children:"ltimo ms"}),n.jsx("option",{value:"all",children:"Todo perodo"})]}),n.jsx("button",{onClick:g,className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-6 py-2 rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 shadow-sm hover:shadow-md font-semibold",children:" Atualizar"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #3b82f6, #2563eb)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white mb-1",children:e.role==="parent"?" Filhos Ativos":" Alunos Ativos"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:e.role==="parent"&&(s!=null&&s.familyStats)?`${s.familyStats.activeStudents}/${s.familyStats.totalStudents}`:e.role==="school"&&(s!=null&&s.schoolStats)?`${s.schoolStats.activeStudents}/${s.schoolStats.totalStudents}`:"0/0"})]}),n.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #10b981, #059669)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white mb-1",children:" Lies Concludas"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:e.role==="parent"&&(s!=null&&s.familyStats)?s.familyStats.totalLessons:e.role==="school"&&(s!=null&&s.schoolStats)?s.schoolStats.totalLessons:0})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #8b5cf6, #7c3aed)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white mb-1",children:e.role==="parent"?" XP Total":" Engajamento"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:e.role==="parent"&&(s!=null&&s.familyStats)?s.familyStats.totalXp:e.role==="school"&&(s!=null&&s.schoolStats)?`${Math.round(s.schoolStats.engagementRate)}%`:e.role==="parent"?0:"0%"})]}),n.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #f97316, #ea580c)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white mb-1",children:e.role==="parent"?" Poupana Total":" Nvel Mdio"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:e.role==="parent"&&(s!=null&&s.familyStats)?`R$ ${s.familyStats.totalSavings.toFixed(2)}`:e.role==="school"&&(s!=null&&s.schoolStats)?Math.round(s.schoolStats.averageLevel*10)/10:e.role==="parent"?"R$ 0,00":0})]})]}),e.role==="student"&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-lg shadow-lg",children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Tempo Total"}),n.jsx("p",{className:"text-2xl font-bold",children:S(s.sessionDuration)})]}),n.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-lg shadow-lg",children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Lies Completadas"}),n.jsx("p",{className:"text-2xl font-bold",children:s.userEngagement.totalLessons})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-lg shadow-lg",children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Conquistas"}),n.jsx("p",{className:"text-2xl font-bold",children:s.performance.achievements})]}),n.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 rounded-lg shadow-lg",children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Nveis Subidos"}),n.jsx("p",{className:"text-2xl font-bold",children:s.performance.levelUps})]})]})]}),e.role==="parent"&&c==="family"&&(s==null?void 0:s.familySubjectProgress)&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Progresso Familiar por Matria"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(s.familySubjectProgress).map(([h,j])=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:h}),n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[n.jsxs("span",{children:[j.completed," lies concludas"]}),n.jsxs("span",{children:[j.students.size," filhos ativos"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(j.completed/j.total*100,100)}%`}})})]},h))})]}),e.role==="school"&&c==="school"&&(s==null?void 0:s.schoolSubjectProgress)&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Progresso Escolar por Matria"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(s.schoolSubjectProgress).map(([h,j])=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:h}),n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[n.jsxs("span",{children:[j.completed," lies concludas"]}),n.jsxs("span",{children:[j.students.size," alunos ativos"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(j.completed/j.total*100,100)}%`}})})]},h))})]}),e.role==="school"&&(s==null?void 0:s.schoolRanking)&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Top 10 Alunos da Escola"}),n.jsx("div",{className:"space-y-3",children:s.schoolRanking.map((h,j)=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center font-bold",children:j+1}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:h.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Nvel ",h.level,"  ",h.lessonsCompleted," lies"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-lg font-bold text-primary",children:[h.xp," XP"]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[h.streak," "]})]})]},h.id))})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Engajamento"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-3xl font-bold text-primary mb-2",children:[Math.round(s.userEngagement.averageScore),"%"]}),n.jsx("p",{className:"text-gray-600",children:"Pontuao Mdia"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-3xl font-bold text-green-500 mb-2",children:[s.userEngagement.perfectRate.toFixed(1),"%"]}),n.jsx("p",{className:"text-gray-600",children:"Taxa de Perfeio"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-blue-500 mb-2",children:P(s.userEngagement.averageTimePerLesson)}),n.jsx("p",{className:"text-gray-600",children:"Tempo Mdio/Lio"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-purple-500 mb-2",children:s.userEngagement.perfectLessons}),n.jsx("p",{className:"text-gray-600",children:"Lies Perfeitas"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Atividades Recentes"}),n.jsx("div",{className:"space-y-4",children:s.eventsByType&&Object.entries(s.eventsByType).map(([h,j])=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("span",{className:"text-2xl",children:[h==="lesson_complete"&&"",h==="level_up"&&"",h==="achievement_unlock"&&"",h==="store_purchase"&&"",h==="navigation"&&"",h==="error"&&"",!["lesson_complete","level_up","achievement_unlock","store_purchase","navigation","error"].includes(h)&&""]}),n.jsxs("span",{className:"font-medium text-gray-800",children:[h==="lesson_complete"&&"Lies Completadas",h==="level_up"&&"Subidas de Nvel",h==="achievement_unlock"&&"Conquistas Desbloqueadas",h==="store_purchase"&&"Compras na Loja",h==="navigation"&&"Navegaes",h==="error"&&"Erros",!["lesson_complete","level_up","achievement_unlock","store_purchase","navigation","error"].includes(h)&&h]})]}),n.jsx("span",{className:"text-lg font-bold text-primary",children:j})]},h))})]}),e.role==="student"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Progresso Geral"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Nvel e XP"}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[n.jsx("span",{children:"Nvel Atual"}),n.jsx("span",{children:s.progress.currentLevel||((x=e.progress)==null?void 0:x.level)||1})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${Math.min((s.progress.totalXp||((y=e.progress)==null?void 0:y.xp)||0)/(s.progress.xpToNextLevel||100)*100,100)}%`}})}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.progress.totalXp||((f=e.progress)==null?void 0:f.xp)||0," / ",s.progress.xpToNextLevel||100," XP"]})]})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Estatsticas"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"YCoins:"}),n.jsxs("span",{className:"font-semibold",children:[((v=e.progress)==null?void 0:v.yuCoins)||0," "]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Streak:"}),n.jsxs("span",{className:"font-semibold",children:[s.progress.streak||((R=e.progress)==null?void 0:R.streak)||0," "]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Lies Concludas:"}),n.jsx("span",{className:"font-semibold",children:((N=(E=e.progress)==null?void 0:E.completedLessons)==null?void 0:N.length)||0})]})]})]})]})]}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:()=>t(e.role==="parent"?"parent-dashboard":e.role==="school"?"school-dashboard":"home"),className:"bg-primary text-white px-8 py-3 rounded-lg font-semibold hover:bg-primary-dark transition transform hover:scale-105",children:"Voltar ao Dashboard"})})]})})},Yj=({user:e})=>n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-2 sm:p-4",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 mb-4 sm:mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:n.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-3 sm:gap-4",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-yufin text-primary mb-2",children:" Desafios"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Desafios especiais para aplicar o conhecimento em situaes reais!"})]})})}),n.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-6 animate-pulse",children:""}),n.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Em Breve"}),n.jsx("p",{className:"text-lg text-gray-600 mb-6 max-w-md",children:"Estamos preparando desafios incrveis para voc aplicar todo o conhecimento aprendido!"}),n.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-lg p-4 border border-yellow-200",children:n.jsx("p",{className:"text-yellow-800 font-medium",children:" Desafios prticos que conectam teoria e realidade"})})]})})]})}),Kj=({user:e,handleLogout:t,onResetProgress:s})=>{const[r,a]=w.useState(!1),[o,i]=w.useState(!0),[l,c]=w.useState(!0),[d,m]=w.useState(!1),[u,g]=w.useState(!1);w.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission();const y=localStorage.getItem("darkMode")==="true",f=localStorage.getItem("notifications")!=="false",v=localStorage.getItem("sound")!=="false";a(y),i(f),c(v),y?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");const R=Se.checkAdminStatus(e),E=Se.isDevModeEnabled();g(R),m(E)},[e]),w.useEffect(()=>{r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",r)},[r]);const p=()=>{"Notification"in window&&Notification.permission==="granted"?new Notification("Poup te chama!",{body:"Complete um desafio dirio hoje!"}):alert("Permisso de notificaes no concedida. Habilite nas configuraes do seu navegador.")},k=()=>{i(!o),localStorage.setItem("notifications",!o),o||p()},P=()=>{c(!l),localStorage.setItem("sound",!l)},S=()=>{a(!r)},x=()=>{if(Se.toggleDevMode(e)){const f=Se.isDevModeEnabled();m(f),window.dispatchEvent(new CustomEvent("devModeChanged",{detail:{enabled:f}})),f?Q.success(" Modo Dev ativado! Todas as lies e sries liberadas."):Q.success(" Modo Dev desativado. Voltando ao fluxo normal.")}else Q.error("Acesso negado ao Modo Dev. Apenas administradores podem usar esta funcionalidade.")};return n.jsxs("div",{className:"min-h-screen bg-interface dark:bg-gray-900 flex flex-col items-center p-4 pb-20",role:"main","aria-label":"Tela de Configuraes",children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary dark:text-orange-400 mb-8 animate-fadeIn","aria-label":"Ttulo das Configuraes",children:"Configuraes "}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-md w-full border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold mb-6 dark:text-white","aria-label":"Subttulo das Configuraes",children:"Ajustes"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-2xl mr-3",children:""}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-800 dark:text-white","aria-label":"Modo Escuro",children:"Modo Escuro"}),n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Alternar entre tema claro e escuro"})]})]}),n.jsx("button",{onClick:S,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r?"bg-primary":"bg-gray-300"}`,"aria-label":`${r?"Desativar":"Ativar"} modo escuro`,children:n.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r?"translate-x-6":"translate-x-1"}`})})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-2xl mr-3",children:""}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-800 dark:text-white","aria-label":"Notificaes",children:"Notificaes"}),n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Lembretes dirios e conquistas"})]})]}),n.jsx("button",{onClick:k,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${o?"bg-primary":"bg-gray-300"}`,"aria-label":`${o?"Desativar":"Ativar"} notificaes`,children:n.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o?"translate-x-6":"translate-x-1"}`})})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-2xl mr-3",children:""}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-800 dark:text-white","aria-label":"Som",children:"Som"}),n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Sons de feedback e conquistas"})]})]}),n.jsx("button",{onClick:P,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${l?"bg-primary":"bg-gray-300"}`,"aria-label":`${l?"Desativar":"Ativar"} som`,children:n.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l?"translate-x-6":"translate-x-1"}`})})]}),u&&n.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border-2 border-red-200",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-2xl mr-3",children:""}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-red-800","aria-label":"Modo Dev",children:"Modo Dev"}),n.jsx("span",{className:"text-sm text-red-600",children:d?"Todas as lies e sries liberadas":"Liberar todas as lies e sries"})]})]}),n.jsx("button",{onClick:x,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d?"bg-red-500":"bg-gray-300"}`,"aria-label":`${d?"Desativar":"Ativar"} modo dev`,children:n.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d?"translate-x-6":"translate-x-1"}`})})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-3",children:"Informaes da Conta"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Nome:"})," ",e.name]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",e.email]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Tipo:"})," ",e.role==="student"?"Estudante":e.role==="parent"?"Responsvel":"Escola"]})]})]}),n.jsx("button",{onClick:t,className:"mt-6 w-full text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 hover:opacity-90",style:{backgroundColor:"rgb(238, 145, 22)"},"aria-label":"Sair da Conta",children:"Sair da Conta"}),e.role==="student"&&n.jsx("button",{onClick:()=>{window.confirm("Tem certeza que deseja zerar o progresso da srie atual? O progresso de outras sries ser mantido. Esta ao no pode ser desfeita!")&&typeof s=="function"&&s()},className:"mt-4 w-full text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 hover:opacity-90",style:{backgroundColor:"rgb(238, 145, 22)"},"aria-label":"Zerar Progresso",children:"Zerar Progresso"})]})]})]})},Zj=({user:e,setUser:t,setActiveScreen:s})=>{var $,D,V,z,I,F;const[r,a]=w.useState([]),[o,i]=w.useState([]),[l,c]=w.useState({sameClass:[],sameSchool:[]}),[d,m]=w.useState(""),[u,g]=w.useState(null),[p,k]=w.useState("friends"),[P,S]=w.useState(!1),[x,y]=w.useState([]),[f,v]=w.useState(!1);w.useEffect(()=>{R(),E(),(e==null?void 0:e.role)==="student"&&N()},[e==null?void 0:e.id]);const R=async()=>{if(!(e!=null&&e.id)){console.error("ID do usurio no disponvel");return}try{S(!0);const L=await de(`/users/${e.id}/friends`);a(L.acceptedFriends||[]),i(L.pendingRequests||[])}catch(L){console.error("Erro ao carregar amigos:",L),Q.error("Erro ao carregar lista de amigos")}finally{S(!1)}},E=async()=>{if(!(e!=null&&e.id)){console.error("ID do usurio no disponvel");return}try{const L=await de(`/users/${e.id}/friend-suggestions`);c(L.suggestions||{sameClass:[],sameSchool:[]})}catch(L){console.error("Erro ao carregar sugestes:",L)}},N=async()=>{if(!(e!=null&&e.id)){console.error("ID do usurio no disponvel");return}try{v(!0);const L=await de(`/students/${e.id}/pending-link-requests`);y(L.pendingRequests||[])}catch(L){console.error("Erro ao carregar solicitaes de vnculo:",L)}finally{v(!1)}},h=async(L,O)=>{if(!(e!=null&&e.id)){Q.error("ID do usurio no disponvel");return}if(!L){Q.error("ID do responsvel no disponvel");return}try{await Oe(`/students/${e.id}/respond-link-request`,{parentId:L,approved:O}),Q.success(O?"Responsvel vinculado com sucesso!":"Solicitao rejeitada."),N()}catch(H){console.error("Erro ao responder solicitao:",H),Q.error("Erro ao processar solicitao")}},j=async(L,O="suggestion")=>{var H,ne,Y;if(!(e!=null&&e.id)){Q.error("ID do usurio no disponvel");return}if(!L){Q.error("ID do amigo no disponvel");return}try{await Oe(`/users/${e.id}/friends`,{targetUserId:L,source:O}),ls.trackEvent("friend_added",{friendId:L,userId:e.id,source:O}),Q.success("Solicitao de amizade enviada!"),R(),E()}catch(B){console.error("Erro ao adicionar amigo:",B);const q=(ne=(H=B.response)==null?void 0:H.data)==null?void 0:ne.error;q?Q.error(q):((Y=B.response)==null?void 0:Y.status)===400?Q.error("Erro na solicitao. Verifique os dados."):Q.error("Erro ao adicionar amigo")}},C=async(L,O)=>{if(!(e!=null&&e.id)){Q.error("ID do usurio no disponvel");return}if(!L){Q.error("ID do amigo no disponvel");return}console.log(` Frontend: Enviando solicitao - User ID: ${e.id}, Friend ID: ${L}, Action: ${O}`);try{await r0(`/users/${e.id}/friends/${L}`,{action:O}),Q.success(O==="accept"?"Solicitao aceita!":"Solicitao rejeitada!"),await R(),await E()}catch(H){console.error("Erro ao processar solicitao:",H),Q.error("Erro ao processar solicitao")}},b=async()=>{var L,O;if(!d.trim()){Q.warning("Digite um ID de jogador");return}if(!d.trim().toUpperCase().startsWith("YUF")){Q.error("ID de jogador invlido. Deve comear com YUF");return}try{S(!0);const H=await de(`/users/search/${d.trim().toUpperCase()}`);if(H.id===e.id){g(null),Q.error("Voc no pode adicionar a si mesmo como amigo");return}g(H),Q.success("Jogador encontrado!")}catch(H){console.error("Erro ao buscar jogador:",H),g(null),((L=H.response)==null?void 0:L.status)===404?Q.error("Jogador no encontrado. Verifique o ID."):((O=H.response)==null?void 0:O.status)===400?Q.error("ID de jogador invlido. Deve comear com YUF"):Q.error("Erro ao buscar jogador")}finally{S(!1)}},T=async L=>{if(!(e!=null&&e.id)){Q.error("ID do usurio no disponvel");return}if(!L){Q.error("ID do amigo no disponvel");return}if(window.confirm("Tem certeza que deseja remover este amigo?"))try{await so(`/users/${e.id}/friends/${L}`),Q.success("Amigo removido com sucesso!"),R()}catch(O){console.error("Erro ao remover amigo:",O),Q.error("Erro ao remover amigo")}},A=async(L,O)=>{if(!(e!=null&&e.id)){Q.error("ID do usurio no disponvel");return}if(!L){Q.error("ID do amigo no disponvel");return}try{const H=await Oe(`/users/${e.id}/send-gift`,{friendId:L,giftType:O}),ne={...e,progress:{...e.progress,yuCoins:H.sender.yuCoins}};t(ne),localStorage.setItem("yufinUser",JSON.stringify(ne)),ls.trackEvent("gift_sent",{friendId:L,giftType:O,cost:H.cost}),Q.success(`Presente enviado para ${H.recipient.name}!`)}catch(H){console.error("Erro ao enviar presente:",H),H.message.includes("YCoins insuficientes")?Q.error("YCoins insuficientes para enviar este presente!"):H.message.includes("amigos")?Q.error("Vocs precisam ser amigos para enviar presentes"):Q.error("Erro ao enviar presente")}};return n.jsx("div",{className:"min-h-screen bg-interface dark:bg-gray-900 p-3 pb-20",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("div",{className:"flex items-center space-x-3",children:n.jsx("h1",{className:"text-2xl font-yufin text-primary dark:text-orange-400",children:" Amigos"})})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-blue-100 text-blue-800 p-3 rounded-lg text-center border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("div",{className:"text-xs font-medium mb-1",children:"Amigos"}),n.jsx("div",{className:"text-lg font-bold",children:(r==null?void 0:r.length)||0})]}),n.jsxs("div",{className:"bg-yellow-100 text-yellow-800 p-3 rounded-lg text-center border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("div",{className:"text-xs font-medium mb-1",children:"Pendentes"}),n.jsx("div",{className:"text-lg font-bold",children:((o==null?void 0:o.length)||0)+((e==null?void 0:e.role)==="student"&&(x==null?void 0:x.length)||0)})]})]}),n.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded-lg border-2",style:{borderColor:"rgb(238, 145, 22)"},children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Seu ID de Jogador:"}),n.jsx("p",{className:"text-lg font-bold text-gray-800",children:(e==null?void 0:e.playerId)||"No gerado"})]}),(e==null?void 0:e.playerId)&&n.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(e.playerId),Q.success("ID de jogador copiado para a rea de transferncia!")}catch{const O=document.createElement("textarea");O.value=e.playerId,document.body.appendChild(O),O.select(),document.execCommand("copy"),document.body.removeChild(O),Q.success("ID de jogador copiado para a rea de transferncia!")}},className:"text-gray-500 hover:text-primary transition-colors p-2 rounded-lg hover:bg-yellow-100",title:"Copiar ID de jogador",children:""})]})}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[n.jsxs("button",{onClick:()=>k("friends"),className:`px-3 sm:px-4 py-2 rounded-lg text-sm font-medium transition ${p==="friends"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" Amigos (",(r==null?void 0:r.length)||0,")"]}),n.jsxs("button",{onClick:()=>k("requests"),className:`px-3 sm:px-4 py-2 rounded-lg text-sm font-medium transition ${p==="requests"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" Solicitaes (",((o==null?void 0:o.length)||0)+((e==null?void 0:e.role)==="student"&&(x==null?void 0:x.length)||0),")"]}),n.jsx("button",{onClick:()=>k("suggestions"),className:`px-3 sm:px-4 py-2 rounded-lg text-sm font-medium transition ${p==="suggestions"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" Sugestes"}),n.jsx("button",{onClick:()=>k("search"),className:`px-3 sm:px-4 py-2 rounded-lg text-sm font-medium transition ${p==="search"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" Buscar por ID"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[p==="friends"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Meus Amigos"}),P?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Carregando amigos..."})]}):r.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Voc ainda no tem amigos adicionados."}),n.jsx("button",{onClick:()=>k("suggestions"),className:"bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-dark transition",children:"Encontrar Amigos"})]}):n.jsx("div",{className:"space-y-4",children:r==null?void 0:r.map(L=>{var O;return n.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center text-white font-bold text-lg",children:L.name?L.name.charAt(0):"?"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800 text-lg",children:L.name||"Nome no disponvel"}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[n.jsxs("span",{children:["Nvel ",L.level||1]}),n.jsxs("span",{children:[" ",L.gradeId||"N/A"]}),n.jsxs("span",{children:[" ",L.playerId||"N/A"]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>A(L.id,"yuCoins"),disabled:(((O=e.progress)==null?void 0:O.yuCoins)||0)<10,className:"bg-yellow-500 text-white px-3 py-1 rounded-lg text-sm hover:bg-yellow-600 transition disabled:opacity-50 disabled:cursor-not-allowed",title:"Enviar 10 YCoins (Custo: 10 YCoins)",children:" Presente"}),n.jsx("button",{onClick:()=>T(L.id),className:"bg-red-500 text-white px-3 py-1 rounded-lg text-sm hover:bg-red-600 transition",title:"Remover amigo",children:" Remover"})]})]})},L.id)})})]}),p==="requests"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Solicitaes Pendentes"}),(e==null?void 0:e.role)==="student"&&x.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:" Solicitaes de Vnculo"}),n.jsx("div",{className:"space-y-3",children:x==null?void 0:x.map(L=>n.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:""}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800 text-lg",children:L.parentName||"Nome no disponvel"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Deseja se vincular como responsvel"}),L.message&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:['"',L.message,'"']}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:L.requestDate?new Date(L.requestDate).toLocaleDateString("pt-BR"):"Data no disponvel"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>h(L.parentId,!0),className:"bg-green-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-green-600 transition",children:" Aceitar"}),n.jsx("button",{onClick:()=>h(L.parentId,!1),className:"bg-red-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-600 transition",children:" Rejeitar"})]})]})},L.parentId))})]}),o.length===0&&(!(e!=null&&e.role)==="student"||x.length===0)?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("p",{className:"text-gray-600",children:"Nenhuma solicitao pendente."})]}):n.jsx("div",{className:"space-y-4",children:o.map(L=>n.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center text-white font-bold text-lg",children:L.name?L.name.charAt(0):"?"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800 text-lg",children:L.name||"Nome no disponvel"}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[n.jsxs("span",{children:["Nvel ",L.level||1]}),n.jsxs("span",{children:[" ",L.gradeId||"N/A"]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>C(L.id,"accept"),className:"bg-green-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-green-600 transition",children:" Aceitar"}),n.jsx("button",{onClick:()=>C(L.id,"reject"),className:"bg-red-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-600 transition",children:" Rejeitar"})]})]})},L.id))})]}),p==="suggestions"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Sugestes de Amigos"}),(($=l==null?void 0:l.sameClass)==null?void 0:$.length)>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:" Mesma Turma"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(D=l==null?void 0:l.sameClass)==null?void 0:D.map(L=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white font-bold",children:L.name?L.name.charAt(0):"?"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:L.name||"Nome no disponvel"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Nvel ",L.level||1,"  ",L.gradeId||"N/A"]})]})]}),n.jsx("button",{onClick:()=>j(L.id,"class"),className:"bg-primary text-white px-3 py-1 rounded-lg text-sm hover:bg-primary-dark transition",children:"Adicionar"})]},L.id))})]}),((V=l==null?void 0:l.sameSchool)==null?void 0:V.length)>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:" Mesma Escola"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(z=l==null?void 0:l.sameSchool)==null?void 0:z.map(L=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white font-bold",children:L.name?L.name.charAt(0):"?"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:L.name||"Nome no disponvel"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Nvel ",L.level||1,"  ",L.gradeId||"N/A"]})]})]}),n.jsx("button",{onClick:()=>j(L.id,"school"),className:"bg-primary text-white px-3 py-1 rounded-lg text-sm hover:bg-primary-dark transition",children:"Adicionar"})]},L.id))})]}),(!((I=l==null?void 0:l.sameClass)!=null&&I.length)||l.sameClass.length===0)&&(!((F=l==null?void 0:l.sameSchool)!=null&&F.length)||l.sameSchool.length===0)&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("p",{className:"text-gray-600",children:"Nenhuma sugesto disponvel no momento."})]})]}),p==="search"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Buscar por ID de Jogador"}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{type:"text",placeholder:"Digite o ID (ex: YUF123)",value:d,onChange:L=>m(L.target.value.toUpperCase()),className:"flex-1 bg-gray-100 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary"}),n.jsx("button",{onClick:b,disabled:P,className:"bg-primary text-white px-4 py-2 rounded-lg text-sm hover:bg-primary-dark transition disabled:opacity-50",children:P?"":"Buscar"})]})}),u&&n.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center text-white font-bold text-lg",children:u.name?u.name.charAt(0):"?"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800 text-lg",children:u.name||"Nome no disponvel"}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[u.level&&n.jsxs("span",{children:["Nvel ",u.level]}),u.gradeId&&n.jsxs("span",{children:[" ",u.gradeId]}),n.jsxs("span",{children:[" ",u.playerId||"N/A"]})]})]})]}),n.jsx("button",{onClick:()=>j(u.id,"playerId"),className:"bg-primary text-white px-4 py-2 rounded-lg text-sm hover:bg-primary-dark transition",children:"Adicionar Amigo"})]})}),n.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:" Como usar:"}),n.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[n.jsx("li",{children:" Pea o ID de jogador para seu amigo"}),n.jsx("li",{children:" Digite o ID no campo acima (ex: YUF123)"}),n.jsx("li",{children:' Clique em "Buscar" para encontrar o jogador'}),n.jsx("li",{children:' Clique em "Adicionar Amigo" para enviar solicitao'})]})]})]})]})]})})};class Jj{constructor(){this.userProfiles=new Map,this.learningPatterns=new Map,this.recommendationCache=new Map}analyzeUserProfile(t,s){const r={learningStyle:this.determineLearningStyle(t,s),difficultyPreference:this.calculateDifficultyPreference(t,s),preferredLessonTypes:this.analyzePreferredLessonTypes(t,s),optimalStudyTime:this.determineOptimalStudyTime(t,s),motivationFactors:this.identifyMotivationFactors(t,s),weakAreas:this.identifyWeakAreas(t,s),strongAreas:this.identifyStrongAreas(t,s)};return this.userProfiles.set(t.id,r),r}determineLearningStyle(t,s){var o,i,l,c;const r=this.getLessonTypeStats(t,s),a={visual:((o=r.dragAndDrop)==null?void 0:o.averageScore)||0,auditory:((i=r.quiz)==null?void 0:i.averageScore)||0,kinesthetic:((l=r.simulation)==null?void 0:l.averageScore)||0,reading:((c=r.input)==null?void 0:c.averageScore)||0};return Object.keys(a).reduce((d,m)=>a[d]>a[m]?d:m)}calculateDifficultyPreference(t,s){const a=(s.completedLessons||[]).map(i=>{const l=et.find(c=>c.id===i);return(l==null?void 0:l.userScore)||0}),o=a.reduce((i,l)=>i+l,0)/a.length||0;return o>=90?"challenging":o>=70?"moderate":"easy"}analyzePreferredLessonTypes(t,s){const r=this.getLessonTypeStats(t,s),a=[];return Object.entries(r).forEach(([o,i])=>{i.averageScore>80&&i.completionRate>.8&&a.push(o)}),a}determineOptimalStudyTime(t,s){const a=(s.activityHistory||[]).map(c=>({hour:new Date(c.timestamp).getHours(),score:c.score})),o={};a.forEach(c=>{o[c.hour]||(o[c.hour]={totalScore:0,count:0}),o[c.hour].totalScore+=c.score,o[c.hour].count+=1});let i=9,l=0;return Object.entries(o).forEach(([c,d])=>{const m=d.totalScore/d.count;m>l&&(l=m,i=parseInt(c))}),i}identifyMotivationFactors(t,s){var a;const r=[];return s.streak>5&&r.push("consistency"),((a=s.achievements)==null?void 0:a.length)>3&&r.push("achievements"),s.level>3&&r.push("progress"),s.perfectLessons>5&&r.push("perfection"),r}identifyWeakAreas(t,s){const r=[],a=this.getLessonTypeStats(t,s);return Object.entries(a).forEach(([o,i])=>{i.averageScore<70&&r.push({type:o,averageScore:i.averageScore,recommendation:this.generateWeakAreaRecommendation(o)})}),r}identifyStrongAreas(t,s){const r=[],a=this.getLessonTypeStats(t,s);return Object.entries(a).forEach(([o,i])=>{i.averageScore>90&&r.push({type:o,averageScore:i.averageScore,recommendation:this.generateStrongAreaRecommendation(o)})}),r}generateRecommendations(t,s){const r=this.analyzeUserProfile(t,s),a=[];return r.weakAreas.forEach(o=>{a.push({type:"improvement",priority:"high",title:`Melhorar em ${o.type}`,description:o.recommendation,action:`practice_${o.type}`})}),a.push({type:"learning_style",priority:"medium",title:`Aproveite seu estilo ${r.learningStyle}`,description:this.getLearningStyleTip(r.learningStyle),action:"focus_learning_style"}),r.difficultyPreference==="challenging"&&a.push({type:"challenge",priority:"medium",title:"Tente lies mais difceis",description:"Voc est pronto para desafios maiores!",action:"increase_difficulty"}),a.push({type:"timing",priority:"low",title:"Horrio ideal de estudo",description:`Seu melhor horrio  s ${r.optimalStudyTime}h`,action:"schedule_study_time"}),a}adaptDifficulty(t,s,r){if(!this.userProfiles.get(t.id))return"moderate";const o=this.getRecentPerformance(t,s,r);return o.averageScore>90?"challenging":o.averageScore<60?"easy":"moderate"}generatePersonalizedContent(t,s,r){return this.userProfiles.get(t.id)?{difficulty:this.adaptDifficulty(t,s,r),hints:this.generatePersonalizedHints(t,s),encouragement:this.generateEncouragement(t,s),nextSteps:this.suggestNextSteps(t,s)}:null}generatePersonalizedHints(t,s){const r=this.identifyWeakAreas(t,s),a=[];return r.forEach(o=>{a.push({type:o.type,hint:this.getHintForWeakArea(o.type),priority:"high"})}),a}generateEncouragement(t,s){const r=this.identifyMotivationFactors(t,s);return r.includes("consistency")?"Voc est mantendo uma rotina incrvel! Continue assim! ":r.includes("achievements")?"Parabns pelas suas conquistas! Voc est se superando! ":r.includes("progress")?"Seu progresso  impressionante! Voc est aprendendo muito! ":"Voc est no caminho certo! Continue aprendendo! "}suggestNextSteps(t,s){const r=s.completedLessons||[],a=et.filter(l=>!r.includes(l.id)),o=this.identifyWeakAreas(t,s);return a.filter(l=>o.some(c=>l.type===c.type)).slice(0,3)}getLessonTypeStats(t,s){const r=s.completedLessons||[],a={};return r.forEach(o=>{const i=et.find(l=>l.id===o);i&&(a[i.type]||(a[i.type]={scores:[],completed:0}),a[i.type].scores.push(i.userScore||0),a[i.type].completed+=1)}),Object.keys(a).forEach(o=>{const i=a[o].scores;a[o].averageScore=i.reduce((l,c)=>l+c,0)/i.length,a[o].completionRate=a[o].completed/r.length}),a}getRecentPerformance(t,s,r){const i=(s.completedLessons||[]).slice(-5).map(l=>et.find(c=>c.id===l)).filter(l=>l&&l.type===r).map(l=>l.userScore||0);return{averageScore:i.reduce((l,c)=>l+c,0)/i.length||0,count:i.length}}generateWeakAreaRecommendation(t){return{quiz:"Pratique mais questes de mltipla escolha","drag-and-drop":"Tente organizar itens em ordem",classify:"Exercite a categorizao de conceitos",match:"Pratique associaes entre elementos",simulation:"Experimente cenrios prticos",input:"Pratique respostas escritas"}[t]||"Continue praticando!"}generateStrongAreaRecommendation(t){return{quiz:"Voc  excelente em testes!","drag-and-drop":"Sua organizao  perfeita!",classify:"Voc tem tima capacidade de categorizao!",match:"Suas associaes so precisas!",simulation:"Voc toma timas decises!",input:"Suas respostas so muito criativas!"}[t]||"Continue assim!"}getLearningStyleTip(t){return{visual:"Tente visualizar os conceitos com imagens e diagramas",auditory:"Leia em voz alta e discuta os conceitos",kinesthetic:"Pratique com simulaes e atividades prticas",reading:"Foque em textos e explicaes detalhadas"}[t]||"Continue explorando diferentes formas de aprender!"}getHintForWeakArea(t){return{quiz:"Leia todas as opes antes de escolher","drag-and-drop":"Pense na ordem lgica dos itens",classify:"Identifique as caractersticas principais de cada categoria",match:"Procure por palavras-chave que se relacionam",simulation:"Considere as consequncias de cada escolha",input:"Escreva suas ideias antes de responder"}[t]||"Tome seu tempo para pensar!"}}const Uu=new Jj;class eN{constructor(){this.rankings=new Map,this.competitions=new Map,this.seasonalEvents=new Map,this.initializeSeasonalEvents()}updateRanking(t,s,r){const a={userId:t,name:s.name,level:r.level||1,totalXp:r.totalXp||0,streak:r.streak||0,perfectLessons:r.perfectLessons||0,lastUpdated:new Date().toISOString()};this.rankings.set(t,a),this.saveRankings();const o=this.getUserRankingPosition(t),i=s.previousRanking||999;if(o<i){const l=i-o;Q.success(` Voc subiu ${l} posio(es) no ranking! Agora est em #${o}`)}return o}getUserRankingPosition(t){return Array.from(this.rankings.values()).sort((r,a)=>r.level!==a.level?a.level-r.level:r.totalXp!==a.totalXp?a.totalXp-r.totalXp:a.streak-r.streak).findIndex(r=>r.userId===t)+1}getTopRankings(t=10){return Array.from(this.rankings.values()).sort((s,r)=>s.level!==r.level?r.level-s.level:s.totalXp!==r.totalXp?r.totalXp-s.totalXp:r.streak-s.streak).slice(0,t)}createCompetition(t){const s={id:`comp-${Date.now()}`,title:t.title,description:t.description,type:t.type,startDate:t.startDate,endDate:t.endDate,participants:[],rewards:t.rewards,leaderboard:[],isActive:!1};return this.competitions.set(s.id,s),this.saveCompetitions(),s}joinCompetition(t,s,r){const a=this.competitions.get(t);if(!a)return!1;const o={userId:s,name:r.name,joinedAt:new Date().toISOString(),score:0,progress:{xp:0,streak:0,perfectLessons:0}};return a.participants.push(o),this.updateCompetitionLeaderboard(t),this.saveCompetitions(),Q.success(` Voc entrou na competio "${a.title}"!`),!0}updateCompetitionProgress(t,s,r){const a=this.competitions.get(t);if(!a||!a.isActive)return;const o=a.participants.find(l=>l.userId===s);if(!o)return;let i=0;switch(a.type){case"xp_race":i=r.totalXp-o.progress.xp,o.progress.xp=r.totalXp;break;case"streak_challenge":i=r.streak-o.progress.streak,o.progress.streak=r.streak;break;case"perfect_lessons":i=r.perfectLessons-o.progress.perfectLessons,o.progress.perfectLessons=r.perfectLessons;break}o.score+=i,this.updateCompetitionLeaderboard(t),this.saveCompetitions()}updateCompetitionLeaderboard(t){const s=this.competitions.get(t);s&&(s.leaderboard=s.participants.sort((r,a)=>a.score-r.score).map((r,a)=>({...r,position:a+1})))}endCompetition(t){const s=this.competitions.get(t);if(!s)return;s.isActive=!1,s.endDate=new Date().toISOString();const r=s.leaderboard.slice(0,3);r.forEach((a,o)=>{const i=s.rewards[o]||s.rewards[0];this.distributeCompetitionReward(a.userId,i,s.title)}),this.saveCompetitions(),r.forEach((a,o)=>{const i=o+1,l=s.rewards[o]||s.rewards[0];Q.success(` Parabns! Voc ficou em ${i} lugar na competio "${s.title}"! Recompensa: ${l.xp} XP + ${l.yuCoins} YCoins`)})}initializeSeasonalEvents(){const s=new Date().getMonth()+1,a={1:{name:"Ano Novo Financeiro",theme:"planning",bonus:1.5},2:{name:"Carnaval de Economia",theme:"celebration",bonus:1.3},3:{name:"Maro das Metas",theme:"goals",bonus:1.4},4:{name:"Abril dos Investimentos",theme:"investment",bonus:1.6},5:{name:"Maio das Mes",theme:"family",bonus:1.2},6:{name:"Junho Junino",theme:"festival",bonus:1.3},7:{name:"Julho das Frias",theme:"vacation",bonus:1.1},8:{name:"Agosto dos Pais",theme:"family",bonus:1.2},9:{name:"Setembro da Independncia",theme:"freedom",bonus:1.4},10:{name:"Outubro das Crianas",theme:"kids",bonus:1.5},11:{name:"Novembro da Conscincia",theme:"awareness",bonus:1.3},12:{name:"Dezembro de Natal",theme:"christmas",bonus:1.7}}[s];a&&this.activateSeasonalEvent(a)}activateSeasonalEvent(t){const s={id:`event-${Date.now()}`,name:t.name,theme:t.theme,bonus:t.bonus,startDate:new Date().toISOString(),endDate:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString(),isActive:!0,participants:[],specialRewards:this.generateSpecialRewards(t.theme)};this.seasonalEvents.set(s.id,s),this.saveSeasonalEvents()}generateSpecialRewards(t){const s={planning:[{name:"Planejador Mestre",xp:500,yuCoins:100,icon:""},{name:"Estrategista Financeiro",xp:300,yuCoins:75,icon:""}],celebration:[{name:"Celebrador",xp:400,yuCoins:80,icon:""},{name:"Festivo",xp:250,yuCoins:60,icon:""}],goals:[{name:"Conquistador de Metas",xp:600,yuCoins:120,icon:""},{name:"Focado",xp:350,yuCoins:85,icon:""}],investment:[{name:"Investidor Iniciante",xp:700,yuCoins:150,icon:""},{name:"Poupador Inteligente",xp:450,yuCoins:100,icon:""}],family:[{name:"Familiar",xp:300,yuCoins:70,icon:""},{name:"Protetor",xp:200,yuCoins:50,icon:""}],festival:[{name:"Festivo",xp:350,yuCoins:80,icon:""},{name:"Celebrador",xp:250,yuCoins:60,icon:""}],vacation:[{name:"Viajante",xp:400,yuCoins:90,icon:""},{name:"Aventureiro",xp:300,yuCoins:70,icon:""}],freedom:[{name:"Livre",xp:500,yuCoins:110,icon:""},{name:"Independente",xp:350,yuCoins:85,icon:""}],kids:[{name:"Criana Brilhante",xp:600,yuCoins:130,icon:""},{name:"Aprendiz Feliz",xp:400,yuCoins:95,icon:""}],awareness:[{name:"Consciente",xp:450,yuCoins:100,icon:""},{name:"Informado",xp:300,yuCoins:75,icon:""}],christmas:[{name:"Natalino",xp:800,yuCoins:200,icon:""},{name:"Generoso",xp:500,yuCoins:120,icon:""}]};return s[t]||s.celebration}applySeasonalBonus(t,s){const r=Array.from(this.seasonalEvents.values()).filter(i=>i.isActive);if(r.length===0)return s;const a=r.reduce((i,l)=>i+l.bonus,0),o=Math.floor(s*(a-1));return r.forEach(i=>{i.participants.includes(t)||i.participants.push(t)}),this.saveSeasonalEvents(),s+o}checkAdvancedAchievements(t,s){var l,c,d,m,u;const r=[],a=this.getUserRankingPosition(t.id);a<=10&&!((l=s.achievements)!=null&&l.includes("top_10"))&&r.push({id:"top_10",title:"Top 10",description:"Chegou ao top 10 do ranking",icon:"",reward:{xp:500,yuCoins:100}}),a<=3&&!((c=s.achievements)!=null&&c.includes("top_3"))&&r.push({id:"top_3",title:"Top 3",description:"Chegou ao top 3 do ranking",icon:"",reward:{xp:1e3,yuCoins:200}});const o=this.getCompetitionWins(t.id);return o>=1&&!((d=s.achievements)!=null&&d.includes("first_win"))&&r.push({id:"first_win",title:"Primeira Vitria",description:"Venceu sua primeira competio",icon:"",reward:{xp:300,yuCoins:75}}),o>=5&&!((m=s.achievements)!=null&&m.includes("champion"))&&r.push({id:"champion",title:"Campeo",description:"Venceu 5 competies",icon:"",reward:{xp:800,yuCoins:150}}),this.getEventParticipations(t.id)>=3&&!((u=s.achievements)!=null&&u.includes("event_master"))&&r.push({id:"event_master",title:"Mestre dos Eventos",description:"Participou de 3 eventos sazonais",icon:"",reward:{xp:400,yuCoins:90}}),r}getCompetitionWins(t){return Array.from(this.competitions.values()).filter(s=>!s.isActive).filter(s=>{var r;return((r=s.leaderboard[0])==null?void 0:r.userId)===t}).length}getEventParticipations(t){return Array.from(this.seasonalEvents.values()).filter(s=>s.participants.includes(t)).length}distributeCompetitionReward(t,s,r){console.log(` Recompensa distribuda para ${t}: ${s.xp} XP + ${s.yuCoins} YCoins`)}saveRankings(){se.save("rankings",Array.from(this.rankings.entries()))}saveCompetitions(){se.save("competitions",Array.from(this.competitions.entries()))}saveSeasonalEvents(){se.save("seasonalEvents",Array.from(this.seasonalEvents.entries()))}loadData(){try{const t=se.load("rankings")||[];this.rankings=new Map(t);const s=se.load("competitions")||[];this.competitions=new Map(s);const r=se.load("seasonalEvents")||[];this.seasonalEvents=new Map(r)}catch(t){console.error("Erro ao carregar dados de gamificao:",t)}}}const Wt=new eN;class tN{constructor(){this.metrics={pageLoadTimes:{},componentRenderTimes:{},lessonLoadTimes:{},memoryUsage:[]},this.initializeMonitoring()}startPageLoadTimer(t){const s=performance.now();return()=>{const r=performance.now()-s;this.metrics.pageLoadTimes[t]=r,console.log(` ${t} carregou em ${r.toFixed(2)}ms`),r>3e3&&console.warn(` Carregamento lento detectado: ${t} (${r.toFixed(2)}ms)`)}}measureComponentRender(t,s){const r=performance.now(),a=s(),o=performance.now()-r;return this.metrics.componentRenderTimes[t]=o,o>100&&console.warn(` Renderizao lenta: ${t} (${o.toFixed(2)}ms)`),a}async preloadLesson(t){const s=performance.now();try{await new Promise(a=>setTimeout(a,100));const r=performance.now()-s;return this.metrics.lessonLoadTimes[t]=r,{success:!0,loadTime:r}}catch(r){return console.error(` Erro ao pr-carregar lio ${t}:`,r),{success:!1,error:r}}}optimizeImage(t,s=300){return`${t}?w=${s}&q=80&format=webp`}debounce(t,s){let r;return function(...o){const i=()=>{clearTimeout(r),t(...o)};clearTimeout(r),r=setTimeout(i,s)}}throttle(t,s){let r;return function(){const a=arguments,o=this;r||(t.apply(o,a),r=!0,setTimeout(()=>r=!1,s))}}cleanupOldData(){const t=Date.now()-6048e5;Object.keys(this.metrics.pageLoadTimes).forEach(s=>{this.metrics.pageLoadTimes[s].timestamp<t&&delete this.metrics.pageLoadTimes[s]})}generatePerformanceReport(){const t=Object.values(this.metrics.pageLoadTimes).reduce((r,a)=>r+a,0)/Object.values(this.metrics.pageLoadTimes).length||0,s=Object.values(this.metrics.componentRenderTimes).reduce((r,a)=>r+a,0)/Object.values(this.metrics.componentRenderTimes).length||0;return{averagePageLoadTime:t,averageComponentRenderTime:s,totalPagesTracked:Object.keys(this.metrics.pageLoadTimes).length,totalComponentsTracked:Object.keys(this.metrics.componentRenderTimes).length,recommendations:this.generateRecommendations()}}generateRecommendations(){const t=[],s=Object.values(this.metrics.pageLoadTimes).reduce((r,a)=>r+a,0)/Object.values(this.metrics.pageLoadTimes).length||0;return s>2e3&&t.push("Implementar lazy loading para componentes pesados"),s>3e3&&t.push("Considerar code splitting para reduzir bundle size"),t}initializeMonitoring(){"memory"in performance&&setInterval(()=>{this.metrics.memoryUsage.push({timestamp:Date.now(),used:performance.memory.usedJSHeapSize,total:performance.memory.totalJSHeapSize})},3e4),setInterval(()=>{this.cleanupOldData()},24*60*60*1e3)}}const qu=new tN,sN=({user:e,setUser:t,setActiveScreen:s})=>{var x,y,f,v,R;const[r,a]=w.useState(null),[o,i]=w.useState([]),[l,c]=w.useState(null),[d,m]=w.useState([]),[u,g]=w.useState(null),[p,k]=w.useState(!0);w.useEffect(()=>{(async()=>{const N=qu.startPageLoadTimer("IntelligentDashboard");try{const h=Ij.getProgress(),j=Uu.analyzeUserProfile(e,h);a(j);const C=Uu.generateRecommendations(e,h);i(C);const b=Wt.updateRanking(e.id,e,h);c(b);const T=Array.from(Wt.seasonalEvents.values()).filter(D=>D.isActive);m(T);const A=qu.generatePerformanceReport();g(A);const $=Wt.checkAdvancedAchievements(e,h);$.length>0&&$.forEach(D=>{Q.success(` ${D.title}: ${D.description}`)}),N(),k(!1)}catch(h){console.error("Erro ao inicializar dashboard:",h),k(!1)}})()},[e]);const P=E=>{switch(E.action){case"practice_quiz":s("lesson-4");break;case"practice_drag-and-drop":s("lesson-1");break;case"increase_difficulty":Q.info("Lies mais difceis sero sugeridas!");break;case"schedule_study_time":Q.info(`Seu horrio ideal  s ${r==null?void 0:r.optimalStudyTime}h`);break;default:Q.info("Recomendao processada!")}},S=E=>{Wt.joinCompetition(E,e.id,e)&&Q.success("Voc entrou na competio!")};return p?n.jsx("div",{className:"min-h-screen bg-interface flex items-center justify-center",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Carregando painel inteligente..."})]})}):n.jsxs("div",{className:"flex flex-col min-h-screen bg-interface",children:[n.jsx("div",{className:"bg-white rounded-b-xl shadow-md sticky top-0 z-20 w-full",style:{borderBottom:"3px solid #EE9116"},children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-xl font-bold text-gray-800 mb-1",children:["Ol, ",e.name,"! ",(r==null?void 0:r.learningStyle)&&`(${r.learningStyle})`]}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[n.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-medium",children:["Nvel ",((x=e.progress)==null?void 0:x.level)||1]}),l&&n.jsxs("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full font-medium",children:["#",l," no ranking"]}),n.jsxs("span",{className:"flex items-center space-x-1",children:[n.jsx("span",{children:""}),n.jsxs("span",{children:[((y=e.progress)==null?void 0:y.streak)||0," dias"]})]})]})]}),d.length>0&&n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Evento Ativo"}),n.jsx("div",{className:"text-sm font-semibold text-primary animate-pulse",children:d[0].name})]})]})}),n.jsxs("div",{className:"flex-grow overflow-y-auto p-3 pb-32 hide-scrollbar",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border-2 mb-4 overflow-hidden",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[" Recomendaes Inteligentes",n.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"IA"})]}),n.jsx("div",{className:"space-y-3",children:o.slice(0,3).map((E,N)=>n.jsx("div",{className:`p-3 rounded-lg border-l-4 cursor-pointer transition-all duration-200 hover:scale-102 hover:shadow-lg ${E.priority==="high"?"border-red-500 bg-red-50":E.priority==="medium"?"border-yellow-500 bg-yellow-50":"border-green-500 bg-green-50"}`,onClick:()=>P(E),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800",children:E.title}),n.jsx("p",{className:"text-sm text-gray-600",children:E.description})]}),n.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${E.priority==="high"?"bg-red-200 text-red-800":E.priority==="medium"?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:E.priority})]})},N))})]}),r&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border-2 mb-4",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:" Seu Perfil de Aprendizado"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl mb-1",children:""}),n.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"Estilo"}),n.jsx("div",{className:"text-xs text-gray-600 capitalize",children:r.learningStyle})]}),n.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl mb-1",children:""}),n.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"Dificuldade"}),n.jsx("div",{className:"text-xs text-gray-600 capitalize",children:r.difficultyPreference})]}),n.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl mb-1",children:""}),n.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"Horrio Ideal"}),n.jsxs("div",{className:"text-xs text-gray-600",children:[r.optimalStudyTime,"h"]})]}),n.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl mb-1",children:""}),n.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"Motivao"}),n.jsxs("div",{className:"text-xs text-gray-600",children:[r.motivationFactors.length," fatores"]})]})]})]}),r&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border-2 mb-4",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:" Suas reas"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-semibold text-green-700 mb-2 flex items-center",children:" reas Fortes"}),n.jsxs("div",{className:"space-y-2",children:[r.strongAreas.slice(0,3).map((E,N)=>n.jsxs("div",{className:"p-2 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-sm font-medium text-green-800",children:E.type}),n.jsx("div",{className:"text-xs text-green-600",children:E.recommendation})]},N)),r.strongAreas.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"Continue praticando para descobrir seus pontos fortes!"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-semibold text-orange-700 mb-2 flex items-center",children:" reas de Melhoria"}),n.jsxs("div",{className:"space-y-2",children:[r.weakAreas.slice(0,3).map((E,N)=>n.jsxs("div",{className:"p-2 bg-orange-50 rounded-lg",children:[n.jsx("div",{className:"text-sm font-medium text-orange-800",children:E.type}),n.jsx("div",{className:"text-xs text-orange-600",children:E.recommendation})]},N)),r.weakAreas.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"Parabns! Voc est equilibrado em todas as reas!"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border-2 mb-4",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:" Competies"}),n.jsxs("div",{className:"space-y-3",children:[Array.from(Wt.competitions.values()).filter(E=>E.isActive).slice(0,2).map(E=>n.jsxs("div",{className:"p-3 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold text-gray-800",children:E.title}),n.jsxs("span",{className:"text-xs bg-purple-200 text-purple-800 px-2 py-1 rounded-full",children:[E.participants.length," participantes"]})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:E.description}),n.jsx("button",{onClick:()=>S(E.id),className:"w-full bg-primary text-white py-2 rounded-lg font-medium hover:bg-primary-dark transition",children:"Participar"})]},E.id)),Array.from(Wt.competitions.values()).filter(E=>E.isActive).length===0&&n.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Nenhuma competio ativa no momento. Fique atento s prximas!"})]})]}),u&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border-2 mb-4",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:" Performance"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"Tempo de Carregamento"}),n.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[((f=u.averagePageLoadTime)==null?void 0:f.toFixed(0))||0,"ms"]})]}),n.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"Renderizao"}),n.jsxs("div",{className:"text-lg font-bold text-green-600",children:[((v=u.averageComponentRenderTime)==null?void 0:v.toFixed(0))||0,"ms"]})]})]}),((R=u.recommendations)==null?void 0:R.length)>0&&n.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 rounded-lg",children:[n.jsx("div",{className:"text-sm font-semibold text-yellow-800 mb-2",children:" Recomendaes de Performance:"}),n.jsx("ul",{className:"text-xs text-yellow-700 space-y-1",children:u.recommendations.map((E,N)=>n.jsxs("li",{children:[" ",E]},N))})]})]})]})]})},nN=({user:e,onChange:t})=>{const s=B=>B?B.replace(/(\d+)[o]\s*Ano/g,"$1 Ano").replace(/\s+/g," ").trim():"",[r,a]=w.useState([]),[o,i]=w.useState(!0),[l,c]=w.useState(""),[d,m]=w.useState(""),[u,g]=w.useState(null),[p,k]=w.useState(null),[P,S]=w.useState(""),[x,y]=w.useState(""),[f,v]=w.useState([]),[R,E]=w.useState(""),[N,h]=w.useState(null),[j,C]=w.useState(!1),[b,T]=w.useState([]),[A,$]=w.useState(""),[D,V]=w.useState("");w.useEffect(()=>{z(),I()},[]);const z=async()=>{i(!0);try{const B=await de("/classes");a(B)}catch{g("Erro ao carregar turmas")}i(!1)},I=async()=>{C(!0);try{const q=(await de("/users")).filter(M=>M.role==="student"&&M.schoolId===e.id);v(q)}catch{g("Erro ao carregar alunos")}C(!1)},F=async()=>{if(!d||!A){g("Srie/Ano e Professor so obrigatrios");return}try{const B=s(d),q=r.filter(G=>s(G.grade)===B),K={name:`Turma ${String.fromCharCode(65+q.length)}`,grade:d,students:[],teacher:A};await Oe("/classes",K),c(""),m(""),$(""),g(null),await z(),await I(),t&&t()}catch{g("Erro ao adicionar turma")}},L=B=>{k(B.id),S(B.name),y(B.grade),V(B.teacher||"")},O=async B=>{try{await os(`/classes/${B}`,{name:P,grade:x,teacher:D}),k(null),await z(),await I(),t&&t()}catch{g("Erro ao editar turma")}},H=async B=>{if(window.confirm("Tem certeza que deseja remover esta turma?"))try{await so(`/classes/${B}`),await z(),await I(),t&&t()}catch{g("Erro ao remover turma")}},ne=async(B,q)=>{try{await os(`/classes/${B}/add-student`,{studentId:q}),z(),t&&t()}catch(M){g(M.message||"Erro ao adicionar aluno")}},Y=async(B,q)=>{try{await os(`/classes/${B}/remove-student`,{studentId:q}),z(),t&&t()}catch{g("Erro ao remover aluno")}};return n.jsx("div",{className:"min-h-screen bg-interface p-4 pb-20",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 mb-6",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Gesto Escolar"})}),n.jsx("div",{className:"mb-6",children:n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:" Gesto de Turmas"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Gerenciar Turmas"}),n.jsx("button",{onClick:F,className:"bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Adicionar Turma"})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center mb-4",children:[n.jsx("input",{type:"text",placeholder:"Srie/Ano (ex: 6 Ano, 7 Ano)",value:d,onChange:B=>m(B.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg flex-1 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors duration-200"}),n.jsx("input",{type:"text",placeholder:"Professor",value:A,onChange:B=>$(B.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg flex-1 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors duration-200"})]}),u&&n.jsx("p",{className:"text-red-600 mb-2",children:u}),n.jsx("div",{className:"bg-blue-50 rounded-lg p-3 mb-4 border border-blue-200",children:n.jsxs("p",{className:"text-sm text-blue-700",children:[" ",n.jsx("strong",{children:"Dica:"})," O nome da turma ser gerado automaticamente (Turma A, Turma B, etc.) baseado na srie selecionada."]})}),o?n.jsx("p",{children:"Carregando turmas..."}):n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.length===0&&n.jsx("p",{className:"text-gray-600 col-span-2",children:"Nenhuma turma cadastrada ainda."}),r.map(B=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:B.name}),n.jsx("button",{className:"text-xs text-primary underline",onClick:()=>{h(N===B.id?null:B.id),N!==B.id&&I()},children:N===B.id?"Fechar":"Gerenciar Alunos"})]}),n.jsxs("p",{className:"text-gray-600",children:["Srie: ",B.grade]}),n.jsxs("p",{className:"text-gray-600",children:["Professor: ",B.teacher]}),n.jsxs("p",{className:"text-gray-600 mb-2",children:["Alunos: ",B.students?B.students.length:0]}),p===B.id?n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"text",value:P,onChange:q=>S(q.target.value),className:"p-2 border rounded-md mb-2 w-full"}),n.jsx("input",{type:"text",value:x,onChange:q=>y(q.target.value),className:"p-2 border rounded-md mb-2 w-full"}),n.jsx("input",{type:"text",value:D,onChange:q=>V(q.target.value),placeholder:"Professor",className:"p-2 border rounded-md mb-2 w-full"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>O(B.id),className:"bg-primary text-white px-3 py-1 rounded",children:"Salvar"}),n.jsx("button",{onClick:()=>k(null),className:"bg-gray-300 text-gray-800 px-3 py-1 rounded",children:"Cancelar"})]})]}):n.jsx(n.Fragment,{children:n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx("button",{onClick:()=>L(B),className:"px-3 py-1 rounded",style:{background:"#EE9116",color:"white"},children:"Editar"}),n.jsx("button",{onClick:()=>H(B.id),className:"bg-red-500 text-white px-3 py-1 rounded",children:"Remover"})]})}),N===B.id&&n.jsxs("div",{className:"mt-4 p-3 bg-orange-50 rounded",children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Alunos da Turma"}),B.students&&B.students.length>0?n.jsx("ul",{className:"mb-2",children:B.students.map(q=>{const M=f.find(U=>U.id.toString()===q);return M?n.jsxs("li",{className:"flex justify-between items-center border-b py-1",children:[n.jsx("span",{children:M.name}),n.jsx("button",{onClick:()=>Y(B.id,M.id),className:"text-xs text-red-600 underline",children:"Remover"})]},M.id):null})}):n.jsx("p",{className:"text-gray-500 mb-2",children:"Nenhum aluno vinculado."}),n.jsx("input",{type:"text",placeholder:"Buscar aluno pelo nome...",value:R,onChange:q=>E(q.target.value),className:"p-2 border rounded-md w-full mb-2"}),j?n.jsx("p",{children:"Carregando alunos..."}):n.jsxs("ul",{children:[f.filter(q=>{const M=!B.students||!B.students.includes(q.id.toString()),U=!r.some(G=>G.id!==B.id&&G.students&&G.students.includes(q.id.toString())),K=q.name.toLowerCase().includes(R.toLowerCase());return M&&U&&K}).slice(0,5).map(q=>n.jsxs("li",{className:"flex justify-between items-center border-b py-1",children:[n.jsx("span",{children:q.name}),n.jsx("button",{onClick:()=>ne(B.id,q.id),className:"text-xs text-primary underline",children:"Adicionar"})]},q.id)),f.filter(q=>{const M=r.some(K=>K.id!==B.id&&K.students&&K.students.includes(q.id.toString())),U=q.name.toLowerCase().includes(R.toLowerCase());return M&&U}).slice(0,3).map(q=>{const M=r.find(U=>U.id!==B.id&&U.students&&U.students.includes(q.id.toString()));return n.jsxs("li",{className:"flex justify-between items-center border-b py-1",children:[n.jsxs("span",{className:"text-gray-500",children:[q.name," (em ",M==null?void 0:M.name,")"]}),n.jsx("span",{className:"text-xs text-gray-400",children:"J vinculado"})]},q.id)})]})]})]},B.id))]})]})]})})})},ei=e=>{let t=0;for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);t=(t<<5)-t+r,t=t&t}return t.toString()};ei("senha123"),ei("senha123"),ei("senha123");const Ep=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),Tp=e=>e.length>=6,rN=e=>e.trim().length>=2,aN=async(e,t,s)=>{if(!Ep(e))throw new Error("E-mail invlido.");if(!Tp(t))throw new Error("Senha deve ter pelo menos 6 caracteres.");const a=await fetch("http://localhost:3001/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,role:s})});if(!a.ok){const l=await a.json();throw new Error(l.error||"Erro ao fazer login.")}const o=await a.json();if(o.role!==s)throw new Error("Credenciais invlidas ou papel incorreto.");const i={userId:o.id,loginTime:new Date().toISOString(),lastActivity:new Date().toISOString()};return se.save(oe.SESSION,i),se.save(oe.USER,o),Q.success(`Bem-vindo de volta, ${o.name}!`),o},oN=async e=>{if(!rN(e.name))throw new Error("Nome deve ter pelo menos 2 caracteres.");if(!Ep(e.email))throw new Error("E-mail invlido.");if(!Tp(e.password))throw new Error("Senha deve ter pelo menos 6 caracteres.");const s=await fetch("http://localhost:3001/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,passwordHash:e.password})});if(!s.ok){const a=await s.json();throw new Error(a.error||"Erro ao registrar.")}const r=await s.json();return se.save(oe.USER,r),Q.success(`Conta criada com sucesso! Bem-vindo ao YuFin, ${r.name}!`),r},iN=()=>{se.remove(oe.SESSION),Q.info("Voc saiu da sua conta.")},lN=()=>se.load(oe.SESSION);function cN(){const[e,t]=w.useState("welcome"),[s,r]=w.useState(null),[a,o]=w.useState(!0),[i,l]=w.useState(null),[c,d]=w.useState(()=>se.load(oe.CURRENT_MODULE)||1),[m,u]=w.useState(!0),[g,p]=w.useState(null);w.useEffect(()=>{const b=new URLSearchParams(window.location.search).get("token");b&&(p(b),t("register-with-token"))},[]),w.useEffect(()=>{const C=se.load(oe.USER),b=lN();if(C&&b)try{r(C),Wt.loadData(),C.role==="student"?t("home"):C.role==="parent"?t("parent-dashboard"):C.role==="school"&&t("school-dashboard")}catch{se.remove(oe.USER),se.remove(oe.SESSION),r(null),t("welcome")}else se.remove(oe.USER),se.remove(oe.SESSION),r(null),t("welcome");o(!1)},[]),w.useEffect(()=>{s?(se.save(oe.USER,s),s.role==="student"&&s.currentModule&&(d(s.currentModule),se.save(oe.CURRENT_MODULE,s.currentModule))):(se.remove(oe.USER),se.remove(oe.SESSION),t("welcome"))},[s]);const k=async C=>{try{r(C),p(null);const b=new URL(window.location);b.searchParams.delete("token"),window.history.replaceState({},"",b),Q.success("Registro realizado com sucesso!"),t("home")}catch(b){Q.error("Erro no registro: "+b.message)}},P=()=>{p(null),t("welcome");const C=new URL(window.location);C.searchParams.delete("token"),window.history.replaceState({},"",C)},S=async(C,b,T)=>{var A,$;try{const D=await aN(C,b,T);r(D);const V=Array.from((($=(A=Wt.seasonalEvents)==null?void 0:A.values)==null?void 0:$.call(A))||[]).filter(z=>z.isActive);if(V.length>0){const z=V[0];Q.success(` Evento especial ativo: ${z.name}! Bnus de ${z.bonus}x XP em todas as lies!`)}return ls.trackEvent("user_login",{userRole:T,userId:D.id}),{success:!0}}catch(D){return ls.trackError("login_error",D.message),{success:!1,message:D.message}}},x=async C=>{try{let b;return b=await oN(C),r(b),{success:!0}}catch(b){return{success:!1,message:b.message}}},y=()=>{window.confirm("Tem certeza que deseja sair?")&&(ls.trackEvent("user_logout",{userRole:s==null?void 0:s.role,userId:s==null?void 0:s.id}),iN(),r(null))},f=async()=>{if(s)try{const C=await Oe(`/users/${s.id}/reset-radical`),{user:b,resetInfo:T}=C;console.log("Usurio atualizado aps reset radical:",b),r(b),se.save(oe.USER,b),se.save(oe.PROGRESS,{totalXp:T.xp,currentLevel:T.level,xpToNextLevel:100,streak:0,lastActivityDate:new Date().toISOString(),dailyGoal:50,dailyProgress:0,achievements:[],completedLessons:[],totalLessonsCompleted:T.completedLessons,perfectLessons:0,timeSpent:0}),Q.success(`Progresso completamente resetado! Voltando ao ${T.newGrade}.`),setTimeout(()=>{s.role==="student"&&t("home")},1e3)}catch(C){Q.error("Erro ao zerar progresso no backend: "+C.message)}},v=(C,b={})=>{C==="lesson"?(l(b.lessonId),b.currentModule&&(d(b.currentModule),se.save(oe.CURRENT_MODULE,b.currentModule)),t("lesson")):t(C)},R=async C=>{try{const b=await os(`/users/${s.id}/complete-lesson`,{lessonId:i,score:C.score,timeSpent:C.timeSpent,isPerfect:C.isPerfect}),{student:T,reward:A,leveledUp:$}=b;r(T),se.save(oe.USER,T),A>0&&Q.success(` +R$ ${A.toFixed(2)} adicionados  sua poupana!`),$&&Q.success(" Parabns! Voc subiu de nvel!"),t("dashboard"),l(null)}catch(b){console.error("Erro ao completar lio:",b),Q.error("Erro ao salvar progresso: "+b.message)}},E=C=>typeof C=="string"?C:C==null?void 0:C.screen,N=()=>{const C=E(e);if(!s)switch(C){case"welcome":return n.jsx(Vo,{setActiveScreen:t});case"login-student":return n.jsx(Oo,{handleLogin:S,setActiveScreen:t,role:"student"});case"login-parent":return n.jsx(Oo,{handleLogin:S,setActiveScreen:t,role:"parent"});case"login-school":return n.jsx(Oo,{handleLogin:S,setActiveScreen:t,role:"school"});case"register-student":return n.jsx(_o,{handleRegister:x,setActiveScreen:t,role:"student"});case"register-parent":return n.jsx(_o,{handleRegister:x,setActiveScreen:t,role:"parent"});case"register-school":return n.jsx(_o,{handleRegister:x,setActiveScreen:t,role:"school"});case"register-with-token":return n.jsx(a0,{token:g,onSuccess:k,onCancel:P});default:return n.jsx(Vo,{setActiveScreen:t})}switch(!0){case C==="home":return s.role==="student"?n.jsx(Du,{user:s,setUser:r,onNavigate:v,currentModule:c}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case C==="intelligent-dashboard":return s.role==="student"?n.jsx(sN,{user:s,setUser:r,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case C==="lesson":return s.role==="student"?n.jsx($u,{lessonId:i,user:s,setUser:r,setActiveScreen:t,onComplete:R,onNavigate:v}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta lio."});case(C&&C.startsWith("lesson-")):const b=C.split("-")[1];return s.role==="student"?n.jsx($u,{lessonId:b,user:s,setUser:r,setActiveScreen:t,reviewMode:e.reviewMode,activeScreen:e}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta lio."});case C==="profile":return n.jsx(Oj,{user:s,setUser:r,setActiveScreen:t});case C==="wallet":return s.role==="student"?n.jsx(_j,{user:s,setUser:r,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case C==="store":return s.role==="student"?n.jsx(Bj,{user:s,setUser:r,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case C==="challenges":return n.jsx(Yj,{user:s,setUser:r,setActiveScreen:t});case C==="friends":return s.role==="student"?n.jsx(Zj,{user:s,setUser:r,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case C==="achievements":return n.jsx(Gj,{user:s,setActiveScreen:t});case C==="ranking":return n.jsx(Hj,{user:s,setActiveScreen:t});case C==="news":return n.jsx(Wj,{user:s,setActiveScreen:t});case C==="parent-dashboard":return s.role==="parent"?n.jsx(_u,{user:s,setUser:r,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case C==="savings-config":return s.role==="parent"?n.jsx(qj,{user:s,setUser:r,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case C==="school-dashboard":return s.role==="school"?n.jsx(Bu,{user:s,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case C==="reports":return s.role==="school"||s.role==="parent"?n.jsx(Qj,{user:s,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case C==="settings":return n.jsx(Kj,{user:s,handleLogout:y,setActiveScreen:t,onResetProgress:f});case C==="classes":return s.role==="school"?n.jsx(nN,{user:s,setActiveScreen:t,onChange:()=>t("school-dashboard")}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});default:return s.role==="student"?n.jsx(Du,{user:s,setUser:r,onNavigate:v,currentModule:c}):s.role==="parent"?n.jsx(_u,{user:s,setUser:r,setActiveScreen:t}):s.role==="school"?n.jsx(Bu,{user:s,setActiveScreen:t}):n.jsx(Vo,{setActiveScreen:t})}},h=E(e),j=s&&h&&!h.startsWith("lesson-")&&!["welcome","login-student","login-parent","login-school","register-student","register-parent","register-school"].includes(h);return console.log("Debug Navigation:",{user:!!s,userRole:s==null?void 0:s.role,activeScreen:e,shouldShowNavigation:j}),a?null:n.jsxs("div",{className:"relative min-h-screen",children:[N(),j&&n.jsx(n0,{role:s.role,activeScreen:e,setActiveScreen:t})]})}const dN=af(document.getElementById("root"));dN.render(n.jsx(cN,{}));
