(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();function Wu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xu={exports:{}},Uo={},Qu={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gr=Symbol.for("react.element"),Lp=Symbol.for("react.portal"),Rp=Symbol.for("react.fragment"),Ip=Symbol.for("react.strict_mode"),Fp=Symbol.for("react.profiler"),$p=Symbol.for("react.provider"),Vp=Symbol.for("react.context"),Op=Symbol.for("react.forward_ref"),_p=Symbol.for("react.suspense"),zp=Symbol.for("react.memo"),Bp=Symbol.for("react.lazy"),wc=Symbol.iterator;function Up(e){return e===null||typeof e!="object"?null:(e=wc&&e[wc]||e["@@iterator"],typeof e=="function"?e:null)}var Yu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ku=Object.assign,Zu={};function yn(e,t,s){this.props=e,this.context=t,this.refs=Zu,this.updater=s||Yu}yn.prototype.isReactComponent={};yn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};yn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ju(){}Ju.prototype=yn.prototype;function ll(e,t,s){this.props=e,this.context=t,this.refs=Zu,this.updater=s||Yu}var cl=ll.prototype=new Ju;cl.constructor=ll;Ku(cl,yn.prototype);cl.isPureReactComponent=!0;var Sc=Array.isArray,em=Object.prototype.hasOwnProperty,dl={current:null},tm={key:!0,ref:!0,__self:!0,__source:!0};function sm(e,t,s){var r,o={},a=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)em.call(t,r)&&!tm.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(l===1)o.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:gr,type:e,key:a,ref:i,props:o,_owner:dl.current}}function qp(e,t){return{$$typeof:gr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ul(e){return typeof e=="object"&&e!==null&&e.$$typeof===gr}function Gp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Cc=/\/+/g;function ha(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Gp(""+e.key):t.toString(36)}function Qr(e,t,s,r,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case gr:case Lp:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+ha(i,0):r,Sc(o)?(s="",e!=null&&(s=e.replace(Cc,"$&/")+"/"),Qr(o,t,s,"",function(d){return d})):o!=null&&(ul(o)&&(o=qp(o,s+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Cc,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",Sc(e))for(var l=0;l<e.length;l++){a=e[l];var c=r+ha(a,l);i+=Qr(a,t,s,c,o)}else if(c=Up(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=r+ha(a,l++),i+=Qr(a,t,s,c,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Pr(e,t,s){if(e==null)return e;var r=[],o=0;return Qr(e,r,"","",function(a){return t.call(s,a,o++)}),r}function Hp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ge={current:null},Yr={transition:null},Wp={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:Yr,ReactCurrentOwner:dl};function nm(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Pr,forEach:function(e,t,s){Pr(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Pr(e,function(){t++}),t},toArray:function(e){return Pr(e,function(t){return t})||[]},only:function(e){if(!ul(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ae.Component=yn;ae.Fragment=Rp;ae.Profiler=Fp;ae.PureComponent=ll;ae.StrictMode=Ip;ae.Suspense=_p;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wp;ae.act=nm;ae.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ku({},e.props),o=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=dl.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)em.call(t,c)&&!tm.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:gr,type:e.type,key:o,ref:a,props:r,_owner:i}};ae.createContext=function(e){return e={$$typeof:Vp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$p,_context:e},e.Consumer=e};ae.createElement=sm;ae.createFactory=function(e){var t=sm.bind(null,e);return t.type=e,t};ae.createRef=function(){return{current:null}};ae.forwardRef=function(e){return{$$typeof:Op,render:e}};ae.isValidElement=ul;ae.lazy=function(e){return{$$typeof:Bp,_payload:{_status:-1,_result:e},_init:Hp}};ae.memo=function(e,t){return{$$typeof:zp,type:e,compare:t===void 0?null:t}};ae.startTransition=function(e){var t=Yr.transition;Yr.transition={};try{e()}finally{Yr.transition=t}};ae.unstable_act=nm;ae.useCallback=function(e,t){return Ge.current.useCallback(e,t)};ae.useContext=function(e){return Ge.current.useContext(e)};ae.useDebugValue=function(){};ae.useDeferredValue=function(e){return Ge.current.useDeferredValue(e)};ae.useEffect=function(e,t){return Ge.current.useEffect(e,t)};ae.useId=function(){return Ge.current.useId()};ae.useImperativeHandle=function(e,t,s){return Ge.current.useImperativeHandle(e,t,s)};ae.useInsertionEffect=function(e,t){return Ge.current.useInsertionEffect(e,t)};ae.useLayoutEffect=function(e,t){return Ge.current.useLayoutEffect(e,t)};ae.useMemo=function(e,t){return Ge.current.useMemo(e,t)};ae.useReducer=function(e,t,s){return Ge.current.useReducer(e,t,s)};ae.useRef=function(e){return Ge.current.useRef(e)};ae.useState=function(e){return Ge.current.useState(e)};ae.useSyncExternalStore=function(e,t,s){return Ge.current.useSyncExternalStore(e,t,s)};ae.useTransition=function(){return Ge.current.useTransition()};ae.version="18.3.1";Qu.exports=ae;var j=Qu.exports;const jt=Wu(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp=j,Qp=Symbol.for("react.element"),Yp=Symbol.for("react.fragment"),Kp=Object.prototype.hasOwnProperty,Zp=Xp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jp={key:!0,ref:!0,__self:!0,__source:!0};function rm(e,t,s){var r,o={},a=null,i=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)Kp.call(t,r)&&!Jp.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Qp,type:e,key:a,ref:i,props:o,_owner:Zp.current}}Uo.Fragment=Yp;Uo.jsx=rm;Uo.jsxs=rm;Xu.exports=Uo;var n=Xu.exports,om={exports:{}},ot={},am={exports:{}},im={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,R){var V=I.length;I.push(R);e:for(;0<V;){var $=V-1>>>1,D=I[$];if(0<o(D,R))I[$]=R,I[V]=D,V=$;else break e}}function s(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var R=I[0],V=I.pop();if(V!==R){I[0]=V;e:for(var $=0,D=I.length,Q=D>>>1;$<Q;){var G=2*($+1)-1,U=I[G],W=G+1,O=I[W];if(0>o(U,V))W<D&&0>o(O,U)?(I[$]=O,I[W]=V,$=W):(I[$]=U,I[G]=V,$=G);else if(W<D&&0>o(O,V))I[$]=O,I[W]=V,$=W;else break e}}return R}function o(I,R){var V=I.sortIndex-R.sortIndex;return V!==0?V:I.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],m=1,u=null,g=3,x=!1,E=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(I){for(var R=s(d);R!==null;){if(R.callback===null)r(d);else if(R.startTime<=I)r(d),R.sortIndex=R.expirationTime,t(c,R);else break;R=s(d)}}function S(I){if(k=!1,f(I),!E)if(s(c)!==null)E=!0,q(T);else{var R=s(d);R!==null&&_(S,R.startTime-I)}}function T(I,R){E=!1,k&&(k=!1,p(h),h=-1),x=!0;var V=g;try{for(f(R),u=s(c);u!==null&&(!(u.expirationTime>R)||I&&!y());){var $=u.callback;if(typeof $=="function"){u.callback=null,g=u.priorityLevel;var D=$(u.expirationTime<=R);R=e.unstable_now(),typeof D=="function"?u.callback=D:u===s(c)&&r(c),f(R)}else r(c);u=s(c)}if(u!==null)var Q=!0;else{var G=s(d);G!==null&&_(S,G.startTime-R),Q=!1}return Q}finally{u=null,g=V,x=!1}}var A=!1,M=null,h=-1,b=5,N=-1;function y(){return!(e.unstable_now()-N<b)}function P(){if(M!==null){var I=e.unstable_now();N=I;var R=!0;try{R=M(!0,I)}finally{R?w():(A=!1,M=null)}}else A=!1}var w;if(typeof v=="function")w=function(){v(P)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,F=L.port2;L.port1.onmessage=P,w=function(){F.postMessage(null)}}else w=function(){C(P,0)};function q(I){M=I,A||(A=!0,w())}function _(I,R){h=C(function(){I(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){E||x||(E=!0,q(T))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(I){switch(g){case 1:case 2:case 3:var R=3;break;default:R=g}var V=g;g=R;try{return I()}finally{g=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,R){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var V=g;g=I;try{return R()}finally{g=V}},e.unstable_scheduleCallback=function(I,R,V){var $=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?$+V:$):V=$,I){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=V+D,I={id:m++,callback:R,priorityLevel:I,startTime:V,expirationTime:D,sortIndex:-1},V>$?(I.sortIndex=V,t(d,I),s(c)===null&&I===s(d)&&(k?(p(h),h=-1):k=!0,_(S,V-$))):(I.sortIndex=D,t(c,I),E||x||(E=!0,q(T))),I},e.unstable_shouldYield=y,e.unstable_wrapCallback=function(I){var R=g;return function(){var V=g;g=R;try{return I.apply(this,arguments)}finally{g=V}}}})(im);am.exports=im;var eg=am.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg=j,nt=eg;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lm=new Set,Yn={};function Fs(e,t){dn(e,t),dn(e+"Capture",t)}function dn(e,t){for(Yn[e]=t,e=0;e<t.length;e++)lm.add(t[e])}var Vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ni=Object.prototype.hasOwnProperty,sg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kc={},Pc={};function ng(e){return ni.call(Pc,e)?!0:ni.call(kc,e)?!1:sg.test(e)?Pc[e]=!0:(kc[e]=!0,!1)}function rg(e,t,s,r){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function og(e,t,s,r){if(t===null||typeof t>"u"||rg(e,t,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function He(e,t,s,r,o,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ie[e]=new He(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ie[t]=new He(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ie[e]=new He(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ie[e]=new He(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ie[e]=new He(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ie[e]=new He(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ie[e]=new He(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ie[e]=new He(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ie[e]=new He(e,5,!1,e.toLowerCase(),null,!1,!1)});var ml=/[\-:]([a-z])/g;function fl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ml,fl);Ie[t]=new He(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ml,fl);Ie[t]=new He(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ml,fl);Ie[t]=new He(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ie[e]=new He(e,1,!1,e.toLowerCase(),null,!1,!1)});Ie.xlinkHref=new He("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ie[e]=new He(e,1,!1,e.toLowerCase(),null,!0,!0)});function hl(e,t,s,r){var o=Ie.hasOwnProperty(t)?Ie[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(og(t,s,o,r)&&(s=null),r||o===null?ng(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):o.mustUseProperty?e[o.propertyName]=s===null?o.type===3?!1:"":s:(t=o.attributeName,r=o.attributeNamespace,s===null?e.removeAttribute(t):(o=o.type,s=o===3||o===4&&s===!0?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}var Ut=tg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Er=Symbol.for("react.element"),zs=Symbol.for("react.portal"),Bs=Symbol.for("react.fragment"),pl=Symbol.for("react.strict_mode"),ri=Symbol.for("react.profiler"),cm=Symbol.for("react.provider"),dm=Symbol.for("react.context"),gl=Symbol.for("react.forward_ref"),oi=Symbol.for("react.suspense"),ai=Symbol.for("react.suspense_list"),xl=Symbol.for("react.memo"),Ht=Symbol.for("react.lazy"),um=Symbol.for("react.offscreen"),Ec=Symbol.iterator;function Nn(e){return e===null||typeof e!="object"?null:(e=Ec&&e[Ec]||e["@@iterator"],typeof e=="function"?e:null)}var je=Object.assign,pa;function Dn(e){if(pa===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);pa=t&&t[1]||""}return`
`+pa+e}var ga=!1;function xa(e,t){if(!e||ga)return"";ga=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),a=r.stack.split(`
`),i=o.length-1,l=a.length-1;1<=i&&0<=l&&o[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==a[l]){var c=`
`+o[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{ga=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Dn(e):""}function ag(e){switch(e.tag){case 5:return Dn(e.type);case 16:return Dn("Lazy");case 13:return Dn("Suspense");case 19:return Dn("SuspenseList");case 0:case 2:case 15:return e=xa(e.type,!1),e;case 11:return e=xa(e.type.render,!1),e;case 1:return e=xa(e.type,!0),e;default:return""}}function ii(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bs:return"Fragment";case zs:return"Portal";case ri:return"Profiler";case pl:return"StrictMode";case oi:return"Suspense";case ai:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case dm:return(e.displayName||"Context")+".Consumer";case cm:return(e._context.displayName||"Context")+".Provider";case gl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xl:return t=e.displayName||null,t!==null?t:ii(e.type)||"Memo";case Ht:t=e._payload,e=e._init;try{return ii(e(t))}catch{}}return null}function ig(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ii(t);case 8:return t===pl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function us(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lg(e){var t=mm(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var o=s.get,a=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tr(e){e._valueTracker||(e._valueTracker=lg(e))}function fm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=mm(e)?e.checked?"true":"false":e.value),e=r,e!==s?(t.setValue(e),!0):!1}function co(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function li(e,t){var s=t.checked;return je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Tc(e,t){var s=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;s=us(t.value!=null?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hm(e,t){t=t.checked,t!=null&&hl(e,"checked",t,!1)}function ci(e,t){hm(e,t);var s=us(t.value),r=t.type;if(s!=null)r==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?di(e,t.type,s):t.hasOwnProperty("defaultValue")&&di(e,t.type,us(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ac(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function di(e,t,s){(t!=="number"||co(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ln=Array.isArray;function nn(e,t,s,r){if(e=e.options,t){t={};for(var o=0;o<s.length;o++)t["$"+s[o]]=!0;for(s=0;s<e.length;s++)o=t.hasOwnProperty("$"+e[s].value),e[s].selected!==o&&(e[s].selected=o),o&&r&&(e[s].defaultSelected=!0)}else{for(s=""+us(s),t=null,o=0;o<e.length;o++){if(e[o].value===s){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function ui(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Mc(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(X(92));if(Ln(s)){if(1<s.length)throw Error(X(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:us(s)}}function pm(e,t){var s=us(t.value),r=us(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),r!=null&&(e.defaultValue=""+r)}function Dc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ar,xm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,s,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ar=Ar||document.createElement("div"),Ar.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ar.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Kn(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var $n={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cg=["Webkit","ms","Moz","O"];Object.keys($n).forEach(function(e){cg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$n[t]=$n[e]})});function vm(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||$n.hasOwnProperty(e)&&$n[e]?(""+t).trim():t+"px"}function ym(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var r=s.indexOf("--")===0,o=vm(s,t[s],r);s==="float"&&(s="cssFloat"),r?e.setProperty(s,o):e[s]=o}}var dg=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fi(e,t){if(t){if(dg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function hi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pi=null;function vl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gi=null,rn=null,on=null;function Lc(e){if(e=yr(e)){if(typeof gi!="function")throw Error(X(280));var t=e.stateNode;t&&(t=Xo(t),gi(e.stateNode,e.type,t))}}function bm(e){rn?on?on.push(e):on=[e]:rn=e}function jm(){if(rn){var e=rn,t=on;if(on=rn=null,Lc(e),t)for(e=0;e<t.length;e++)Lc(t[e])}}function Nm(e,t){return e(t)}function wm(){}var va=!1;function Sm(e,t,s){if(va)return e(t,s);va=!0;try{return Nm(e,t,s)}finally{va=!1,(rn!==null||on!==null)&&(wm(),jm())}}function Zn(e,t){var s=e.stateNode;if(s===null)return null;var r=Xo(s);if(r===null)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(X(231,t,typeof s));return s}var xi=!1;if(Vt)try{var wn={};Object.defineProperty(wn,"passive",{get:function(){xi=!0}}),window.addEventListener("test",wn,wn),window.removeEventListener("test",wn,wn)}catch{xi=!1}function ug(e,t,s,r,o,a,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(m){this.onError(m)}}var Vn=!1,uo=null,mo=!1,vi=null,mg={onError:function(e){Vn=!0,uo=e}};function fg(e,t,s,r,o,a,i,l,c){Vn=!1,uo=null,ug.apply(mg,arguments)}function hg(e,t,s,r,o,a,i,l,c){if(fg.apply(this,arguments),Vn){if(Vn){var d=uo;Vn=!1,uo=null}else throw Error(X(198));mo||(mo=!0,vi=d)}}function $s(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Cm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rc(e){if($s(e)!==e)throw Error(X(188))}function pg(e){var t=e.alternate;if(!t){if(t=$s(e),t===null)throw Error(X(188));return t!==e?null:e}for(var s=e,r=t;;){var o=s.return;if(o===null)break;var a=o.alternate;if(a===null){if(r=o.return,r!==null){s=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===s)return Rc(o),e;if(a===r)return Rc(o),t;a=a.sibling}throw Error(X(188))}if(s.return!==r.return)s=o,r=a;else{for(var i=!1,l=o.child;l;){if(l===s){i=!0,s=o,r=a;break}if(l===r){i=!0,r=o,s=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===s){i=!0,s=a,r=o;break}if(l===r){i=!0,r=a,s=o;break}l=l.sibling}if(!i)throw Error(X(189))}}if(s.alternate!==r)throw Error(X(190))}if(s.tag!==3)throw Error(X(188));return s.stateNode.current===s?e:t}function km(e){return e=pg(e),e!==null?Pm(e):null}function Pm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Pm(e);if(t!==null)return t;e=e.sibling}return null}var Em=nt.unstable_scheduleCallback,Ic=nt.unstable_cancelCallback,gg=nt.unstable_shouldYield,xg=nt.unstable_requestPaint,Se=nt.unstable_now,vg=nt.unstable_getCurrentPriorityLevel,yl=nt.unstable_ImmediatePriority,Tm=nt.unstable_UserBlockingPriority,fo=nt.unstable_NormalPriority,yg=nt.unstable_LowPriority,Am=nt.unstable_IdlePriority,qo=null,Pt=null;function bg(e){if(Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(qo,e,void 0,(e.current.flags&128)===128)}catch{}}var yt=Math.clz32?Math.clz32:wg,jg=Math.log,Ng=Math.LN2;function wg(e){return e>>>=0,e===0?32:31-(jg(e)/Ng|0)|0}var Mr=64,Dr=4194304;function Rn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ho(e,t){var s=e.pendingLanes;if(s===0)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=s&268435455;if(i!==0){var l=i&~o;l!==0?r=Rn(l):(a&=i,a!==0&&(r=Rn(a)))}else i=s&~o,i!==0?r=Rn(i):a!==0&&(r=Rn(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(r&4&&(r|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)s=31-yt(t),o=1<<s,r|=e[s],t&=~o;return r}function Sg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cg(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-yt(a),l=1<<i,c=o[i];c===-1?(!(l&s)||l&r)&&(o[i]=Sg(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function yi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Mm(){var e=Mr;return Mr<<=1,!(Mr&4194240)&&(Mr=64),e}function ya(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function xr(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yt(t),e[t]=s}function kg(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var o=31-yt(s),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,s&=~a}}function bl(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-yt(s),o=1<<r;o&t|e[r]&t&&(e[r]|=t),s&=~o}}var de=0;function Dm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Lm,jl,Rm,Im,Fm,bi=!1,Lr=[],es=null,ts=null,ss=null,Jn=new Map,er=new Map,Yt=[],Pg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fc(e,t){switch(e){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":Jn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":er.delete(t.pointerId)}}function Sn(e,t,s,r,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},t!==null&&(t=yr(t),t!==null&&jl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Eg(e,t,s,r,o){switch(t){case"focusin":return es=Sn(es,e,t,s,r,o),!0;case"dragenter":return ts=Sn(ts,e,t,s,r,o),!0;case"mouseover":return ss=Sn(ss,e,t,s,r,o),!0;case"pointerover":var a=o.pointerId;return Jn.set(a,Sn(Jn.get(a)||null,e,t,s,r,o)),!0;case"gotpointercapture":return a=o.pointerId,er.set(a,Sn(er.get(a)||null,e,t,s,r,o)),!0}return!1}function $m(e){var t=Ss(e.target);if(t!==null){var s=$s(t);if(s!==null){if(t=s.tag,t===13){if(t=Cm(s),t!==null){e.blockedOn=t,Fm(e.priority,function(){Rm(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=ji(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);pi=r,s.target.dispatchEvent(r),pi=null}else return t=yr(s),t!==null&&jl(t),e.blockedOn=s,!1;t.shift()}return!0}function $c(e,t,s){Kr(e)&&s.delete(t)}function Tg(){bi=!1,es!==null&&Kr(es)&&(es=null),ts!==null&&Kr(ts)&&(ts=null),ss!==null&&Kr(ss)&&(ss=null),Jn.forEach($c),er.forEach($c)}function Cn(e,t){e.blockedOn===t&&(e.blockedOn=null,bi||(bi=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,Tg)))}function tr(e){function t(o){return Cn(o,e)}if(0<Lr.length){Cn(Lr[0],e);for(var s=1;s<Lr.length;s++){var r=Lr[s];r.blockedOn===e&&(r.blockedOn=null)}}for(es!==null&&Cn(es,e),ts!==null&&Cn(ts,e),ss!==null&&Cn(ss,e),Jn.forEach(t),er.forEach(t),s=0;s<Yt.length;s++)r=Yt[s],r.blockedOn===e&&(r.blockedOn=null);for(;0<Yt.length&&(s=Yt[0],s.blockedOn===null);)$m(s),s.blockedOn===null&&Yt.shift()}var an=Ut.ReactCurrentBatchConfig,po=!0;function Ag(e,t,s,r){var o=de,a=an.transition;an.transition=null;try{de=1,Nl(e,t,s,r)}finally{de=o,an.transition=a}}function Mg(e,t,s,r){var o=de,a=an.transition;an.transition=null;try{de=4,Nl(e,t,s,r)}finally{de=o,an.transition=a}}function Nl(e,t,s,r){if(po){var o=ji(e,t,s,r);if(o===null)Ta(e,t,r,go,s),Fc(e,r);else if(Eg(o,e,t,s,r))r.stopPropagation();else if(Fc(e,r),t&4&&-1<Pg.indexOf(e)){for(;o!==null;){var a=yr(o);if(a!==null&&Lm(a),a=ji(e,t,s,r),a===null&&Ta(e,t,r,go,s),a===o)break;o=a}o!==null&&r.stopPropagation()}else Ta(e,t,r,null,s)}}var go=null;function ji(e,t,s,r){if(go=null,e=vl(r),e=Ss(e),e!==null)if(t=$s(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Cm(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return go=e,null}function Vm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vg()){case yl:return 1;case Tm:return 4;case fo:case yg:return 16;case Am:return 536870912;default:return 16}default:return 16}}var Zt=null,wl=null,Zr=null;function Om(){if(Zr)return Zr;var e,t=wl,s=t.length,r,o="value"in Zt?Zt.value:Zt.textContent,a=o.length;for(e=0;e<s&&t[e]===o[e];e++);var i=s-e;for(r=1;r<=i&&t[s-r]===o[a-r];r++);return Zr=o.slice(e,1<r?1-r:void 0)}function Jr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rr(){return!0}function Vc(){return!1}function at(e){function t(s,r,o,a,i){this._reactName=s,this._targetInst=o,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Rr:Vc,this.isPropagationStopped=Vc,this}return je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),t}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sl=at(bn),vr=je({},bn,{view:0,detail:0}),Dg=at(vr),ba,ja,kn,Go=je({},vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==kn&&(kn&&e.type==="mousemove"?(ba=e.screenX-kn.screenX,ja=e.screenY-kn.screenY):ja=ba=0,kn=e),ba)},movementY:function(e){return"movementY"in e?e.movementY:ja}}),Oc=at(Go),Lg=je({},Go,{dataTransfer:0}),Rg=at(Lg),Ig=je({},vr,{relatedTarget:0}),Na=at(Ig),Fg=je({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),$g=at(Fg),Vg=je({},bn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Og=at(Vg),_g=je({},bn,{data:0}),_c=at(_g),zg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ug={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ug[e])?!!t[e]:!1}function Cl(){return qg}var Gg=je({},vr,{key:function(e){if(e.key){var t=zg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cl,charCode:function(e){return e.type==="keypress"?Jr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hg=at(Gg),Wg=je({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zc=at(Wg),Xg=je({},vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cl}),Qg=at(Xg),Yg=je({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kg=at(Yg),Zg=je({},Go,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jg=at(Zg),ex=[9,13,27,32],kl=Vt&&"CompositionEvent"in window,On=null;Vt&&"documentMode"in document&&(On=document.documentMode);var tx=Vt&&"TextEvent"in window&&!On,_m=Vt&&(!kl||On&&8<On&&11>=On),Bc=" ",Uc=!1;function zm(e,t){switch(e){case"keyup":return ex.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Us=!1;function sx(e,t){switch(e){case"compositionend":return Bm(t);case"keypress":return t.which!==32?null:(Uc=!0,Bc);case"textInput":return e=t.data,e===Bc&&Uc?null:e;default:return null}}function nx(e,t){if(Us)return e==="compositionend"||!kl&&zm(e,t)?(e=Om(),Zr=wl=Zt=null,Us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _m&&t.locale!=="ko"?null:t.data;default:return null}}var rx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rx[e.type]:t==="textarea"}function Um(e,t,s,r){bm(r),t=xo(t,"onChange"),0<t.length&&(s=new Sl("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var _n=null,sr=null;function ox(e){ef(e,0)}function Ho(e){var t=Hs(e);if(fm(t))return e}function ax(e,t){if(e==="change")return t}var qm=!1;if(Vt){var wa;if(Vt){var Sa="oninput"in document;if(!Sa){var Gc=document.createElement("div");Gc.setAttribute("oninput","return;"),Sa=typeof Gc.oninput=="function"}wa=Sa}else wa=!1;qm=wa&&(!document.documentMode||9<document.documentMode)}function Hc(){_n&&(_n.detachEvent("onpropertychange",Gm),sr=_n=null)}function Gm(e){if(e.propertyName==="value"&&Ho(sr)){var t=[];Um(t,sr,e,vl(e)),Sm(ox,t)}}function ix(e,t,s){e==="focusin"?(Hc(),_n=t,sr=s,_n.attachEvent("onpropertychange",Gm)):e==="focusout"&&Hc()}function lx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ho(sr)}function cx(e,t){if(e==="click")return Ho(t)}function dx(e,t){if(e==="input"||e==="change")return Ho(t)}function ux(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nt=typeof Object.is=="function"?Object.is:ux;function nr(e,t){if(Nt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var o=s[r];if(!ni.call(t,o)||!Nt(e[o],t[o]))return!1}return!0}function Wc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xc(e,t){var s=Wc(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Wc(s)}}function Hm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Hm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wm(){for(var e=window,t=co();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=co(e.document)}return t}function Pl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mx(e){var t=Wm(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Hm(s.ownerDocument.documentElement,s)){if(r!==null&&Pl(s)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=s.textContent.length,a=Math.min(r.start,o);r=r.end===void 0?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=Xc(s,a);var i=Xc(s,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fx=Vt&&"documentMode"in document&&11>=document.documentMode,qs=null,Ni=null,zn=null,wi=!1;function Qc(e,t,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;wi||qs==null||qs!==co(r)||(r=qs,"selectionStart"in r&&Pl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zn&&nr(zn,r)||(zn=r,r=xo(Ni,"onSelect"),0<r.length&&(t=new Sl("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=qs)))}function Ir(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Gs={animationend:Ir("Animation","AnimationEnd"),animationiteration:Ir("Animation","AnimationIteration"),animationstart:Ir("Animation","AnimationStart"),transitionend:Ir("Transition","TransitionEnd")},Ca={},Xm={};Vt&&(Xm=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function Wo(e){if(Ca[e])return Ca[e];if(!Gs[e])return e;var t=Gs[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Xm)return Ca[e]=t[s];return e}var Qm=Wo("animationend"),Ym=Wo("animationiteration"),Km=Wo("animationstart"),Zm=Wo("transitionend"),Jm=new Map,Yc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(e,t){Jm.set(e,t),Fs(t,[e])}for(var ka=0;ka<Yc.length;ka++){var Pa=Yc[ka],hx=Pa.toLowerCase(),px=Pa[0].toUpperCase()+Pa.slice(1);ps(hx,"on"+px)}ps(Qm,"onAnimationEnd");ps(Ym,"onAnimationIteration");ps(Km,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(Zm,"onTransitionEnd");dn("onMouseEnter",["mouseout","mouseover"]);dn("onMouseLeave",["mouseout","mouseover"]);dn("onPointerEnter",["pointerout","pointerover"]);dn("onPointerLeave",["pointerout","pointerover"]);Fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var In="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gx=new Set("cancel close invalid load scroll toggle".split(" ").concat(In));function Kc(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,hg(r,t,void 0,e),e.currentTarget=null}function ef(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&o.isPropagationStopped())break e;Kc(o,l,d),a=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&o.isPropagationStopped())break e;Kc(o,l,d),a=c}}}if(mo)throw e=vi,mo=!1,vi=null,e}function he(e,t){var s=t[Ei];s===void 0&&(s=t[Ei]=new Set);var r=e+"__bubble";s.has(r)||(tf(t,e,2,!1),s.add(r))}function Ea(e,t,s){var r=0;t&&(r|=4),tf(s,e,r,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function rr(e){if(!e[Fr]){e[Fr]=!0,lm.forEach(function(s){s!=="selectionchange"&&(gx.has(s)||Ea(s,!1,e),Ea(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fr]||(t[Fr]=!0,Ea("selectionchange",!1,t))}}function tf(e,t,s,r){switch(Vm(t)){case 1:var o=Ag;break;case 4:o=Mg;break;default:o=Nl}s=o.bind(null,t,s,e),o=void 0,!xi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,s,{capture:!0,passive:o}):e.addEventListener(t,s,!0):o!==void 0?e.addEventListener(t,s,{passive:o}):e.addEventListener(t,s,!1)}function Ta(e,t,s,r,o){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;i=i.return}for(;l!==null;){if(i=Ss(l),i===null)return;if(c=i.tag,c===5||c===6){r=a=i;continue e}l=l.parentNode}}r=r.return}Sm(function(){var d=a,m=vl(s),u=[];e:{var g=Jm.get(e);if(g!==void 0){var x=Sl,E=e;switch(e){case"keypress":if(Jr(s)===0)break e;case"keydown":case"keyup":x=Hg;break;case"focusin":E="focus",x=Na;break;case"focusout":E="blur",x=Na;break;case"beforeblur":case"afterblur":x=Na;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Rg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Qg;break;case Qm:case Ym:case Km:x=$g;break;case Zm:x=Kg;break;case"scroll":x=Dg;break;case"wheel":x=Jg;break;case"copy":case"cut":case"paste":x=Og;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=zc}var k=(t&4)!==0,C=!k&&e==="scroll",p=k?g!==null?g+"Capture":null:g;k=[];for(var v=d,f;v!==null;){f=v;var S=f.stateNode;if(f.tag===5&&S!==null&&(f=S,p!==null&&(S=Zn(v,p),S!=null&&k.push(or(v,S,f)))),C)break;v=v.return}0<k.length&&(g=new x(g,E,null,s,m),u.push({event:g,listeners:k}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",g&&s!==pi&&(E=s.relatedTarget||s.fromElement)&&(Ss(E)||E[Ot]))break e;if((x||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,x?(E=s.relatedTarget||s.toElement,x=d,E=E?Ss(E):null,E!==null&&(C=$s(E),E!==C||E.tag!==5&&E.tag!==6)&&(E=null)):(x=null,E=d),x!==E)){if(k=Oc,S="onMouseLeave",p="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(k=zc,S="onPointerLeave",p="onPointerEnter",v="pointer"),C=x==null?g:Hs(x),f=E==null?g:Hs(E),g=new k(S,v+"leave",x,s,m),g.target=C,g.relatedTarget=f,S=null,Ss(m)===d&&(k=new k(p,v+"enter",E,s,m),k.target=f,k.relatedTarget=C,S=k),C=S,x&&E)t:{for(k=x,p=E,v=0,f=k;f;f=_s(f))v++;for(f=0,S=p;S;S=_s(S))f++;for(;0<v-f;)k=_s(k),v--;for(;0<f-v;)p=_s(p),f--;for(;v--;){if(k===p||p!==null&&k===p.alternate)break t;k=_s(k),p=_s(p)}k=null}else k=null;x!==null&&Zc(u,g,x,k,!1),E!==null&&C!==null&&Zc(u,C,E,k,!0)}}e:{if(g=d?Hs(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var T=ax;else if(qc(g))if(qm)T=dx;else{T=lx;var A=ix}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(T=cx);if(T&&(T=T(e,d))){Um(u,T,s,m);break e}A&&A(e,g,d),e==="focusout"&&(A=g._wrapperState)&&A.controlled&&g.type==="number"&&di(g,"number",g.value)}switch(A=d?Hs(d):window,e){case"focusin":(qc(A)||A.contentEditable==="true")&&(qs=A,Ni=d,zn=null);break;case"focusout":zn=Ni=qs=null;break;case"mousedown":wi=!0;break;case"contextmenu":case"mouseup":case"dragend":wi=!1,Qc(u,s,m);break;case"selectionchange":if(fx)break;case"keydown":case"keyup":Qc(u,s,m)}var M;if(kl)e:{switch(e){case"compositionstart":var h="onCompositionStart";break e;case"compositionend":h="onCompositionEnd";break e;case"compositionupdate":h="onCompositionUpdate";break e}h=void 0}else Us?zm(e,s)&&(h="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(h="onCompositionStart");h&&(_m&&s.locale!=="ko"&&(Us||h!=="onCompositionStart"?h==="onCompositionEnd"&&Us&&(M=Om()):(Zt=m,wl="value"in Zt?Zt.value:Zt.textContent,Us=!0)),A=xo(d,h),0<A.length&&(h=new _c(h,e,null,s,m),u.push({event:h,listeners:A}),M?h.data=M:(M=Bm(s),M!==null&&(h.data=M)))),(M=tx?sx(e,s):nx(e,s))&&(d=xo(d,"onBeforeInput"),0<d.length&&(m=new _c("onBeforeInput","beforeinput",null,s,m),u.push({event:m,listeners:d}),m.data=M))}ef(u,t)})}function or(e,t,s){return{instance:e,listener:t,currentTarget:s}}function xo(e,t){for(var s=t+"Capture",r=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=Zn(e,s),a!=null&&r.unshift(or(e,a,o)),a=Zn(e,t),a!=null&&r.push(or(e,a,o))),e=e.return}return r}function _s(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zc(e,t,s,r,o){for(var a=t._reactName,i=[];s!==null&&s!==r;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,o?(c=Zn(s,a),c!=null&&i.unshift(or(s,c,l))):o||(c=Zn(s,a),c!=null&&i.push(or(s,c,l)))),s=s.return}i.length!==0&&e.push({event:t,listeners:i})}var xx=/\r\n?/g,vx=/\u0000|\uFFFD/g;function Jc(e){return(typeof e=="string"?e:""+e).replace(xx,`
`).replace(vx,"")}function $r(e,t,s){if(t=Jc(t),Jc(e)!==t&&s)throw Error(X(425))}function vo(){}var Si=null,Ci=null;function ki(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pi=typeof setTimeout=="function"?setTimeout:void 0,yx=typeof clearTimeout=="function"?clearTimeout:void 0,ed=typeof Promise=="function"?Promise:void 0,bx=typeof queueMicrotask=="function"?queueMicrotask:typeof ed<"u"?function(e){return ed.resolve(null).then(e).catch(jx)}:Pi;function jx(e){setTimeout(function(){throw e})}function Aa(e,t){var s=t,r=0;do{var o=s.nextSibling;if(e.removeChild(s),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(r===0){e.removeChild(o),tr(t);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=o}while(s);tr(t)}function ns(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function td(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var jn=Math.random().toString(36).slice(2),kt="__reactFiber$"+jn,ar="__reactProps$"+jn,Ot="__reactContainer$"+jn,Ei="__reactEvents$"+jn,Nx="__reactListeners$"+jn,wx="__reactHandles$"+jn;function Ss(e){var t=e[kt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Ot]||s[kt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=td(e);e!==null;){if(s=e[kt])return s;e=td(e)}return t}e=s,s=e.parentNode}return null}function yr(e){return e=e[kt]||e[Ot],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function Xo(e){return e[ar]||null}var Ti=[],Ws=-1;function gs(e){return{current:e}}function pe(e){0>Ws||(e.current=Ti[Ws],Ti[Ws]=null,Ws--)}function fe(e,t){Ws++,Ti[Ws]=e.current,e.current=t}var ms={},ze=gs(ms),Qe=gs(!1),Ms=ms;function un(e,t){var s=e.type.contextTypes;if(!s)return ms;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in s)o[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ye(e){return e=e.childContextTypes,e!=null}function yo(){pe(Qe),pe(ze)}function sd(e,t,s){if(ze.current!==ms)throw Error(X(168));fe(ze,t),fe(Qe,s)}function sf(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(X(108,ig(e)||"Unknown",o));return je({},s,r)}function bo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ms,Ms=ze.current,fe(ze,e),fe(Qe,Qe.current),!0}function nd(e,t,s){var r=e.stateNode;if(!r)throw Error(X(169));s?(e=sf(e,t,Ms),r.__reactInternalMemoizedMergedChildContext=e,pe(Qe),pe(ze),fe(ze,e)):pe(Qe),fe(Qe,s)}var Mt=null,Qo=!1,Ma=!1;function nf(e){Mt===null?Mt=[e]:Mt.push(e)}function Sx(e){Qo=!0,nf(e)}function xs(){if(!Ma&&Mt!==null){Ma=!0;var e=0,t=de;try{var s=Mt;for(de=1;e<s.length;e++){var r=s[e];do r=r(!0);while(r!==null)}Mt=null,Qo=!1}catch(o){throw Mt!==null&&(Mt=Mt.slice(e+1)),Em(yl,xs),o}finally{de=t,Ma=!1}}return null}var Xs=[],Qs=0,jo=null,No=0,ct=[],dt=0,Ds=null,Dt=1,Lt="";function bs(e,t){Xs[Qs++]=No,Xs[Qs++]=jo,jo=e,No=t}function rf(e,t,s){ct[dt++]=Dt,ct[dt++]=Lt,ct[dt++]=Ds,Ds=e;var r=Dt;e=Lt;var o=32-yt(r)-1;r&=~(1<<o),s+=1;var a=32-yt(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Dt=1<<32-yt(t)+o|s<<o|r,Lt=a+e}else Dt=1<<a|s<<o|r,Lt=e}function El(e){e.return!==null&&(bs(e,1),rf(e,1,0))}function Tl(e){for(;e===jo;)jo=Xs[--Qs],Xs[Qs]=null,No=Xs[--Qs],Xs[Qs]=null;for(;e===Ds;)Ds=ct[--dt],ct[dt]=null,Lt=ct[--dt],ct[dt]=null,Dt=ct[--dt],ct[dt]=null}var st=null,et=null,xe=!1,vt=null;function of(e,t){var s=ut(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function rd(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,st=e,et=ns(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,st=e,et=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Ds!==null?{id:Dt,overflow:Lt}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=ut(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,st=e,et=null,!0):!1;default:return!1}}function Ai(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Mi(e){if(xe){var t=et;if(t){var s=t;if(!rd(e,t)){if(Ai(e))throw Error(X(418));t=ns(s.nextSibling);var r=st;t&&rd(e,t)?of(r,s):(e.flags=e.flags&-4097|2,xe=!1,st=e)}}else{if(Ai(e))throw Error(X(418));e.flags=e.flags&-4097|2,xe=!1,st=e}}}function od(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;st=e}function Vr(e){if(e!==st)return!1;if(!xe)return od(e),xe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ki(e.type,e.memoizedProps)),t&&(t=et)){if(Ai(e))throw af(),Error(X(418));for(;t;)of(e,t),t=ns(t.nextSibling)}if(od(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){et=ns(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}et=null}}else et=st?ns(e.stateNode.nextSibling):null;return!0}function af(){for(var e=et;e;)e=ns(e.nextSibling)}function mn(){et=st=null,xe=!1}function Al(e){vt===null?vt=[e]:vt.push(e)}var Cx=Ut.ReactCurrentBatchConfig;function Pn(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(X(309));var r=s.stateNode}if(!r)throw Error(X(147,e));var o=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var l=o.refs;i===null?delete l[a]:l[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(X(284));if(!s._owner)throw Error(X(290,e))}return e}function Or(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ad(e){var t=e._init;return t(e._payload)}function lf(e){function t(p,v){if(e){var f=p.deletions;f===null?(p.deletions=[v],p.flags|=16):f.push(v)}}function s(p,v){if(!e)return null;for(;v!==null;)t(p,v),v=v.sibling;return null}function r(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function o(p,v){return p=is(p,v),p.index=0,p.sibling=null,p}function a(p,v,f){return p.index=f,e?(f=p.alternate,f!==null?(f=f.index,f<v?(p.flags|=2,v):f):(p.flags|=2,v)):(p.flags|=1048576,v)}function i(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,v,f,S){return v===null||v.tag!==6?(v=Va(f,p.mode,S),v.return=p,v):(v=o(v,f),v.return=p,v)}function c(p,v,f,S){var T=f.type;return T===Bs?m(p,v,f.props.children,S,f.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ht&&ad(T)===v.type)?(S=o(v,f.props),S.ref=Pn(p,v,f),S.return=p,S):(S=ao(f.type,f.key,f.props,null,p.mode,S),S.ref=Pn(p,v,f),S.return=p,S)}function d(p,v,f,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==f.containerInfo||v.stateNode.implementation!==f.implementation?(v=Oa(f,p.mode,S),v.return=p,v):(v=o(v,f.children||[]),v.return=p,v)}function m(p,v,f,S,T){return v===null||v.tag!==7?(v=Ts(f,p.mode,S,T),v.return=p,v):(v=o(v,f),v.return=p,v)}function u(p,v,f){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Va(""+v,p.mode,f),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Er:return f=ao(v.type,v.key,v.props,null,p.mode,f),f.ref=Pn(p,null,v),f.return=p,f;case zs:return v=Oa(v,p.mode,f),v.return=p,v;case Ht:var S=v._init;return u(p,S(v._payload),f)}if(Ln(v)||Nn(v))return v=Ts(v,p.mode,f,null),v.return=p,v;Or(p,v)}return null}function g(p,v,f,S){var T=v!==null?v.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return T!==null?null:l(p,v,""+f,S);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Er:return f.key===T?c(p,v,f,S):null;case zs:return f.key===T?d(p,v,f,S):null;case Ht:return T=f._init,g(p,v,T(f._payload),S)}if(Ln(f)||Nn(f))return T!==null?null:m(p,v,f,S,null);Or(p,f)}return null}function x(p,v,f,S,T){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(f)||null,l(v,p,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Er:return p=p.get(S.key===null?f:S.key)||null,c(v,p,S,T);case zs:return p=p.get(S.key===null?f:S.key)||null,d(v,p,S,T);case Ht:var A=S._init;return x(p,v,f,A(S._payload),T)}if(Ln(S)||Nn(S))return p=p.get(f)||null,m(v,p,S,T,null);Or(v,S)}return null}function E(p,v,f,S){for(var T=null,A=null,M=v,h=v=0,b=null;M!==null&&h<f.length;h++){M.index>h?(b=M,M=null):b=M.sibling;var N=g(p,M,f[h],S);if(N===null){M===null&&(M=b);break}e&&M&&N.alternate===null&&t(p,M),v=a(N,v,h),A===null?T=N:A.sibling=N,A=N,M=b}if(h===f.length)return s(p,M),xe&&bs(p,h),T;if(M===null){for(;h<f.length;h++)M=u(p,f[h],S),M!==null&&(v=a(M,v,h),A===null?T=M:A.sibling=M,A=M);return xe&&bs(p,h),T}for(M=r(p,M);h<f.length;h++)b=x(M,p,h,f[h],S),b!==null&&(e&&b.alternate!==null&&M.delete(b.key===null?h:b.key),v=a(b,v,h),A===null?T=b:A.sibling=b,A=b);return e&&M.forEach(function(y){return t(p,y)}),xe&&bs(p,h),T}function k(p,v,f,S){var T=Nn(f);if(typeof T!="function")throw Error(X(150));if(f=T.call(f),f==null)throw Error(X(151));for(var A=T=null,M=v,h=v=0,b=null,N=f.next();M!==null&&!N.done;h++,N=f.next()){M.index>h?(b=M,M=null):b=M.sibling;var y=g(p,M,N.value,S);if(y===null){M===null&&(M=b);break}e&&M&&y.alternate===null&&t(p,M),v=a(y,v,h),A===null?T=y:A.sibling=y,A=y,M=b}if(N.done)return s(p,M),xe&&bs(p,h),T;if(M===null){for(;!N.done;h++,N=f.next())N=u(p,N.value,S),N!==null&&(v=a(N,v,h),A===null?T=N:A.sibling=N,A=N);return xe&&bs(p,h),T}for(M=r(p,M);!N.done;h++,N=f.next())N=x(M,p,h,N.value,S),N!==null&&(e&&N.alternate!==null&&M.delete(N.key===null?h:N.key),v=a(N,v,h),A===null?T=N:A.sibling=N,A=N);return e&&M.forEach(function(P){return t(p,P)}),xe&&bs(p,h),T}function C(p,v,f,S){if(typeof f=="object"&&f!==null&&f.type===Bs&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Er:e:{for(var T=f.key,A=v;A!==null;){if(A.key===T){if(T=f.type,T===Bs){if(A.tag===7){s(p,A.sibling),v=o(A,f.props.children),v.return=p,p=v;break e}}else if(A.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ht&&ad(T)===A.type){s(p,A.sibling),v=o(A,f.props),v.ref=Pn(p,A,f),v.return=p,p=v;break e}s(p,A);break}else t(p,A);A=A.sibling}f.type===Bs?(v=Ts(f.props.children,p.mode,S,f.key),v.return=p,p=v):(S=ao(f.type,f.key,f.props,null,p.mode,S),S.ref=Pn(p,v,f),S.return=p,p=S)}return i(p);case zs:e:{for(A=f.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===f.containerInfo&&v.stateNode.implementation===f.implementation){s(p,v.sibling),v=o(v,f.children||[]),v.return=p,p=v;break e}else{s(p,v);break}else t(p,v);v=v.sibling}v=Oa(f,p.mode,S),v.return=p,p=v}return i(p);case Ht:return A=f._init,C(p,v,A(f._payload),S)}if(Ln(f))return E(p,v,f,S);if(Nn(f))return k(p,v,f,S);Or(p,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,v!==null&&v.tag===6?(s(p,v.sibling),v=o(v,f),v.return=p,p=v):(s(p,v),v=Va(f,p.mode,S),v.return=p,p=v),i(p)):s(p,v)}return C}var fn=lf(!0),cf=lf(!1),wo=gs(null),So=null,Ys=null,Ml=null;function Dl(){Ml=Ys=So=null}function Ll(e){var t=wo.current;pe(wo),e._currentValue=t}function Di(e,t,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function ln(e,t){So=e,Ml=Ys=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xe=!0),e.firstContext=null)}function ft(e){var t=e._currentValue;if(Ml!==e)if(e={context:e,memoizedValue:t,next:null},Ys===null){if(So===null)throw Error(X(308));Ys=e,So.dependencies={lanes:0,firstContext:e}}else Ys=Ys.next=e;return t}var Cs=null;function Rl(e){Cs===null?Cs=[e]:Cs.push(e)}function df(e,t,s,r){var o=t.interleaved;return o===null?(s.next=s,Rl(t)):(s.next=o.next,o.next=s),t.interleaved=s,_t(e,r)}function _t(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Wt=!1;function Il(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function It(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rs(e,t,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,_t(e,s)}return o=r.interleaved,o===null?(t.next=t,Rl(r)):(t.next=o.next,o.next=t),r.interleaved=t,_t(e,s)}function eo(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,bl(e,s)}}function id(e,t){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var o=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var i={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?o=a=i:a=a.next=i,s=s.next}while(s!==null);a===null?o=a=t:a=a.next=t}else o=a=t;s={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Co(e,t,s,r){var o=e.updateQueue;Wt=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?a=d:i.next=d,i=c;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==i&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=c))}if(a!==null){var u=o.baseState;i=0,m=d=c=null,l=a;do{var g=l.lane,x=l.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var E=e,k=l;switch(g=t,x=s,k.tag){case 1:if(E=k.payload,typeof E=="function"){u=E.call(x,u,g);break e}u=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=k.payload,g=typeof E=="function"?E.call(x,u,g):E,g==null)break e;u=je({},u,g);break e;case 2:Wt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=o.effects,g===null?o.effects=[l]:g.push(l))}else x={eventTime:x,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=x,c=u):m=m.next=x,i|=g;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;g=l,l=g.next,g.next=null,o.lastBaseUpdate=g,o.shared.pending=null}}while(!0);if(m===null&&(c=u),o.baseState=c,o.firstBaseUpdate=d,o.lastBaseUpdate=m,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);Rs|=i,e.lanes=i,e.memoizedState=u}}function ld(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=s,typeof o!="function")throw Error(X(191,o));o.call(r)}}}var br={},Et=gs(br),ir=gs(br),lr=gs(br);function ks(e){if(e===br)throw Error(X(174));return e}function Fl(e,t){switch(fe(lr,t),fe(ir,e),fe(Et,br),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=mi(t,e)}pe(Et),fe(Et,t)}function hn(){pe(Et),pe(ir),pe(lr)}function mf(e){ks(lr.current);var t=ks(Et.current),s=mi(t,e.type);t!==s&&(fe(ir,e),fe(Et,s))}function $l(e){ir.current===e&&(pe(Et),pe(ir))}var ve=gs(0);function ko(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Da=[];function Vl(){for(var e=0;e<Da.length;e++)Da[e]._workInProgressVersionPrimary=null;Da.length=0}var to=Ut.ReactCurrentDispatcher,La=Ut.ReactCurrentBatchConfig,Ls=0,be=null,Te=null,Me=null,Po=!1,Bn=!1,cr=0,kx=0;function Fe(){throw Error(X(321))}function Ol(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Nt(e[s],t[s]))return!1;return!0}function _l(e,t,s,r,o,a){if(Ls=a,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,to.current=e===null||e.memoizedState===null?Ax:Mx,e=s(r,o),Bn){a=0;do{if(Bn=!1,cr=0,25<=a)throw Error(X(301));a+=1,Me=Te=null,t.updateQueue=null,to.current=Dx,e=s(r,o)}while(Bn)}if(to.current=Eo,t=Te!==null&&Te.next!==null,Ls=0,Me=Te=be=null,Po=!1,t)throw Error(X(300));return e}function zl(){var e=cr!==0;return cr=0,e}function Ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?be.memoizedState=Me=e:Me=Me.next=e,Me}function ht(){if(Te===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Te.next;var t=Me===null?be.memoizedState:Me.next;if(t!==null)Me=t,Te=e;else{if(e===null)throw Error(X(310));Te=e,e={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Me===null?be.memoizedState=Me=e:Me=Me.next=e}return Me}function dr(e,t){return typeof t=="function"?t(e):t}function Ra(e){var t=ht(),s=t.queue;if(s===null)throw Error(X(311));s.lastRenderedReducer=e;var r=Te,o=r.baseQueue,a=s.pending;if(a!==null){if(o!==null){var i=o.next;o.next=a.next,a.next=i}r.baseQueue=o=a,s.pending=null}if(o!==null){a=o.next,r=r.baseState;var l=i=null,c=null,d=a;do{var m=d.lane;if((Ls&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var u={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=u,i=r):c=c.next=u,be.lanes|=m,Rs|=m}d=d.next}while(d!==null&&d!==a);c===null?i=r:c.next=l,Nt(r,t.memoizedState)||(Xe=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,s.lastRenderedState=r}if(e=s.interleaved,e!==null){o=e;do a=o.lane,be.lanes|=a,Rs|=a,o=o.next;while(o!==e)}else o===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Ia(e){var t=ht(),s=t.queue;if(s===null)throw Error(X(311));s.lastRenderedReducer=e;var r=s.dispatch,o=s.pending,a=t.memoizedState;if(o!==null){s.pending=null;var i=o=o.next;do a=e(a,i.action),i=i.next;while(i!==o);Nt(a,t.memoizedState)||(Xe=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),s.lastRenderedState=a}return[a,r]}function ff(){}function hf(e,t){var s=be,r=ht(),o=t(),a=!Nt(r.memoizedState,o);if(a&&(r.memoizedState=o,Xe=!0),r=r.queue,Bl(xf.bind(null,s,r,e),[e]),r.getSnapshot!==t||a||Me!==null&&Me.memoizedState.tag&1){if(s.flags|=2048,ur(9,gf.bind(null,s,r,o,t),void 0,null),De===null)throw Error(X(349));Ls&30||pf(s,t,o)}return o}function pf(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function gf(e,t,s,r){t.value=s,t.getSnapshot=r,vf(t)&&yf(e)}function xf(e,t,s){return s(function(){vf(t)&&yf(e)})}function vf(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Nt(e,s)}catch{return!0}}function yf(e){var t=_t(e,1);t!==null&&bt(t,e,1,-1)}function cd(e){var t=Ct();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:e},t.queue=e,e=e.dispatch=Tx.bind(null,be,e),[t.memoizedState,e]}function ur(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e)),e}function bf(){return ht().memoizedState}function so(e,t,s,r){var o=Ct();be.flags|=e,o.memoizedState=ur(1|t,s,void 0,r===void 0?null:r)}function Yo(e,t,s,r){var o=ht();r=r===void 0?null:r;var a=void 0;if(Te!==null){var i=Te.memoizedState;if(a=i.destroy,r!==null&&Ol(r,i.deps)){o.memoizedState=ur(t,s,a,r);return}}be.flags|=e,o.memoizedState=ur(1|t,s,a,r)}function dd(e,t){return so(8390656,8,e,t)}function Bl(e,t){return Yo(2048,8,e,t)}function jf(e,t){return Yo(4,2,e,t)}function Nf(e,t){return Yo(4,4,e,t)}function wf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sf(e,t,s){return s=s!=null?s.concat([e]):null,Yo(4,4,wf.bind(null,t,e),s)}function Ul(){}function Cf(e,t){var s=ht();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&Ol(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function kf(e,t){var s=ht();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&Ol(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function Pf(e,t,s){return Ls&21?(Nt(s,t)||(s=Mm(),be.lanes|=s,Rs|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xe=!0),e.memoizedState=s)}function Px(e,t){var s=de;de=s!==0&&4>s?s:4,e(!0);var r=La.transition;La.transition={};try{e(!1),t()}finally{de=s,La.transition=r}}function Ef(){return ht().memoizedState}function Ex(e,t,s){var r=as(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},Tf(e))Af(t,s);else if(s=df(e,t,s,r),s!==null){var o=qe();bt(s,e,r,o),Mf(s,t,r)}}function Tx(e,t,s){var r=as(e),o={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(Tf(e))Af(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,s);if(o.hasEagerState=!0,o.eagerState=l,Nt(l,i)){var c=t.interleaved;c===null?(o.next=o,Rl(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}s=df(e,t,o,r),s!==null&&(o=qe(),bt(s,e,r,o),Mf(s,t,r))}}function Tf(e){var t=e.alternate;return e===be||t!==null&&t===be}function Af(e,t){Bn=Po=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Mf(e,t,s){if(s&4194240){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,bl(e,s)}}var Eo={readContext:ft,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useInsertionEffect:Fe,useLayoutEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useMutableSource:Fe,useSyncExternalStore:Fe,useId:Fe,unstable_isNewReconciler:!1},Ax={readContext:ft,useCallback:function(e,t){return Ct().memoizedState=[e,t===void 0?null:t],e},useContext:ft,useEffect:dd,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,so(4194308,4,wf.bind(null,t,e),s)},useLayoutEffect:function(e,t){return so(4194308,4,e,t)},useInsertionEffect:function(e,t){return so(4,2,e,t)},useMemo:function(e,t){var s=Ct();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=Ct();return t=s!==void 0?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ex.bind(null,be,e),[r.memoizedState,e]},useRef:function(e){var t=Ct();return e={current:e},t.memoizedState=e},useState:cd,useDebugValue:Ul,useDeferredValue:function(e){return Ct().memoizedState=e},useTransition:function(){var e=cd(!1),t=e[0];return e=Px.bind(null,e[1]),Ct().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=be,o=Ct();if(xe){if(s===void 0)throw Error(X(407));s=s()}else{if(s=t(),De===null)throw Error(X(349));Ls&30||pf(r,t,s)}o.memoizedState=s;var a={value:s,getSnapshot:t};return o.queue=a,dd(xf.bind(null,r,a,e),[e]),r.flags|=2048,ur(9,gf.bind(null,r,a,s,t),void 0,null),s},useId:function(){var e=Ct(),t=De.identifierPrefix;if(xe){var s=Lt,r=Dt;s=(r&~(1<<32-yt(r)-1)).toString(32)+s,t=":"+t+"R"+s,s=cr++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=kx++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Mx={readContext:ft,useCallback:Cf,useContext:ft,useEffect:Bl,useImperativeHandle:Sf,useInsertionEffect:jf,useLayoutEffect:Nf,useMemo:kf,useReducer:Ra,useRef:bf,useState:function(){return Ra(dr)},useDebugValue:Ul,useDeferredValue:function(e){var t=ht();return Pf(t,Te.memoizedState,e)},useTransition:function(){var e=Ra(dr)[0],t=ht().memoizedState;return[e,t]},useMutableSource:ff,useSyncExternalStore:hf,useId:Ef,unstable_isNewReconciler:!1},Dx={readContext:ft,useCallback:Cf,useContext:ft,useEffect:Bl,useImperativeHandle:Sf,useInsertionEffect:jf,useLayoutEffect:Nf,useMemo:kf,useReducer:Ia,useRef:bf,useState:function(){return Ia(dr)},useDebugValue:Ul,useDeferredValue:function(e){var t=ht();return Te===null?t.memoizedState=e:Pf(t,Te.memoizedState,e)},useTransition:function(){var e=Ia(dr)[0],t=ht().memoizedState;return[e,t]},useMutableSource:ff,useSyncExternalStore:hf,useId:Ef,unstable_isNewReconciler:!1};function gt(e,t){if(e&&e.defaultProps){t=je({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Li(e,t,s,r){t=e.memoizedState,s=s(r,t),s=s==null?t:je({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Ko={isMounted:function(e){return(e=e._reactInternals)?$s(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=qe(),o=as(e),a=It(r,o);a.payload=t,s!=null&&(a.callback=s),t=rs(e,a,o),t!==null&&(bt(t,e,o,r),eo(t,e,o))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=qe(),o=as(e),a=It(r,o);a.tag=1,a.payload=t,s!=null&&(a.callback=s),t=rs(e,a,o),t!==null&&(bt(t,e,o,r),eo(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=qe(),r=as(e),o=It(s,r);o.tag=2,t!=null&&(o.callback=t),t=rs(e,o,r),t!==null&&(bt(t,e,r,s),eo(t,e,r))}};function ud(e,t,s,r,o,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,i):t.prototype&&t.prototype.isPureReactComponent?!nr(s,r)||!nr(o,a):!0}function Df(e,t,s){var r=!1,o=ms,a=t.contextType;return typeof a=="object"&&a!==null?a=ft(a):(o=Ye(t)?Ms:ze.current,r=t.contextTypes,a=(r=r!=null)?un(e,o):ms),t=new t(s,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ko,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function md(e,t,s,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&Ko.enqueueReplaceState(t,t.state,null)}function Ri(e,t,s,r){var o=e.stateNode;o.props=s,o.state=e.memoizedState,o.refs={},Il(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=ft(a):(a=Ye(t)?Ms:ze.current,o.context=un(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Li(e,t,a,s),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Ko.enqueueReplaceState(o,o.state,null),Co(e,s,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function pn(e,t){try{var s="",r=t;do s+=ag(r),r=r.return;while(r);var o=s}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function Fa(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Ii(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Lx=typeof WeakMap=="function"?WeakMap:Map;function Lf(e,t,s){s=It(-1,s),s.tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){Ao||(Ao=!0,Gi=r),Ii(e,t)},s}function Rf(e,t,s){s=It(-1,s),s.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;s.payload=function(){return r(o)},s.callback=function(){Ii(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){Ii(e,t),typeof r!="function"&&(os===null?os=new Set([this]):os.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),s}function fd(e,t,s){var r=e.pingCache;if(r===null){r=e.pingCache=new Lx;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(s)||(o.add(s),e=Wx.bind(null,e,t,s),t.then(e,e))}function hd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function pd(e,t,s,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=It(-1,1),t.tag=2,rs(s,t,1))),s.lanes|=1),e)}var Rx=Ut.ReactCurrentOwner,Xe=!1;function Ue(e,t,s,r){t.child=e===null?cf(t,null,s,r):fn(t,e.child,s,r)}function gd(e,t,s,r,o){s=s.render;var a=t.ref;return ln(t,o),r=_l(e,t,s,r,a,o),s=zl(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,zt(e,t,o)):(xe&&s&&El(t),t.flags|=1,Ue(e,t,r,o),t.child)}function xd(e,t,s,r,o){if(e===null){var a=s.type;return typeof a=="function"&&!Kl(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=a,If(e,t,a,r,o)):(e=ao(s.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var i=a.memoizedProps;if(s=s.compare,s=s!==null?s:nr,s(i,r)&&e.ref===t.ref)return zt(e,t,o)}return t.flags|=1,e=is(a,r),e.ref=t.ref,e.return=t,t.child=e}function If(e,t,s,r,o){if(e!==null){var a=e.memoizedProps;if(nr(a,r)&&e.ref===t.ref)if(Xe=!1,t.pendingProps=r=a,(e.lanes&o)!==0)e.flags&131072&&(Xe=!0);else return t.lanes=e.lanes,zt(e,t,o)}return Fi(e,t,s,r,o)}function Ff(e,t,s){var r=t.pendingProps,o=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(Zs,Je),Je|=s;else{if(!(s&1073741824))return e=a!==null?a.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fe(Zs,Je),Je|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:s,fe(Zs,Je),Je|=r}else a!==null?(r=a.baseLanes|s,t.memoizedState=null):r=s,fe(Zs,Je),Je|=r;return Ue(e,t,o,s),t.child}function $f(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Fi(e,t,s,r,o){var a=Ye(s)?Ms:ze.current;return a=un(t,a),ln(t,o),s=_l(e,t,s,r,a,o),r=zl(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,zt(e,t,o)):(xe&&r&&El(t),t.flags|=1,Ue(e,t,s,o),t.child)}function vd(e,t,s,r,o){if(Ye(s)){var a=!0;bo(t)}else a=!1;if(ln(t,o),t.stateNode===null)no(e,t),Df(t,s,r),Ri(t,s,r,o),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=s.contextType;typeof d=="object"&&d!==null?d=ft(d):(d=Ye(s)?Ms:ze.current,d=un(t,d));var m=s.getDerivedStateFromProps,u=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function";u||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==d)&&md(t,i,r,d),Wt=!1;var g=t.memoizedState;i.state=g,Co(t,r,i,o),c=t.memoizedState,l!==r||g!==c||Qe.current||Wt?(typeof m=="function"&&(Li(t,s,m,r),c=t.memoizedState),(l=Wt||ud(t,s,l,r,g,c,d))?(u||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=d,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,uf(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:gt(t.type,l),i.props=d,u=t.pendingProps,g=i.context,c=s.contextType,typeof c=="object"&&c!==null?c=ft(c):(c=Ye(s)?Ms:ze.current,c=un(t,c));var x=s.getDerivedStateFromProps;(m=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==u||g!==c)&&md(t,i,r,c),Wt=!1,g=t.memoizedState,i.state=g,Co(t,r,i,o);var E=t.memoizedState;l!==u||g!==E||Qe.current||Wt?(typeof x=="function"&&(Li(t,s,x,r),E=t.memoizedState),(d=Wt||ud(t,s,d,r,g,E,c)||!1)?(m||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,E,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,E,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=E),i.props=r,i.state=E,i.context=c,r=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return $i(e,t,s,r,a,o)}function $i(e,t,s,r,o,a){$f(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&nd(t,s,!1),zt(e,t,a);r=t.stateNode,Rx.current=t;var l=i&&typeof s.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=fn(t,e.child,null,a),t.child=fn(t,null,l,a)):Ue(e,t,l,a),t.memoizedState=r.state,o&&nd(t,s,!0),t.child}function Vf(e){var t=e.stateNode;t.pendingContext?sd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&sd(e,t.context,!1),Fl(e,t.containerInfo)}function yd(e,t,s,r,o){return mn(),Al(o),t.flags|=256,Ue(e,t,s,r),t.child}var Vi={dehydrated:null,treeContext:null,retryLane:0};function Oi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Of(e,t,s){var r=t.pendingProps,o=ve.current,a=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),fe(ve,o&1),e===null)return Mi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,a?(r=t.mode,a=t.child,i={mode:"hidden",children:i},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=ea(i,r,0,null),e=Ts(e,r,s,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Oi(s),t.memoizedState=Vi,e):ql(t,i));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return Ix(e,t,i,r,l,o,s);if(a){a=r.fallback,i=t.mode,o=e.child,l=o.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=is(o,c),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?a=is(l,a):(a=Ts(a,i,s,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,i=e.child.memoizedState,i=i===null?Oi(s):{baseLanes:i.baseLanes|s,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~s,t.memoizedState=Vi,r}return a=e.child,e=a.sibling,r=is(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=s),r.return=t,r.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function ql(e,t){return t=ea({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _r(e,t,s,r){return r!==null&&Al(r),fn(t,e.child,null,s),e=ql(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ix(e,t,s,r,o,a,i){if(s)return t.flags&256?(t.flags&=-257,r=Fa(Error(X(422))),_r(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=ea({mode:"visible",children:r.children},o,0,null),a=Ts(a,o,i,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&fn(t,e.child,null,i),t.child.memoizedState=Oi(i),t.memoizedState=Vi,a);if(!(t.mode&1))return _r(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(X(419)),r=Fa(a,r,void 0),_r(e,t,i,r)}if(l=(i&e.childLanes)!==0,Xe||l){if(r=De,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,_t(e,o),bt(r,e,o,-1))}return Yl(),r=Fa(Error(X(421))),_r(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Xx.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,et=ns(o.nextSibling),st=t,xe=!0,vt=null,e!==null&&(ct[dt++]=Dt,ct[dt++]=Lt,ct[dt++]=Ds,Dt=e.id,Lt=e.overflow,Ds=t),t=ql(t,r.children),t.flags|=4096,t)}function bd(e,t,s){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Di(e.return,t,s)}function $a(e,t,s,r,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=s,a.tailMode=o)}function _f(e,t,s){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(Ue(e,t,r.children,s),r=ve.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bd(e,s,t);else if(e.tag===19)bd(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fe(ve,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(s=t.child,o=null;s!==null;)e=s.alternate,e!==null&&ko(e)===null&&(o=s),s=s.sibling;s=o,s===null?(o=t.child,t.child=null):(o=s.sibling,s.sibling=null),$a(t,!1,o,s,a);break;case"backwards":for(s=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&ko(e)===null){t.child=o;break}e=o.sibling,o.sibling=s,s=o,o=e}$a(t,!0,s,null,a);break;case"together":$a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function no(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zt(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Rs|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,s=is(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=is(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Fx(e,t,s){switch(t.tag){case 3:Vf(t),mn();break;case 5:mf(t);break;case 1:Ye(t.type)&&bo(t);break;case 4:Fl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;fe(wo,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(fe(ve,ve.current&1),t.flags|=128,null):s&t.child.childLanes?Of(e,t,s):(fe(ve,ve.current&1),e=zt(e,t,s),e!==null?e.sibling:null);fe(ve,ve.current&1);break;case 19:if(r=(s&t.childLanes)!==0,e.flags&128){if(r)return _f(e,t,s);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),fe(ve,ve.current),r)break;return null;case 22:case 23:return t.lanes=0,Ff(e,t,s)}return zt(e,t,s)}var zf,_i,Bf,Uf;zf=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};_i=function(){};Bf=function(e,t,s,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ks(Et.current);var a=null;switch(s){case"input":o=li(e,o),r=li(e,r),a=[];break;case"select":o=je({},o,{value:void 0}),r=je({},r,{value:void 0}),a=[];break;case"textarea":o=ui(e,o),r=ui(e,r),a=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=vo)}fi(s,r);var i;s=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var l=o[d];for(i in l)l.hasOwnProperty(i)&&(s||(s={}),s[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Yn.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(l=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(s||(s={}),s[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(s||(s={}),s[i]=c[i])}else s||(a||(a=[]),a.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Yn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&he("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}s&&(a=a||[]).push("style",s);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};Uf=function(e,t,s,r){s!==r&&(t.flags|=4)};function En(e,t){if(!xe)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $e(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(t)for(var o=e.child;o!==null;)s|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)s|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function $x(e,t,s){var r=t.pendingProps;switch(Tl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(t),null;case 1:return Ye(t.type)&&yo(),$e(t),null;case 3:return r=t.stateNode,hn(),pe(Qe),pe(ze),Vl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vt!==null&&(Xi(vt),vt=null))),_i(e,t),$e(t),null;case 5:$l(t);var o=ks(lr.current);if(s=t.type,e!==null&&t.stateNode!=null)Bf(e,t,s,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(X(166));return $e(t),null}if(e=ks(Et.current),Vr(t)){r=t.stateNode,s=t.type;var a=t.memoizedProps;switch(r[kt]=t,r[ar]=a,e=(t.mode&1)!==0,s){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(o=0;o<In.length;o++)he(In[o],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":Tc(r,a),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},he("invalid",r);break;case"textarea":Mc(r,a),he("invalid",r)}fi(s,a),o=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&$r(r.textContent,l,e),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&$r(r.textContent,l,e),o=["children",""+l]):Yn.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&he("scroll",r)}switch(s){case"input":Tr(r),Ac(r,a,!0);break;case"textarea":Tr(r),Dc(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=vo)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gm(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(s,{is:r.is}):(e=i.createElement(s),s==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,s),e[kt]=t,e[ar]=r,zf(e,t,!1,!1),t.stateNode=e;e:{switch(i=hi(s,r),s){case"dialog":he("cancel",e),he("close",e),o=r;break;case"iframe":case"object":case"embed":he("load",e),o=r;break;case"video":case"audio":for(o=0;o<In.length;o++)he(In[o],e);o=r;break;case"source":he("error",e),o=r;break;case"img":case"image":case"link":he("error",e),he("load",e),o=r;break;case"details":he("toggle",e),o=r;break;case"input":Tc(e,r),o=li(e,r),he("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=je({},r,{value:void 0}),he("invalid",e);break;case"textarea":Mc(e,r),o=ui(e,r),he("invalid",e);break;default:o=r}fi(s,o),l=o;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?ym(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&xm(e,c)):a==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Kn(e,c):typeof c=="number"&&Kn(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Yn.hasOwnProperty(a)?c!=null&&a==="onScroll"&&he("scroll",e):c!=null&&hl(e,a,c,i))}switch(s){case"input":Tr(e),Ac(e,r,!1);break;case"textarea":Tr(e),Dc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+us(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?nn(e,!!r.multiple,a,!1):r.defaultValue!=null&&nn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=vo)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $e(t),null;case 6:if(e&&t.stateNode!=null)Uf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(X(166));if(s=ks(lr.current),ks(Et.current),Vr(t)){if(r=t.stateNode,s=t.memoizedProps,r[kt]=t,(a=r.nodeValue!==s)&&(e=st,e!==null))switch(e.tag){case 3:$r(r.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$r(r.nodeValue,s,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[kt]=t,t.stateNode=r}return $e(t),null;case 13:if(pe(ve),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xe&&et!==null&&t.mode&1&&!(t.flags&128))af(),mn(),t.flags|=98560,a=!1;else if(a=Vr(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(X(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(X(317));a[kt]=t}else mn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$e(t),a=!1}else vt!==null&&(Xi(vt),vt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ve.current&1?Ae===0&&(Ae=3):Yl())),t.updateQueue!==null&&(t.flags|=4),$e(t),null);case 4:return hn(),_i(e,t),e===null&&rr(t.stateNode.containerInfo),$e(t),null;case 10:return Ll(t.type._context),$e(t),null;case 17:return Ye(t.type)&&yo(),$e(t),null;case 19:if(pe(ve),a=t.memoizedState,a===null)return $e(t),null;if(r=(t.flags&128)!==0,i=a.rendering,i===null)if(r)En(a,!1);else{if(Ae!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=ko(e),i!==null){for(t.flags|=128,En(a,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;s!==null;)a=s,e=r,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return fe(ve,ve.current&1|2),t.child}e=e.sibling}a.tail!==null&&Se()>gn&&(t.flags|=128,r=!0,En(a,!1),t.lanes=4194304)}else{if(!r)if(e=ko(i),e!==null){if(t.flags|=128,r=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),En(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!xe)return $e(t),null}else 2*Se()-a.renderingStartTime>gn&&s!==1073741824&&(t.flags|=128,r=!0,En(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(s=a.last,s!==null?s.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Se(),t.sibling=null,s=ve.current,fe(ve,r?s&1|2:s&1),t):($e(t),null);case 22:case 23:return Ql(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Je&1073741824&&($e(t),t.subtreeFlags&6&&(t.flags|=8192)):$e(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function Vx(e,t){switch(Tl(t),t.tag){case 1:return Ye(t.type)&&yo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hn(),pe(Qe),pe(ze),Vl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $l(t),null;case 13:if(pe(ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));mn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pe(ve),null;case 4:return hn(),null;case 10:return Ll(t.type._context),null;case 22:case 23:return Ql(),null;case 24:return null;default:return null}}var zr=!1,Oe=!1,Ox=typeof WeakSet=="function"?WeakSet:Set,te=null;function Ks(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){Ne(e,t,r)}else s.current=null}function zi(e,t,s){try{s()}catch(r){Ne(e,t,r)}}var jd=!1;function _x(e,t){if(Si=po,e=Wm(),Pl(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var i=0,l=-1,c=-1,d=0,m=0,u=e,g=null;t:for(;;){for(var x;u!==s||o!==0&&u.nodeType!==3||(l=i+o),u!==a||r!==0&&u.nodeType!==3||(c=i+r),u.nodeType===3&&(i+=u.nodeValue.length),(x=u.firstChild)!==null;)g=u,u=x;for(;;){if(u===e)break t;if(g===s&&++d===o&&(l=i),g===a&&++m===r&&(c=i),(x=u.nextSibling)!==null)break;u=g,g=u.parentNode}u=x}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ci={focusedElem:e,selectionRange:s},po=!1,te=t;te!==null;)if(t=te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,te=e;else for(;te!==null;){t=te;try{var E=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var k=E.memoizedProps,C=E.memoizedState,p=t.stateNode,v=p.getSnapshotBeforeUpdate(t.elementType===t.type?k:gt(t.type,k),C);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(S){Ne(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,te=e;break}te=t.return}return E=jd,jd=!1,E}function Un(e,t,s){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&zi(t,s,a)}o=o.next}while(o!==r)}}function Zo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function Bi(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function qf(e){var t=e.alternate;t!==null&&(e.alternate=null,qf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[kt],delete t[ar],delete t[Ei],delete t[Nx],delete t[wx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Gf(e){return e.tag===5||e.tag===3||e.tag===4}function Nd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ui(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=vo));else if(r!==4&&(e=e.child,e!==null))for(Ui(e,t,s),e=e.sibling;e!==null;)Ui(e,t,s),e=e.sibling}function qi(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(qi(e,t,s),e=e.sibling;e!==null;)qi(e,t,s),e=e.sibling}var Le=null,xt=!1;function qt(e,t,s){for(s=s.child;s!==null;)Hf(e,t,s),s=s.sibling}function Hf(e,t,s){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(qo,s)}catch{}switch(s.tag){case 5:Oe||Ks(s,t);case 6:var r=Le,o=xt;Le=null,qt(e,t,s),Le=r,xt=o,Le!==null&&(xt?(e=Le,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Le.removeChild(s.stateNode));break;case 18:Le!==null&&(xt?(e=Le,s=s.stateNode,e.nodeType===8?Aa(e.parentNode,s):e.nodeType===1&&Aa(e,s),tr(e)):Aa(Le,s.stateNode));break;case 4:r=Le,o=xt,Le=s.stateNode.containerInfo,xt=!0,qt(e,t,s),Le=r,xt=o;break;case 0:case 11:case 14:case 15:if(!Oe&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&zi(s,t,i),o=o.next}while(o!==r)}qt(e,t,s);break;case 1:if(!Oe&&(Ks(s,t),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(l){Ne(s,t,l)}qt(e,t,s);break;case 21:qt(e,t,s);break;case 22:s.mode&1?(Oe=(r=Oe)||s.memoizedState!==null,qt(e,t,s),Oe=r):qt(e,t,s);break;default:qt(e,t,s)}}function wd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Ox),t.forEach(function(r){var o=Qx.bind(null,e,r);s.has(r)||(s.add(r),r.then(o,o))})}}function pt(e,t){var s=t.deletions;if(s!==null)for(var r=0;r<s.length;r++){var o=s[r];try{var a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:Le=l.stateNode,xt=!1;break e;case 3:Le=l.stateNode.containerInfo,xt=!0;break e;case 4:Le=l.stateNode.containerInfo,xt=!0;break e}l=l.return}if(Le===null)throw Error(X(160));Hf(a,i,o),Le=null,xt=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(d){Ne(o,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wf(t,e),t=t.sibling}function Wf(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pt(t,e),St(e),r&4){try{Un(3,e,e.return),Zo(3,e)}catch(k){Ne(e,e.return,k)}try{Un(5,e,e.return)}catch(k){Ne(e,e.return,k)}}break;case 1:pt(t,e),St(e),r&512&&s!==null&&Ks(s,s.return);break;case 5:if(pt(t,e),St(e),r&512&&s!==null&&Ks(s,s.return),e.flags&32){var o=e.stateNode;try{Kn(o,"")}catch(k){Ne(e,e.return,k)}}if(r&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,i=s!==null?s.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&hm(o,a),hi(l,i);var d=hi(l,a);for(i=0;i<c.length;i+=2){var m=c[i],u=c[i+1];m==="style"?ym(o,u):m==="dangerouslySetInnerHTML"?xm(o,u):m==="children"?Kn(o,u):hl(o,m,u,d)}switch(l){case"input":ci(o,a);break;case"textarea":pm(o,a);break;case"select":var g=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var x=a.value;x!=null?nn(o,!!a.multiple,x,!1):g!==!!a.multiple&&(a.defaultValue!=null?nn(o,!!a.multiple,a.defaultValue,!0):nn(o,!!a.multiple,a.multiple?[]:"",!1))}o[ar]=a}catch(k){Ne(e,e.return,k)}}break;case 6:if(pt(t,e),St(e),r&4){if(e.stateNode===null)throw Error(X(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(k){Ne(e,e.return,k)}}break;case 3:if(pt(t,e),St(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{tr(t.containerInfo)}catch(k){Ne(e,e.return,k)}break;case 4:pt(t,e),St(e);break;case 13:pt(t,e),St(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(Wl=Se())),r&4&&wd(e);break;case 22:if(m=s!==null&&s.memoizedState!==null,e.mode&1?(Oe=(d=Oe)||m,pt(t,e),Oe=d):pt(t,e),St(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(te=e,m=e.child;m!==null;){for(u=te=m;te!==null;){switch(g=te,x=g.child,g.tag){case 0:case 11:case 14:case 15:Un(4,g,g.return);break;case 1:Ks(g,g.return);var E=g.stateNode;if(typeof E.componentWillUnmount=="function"){r=g,s=g.return;try{t=r,E.props=t.memoizedProps,E.state=t.memoizedState,E.componentWillUnmount()}catch(k){Ne(r,s,k)}}break;case 5:Ks(g,g.return);break;case 22:if(g.memoizedState!==null){Cd(u);continue}}x!==null?(x.return=g,te=x):Cd(u)}m=m.sibling}e:for(m=null,u=e;;){if(u.tag===5){if(m===null){m=u;try{o=u.stateNode,d?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=u.stateNode,c=u.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=vm("display",i))}catch(k){Ne(e,e.return,k)}}}else if(u.tag===6){if(m===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(k){Ne(e,e.return,k)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:pt(t,e),St(e),r&4&&wd(e);break;case 21:break;default:pt(t,e),St(e)}}function St(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Gf(s)){var r=s;break e}s=s.return}throw Error(X(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Kn(o,""),r.flags&=-33);var a=Nd(e);qi(e,a,o);break;case 3:case 4:var i=r.stateNode.containerInfo,l=Nd(e);Ui(e,l,i);break;default:throw Error(X(161))}}catch(c){Ne(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zx(e,t,s){te=e,Xf(e)}function Xf(e,t,s){for(var r=(e.mode&1)!==0;te!==null;){var o=te,a=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||zr;if(!i){var l=o.alternate,c=l!==null&&l.memoizedState!==null||Oe;l=zr;var d=Oe;if(zr=i,(Oe=c)&&!d)for(te=o;te!==null;)i=te,c=i.child,i.tag===22&&i.memoizedState!==null?kd(o):c!==null?(c.return=i,te=c):kd(o);for(;a!==null;)te=a,Xf(a),a=a.sibling;te=o,zr=l,Oe=d}Sd(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,te=a):Sd(e)}}function Sd(e){for(;te!==null;){var t=te;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Oe||Zo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Oe)if(s===null)r.componentDidMount();else{var o=t.elementType===t.type?s.memoizedProps:gt(t.type,s.memoizedProps);r.componentDidUpdate(o,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&ld(t,a,r);break;case 3:var i=t.updateQueue;if(i!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}ld(t,i,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var u=m.dehydrated;u!==null&&tr(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Oe||t.flags&512&&Bi(t)}catch(g){Ne(t,t.return,g)}}if(t===e){te=null;break}if(s=t.sibling,s!==null){s.return=t.return,te=s;break}te=t.return}}function Cd(e){for(;te!==null;){var t=te;if(t===e){te=null;break}var s=t.sibling;if(s!==null){s.return=t.return,te=s;break}te=t.return}}function kd(e){for(;te!==null;){var t=te;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Zo(4,t)}catch(c){Ne(t,s,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){Ne(t,o,c)}}var a=t.return;try{Bi(t)}catch(c){Ne(t,a,c)}break;case 5:var i=t.return;try{Bi(t)}catch(c){Ne(t,i,c)}}}catch(c){Ne(t,t.return,c)}if(t===e){te=null;break}var l=t.sibling;if(l!==null){l.return=t.return,te=l;break}te=t.return}}var Bx=Math.ceil,To=Ut.ReactCurrentDispatcher,Gl=Ut.ReactCurrentOwner,mt=Ut.ReactCurrentBatchConfig,ce=0,De=null,Ee=null,Re=0,Je=0,Zs=gs(0),Ae=0,mr=null,Rs=0,Jo=0,Hl=0,qn=null,We=null,Wl=0,gn=1/0,At=null,Ao=!1,Gi=null,os=null,Br=!1,Jt=null,Mo=0,Gn=0,Hi=null,ro=-1,oo=0;function qe(){return ce&6?Se():ro!==-1?ro:ro=Se()}function as(e){return e.mode&1?ce&2&&Re!==0?Re&-Re:Cx.transition!==null?(oo===0&&(oo=Mm()),oo):(e=de,e!==0||(e=window.event,e=e===void 0?16:Vm(e.type)),e):1}function bt(e,t,s,r){if(50<Gn)throw Gn=0,Hi=null,Error(X(185));xr(e,s,r),(!(ce&2)||e!==De)&&(e===De&&(!(ce&2)&&(Jo|=s),Ae===4&&Kt(e,Re)),Ke(e,r),s===1&&ce===0&&!(t.mode&1)&&(gn=Se()+500,Qo&&xs()))}function Ke(e,t){var s=e.callbackNode;Cg(e,t);var r=ho(e,e===De?Re:0);if(r===0)s!==null&&Ic(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(s!=null&&Ic(s),t===1)e.tag===0?Sx(Pd.bind(null,e)):nf(Pd.bind(null,e)),bx(function(){!(ce&6)&&xs()}),s=null;else{switch(Dm(r)){case 1:s=yl;break;case 4:s=Tm;break;case 16:s=fo;break;case 536870912:s=Am;break;default:s=fo}s=sh(s,Qf.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Qf(e,t){if(ro=-1,oo=0,ce&6)throw Error(X(327));var s=e.callbackNode;if(cn()&&e.callbackNode!==s)return null;var r=ho(e,e===De?Re:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Do(e,r);else{t=r;var o=ce;ce|=2;var a=Kf();(De!==e||Re!==t)&&(At=null,gn=Se()+500,Es(e,t));do try{Gx();break}catch(l){Yf(e,l)}while(!0);Dl(),To.current=a,ce=o,Ee!==null?t=0:(De=null,Re=0,t=Ae)}if(t!==0){if(t===2&&(o=yi(e),o!==0&&(r=o,t=Wi(e,o))),t===1)throw s=mr,Es(e,0),Kt(e,r),Ke(e,Se()),s;if(t===6)Kt(e,r);else{if(o=e.current.alternate,!(r&30)&&!Ux(o)&&(t=Do(e,r),t===2&&(a=yi(e),a!==0&&(r=a,t=Wi(e,a))),t===1))throw s=mr,Es(e,0),Kt(e,r),Ke(e,Se()),s;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(X(345));case 2:js(e,We,At);break;case 3:if(Kt(e,r),(r&130023424)===r&&(t=Wl+500-Se(),10<t)){if(ho(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){qe(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Pi(js.bind(null,e,We,At),t);break}js(e,We,At);break;case 4:if(Kt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-yt(r);a=1<<i,i=t[i],i>o&&(o=i),r&=~a}if(r=o,r=Se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Bx(r/1960))-r,10<r){e.timeoutHandle=Pi(js.bind(null,e,We,At),r);break}js(e,We,At);break;case 5:js(e,We,At);break;default:throw Error(X(329))}}}return Ke(e,Se()),e.callbackNode===s?Qf.bind(null,e):null}function Wi(e,t){var s=qn;return e.current.memoizedState.isDehydrated&&(Es(e,t).flags|=256),e=Do(e,t),e!==2&&(t=We,We=s,t!==null&&Xi(t)),e}function Xi(e){We===null?We=e:We.push.apply(We,e)}function Ux(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var o=s[r],a=o.getSnapshot;o=o.value;try{if(!Nt(a(),o))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Kt(e,t){for(t&=~Hl,t&=~Jo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-yt(t),r=1<<s;e[s]=-1,t&=~r}}function Pd(e){if(ce&6)throw Error(X(327));cn();var t=ho(e,0);if(!(t&1))return Ke(e,Se()),null;var s=Do(e,t);if(e.tag!==0&&s===2){var r=yi(e);r!==0&&(t=r,s=Wi(e,r))}if(s===1)throw s=mr,Es(e,0),Kt(e,t),Ke(e,Se()),s;if(s===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,js(e,We,At),Ke(e,Se()),null}function Xl(e,t){var s=ce;ce|=1;try{return e(t)}finally{ce=s,ce===0&&(gn=Se()+500,Qo&&xs())}}function Is(e){Jt!==null&&Jt.tag===0&&!(ce&6)&&cn();var t=ce;ce|=1;var s=mt.transition,r=de;try{if(mt.transition=null,de=1,e)return e()}finally{de=r,mt.transition=s,ce=t,!(ce&6)&&xs()}}function Ql(){Je=Zs.current,pe(Zs)}function Es(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,yx(s)),Ee!==null)for(s=Ee.return;s!==null;){var r=s;switch(Tl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yo();break;case 3:hn(),pe(Qe),pe(ze),Vl();break;case 5:$l(r);break;case 4:hn();break;case 13:pe(ve);break;case 19:pe(ve);break;case 10:Ll(r.type._context);break;case 22:case 23:Ql()}s=s.return}if(De=e,Ee=e=is(e.current,null),Re=Je=t,Ae=0,mr=null,Hl=Jo=Rs=0,We=qn=null,Cs!==null){for(t=0;t<Cs.length;t++)if(s=Cs[t],r=s.interleaved,r!==null){s.interleaved=null;var o=r.next,a=s.pending;if(a!==null){var i=a.next;a.next=o,r.next=i}s.pending=r}Cs=null}return e}function Yf(e,t){do{var s=Ee;try{if(Dl(),to.current=Eo,Po){for(var r=be.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Po=!1}if(Ls=0,Me=Te=be=null,Bn=!1,cr=0,Gl.current=null,s===null||s.return===null){Ae=1,mr=t,Ee=null;break}e:{var a=e,i=s.return,l=s,c=t;if(t=Re,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=l,u=m.tag;if(!(m.mode&1)&&(u===0||u===11||u===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var x=hd(i);if(x!==null){x.flags&=-257,pd(x,i,l,a,t),x.mode&1&&fd(a,d,t),t=x,c=d;var E=t.updateQueue;if(E===null){var k=new Set;k.add(c),t.updateQueue=k}else E.add(c);break e}else{if(!(t&1)){fd(a,d,t),Yl();break e}c=Error(X(426))}}else if(xe&&l.mode&1){var C=hd(i);if(C!==null){!(C.flags&65536)&&(C.flags|=256),pd(C,i,l,a,t),Al(pn(c,l));break e}}a=c=pn(c,l),Ae!==4&&(Ae=2),qn===null?qn=[a]:qn.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var p=Lf(a,c,t);id(a,p);break e;case 1:l=c;var v=a.type,f=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(os===null||!os.has(f)))){a.flags|=65536,t&=-t,a.lanes|=t;var S=Rf(a,l,t);id(a,S);break e}}a=a.return}while(a!==null)}Jf(s)}catch(T){t=T,Ee===s&&s!==null&&(Ee=s=s.return);continue}break}while(!0)}function Kf(){var e=To.current;return To.current=Eo,e===null?Eo:e}function Yl(){(Ae===0||Ae===3||Ae===2)&&(Ae=4),De===null||!(Rs&268435455)&&!(Jo&268435455)||Kt(De,Re)}function Do(e,t){var s=ce;ce|=2;var r=Kf();(De!==e||Re!==t)&&(At=null,Es(e,t));do try{qx();break}catch(o){Yf(e,o)}while(!0);if(Dl(),ce=s,To.current=r,Ee!==null)throw Error(X(261));return De=null,Re=0,Ae}function qx(){for(;Ee!==null;)Zf(Ee)}function Gx(){for(;Ee!==null&&!gg();)Zf(Ee)}function Zf(e){var t=th(e.alternate,e,Je);e.memoizedProps=e.pendingProps,t===null?Jf(e):Ee=t,Gl.current=null}function Jf(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=Vx(s,t),s!==null){s.flags&=32767,Ee=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ae=6,Ee=null;return}}else if(s=$x(s,t,Je),s!==null){Ee=s;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);Ae===0&&(Ae=5)}function js(e,t,s){var r=de,o=mt.transition;try{mt.transition=null,de=1,Hx(e,t,s,r)}finally{mt.transition=o,de=r}return null}function Hx(e,t,s,r){do cn();while(Jt!==null);if(ce&6)throw Error(X(327));s=e.finishedWork;var o=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var a=s.lanes|s.childLanes;if(kg(e,a),e===De&&(Ee=De=null,Re=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Br||(Br=!0,sh(fo,function(){return cn(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=mt.transition,mt.transition=null;var i=de;de=1;var l=ce;ce|=4,Gl.current=null,_x(e,s),Wf(s,e),mx(Ci),po=!!Si,Ci=Si=null,e.current=s,zx(s),xg(),ce=l,de=i,mt.transition=a}else e.current=s;if(Br&&(Br=!1,Jt=e,Mo=o),a=e.pendingLanes,a===0&&(os=null),bg(s.stateNode),Ke(e,Se()),t!==null)for(r=e.onRecoverableError,s=0;s<t.length;s++)o=t[s],r(o.value,{componentStack:o.stack,digest:o.digest});if(Ao)throw Ao=!1,e=Gi,Gi=null,e;return Mo&1&&e.tag!==0&&cn(),a=e.pendingLanes,a&1?e===Hi?Gn++:(Gn=0,Hi=e):Gn=0,xs(),null}function cn(){if(Jt!==null){var e=Dm(Mo),t=mt.transition,s=de;try{if(mt.transition=null,de=16>e?16:e,Jt===null)var r=!1;else{if(e=Jt,Jt=null,Mo=0,ce&6)throw Error(X(331));var o=ce;for(ce|=4,te=e.current;te!==null;){var a=te,i=a.child;if(te.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(te=d;te!==null;){var m=te;switch(m.tag){case 0:case 11:case 15:Un(8,m,a)}var u=m.child;if(u!==null)u.return=m,te=u;else for(;te!==null;){m=te;var g=m.sibling,x=m.return;if(qf(m),m===d){te=null;break}if(g!==null){g.return=x,te=g;break}te=x}}}var E=a.alternate;if(E!==null){var k=E.child;if(k!==null){E.child=null;do{var C=k.sibling;k.sibling=null,k=C}while(k!==null)}}te=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,te=i;else e:for(;te!==null;){if(a=te,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Un(9,a,a.return)}var p=a.sibling;if(p!==null){p.return=a.return,te=p;break e}te=a.return}}var v=e.current;for(te=v;te!==null;){i=te;var f=i.child;if(i.subtreeFlags&2064&&f!==null)f.return=i,te=f;else e:for(i=v;te!==null;){if(l=te,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Zo(9,l)}}catch(T){Ne(l,l.return,T)}if(l===i){te=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,te=S;break e}te=l.return}}if(ce=o,xs(),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(qo,e)}catch{}r=!0}return r}finally{de=s,mt.transition=t}}return!1}function Ed(e,t,s){t=pn(s,t),t=Lf(e,t,1),e=rs(e,t,1),t=qe(),e!==null&&(xr(e,1,t),Ke(e,t))}function Ne(e,t,s){if(e.tag===3)Ed(e,e,s);else for(;t!==null;){if(t.tag===3){Ed(t,e,s);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(os===null||!os.has(r))){e=pn(s,e),e=Rf(t,e,1),t=rs(t,e,1),e=qe(),t!==null&&(xr(t,1,e),Ke(t,e));break}}t=t.return}}function Wx(e,t,s){var r=e.pingCache;r!==null&&r.delete(t),t=qe(),e.pingedLanes|=e.suspendedLanes&s,De===e&&(Re&s)===s&&(Ae===4||Ae===3&&(Re&130023424)===Re&&500>Se()-Wl?Es(e,0):Hl|=s),Ke(e,t)}function eh(e,t){t===0&&(e.mode&1?(t=Dr,Dr<<=1,!(Dr&130023424)&&(Dr=4194304)):t=1);var s=qe();e=_t(e,t),e!==null&&(xr(e,t,s),Ke(e,s))}function Xx(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),eh(e,s)}function Qx(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(s=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(t),eh(e,s)}var th;th=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qe.current)Xe=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Xe=!1,Fx(e,t,s);Xe=!!(e.flags&131072)}else Xe=!1,xe&&t.flags&1048576&&rf(t,No,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;no(e,t),e=t.pendingProps;var o=un(t,ze.current);ln(t,s),o=_l(null,t,r,e,o,s);var a=zl();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ye(r)?(a=!0,bo(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Il(t),o.updater=Ko,t.stateNode=o,o._reactInternals=t,Ri(t,r,e,s),t=$i(null,t,r,!0,a,s)):(t.tag=0,xe&&a&&El(t),Ue(null,t,o,s),t=t.child),t;case 16:r=t.elementType;e:{switch(no(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=Kx(r),e=gt(r,e),o){case 0:t=Fi(null,t,r,e,s);break e;case 1:t=vd(null,t,r,e,s);break e;case 11:t=gd(null,t,r,e,s);break e;case 14:t=xd(null,t,r,gt(r.type,e),s);break e}throw Error(X(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:gt(r,o),Fi(e,t,r,o,s);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:gt(r,o),vd(e,t,r,o,s);case 3:e:{if(Vf(t),e===null)throw Error(X(387));r=t.pendingProps,a=t.memoizedState,o=a.element,uf(e,t),Co(t,r,null,s);var i=t.memoizedState;if(r=i.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=pn(Error(X(423)),t),t=yd(e,t,r,s,o);break e}else if(r!==o){o=pn(Error(X(424)),t),t=yd(e,t,r,s,o);break e}else for(et=ns(t.stateNode.containerInfo.firstChild),st=t,xe=!0,vt=null,s=cf(t,null,r,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(mn(),r===o){t=zt(e,t,s);break e}Ue(e,t,r,s)}t=t.child}return t;case 5:return mf(t),e===null&&Mi(t),r=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,i=o.children,ki(r,o)?i=null:a!==null&&ki(r,a)&&(t.flags|=32),$f(e,t),Ue(e,t,i,s),t.child;case 6:return e===null&&Mi(t),null;case 13:return Of(e,t,s);case 4:return Fl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=fn(t,null,r,s):Ue(e,t,r,s),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:gt(r,o),gd(e,t,r,o,s);case 7:return Ue(e,t,t.pendingProps,s),t.child;case 8:return Ue(e,t,t.pendingProps.children,s),t.child;case 12:return Ue(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value,fe(wo,r._currentValue),r._currentValue=i,a!==null)if(Nt(a.value,i)){if(a.children===o.children&&!Qe.current){t=zt(e,t,s);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=It(-1,s&-s),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),Di(a.return,s,t),l.lanes|=s;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(X(341));i.lanes|=s,l=i.alternate,l!==null&&(l.lanes|=s),Di(i,s,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Ue(e,t,o.children,s),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,ln(t,s),o=ft(o),r=r(o),t.flags|=1,Ue(e,t,r,s),t.child;case 14:return r=t.type,o=gt(r,t.pendingProps),o=gt(r.type,o),xd(e,t,r,o,s);case 15:return If(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:gt(r,o),no(e,t),t.tag=1,Ye(r)?(e=!0,bo(t)):e=!1,ln(t,s),Df(t,r,o),Ri(t,r,o,s),$i(null,t,r,!0,e,s);case 19:return _f(e,t,s);case 22:return Ff(e,t,s)}throw Error(X(156,t.tag))};function sh(e,t){return Em(e,t)}function Yx(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ut(e,t,s,r){return new Yx(e,t,s,r)}function Kl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Kx(e){if(typeof e=="function")return Kl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gl)return 11;if(e===xl)return 14}return 2}function is(e,t){var s=e.alternate;return s===null?(s=ut(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function ao(e,t,s,r,o,a){var i=2;if(r=e,typeof e=="function")Kl(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Bs:return Ts(s.children,o,a,t);case pl:i=8,o|=8;break;case ri:return e=ut(12,s,t,o|2),e.elementType=ri,e.lanes=a,e;case oi:return e=ut(13,s,t,o),e.elementType=oi,e.lanes=a,e;case ai:return e=ut(19,s,t,o),e.elementType=ai,e.lanes=a,e;case um:return ea(s,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cm:i=10;break e;case dm:i=9;break e;case gl:i=11;break e;case xl:i=14;break e;case Ht:i=16,r=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=ut(i,s,t,o),t.elementType=e,t.type=r,t.lanes=a,t}function Ts(e,t,s,r){return e=ut(7,e,r,t),e.lanes=s,e}function ea(e,t,s,r){return e=ut(22,e,r,t),e.elementType=um,e.lanes=s,e.stateNode={isHidden:!1},e}function Va(e,t,s){return e=ut(6,e,null,t),e.lanes=s,e}function Oa(e,t,s){return t=ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zx(e,t,s,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ya(0),this.expirationTimes=ya(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ya(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Zl(e,t,s,r,o,a,i,l,c){return e=new Zx(e,t,s,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ut(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Il(a),e}function Jx(e,t,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:r==null?null:""+r,children:e,containerInfo:t,implementation:s}}function nh(e){if(!e)return ms;e=e._reactInternals;e:{if($s(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ye(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var s=e.type;if(Ye(s))return sf(e,s,t)}return t}function rh(e,t,s,r,o,a,i,l,c){return e=Zl(s,r,!0,e,o,a,i,l,c),e.context=nh(null),s=e.current,r=qe(),o=as(s),a=It(r,o),a.callback=t??null,rs(s,a,o),e.current.lanes=o,xr(e,o,r),Ke(e,r),e}function ta(e,t,s,r){var o=t.current,a=qe(),i=as(o);return s=nh(s),t.context===null?t.context=s:t.pendingContext=s,t=It(a,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=rs(o,t,i),e!==null&&(bt(e,o,i,a),eo(e,o,i)),i}function Lo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Td(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Jl(e,t){Td(e,t),(e=e.alternate)&&Td(e,t)}function e0(){return null}var oh=typeof reportError=="function"?reportError:function(e){console.error(e)};function ec(e){this._internalRoot=e}sa.prototype.render=ec.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));ta(e,t,null,null)};sa.prototype.unmount=ec.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Is(function(){ta(null,e,null,null)}),t[Ot]=null}};function sa(e){this._internalRoot=e}sa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Im();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Yt.length&&t!==0&&t<Yt[s].priority;s++);Yt.splice(s,0,e),s===0&&$m(e)}};function tc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function na(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ad(){}function t0(e,t,s,r,o){if(o){if(typeof r=="function"){var a=r;r=function(){var d=Lo(i);a.call(d)}}var i=rh(t,r,e,0,null,!1,!1,"",Ad);return e._reactRootContainer=i,e[Ot]=i.current,rr(e.nodeType===8?e.parentNode:e),Is(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var d=Lo(c);l.call(d)}}var c=Zl(e,0,!1,null,null,!1,!1,"",Ad);return e._reactRootContainer=c,e[Ot]=c.current,rr(e.nodeType===8?e.parentNode:e),Is(function(){ta(t,c,s,r)}),c}function ra(e,t,s,r,o){var a=s._reactRootContainer;if(a){var i=a;if(typeof o=="function"){var l=o;o=function(){var c=Lo(i);l.call(c)}}ta(t,i,e,o)}else i=t0(s,t,e,o,r);return Lo(i)}Lm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Rn(t.pendingLanes);s!==0&&(bl(t,s|1),Ke(t,Se()),!(ce&6)&&(gn=Se()+500,xs()))}break;case 13:Is(function(){var r=_t(e,1);if(r!==null){var o=qe();bt(r,e,1,o)}}),Jl(e,1)}};jl=function(e){if(e.tag===13){var t=_t(e,134217728);if(t!==null){var s=qe();bt(t,e,134217728,s)}Jl(e,134217728)}};Rm=function(e){if(e.tag===13){var t=as(e),s=_t(e,t);if(s!==null){var r=qe();bt(s,e,t,r)}Jl(e,t)}};Im=function(){return de};Fm=function(e,t){var s=de;try{return de=e,t()}finally{de=s}};gi=function(e,t,s){switch(t){case"input":if(ci(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var o=Xo(r);if(!o)throw Error(X(90));fm(r),ci(r,o)}}}break;case"textarea":pm(e,s);break;case"select":t=s.value,t!=null&&nn(e,!!s.multiple,t,!1)}};Nm=Xl;wm=Is;var s0={usingClientEntryPoint:!1,Events:[yr,Hs,Xo,bm,jm,Xl]},Tn={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},n0={bundleType:Tn.bundleType,version:Tn.version,rendererPackageName:Tn.rendererPackageName,rendererConfig:Tn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=km(e),e===null?null:e.stateNode},findFiberByHostInstance:Tn.findFiberByHostInstance||e0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ur=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ur.isDisabled&&Ur.supportsFiber)try{qo=Ur.inject(n0),Pt=Ur}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s0;ot.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tc(t))throw Error(X(200));return Jx(e,t,null,s)};ot.createRoot=function(e,t){if(!tc(e))throw Error(X(299));var s=!1,r="",o=oh;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Zl(e,1,!1,null,null,s,!1,r,o),e[Ot]=t.current,rr(e.nodeType===8?e.parentNode:e),new ec(t)};ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=km(t),e=e===null?null:e.stateNode,e};ot.flushSync=function(e){return Is(e)};ot.hydrate=function(e,t,s){if(!na(t))throw Error(X(200));return ra(null,e,t,!0,s)};ot.hydrateRoot=function(e,t,s){if(!tc(e))throw Error(X(405));var r=s!=null&&s.hydratedSources||null,o=!1,a="",i=oh;if(s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(i=s.onRecoverableError)),t=rh(t,null,e,1,s??null,o,!1,a,i),e[Ot]=t.current,rr(e),r)for(e=0;e<r.length;e++)s=r[e],o=s._getVersion,o=o(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,o]:t.mutableSourceEagerHydrationData.push(s,o);return new sa(t)};ot.render=function(e,t,s){if(!na(t))throw Error(X(200));return ra(null,e,t,!1,s)};ot.unmountComponentAtNode=function(e){if(!na(e))throw Error(X(40));return e._reactRootContainer?(Is(function(){ra(null,null,e,!1,function(){e._reactRootContainer=null,e[Ot]=null})}),!0):!1};ot.unstable_batchedUpdates=Xl;ot.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!na(s))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return ra(e,t,s,!1,r)};ot.version="18.3.1-next-f1338f8080-20240426";function ah(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ah)}catch(e){console.error(e)}}ah(),om.exports=ot;var ih=om.exports;const r0=Wu(ih);var lh,Md=ih;lh=Md.createRoot,Md.hydrateRoot;const _a=({setActiveScreen:e})=>{const[t,s]=j.useState(!1),[r,o]=j.useState(!1);return n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen auth-background p-4 animate-fadeIn",children:[n.jsxs("div",{className:"animate-bounce-in",children:[n.jsx("h1",{className:"text-6xl font-yufin text-white mb-4 drop-shadow-lg text-center",children:"YüFin"}),n.jsx("p",{className:"text-xl lg:text-2xl xl:text-3xl text-white mb-10 text-center max-w-md lg:max-w-lg xl:max-w-xl animate-slideIn",children:"Desvende o mundo das finanças de forma divertida e gamificada!"})]}),n.jsxs("div",{className:"flex flex-col space-y-4 w-full max-w-xs lg:max-w-sm xl:max-w-md animate-slideIn",children:[n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>s(!t),className:"w-full bg-primary text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-opacity-90 transition-all duration-300 text-lg hover-lift",children:"Entrar"}),t&&n.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2 mt-2 animate-fadeIn",children:[n.jsx("button",{onClick:()=>{e("login-student"),s(!1)},className:"w-full bg-white text-primary border-2 text-sm py-2 rounded-lg shadow-sm hover:bg-primary hover:text-white transition-colors duration-200 hover-lift",style:{borderColor:"rgb(238, 145, 22)"},children:"Sou Aluno"}),n.jsx("button",{onClick:()=>{e("login-parent"),s(!1)},className:"w-full bg-white text-primary border-2 text-sm py-2 rounded-lg shadow-sm hover:bg-primary hover:text-white transition-colors duration-200 hover-lift",style:{borderColor:"rgb(238, 145, 22)"},children:"Sou Pai/Responsável"}),n.jsx("button",{onClick:()=>{e("login-school"),s(!1)},className:"w-full bg-white text-primary border-2 text-sm py-2 rounded-lg shadow-sm hover:bg-primary hover:text-white transition-colors duration-200 hover-lift",style:{borderColor:"rgb(238, 145, 22)"},children:"Sou Escola"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>o(!r),className:"w-full bg-teal text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-opacity-90 transition-all duration-300 text-lg hover-lift",children:"Registrar"}),r&&n.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2 mt-2 animate-fadeIn",children:[n.jsx("button",{onClick:()=>{e("register-student"),o(!1)},className:"w-full bg-white text-teal border-2 text-sm py-2 rounded-lg shadow-sm hover:bg-teal hover:text-white transition-colors duration-200 hover-lift",style:{borderColor:"rgb(238, 145, 22)"},children:"Sou Aluno"}),n.jsx("button",{onClick:()=>{e("register-parent"),o(!1)},className:"w-full bg-white text-teal border-2 text-sm py-2 rounded-lg shadow-sm hover:bg-teal hover:text-white transition-colors duration-200 hover-lift",style:{borderColor:"rgb(238, 145, 22)"},children:"Sou Pai/Responsável"}),n.jsx("button",{onClick:()=>{e("register-school"),o(!1)},className:"w-full bg-white text-teal border-2 text-sm py-2 rounded-lg shadow-sm hover:bg-teal hover:text-white transition-colors duration-200 hover-lift",style:{borderColor:"rgb(238, 145, 22)"},children:"Sou Escola"})]})]})]})]})},o0=({role:e,activeScreen:t,setActiveScreen:s})=>{const[r,o]=j.useState(!1);j.useEffect(()=>{const l=()=>{const d=localStorage.getItem("darkMode")==="true";o(d)};l();const c=()=>{l()};return window.addEventListener("darkModeChanged",c),()=>{window.removeEventListener("darkModeChanged",c)}},[]);const i=(()=>{switch(e){case"student":return[{id:"home",label:"Início",icon:"🏠",screen:"home"},{id:"intelligent-dashboard",label:"IA",icon:"🤖",screen:"intelligent-dashboard"},{id:"friends",label:"Amigos",icon:"👥",screen:"friends"},{id:"challenges",label:"Desafios",icon:"🏆",screen:"challenges"},{id:"store",label:"Loja",icon:"🛍️",screen:"store"},{id:"wallet",label:"Carteira",icon:"💰",screen:"wallet"},{id:"settings",label:"Config",icon:"⚙️",screen:"settings"}];case"parent":return[{id:"parent-dashboard",label:"Dashboard",icon:"📊",screen:"parent-dashboard"},{id:"savings-config",label:"Poupança",icon:"🏦",screen:"savings-config"},{id:"reports",label:"Relatórios",icon:"📈",screen:"reports"},{id:"settings",label:"Config",icon:"⚙️",screen:"settings"}];case"school":return[{id:"school-dashboard",label:"Dashboard",icon:"🏫",screen:"school-dashboard"},{id:"classes",label:"Turmas",icon:"📚",screen:"classes"},{id:"reports",label:"Relatórios",icon:"📈",screen:"reports"},{id:"news",label:"Notícias",icon:"📰",screen:"news"},{id:"settings",label:"Config",icon:"⚙️",screen:"settings"}];default:return[]}})();return n.jsx("nav",{className:"fixed bottom-0 left-0 right-0 w-full shadow-lg z-50 rounded-t-xl",style:{borderTop:"3px solid #EE9116",backgroundColor:r?"#374151":"white",color:r?"#ffffff":"#000000"},children:n.jsx("div",{className:"flex justify-around items-center h-16 px-2 w-full",children:i.map(l=>{const c=t===l.screen;return n.jsx("button",{onClick:()=>s(l.screen),className:"flex flex-col items-center justify-center p-2",style:{color:c?"#EE9116":r?"#ffffff":"#9CA3AF",outline:"none",border:"none",boxShadow:"none",backgroundColor:"transparent"},children:n.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[n.jsx("span",{style:{color:c?"#EE9116":r?"#ffffff":"#9CA3AF",transform:c?"scale(1.1)":"scale(1)",filter:r&&!c?"brightness(1.2) contrast(1.1)":"none"},className:"text-2xl transition-transform duration-200",children:l.icon}),n.jsx("span",{style:{color:c?"#EE9116":r?"#ffffff":"#9CA3AF"},className:"text-sm font-medium transition-all duration-200",children:l.label})]})},l.id)})})})},za=({handleLogin:e,setActiveScreen:t,role:s})=>{const[r,o]=j.useState(""),[a,i]=j.useState(""),[l,c]=j.useState(""),[d,m]=j.useState(!1),u=async x=>{if(x.preventDefault(),c(""),m(!0),!r||!a){c("Por favor, preencha todos os campos."),m(!1);return}try{const E=await e(r,a,s);E.success?s==="student"?t("home"):s==="parent"?t("parent-dashboard"):(s==="school"||s==="admin")&&t("school-dashboard"):c(E.message)}catch(E){c("Ocorreu um erro inesperado. Tente novamente."),console.error("Erro no login:",E)}finally{m(!1)}},g=x=>{switch(x){case"student":return"Aluno";case"parent":return"Pai/Responsável";case"school":return"Escola";default:return""}};return n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen auth-background p-4 animate-fadeIn",children:[n.jsxs("h2",{className:"text-4xl font-bold text-white mb-6 text-center",children:["Entrar como ",n.jsx("span",{className:"font-yufin",children:g(s)})]}),n.jsxs("form",{onSubmit:u,className:"bg-white p-8 lg:p-10 xl:p-12 rounded-xl shadow-lg w-full max-w-sm lg:max-w-md xl:max-w-lg flex flex-col space-y-4 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("input",{type:"email",id:"email-login",name:"email",placeholder:"E-mail",value:r,onChange:x=>o(x.target.value),className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:d,autoComplete:"email"}),n.jsx("input",{type:"password",id:"password-login",name:"password",placeholder:"Senha",value:a,onChange:x=>i(x.target.value),className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:d,autoComplete:"current-password"}),l&&n.jsx("p",{className:"text-red-500 text-sm",children:l}),n.jsxs("button",{type:"submit",className:"text-white font-bold py-3 px-6 rounded-xl shadow-md hover:opacity-90 transition-all duration-300 text-lg flex items-center justify-center relative",style:{backgroundColor:"rgb(238, 145, 22)"},disabled:d,children:[d&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsxs("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),n.jsx("span",{className:`${d?"opacity-0":"opacity-100"} transition-opacity duration-300`,children:"Entrar"})]})]}),n.jsx("button",{onClick:()=>t("welcome"),className:"mt-6 text-white text-md hover:underline transition-colors duration-300",disabled:d,children:"Voltar"}),n.jsx("button",{onClick:()=>t(`register-${s}`),className:"mt-2 text-white text-md hover:underline transition-colors duration-300",disabled:d,children:"Não tem conta? Registre-se aqui!"})]})},jr="http://localhost:3001";async function ue(e){const t=await fetch(`${jr}${e}`);if(!t.ok){const s=await t.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(s.error||`Erro ${t.status}: ${t.statusText}`)}return t.json()}async function _e(e,t){const s=await fetch(`${jr}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const r=await s.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(r.error||`Erro ${s.status}: ${s.statusText}`)}return s.json()}async function ls(e,t){const s=await fetch(`${jr}${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const r=await s.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(r.error||`Erro ${s.status}: ${s.statusText}`)}return s.json()}async function a0(e,t){const s=await fetch(`${jr}${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const r=await s.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(r.error||`Erro ${s.status}: ${s.statusText}`)}return s.json()}async function oa(e){const t=await fetch(`${jr}${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok){const s=await t.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(s.error||`Erro ${t.status}: ${t.statusText}`)}return t.json()}const Ba=({handleRegister:e,setActiveScreen:t,role:s})=>{var w,L;const[r,o]=j.useState(""),[a,i]=j.useState(""),[l,c]=j.useState(""),[d,m]=j.useState(""),[u,g]=j.useState(""),[x,E]=j.useState(""),[k,C]=j.useState(null),[p,v]=j.useState(!1),[f,S]=j.useState(""),[T,A]=j.useState(!1),M=["6º Ano","7º Ano","8º Ano","9º Ano","1º Ano EM","2º Ano EM","3º Ano EM"],h=async F=>{if(F.preventDefault(),S(""),A(!0),!r||!a||!l||!d){S("Por favor, preencha todos os campos obrigatórios."),A(!1);return}if(s==="student"&&!u){S("Por favor, selecione sua série."),A(!1);return}if(s==="student"){if(!x){S("Por favor, insira o token de registro."),A(!1);return}if(!k){S("Por favor, insira um token válido."),A(!1);return}}if(l!==d){S("As senhas não coincidem."),A(!1);return}try{const q=await e({name:r,email:a,password:l,role:s,gradeId:s==="student"?u:void 0,token:x.trim()||void 0});q.success?s==="student"?t("home"):s==="parent"?t("parent-dashboard"):s==="school"&&t("school-dashboard"):S(q.message)}catch(q){S("Ocorreu um erro inesperado. Tente novamente."),console.error("Erro no registro:",q)}finally{A(!1)}},b=async F=>{if(!F.trim()){C(null);return}try{v(!0),S("");const q=await ue(`/registration-tokens/validate/${F}`);C(q)}catch{C(null),S("Token inválido ou expirado")}finally{v(!1)}},N=F=>{const q=F.target.value;if(E(q),q.trim()){const _=setTimeout(()=>b(q),1e3);return()=>clearTimeout(_)}else C(null),S("")},y=()=>{x.trim()&&b(x)},P=F=>{switch(F){case"student":return"Aluno";case"parent":return"Pai/Responsável";case"school":return"Escola";default:return""}};return n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen auth-background-teal p-4 animate-fadeIn",children:[n.jsxs("h2",{className:"text-4xl font-bold text-white mb-6 text-center",children:["Registrar como ",n.jsx("span",{className:"font-yufin",children:P(s)})]}),s==="student"&&n.jsx("div",{className:"bg-white bg-opacity-90 rounded-lg p-4 mb-6 max-w-sm text-center border border-white border-opacity-50 shadow-lg",children:n.jsxs("p",{className:"text-gray-800 text-sm font-medium",children:[n.jsx("strong",{children:"🔑 Token Obrigatório:"})," Para se registrar como aluno, você precisa de um token gerado pela sua escola ou responsável."]})}),n.jsxs("form",{onSubmit:h,className:"bg-white p-8 lg:p-10 xl:p-12 rounded-xl shadow-lg w-full max-w-sm lg:max-w-md xl:max-w-lg flex flex-col space-y-4 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("input",{type:"text",id:"name-register",name:"name",placeholder:"Nome completo",value:r,onChange:F=>o(F.target.value),className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:T,autoComplete:"name"}),n.jsx("input",{type:"email",id:"email-register",name:"email",placeholder:"E-mail",value:a,onChange:F=>i(F.target.value),className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:T,autoComplete:"email"}),s==="student"&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"text",id:"token-register",name:"token",placeholder:"Token de registro",value:x,onChange:N,onBlur:y,className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:T}),p&&n.jsxs("div",{className:"flex items-center text-blue-600 text-sm -mt-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Validando token..."]}),k&&!p&&n.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md -mt-2",children:[n.jsxs("div",{className:"flex items-center text-green-700 text-sm",children:[n.jsx("span",{className:"mr-2",children:"✅"}),n.jsx("span",{className:"font-medium",children:"Token válido!"})]}),n.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[k.type==="school"?"🏫 Escola":"👨‍👩‍👧‍👦 Responsável",": ",((w=k.metadata)==null?void 0:w.description)||"Registro autorizado",((L=k.metadata)==null?void 0:L.grade)&&n.jsxs("div",{children:["Série sugerida: ",k.metadata.grade]})]})]})]}),s==="student"&&n.jsxs("select",{id:"grade-register",name:"gradeId",value:u,onChange:F=>g(F.target.value),className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-gray-500 placeholder-gray-400",required:!0,disabled:T,style:{color:u?"#6B7280":"#9CA3AF"},children:[n.jsx("option",{value:"",disabled:!0,className:"text-gray-400",children:"Selecione sua série"}),M.map(F=>n.jsx("option",{value:F,className:"text-gray-700",children:F},F))]}),n.jsx("input",{type:"password",id:"password-register",name:"password",placeholder:"Senha",value:l,onChange:F=>c(F.target.value),className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:T,autoComplete:"new-password"}),n.jsx("input",{type:"password",id:"confirm-password-register",name:"confirmPassword",placeholder:"Confirmar senha",value:d,onChange:F=>m(F.target.value),className:"p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:T,autoComplete:"new-password"}),f&&n.jsx("p",{className:"text-red-500 text-sm",children:f}),n.jsxs("button",{type:"submit",className:"text-white font-bold py-3 px-6 rounded-xl shadow-md hover:opacity-90 transition-all duration-300 text-lg flex items-center justify-center relative",style:{backgroundColor:"rgb(238, 145, 22)"},disabled:T,children:[T&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsxs("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),n.jsx("span",{className:`${T?"opacity-0":"opacity-100"} transition-opacity duration-300`,children:"Registrar"})]})]}),n.jsx("button",{onClick:()=>t("welcome"),className:"mt-6 text-white text-md hover:underline transition-colors duration-300",disabled:T,children:"Voltar"}),n.jsx("button",{onClick:()=>t(`login-${s}`),className:"mt-2 text-white text-md hover:underline transition-colors duration-300",disabled:T,children:"Já tem conta? Faça login aqui!"})]})},i0=({token:e,onSuccess:t,onCancel:s})=>{var x,E;const[r,o]=j.useState(null),[a,i]=j.useState(!0),[l,c]=j.useState(""),[d,m]=j.useState({name:"",email:"",password:"",confirmPassword:""});j.useEffect(()=>{u()},[e]);const u=async()=>{try{i(!0);const k=await ue(`/registration-tokens/${e}`);o(k)}catch{c("Token inválido ou expirado")}finally{i(!1)}},g=async k=>{var C,p,v;if(k.preventDefault(),c(""),!d.name||!d.email||!d.password||!d.confirmPassword){c("Por favor, preencha todos os campos.");return}if(d.password!==d.confirmPassword){c("As senhas não coincidem.");return}if(d.password.length<6){c("A senha deve ter pelo menos 6 caracteres.");return}try{i(!0);const f=await _e("/register-with-token",{token:e,userData:{name:d.name,email:d.email,password:d.password,role:"student",gradeId:((C=r==null?void 0:r.metadata)==null?void 0:C.grade)||""}});t(f.user)}catch(f){c(((v=(p=f.response)==null?void 0:p.data)==null?void 0:v.error)||"Erro ao registrar usuário")}finally{i(!1)}};return a&&!r?n.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-teal to-blue p-4",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-sm text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Validando token..."})]})}):l&&!r?n.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-teal to-blue p-4",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-sm text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:"❌"}),n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Token Inválido"}),n.jsx("p",{className:"text-gray-600 mb-4",children:l}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition",children:"Voltar"})]})}):n.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-teal to-blue p-4",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-sm",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Registro de Aluno"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Token válido para: ",((x=r==null?void 0:r.metadata)==null?void 0:x.description)||"Registro de aluno"]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(r==null?void 0:r.type)==="school"?"🏫 Escola (B2B)":"👨‍👩‍👧‍👦 Responsável (B2C)"}),((E=r==null?void 0:r.metadata)==null?void 0:E.grade)&&n.jsxs("p",{className:"text-sm text-primary font-medium mt-1",children:["Série sugerida: ",r.metadata.grade]})]}),n.jsxs("form",{onSubmit:g,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),n.jsx("input",{type:"text",value:d.name,onChange:k=>m({...d,name:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Digite seu nome completo",required:!0,disabled:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsx("input",{type:"email",value:d.email,onChange:k=>m({...d,email:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Digite seu email",required:!0,disabled:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha"}),n.jsx("input",{type:"password",value:d.password,onChange:k=>m({...d,password:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Digite sua senha",required:!0,disabled:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar Senha"}),n.jsx("input",{type:"password",value:d.confirmPassword,onChange:k=>m({...d,confirmPassword:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Confirme sua senha",required:!0,disabled:a})]}),l&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:n.jsx("p",{className:"text-red-600 text-sm",children:l})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-primary text-white py-3 rounded-lg font-semibold hover:bg-primary-dark transition disabled:opacity-50",children:a?"Registrando...":"Registrar"}),n.jsx("button",{type:"button",onClick:s,disabled:a,className:"px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition disabled:opacity-50",children:"Cancelar"})]})]}),n.jsxs("div",{className:"mt-6 p-3 bg-blue-50 rounded-lg",children:[n.jsx("p",{className:"text-sm text-blue-700",children:n.jsx("strong",{children:"Informações do token:"})}),n.jsxs("ul",{className:"text-xs text-blue-600 mt-1 space-y-1",children:[n.jsxs("li",{children:["• Tipo: ",(r==null?void 0:r.type)==="school"?"Escola":"Responsável"]}),n.jsxs("li",{children:["• Usos: ",r==null?void 0:r.usedCount,"/",(r==null?void 0:r.maxUses)||"∞"]}),(r==null?void 0:r.expiresAt)&&n.jsxs("li",{children:["• Expira em: ",new Date(r.expiresAt).toLocaleDateString("pt-BR")]})]})]})]})})},ch=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),aa=j.createContext({}),sc=j.createContext(null),ia=typeof document<"u",l0=ia?j.useLayoutEffect:j.useEffect,dh=j.createContext({strict:!1}),nc=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c0="framerAppearId",uh="data-"+nc(c0);function d0(e,t,s,r){const{visualElement:o}=j.useContext(aa),a=j.useContext(dh),i=j.useContext(sc),l=j.useContext(ch).reducedMotion,c=j.useRef();r=r||a.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:o,props:s,presenceContext:i,blockInitialAnimation:i?i.initial===!1:!1,reducedMotionConfig:l}));const d=c.current;j.useInsertionEffect(()=>{d&&d.update(s,i)});const m=j.useRef(!!(s[uh]&&!window.HandoffComplete));return l0(()=>{d&&(d.render(),m.current&&d.animationState&&d.animationState.animateChanges())}),j.useEffect(()=>{d&&(d.updateFeatures(),!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),d}function Js(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function u0(e,t,s){return j.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),s&&(typeof s=="function"?s(r):Js(s)&&(s.current=r))},[t])}function fr(e){return typeof e=="string"||Array.isArray(e)}function la(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const rc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],oc=["initial",...rc];function ca(e){return la(e.animate)||oc.some(t=>fr(e[t]))}function mh(e){return!!(ca(e)||e.variants)}function m0(e,t){if(ca(e)){const{initial:s,animate:r}=e;return{initial:s===!1||fr(s)?s:void 0,animate:fr(r)?r:void 0}}return e.inherit!==!1?t:{}}function f0(e){const{initial:t,animate:s}=m0(e,j.useContext(aa));return j.useMemo(()=>({initial:t,animate:s}),[Dd(t),Dd(s)])}function Dd(e){return Array.isArray(e)?e.join(" "):e}const Ld={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},hr={};for(const e in Ld)hr[e]={isEnabled:t=>Ld[e].some(s=>!!t[s])};function h0(e){for(const t in e)hr[t]={...hr[t],...e[t]}}const fh=j.createContext({}),hh=j.createContext({}),p0=Symbol.for("motionComponentSymbol");function g0({preloadedFeatures:e,createVisualElement:t,useRender:s,useVisualState:r,Component:o}){e&&h0(e);function a(l,c){let d;const m={...j.useContext(ch),...l,layoutId:x0(l)},{isStatic:u}=m,g=f0(l),x=r(l,u);if(!u&&ia){g.visualElement=d0(o,x,m,t);const E=j.useContext(hh),k=j.useContext(dh).strict;g.visualElement&&(d=g.visualElement.loadFeatures(m,k,e,E))}return j.createElement(aa.Provider,{value:g},d&&g.visualElement?j.createElement(d,{visualElement:g.visualElement,...m}):null,s(o,l,u0(x,g.visualElement,c),x,u,g.visualElement))}const i=j.forwardRef(a);return i[p0]=o,i}function x0({layoutId:e}){const t=j.useContext(fh).id;return t&&e!==void 0?t+"-"+e:e}function v0(e){function t(r,o={}){return g0(e(r,o))}if(typeof Proxy>"u")return t;const s=new Map;return new Proxy(t,{get:(r,o)=>(s.has(o)||s.set(o,t(o)),s.get(o))})}const y0=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ac(e){return typeof e!="string"||e.includes("-")?!1:!!(y0.indexOf(e)>-1||/[A-Z]/.test(e))}const Ro={};function b0(e){Object.assign(Ro,e)}const Nr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vs=new Set(Nr);function ph(e,{layout:t,layoutId:s}){return Vs.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!Ro[e]||e==="opacity")}const Ze=e=>!!(e&&e.getVelocity),j0={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},N0=Nr.length;function w0(e,{enableHardwareAcceleration:t=!0,allowTransformNone:s=!0},r,o){let a="";for(let i=0;i<N0;i++){const l=Nr[i];if(e[l]!==void 0){const c=j0[l]||l;a+=`${c}(${e[l]}) `}}return t&&!e.z&&(a+="translateZ(0)"),a=a.trim(),o?a=o(e,r?"":a):s&&r&&(a="none"),a}const gh=e=>t=>typeof t=="string"&&t.startsWith(e),xh=gh("--"),Qi=gh("var(--"),S0=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,C0=(e,t)=>t&&typeof e=="number"?t.transform(e):e,fs=(e,t,s)=>Math.min(Math.max(s,e),t),Os={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Hn={...Os,transform:e=>fs(0,1,e)},qr={...Os,default:1},Wn=e=>Math.round(e*1e5)/1e5,da=/(-)?([\d]*\.?[\d])+/g,vh=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,k0=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function wr(e){return typeof e=="string"}const Sr=e=>({test:t=>wr(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Gt=Sr("deg"),Tt=Sr("%"),re=Sr("px"),P0=Sr("vh"),E0=Sr("vw"),Rd={...Tt,parse:e=>Tt.parse(e)/100,transform:e=>Tt.transform(e*100)},Id={...Os,transform:Math.round},yh={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,size:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,rotate:Gt,rotateX:Gt,rotateY:Gt,rotateZ:Gt,scale:qr,scaleX:qr,scaleY:qr,scaleZ:qr,skew:Gt,skewX:Gt,skewY:Gt,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:Hn,originX:Rd,originY:Rd,originZ:re,zIndex:Id,fillOpacity:Hn,strokeOpacity:Hn,numOctaves:Id};function ic(e,t,s,r){const{style:o,vars:a,transform:i,transformOrigin:l}=e;let c=!1,d=!1,m=!0;for(const u in t){const g=t[u];if(xh(u)){a[u]=g;continue}const x=yh[u],E=C0(g,x);if(Vs.has(u)){if(c=!0,i[u]=E,!m)continue;g!==(x.default||0)&&(m=!1)}else u.startsWith("origin")?(d=!0,l[u]=E):o[u]=E}if(t.transform||(c||r?o.transform=w0(e.transform,s,m,r):o.transform&&(o.transform="none")),d){const{originX:u="50%",originY:g="50%",originZ:x=0}=l;o.transformOrigin=`${u} ${g} ${x}`}}const lc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bh(e,t,s){for(const r in t)!Ze(t[r])&&!ph(r,s)&&(e[r]=t[r])}function T0({transformTemplate:e},t,s){return j.useMemo(()=>{const r=lc();return ic(r,t,{enableHardwareAcceleration:!s},e),Object.assign({},r.vars,r.style)},[t])}function A0(e,t,s){const r=e.style||{},o={};return bh(o,r,e),Object.assign(o,T0(e,t,s)),e.transformValues?e.transformValues(o):o}function M0(e,t,s){const r={},o=A0(e,t,s);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=o,r}const D0=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Io(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||D0.has(e)}let jh=e=>!Io(e);function L0(e){e&&(jh=t=>t.startsWith("on")?!Io(t):e(t))}try{L0(require("@emotion/is-prop-valid").default)}catch{}function R0(e,t,s){const r={};for(const o in e)o==="values"&&typeof e.values=="object"||(jh(o)||s===!0&&Io(o)||!t&&!Io(o)||e.draggable&&o.startsWith("onDrag"))&&(r[o]=e[o]);return r}function Fd(e,t,s){return typeof e=="string"?e:re.transform(t+s*e)}function I0(e,t,s){const r=Fd(t,e.x,e.width),o=Fd(s,e.y,e.height);return`${r} ${o}`}const F0={offset:"stroke-dashoffset",array:"stroke-dasharray"},$0={offset:"strokeDashoffset",array:"strokeDasharray"};function V0(e,t,s=1,r=0,o=!0){e.pathLength=1;const a=o?F0:$0;e[a.offset]=re.transform(-r);const i=re.transform(t),l=re.transform(s);e[a.array]=`${i} ${l}`}function cc(e,{attrX:t,attrY:s,attrScale:r,originX:o,originY:a,pathLength:i,pathSpacing:l=1,pathOffset:c=0,...d},m,u,g){if(ic(e,d,m,g),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:x,style:E,dimensions:k}=e;x.transform&&(k&&(E.transform=x.transform),delete x.transform),k&&(o!==void 0||a!==void 0||E.transform)&&(E.transformOrigin=I0(k,o!==void 0?o:.5,a!==void 0?a:.5)),t!==void 0&&(x.x=t),s!==void 0&&(x.y=s),r!==void 0&&(x.scale=r),i!==void 0&&V0(x,i,l,c,!1)}const Nh=()=>({...lc(),attrs:{}}),dc=e=>typeof e=="string"&&e.toLowerCase()==="svg";function O0(e,t,s,r){const o=j.useMemo(()=>{const a=Nh();return cc(a,t,{enableHardwareAcceleration:!1},dc(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};bh(a,e.style,e),o.style={...a,...o.style}}return o}function _0(e=!1){return(s,r,o,{latestValues:a},i)=>{const c=(ac(s)?O0:M0)(r,a,i,s),m={...R0(r,typeof s=="string",e),...c,ref:o},{children:u}=r,g=j.useMemo(()=>Ze(u)?u.get():u,[u]);return j.createElement(s,{...m,children:g})}}function wh(e,{style:t,vars:s},r,o){Object.assign(e.style,t,o&&o.getProjectionStyles(r));for(const a in s)e.style.setProperty(a,s[a])}const Sh=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ch(e,t,s,r){wh(e,t,void 0,r);for(const o in t.attrs)e.setAttribute(Sh.has(o)?o:nc(o),t.attrs[o])}function uc(e,t){const{style:s}=e,r={};for(const o in s)(Ze(s[o])||t.style&&Ze(t.style[o])||ph(o,e))&&(r[o]=s[o]);return r}function kh(e,t){const s=uc(e,t);for(const r in e)if(Ze(e[r])||Ze(t[r])){const o=Nr.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[o]=e[r]}return s}function mc(e,t,s,r={},o={}){return typeof t=="function"&&(t=t(s!==void 0?s:e.custom,r,o)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(s!==void 0?s:e.custom,r,o)),t}function z0(e){const t=j.useRef(null);return t.current===null&&(t.current=e()),t.current}const Fo=e=>Array.isArray(e),B0=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),U0=e=>Fo(e)?e[e.length-1]||0:e;function io(e){const t=Ze(e)?e.get():e;return B0(t)?t.toValue():t}function q0({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:s},r,o,a){const i={latestValues:G0(r,o,a,e),renderState:t()};return s&&(i.mount=l=>s(r,l,i)),i}const Ph=e=>(t,s)=>{const r=j.useContext(aa),o=j.useContext(sc),a=()=>q0(e,t,r,o);return s?a():z0(a)};function G0(e,t,s,r){const o={},a=r(e,{});for(const g in a)o[g]=io(a[g]);let{initial:i,animate:l}=e;const c=ca(e),d=mh(e);t&&d&&!c&&e.inherit!==!1&&(i===void 0&&(i=t.initial),l===void 0&&(l=t.animate));let m=s?s.initial===!1:!1;m=m||i===!1;const u=m?l:i;return u&&typeof u!="boolean"&&!la(u)&&(Array.isArray(u)?u:[u]).forEach(x=>{const E=mc(e,x);if(!E)return;const{transitionEnd:k,transition:C,...p}=E;for(const v in p){let f=p[v];if(Array.isArray(f)){const S=m?f.length-1:0;f=f[S]}f!==null&&(o[v]=f)}for(const v in k)o[v]=k[v]}),o}const Ce=e=>e;class $d{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const s=this.order.indexOf(t);s!==-1&&(this.order.splice(s,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function H0(e){let t=new $d,s=new $d,r=0,o=!1,a=!1;const i=new WeakSet,l={schedule:(c,d=!1,m=!1)=>{const u=m&&o,g=u?t:s;return d&&i.add(c),g.add(c)&&u&&o&&(r=t.order.length),c},cancel:c=>{s.remove(c),i.delete(c)},process:c=>{if(o){a=!0;return}if(o=!0,[t,s]=[s,t],s.clear(),r=t.order.length,r)for(let d=0;d<r;d++){const m=t.order[d];m(c),i.has(m)&&(l.schedule(m),e())}o=!1,a&&(a=!1,l.process(c))}};return l}const Gr=["prepare","read","update","preRender","render","postRender"],W0=40;function X0(e,t){let s=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=Gr.reduce((u,g)=>(u[g]=H0(()=>s=!0),u),{}),i=u=>a[u].process(o),l=()=>{const u=performance.now();s=!1,o.delta=r?1e3/60:Math.max(Math.min(u-o.timestamp,W0),1),o.timestamp=u,o.isProcessing=!0,Gr.forEach(i),o.isProcessing=!1,s&&t&&(r=!1,e(l))},c=()=>{s=!0,r=!0,o.isProcessing||e(l)};return{schedule:Gr.reduce((u,g)=>{const x=a[g];return u[g]=(E,k=!1,C=!1)=>(s||c(),x.schedule(E,k,C)),u},{}),cancel:u=>Gr.forEach(g=>a[g].cancel(u)),state:o,steps:a}}const{schedule:ge,cancel:Bt,state:Ve,steps:Ua}=X0(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ce,!0),Q0={useVisualState:Ph({scrapeMotionValuesFromProps:kh,createRenderState:Nh,onMount:(e,t,{renderState:s,latestValues:r})=>{ge.read(()=>{try{s.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}),ge.render(()=>{cc(s,r,{enableHardwareAcceleration:!1},dc(t.tagName),e.transformTemplate),Ch(t,s)})}})},Y0={useVisualState:Ph({scrapeMotionValuesFromProps:uc,createRenderState:lc})};function K0(e,{forwardMotionProps:t=!1},s,r){return{...ac(e)?Q0:Y0,preloadedFeatures:s,useRender:_0(t),createVisualElement:r,Component:e}}function Rt(e,t,s,r={passive:!0}){return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s)}const Eh=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function ua(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const Z0=e=>t=>Eh(t)&&e(t,ua(t));function Ft(e,t,s,r){return Rt(e,t,Z0(s),r)}const J0=(e,t)=>s=>t(e(s)),cs=(...e)=>e.reduce(J0);function Th(e){let t=null;return()=>{const s=()=>{t=null};return t===null?(t=e,s):!1}}const Vd=Th("dragHorizontal"),Od=Th("dragVertical");function Ah(e){let t=!1;if(e==="y")t=Od();else if(e==="x")t=Vd();else{const s=Vd(),r=Od();s&&r?t=()=>{s(),r()}:(s&&s(),r&&r())}return t}function Mh(){const e=Ah(!0);return e?(e(),!1):!0}class vs{constructor(t){this.isMounted=!1,this.node=t}update(){}}function _d(e,t){const s="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),o=(a,i)=>{if(a.pointerType==="touch"||Mh())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[r]&&ge.update(()=>l[r](a,i))};return Ft(e.current,s,o,{passive:!e.getProps()[r]})}class ev extends vs{mount(){this.unmount=cs(_d(this.node,!0),_d(this.node,!1))}unmount(){}}class tv extends vs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cs(Rt(this.node.current,"focus",()=>this.onFocus()),Rt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Dh=(e,t)=>t?e===t?!0:Dh(e,t.parentElement):!1;function qa(e,t){if(!t)return;const s=new PointerEvent("pointer"+e);t(s,ua(s))}class sv extends vs{constructor(){super(...arguments),this.removeStartListeners=Ce,this.removeEndListeners=Ce,this.removeAccessibleListeners=Ce,this.startPointerPress=(t,s)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),a=Ft(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:m,globalTapTarget:u}=this.node.getProps();ge.update(()=>{!u&&!Dh(this.node.current,l.target)?m&&m(l,c):d&&d(l,c)})},{passive:!(r.onTap||r.onPointerUp)}),i=Ft(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=cs(a,i),this.startPress(t,s)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const i=l=>{l.key!=="Enter"||!this.checkPressEnd()||qa("up",(c,d)=>{const{onTap:m}=this.node.getProps();m&&ge.update(()=>m(c,d))})};this.removeEndListeners(),this.removeEndListeners=Rt(this.node.current,"keyup",i),qa("down",(l,c)=>{this.startPress(l,c)})},s=Rt(this.node.current,"keydown",t),r=()=>{this.isPressing&&qa("cancel",(a,i)=>this.cancelPress(a,i))},o=Rt(this.node.current,"blur",r);this.removeAccessibleListeners=cs(s,o)}}startPress(t,s){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&ge.update(()=>r(t,s))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Mh()}cancelPress(t,s){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&ge.update(()=>r(t,s))}mount(){const t=this.node.getProps(),s=Ft(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Rt(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=cs(s,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Yi=new WeakMap,Ga=new WeakMap,nv=e=>{const t=Yi.get(e.target);t&&t(e)},rv=e=>{e.forEach(nv)};function ov({root:e,...t}){const s=e||document;Ga.has(s)||Ga.set(s,{});const r=Ga.get(s),o=JSON.stringify(t);return r[o]||(r[o]=new IntersectionObserver(rv,{root:e,...t})),r[o]}function av(e,t,s){const r=ov(t);return Yi.set(e,s),r.observe(e),()=>{Yi.delete(e),r.unobserve(e)}}const iv={some:0,all:1};class lv extends vs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:r,amount:o="some",once:a}=t,i={root:s?s.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:iv[o]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:m,onViewportLeave:u}=this.node.getProps(),g=d?m:u;g&&g(c)};return av(this.node.current,i,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(cv(t,s))&&this.startObserver()}unmount(){}}function cv({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const dv={inView:{Feature:lv},tap:{Feature:sv},focus:{Feature:tv},hover:{Feature:ev}};function Lh(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let r=0;r<s;r++)if(t[r]!==e[r])return!1;return!0}function uv(e){const t={};return e.values.forEach((s,r)=>t[r]=s.get()),t}function mv(e){const t={};return e.values.forEach((s,r)=>t[r]=s.getVelocity()),t}function ma(e,t,s){const r=e.getProps();return mc(r,t,s!==void 0?s:r.custom,uv(e),mv(e))}let fc=Ce;const As=e=>e*1e3,$t=e=>e/1e3,fv={current:!1},Rh=e=>Array.isArray(e)&&typeof e[0]=="number";function Ih(e){return!!(!e||typeof e=="string"&&Fh[e]||Rh(e)||Array.isArray(e)&&e.every(Ih))}const Fn=([e,t,s,r])=>`cubic-bezier(${e}, ${t}, ${s}, ${r})`,Fh={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fn([0,.65,.55,1]),circOut:Fn([.55,0,1,.45]),backIn:Fn([.31,.01,.66,-.59]),backOut:Fn([.33,1.53,.69,.99])};function $h(e){if(e)return Rh(e)?Fn(e):Array.isArray(e)?e.map($h):Fh[e]}function hv(e,t,s,{delay:r=0,duration:o,repeat:a=0,repeatType:i="loop",ease:l,times:c}={}){const d={[t]:s};c&&(d.offset=c);const m=$h(l);return Array.isArray(m)&&(d.easing=m),e.animate(d,{delay:r,duration:o,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"})}function pv(e,{repeat:t,repeatType:s="loop"}){const r=t&&s!=="loop"&&t%2===1?0:e.length-1;return e[r]}const Vh=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,gv=1e-7,xv=12;function vv(e,t,s,r,o){let a,i,l=0;do i=t+(s-t)/2,a=Vh(i,r,o)-e,a>0?s=i:t=i;while(Math.abs(a)>gv&&++l<xv);return i}function Cr(e,t,s,r){if(e===t&&s===r)return Ce;const o=a=>vv(a,0,1,e,s);return a=>a===0||a===1?a:Vh(o(a),t,r)}const yv=Cr(.42,0,1,1),bv=Cr(0,0,.58,1),Oh=Cr(.42,0,.58,1),jv=e=>Array.isArray(e)&&typeof e[0]!="number",_h=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,zh=e=>t=>1-e(1-t),hc=e=>1-Math.sin(Math.acos(e)),Bh=zh(hc),Nv=_h(hc),Uh=Cr(.33,1.53,.69,.99),pc=zh(Uh),wv=_h(pc),Sv=e=>(e*=2)<1?.5*pc(e):.5*(2-Math.pow(2,-10*(e-1))),Cv={linear:Ce,easeIn:yv,easeInOut:Oh,easeOut:bv,circIn:hc,circInOut:Nv,circOut:Bh,backIn:pc,backInOut:wv,backOut:Uh,anticipate:Sv},zd=e=>{if(Array.isArray(e)){fc(e.length===4);const[t,s,r,o]=e;return Cr(t,s,r,o)}else if(typeof e=="string")return Cv[e];return e},gc=(e,t)=>s=>!!(wr(s)&&k0.test(s)&&s.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(s,t)),qh=(e,t,s)=>r=>{if(!wr(r))return r;const[o,a,i,l]=r.match(da);return{[e]:parseFloat(o),[t]:parseFloat(a),[s]:parseFloat(i),alpha:l!==void 0?parseFloat(l):1}},kv=e=>fs(0,255,e),Ha={...Os,transform:e=>Math.round(kv(e))},Ps={test:gc("rgb","red"),parse:qh("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:r=1})=>"rgba("+Ha.transform(e)+", "+Ha.transform(t)+", "+Ha.transform(s)+", "+Wn(Hn.transform(r))+")"};function Pv(e){let t="",s="",r="",o="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),r=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),r=e.substring(3,4),o=e.substring(4,5),t+=t,s+=s,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const Ki={test:gc("#"),parse:Pv,transform:Ps.transform},en={test:gc("hsl","hue"),parse:qh("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:r=1})=>"hsla("+Math.round(e)+", "+Tt.transform(Wn(t))+", "+Tt.transform(Wn(s))+", "+Wn(Hn.transform(r))+")"},Be={test:e=>Ps.test(e)||Ki.test(e)||en.test(e),parse:e=>Ps.test(e)?Ps.parse(e):en.test(e)?en.parse(e):Ki.parse(e),transform:e=>wr(e)?e:e.hasOwnProperty("red")?Ps.transform(e):en.transform(e)},ye=(e,t,s)=>-s*e+s*t+e;function Wa(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function Ev({hue:e,saturation:t,lightness:s,alpha:r}){e/=360,t/=100,s/=100;let o=0,a=0,i=0;if(!t)o=a=i=s;else{const l=s<.5?s*(1+t):s+t-s*t,c=2*s-l;o=Wa(c,l,e+1/3),a=Wa(c,l,e),i=Wa(c,l,e-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:r}}const Xa=(e,t,s)=>{const r=e*e;return Math.sqrt(Math.max(0,s*(t*t-r)+r))},Tv=[Ki,Ps,en],Av=e=>Tv.find(t=>t.test(e));function Bd(e){const t=Av(e);let s=t.parse(e);return t===en&&(s=Ev(s)),s}const Gh=(e,t)=>{const s=Bd(e),r=Bd(t),o={...s};return a=>(o.red=Xa(s.red,r.red,a),o.green=Xa(s.green,r.green,a),o.blue=Xa(s.blue,r.blue,a),o.alpha=ye(s.alpha,r.alpha,a),Ps.transform(o))};function Mv(e){var t,s;return isNaN(e)&&wr(e)&&(((t=e.match(da))===null||t===void 0?void 0:t.length)||0)+(((s=e.match(vh))===null||s===void 0?void 0:s.length)||0)>0}const Hh={regex:S0,countKey:"Vars",token:"${v}",parse:Ce},Wh={regex:vh,countKey:"Colors",token:"${c}",parse:Be.parse},Xh={regex:da,countKey:"Numbers",token:"${n}",parse:Os.parse};function Qa(e,{regex:t,countKey:s,token:r,parse:o}){const a=e.tokenised.match(t);a&&(e["num"+s]=a.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...a.map(o)))}function $o(e){const t=e.toString(),s={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&Qa(s,Hh),Qa(s,Wh),Qa(s,Xh),s}function Qh(e){return $o(e).values}function Yh(e){const{values:t,numColors:s,numVars:r,tokenised:o}=$o(e),a=t.length;return i=>{let l=o;for(let c=0;c<a;c++)c<r?l=l.replace(Hh.token,i[c]):c<r+s?l=l.replace(Wh.token,Be.transform(i[c])):l=l.replace(Xh.token,Wn(i[c]));return l}}const Dv=e=>typeof e=="number"?0:e;function Lv(e){const t=Qh(e);return Yh(e)(t.map(Dv))}const hs={test:Mv,parse:Qh,createTransformer:Yh,getAnimatableNone:Lv},Kh=(e,t)=>s=>`${s>0?t:e}`;function Zh(e,t){return typeof e=="number"?s=>ye(e,t,s):Be.test(e)?Gh(e,t):e.startsWith("var(")?Kh(e,t):ep(e,t)}const Jh=(e,t)=>{const s=[...e],r=s.length,o=e.map((a,i)=>Zh(a,t[i]));return a=>{for(let i=0;i<r;i++)s[i]=o[i](a);return s}},Rv=(e,t)=>{const s={...e,...t},r={};for(const o in s)e[o]!==void 0&&t[o]!==void 0&&(r[o]=Zh(e[o],t[o]));return o=>{for(const a in r)s[a]=r[a](o);return s}},ep=(e,t)=>{const s=hs.createTransformer(t),r=$o(e),o=$o(t);return r.numVars===o.numVars&&r.numColors===o.numColors&&r.numNumbers>=o.numNumbers?cs(Jh(r.values,o.values),s):Kh(e,t)},pr=(e,t,s)=>{const r=t-e;return r===0?1:(s-e)/r},Ud=(e,t)=>s=>ye(e,t,s);function Iv(e){return typeof e=="number"?Ud:typeof e=="string"?Be.test(e)?Gh:ep:Array.isArray(e)?Jh:typeof e=="object"?Rv:Ud}function Fv(e,t,s){const r=[],o=s||Iv(e[0]),a=e.length-1;for(let i=0;i<a;i++){let l=o(e[i],e[i+1]);if(t){const c=Array.isArray(t)?t[i]||Ce:t;l=cs(c,l)}r.push(l)}return r}function tp(e,t,{clamp:s=!0,ease:r,mixer:o}={}){const a=e.length;if(fc(a===t.length),a===1)return()=>t[0];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=Fv(t,r,o),l=i.length,c=d=>{let m=0;if(l>1)for(;m<e.length-2&&!(d<e[m+1]);m++);const u=pr(e[m],e[m+1],d);return i[m](u)};return s?d=>c(fs(e[0],e[a-1],d)):c}function $v(e,t){const s=e[e.length-1];for(let r=1;r<=t;r++){const o=pr(0,t,r);e.push(ye(s,1,o))}}function Vv(e){const t=[0];return $v(t,e.length-1),t}function Ov(e,t){return e.map(s=>s*t)}function _v(e,t){return e.map(()=>t||Oh).splice(0,e.length-1)}function Vo({duration:e=300,keyframes:t,times:s,ease:r="easeInOut"}){const o=jv(r)?r.map(zd):zd(r),a={done:!1,value:t[0]},i=Ov(s&&s.length===t.length?s:Vv(t),e),l=tp(i,t,{ease:Array.isArray(o)?o:_v(t,o)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}function sp(e,t){return t?e*(1e3/t):0}const zv=5;function np(e,t,s){const r=Math.max(t-zv,0);return sp(s-e(r),t-r)}const Ya=.001,Bv=.01,Uv=10,qv=.05,Gv=1;function Hv({duration:e=800,bounce:t=.25,velocity:s=0,mass:r=1}){let o,a,i=1-t;i=fs(qv,Gv,i),e=fs(Bv,Uv,$t(e)),i<1?(o=d=>{const m=d*i,u=m*e,g=m-s,x=Zi(d,i),E=Math.exp(-u);return Ya-g/x*E},a=d=>{const u=d*i*e,g=u*s+s,x=Math.pow(i,2)*Math.pow(d,2)*e,E=Math.exp(-u),k=Zi(Math.pow(d,2),i);return(-o(d)+Ya>0?-1:1)*((g-x)*E)/k}):(o=d=>{const m=Math.exp(-d*e),u=(d-s)*e+1;return-Ya+m*u},a=d=>{const m=Math.exp(-d*e),u=(s-d)*(e*e);return m*u});const l=5/e,c=Xv(o,a,l);if(e=As(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:i*2*Math.sqrt(r*d),duration:e}}}const Wv=12;function Xv(e,t,s){let r=s;for(let o=1;o<Wv;o++)r=r-e(r)/t(r);return r}function Zi(e,t){return e*Math.sqrt(1-t*t)}const Qv=["duration","bounce"],Yv=["stiffness","damping","mass"];function qd(e,t){return t.some(s=>e[s]!==void 0)}function Kv(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!qd(e,Yv)&&qd(e,Qv)){const s=Hv(e);t={...t,...s,mass:1},t.isResolvedFromDuration=!0}return t}function rp({keyframes:e,restDelta:t,restSpeed:s,...r}){const o=e[0],a=e[e.length-1],i={done:!1,value:o},{stiffness:l,damping:c,mass:d,duration:m,velocity:u,isResolvedFromDuration:g}=Kv({...r,velocity:-$t(r.velocity||0)}),x=u||0,E=c/(2*Math.sqrt(l*d)),k=a-o,C=$t(Math.sqrt(l/d)),p=Math.abs(k)<5;s||(s=p?.01:2),t||(t=p?.005:.5);let v;if(E<1){const f=Zi(C,E);v=S=>{const T=Math.exp(-E*C*S);return a-T*((x+E*C*k)/f*Math.sin(f*S)+k*Math.cos(f*S))}}else if(E===1)v=f=>a-Math.exp(-C*f)*(k+(x+C*k)*f);else{const f=C*Math.sqrt(E*E-1);v=S=>{const T=Math.exp(-E*C*S),A=Math.min(f*S,300);return a-T*((x+E*C*k)*Math.sinh(A)+f*k*Math.cosh(A))/f}}return{calculatedDuration:g&&m||null,next:f=>{const S=v(f);if(g)i.done=f>=m;else{let T=x;f!==0&&(E<1?T=np(v,f,S):T=0);const A=Math.abs(T)<=s,M=Math.abs(a-S)<=t;i.done=A&&M}return i.value=i.done?a:S,i}}}function Gd({keyframes:e,velocity:t=0,power:s=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:i,min:l,max:c,restDelta:d=.5,restSpeed:m}){const u=e[0],g={done:!1,value:u},x=h=>l!==void 0&&h<l||c!==void 0&&h>c,E=h=>l===void 0?c:c===void 0||Math.abs(l-h)<Math.abs(c-h)?l:c;let k=s*t;const C=u+k,p=i===void 0?C:i(C);p!==C&&(k=p-u);const v=h=>-k*Math.exp(-h/r),f=h=>p+v(h),S=h=>{const b=v(h),N=f(h);g.done=Math.abs(b)<=d,g.value=g.done?p:N};let T,A;const M=h=>{x(g.value)&&(T=h,A=rp({keyframes:[g.value,E(g.value)],velocity:np(f,h,g.value),damping:o,stiffness:a,restDelta:d,restSpeed:m}))};return M(0),{calculatedDuration:null,next:h=>{let b=!1;return!A&&T===void 0&&(b=!0,S(h),M(h)),T!==void 0&&h>T?A.next(h-T):(!b&&S(h),g)}}}const Zv=e=>{const t=({timestamp:s})=>e(s);return{start:()=>ge.update(t,!0),stop:()=>Bt(t),now:()=>Ve.isProcessing?Ve.timestamp:performance.now()}},Hd=2e4;function Wd(e){let t=0;const s=50;let r=e.next(t);for(;!r.done&&t<Hd;)t+=s,r=e.next(t);return t>=Hd?1/0:t}const Jv={decay:Gd,inertia:Gd,tween:Vo,keyframes:Vo,spring:rp};function Oo({autoplay:e=!0,delay:t=0,driver:s=Zv,keyframes:r,type:o="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:l="loop",onPlay:c,onStop:d,onComplete:m,onUpdate:u,...g}){let x=1,E=!1,k,C;const p=()=>{C=new Promise($=>{k=$})};p();let v;const f=Jv[o]||Vo;let S;f!==Vo&&typeof r[0]!="number"&&(S=tp([0,100],r,{clamp:!1}),r=[0,100]);const T=f({...g,keyframes:r});let A;l==="mirror"&&(A=f({...g,keyframes:[...r].reverse(),velocity:-(g.velocity||0)}));let M="idle",h=null,b=null,N=null;T.calculatedDuration===null&&a&&(T.calculatedDuration=Wd(T));const{calculatedDuration:y}=T;let P=1/0,w=1/0;y!==null&&(P=y+i,w=P*(a+1)-i);let L=0;const F=$=>{if(b===null)return;x>0&&(b=Math.min(b,$)),x<0&&(b=Math.min($-w/x,b)),h!==null?L=h:L=Math.round($-b)*x;const D=L-t*(x>=0?1:-1),Q=x>=0?D<0:D>w;L=Math.max(D,0),M==="finished"&&h===null&&(L=w);let G=L,U=T;if(a){const se=Math.min(L,w)/P;let B=Math.floor(se),H=se%1;!H&&se>=1&&(H=1),H===1&&B--,B=Math.min(B,a+1),!!(B%2)&&(l==="reverse"?(H=1-H,i&&(H-=i/P)):l==="mirror"&&(U=A)),G=fs(0,1,H)*P}const W=Q?{done:!1,value:r[0]}:U.next(G);S&&(W.value=S(W.value));let{done:O}=W;!Q&&y!==null&&(O=x>=0?L>=w:L<=0);const Z=h===null&&(M==="finished"||M==="running"&&O);return u&&u(W.value),Z&&I(),W},q=()=>{v&&v.stop(),v=void 0},_=()=>{M="idle",q(),k(),p(),b=N=null},I=()=>{M="finished",m&&m(),q(),k()},R=()=>{if(E)return;v||(v=s(F));const $=v.now();c&&c(),h!==null?b=$-h:(!b||M==="finished")&&(b=$),M==="finished"&&p(),N=b,h=null,M="running",v.start()};e&&R();const V={then($,D){return C.then($,D)},get time(){return $t(L)},set time($){$=As($),L=$,h!==null||!v||x===0?h=$:b=v.now()-$/x},get duration(){const $=T.calculatedDuration===null?Wd(T):T.calculatedDuration;return $t($)},get speed(){return x},set speed($){$===x||!v||(x=$,V.time=$t(L))},get state(){return M},play:R,pause:()=>{M="paused",h=L},stop:()=>{E=!0,M!=="idle"&&(M="idle",d&&d(),_())},cancel:()=>{N!==null&&F(N),_()},complete:()=>{M="finished"},sample:$=>(b=0,F($))};return V}function ey(e){let t;return()=>(t===void 0&&(t=e()),t)}const ty=ey(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sy=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Hr=10,ny=2e4,ry=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Ih(t.ease);function oy(e,t,{onUpdate:s,onComplete:r,...o}){if(!(ty()&&sy.has(t)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let i=!1,l,c,d=!1;const m=()=>{c=new Promise(f=>{l=f})};m();let{keyframes:u,duration:g=300,ease:x,times:E}=o;if(ry(t,o)){const f=Oo({...o,repeat:0,delay:0});let S={done:!1,value:u[0]};const T=[];let A=0;for(;!S.done&&A<ny;)S=f.sample(A),T.push(S.value),A+=Hr;E=void 0,u=T,g=A-Hr,x="linear"}const k=hv(e.owner.current,t,u,{...o,duration:g,ease:x,times:E}),C=()=>{d=!1,k.cancel()},p=()=>{d=!0,ge.update(C),l(),m()};return k.onfinish=()=>{d||(e.set(pv(u,o)),r&&r(),p())},{then(f,S){return c.then(f,S)},attachTimeline(f){return k.timeline=f,k.onfinish=null,Ce},get time(){return $t(k.currentTime||0)},set time(f){k.currentTime=As(f)},get speed(){return k.playbackRate},set speed(f){k.playbackRate=f},get duration(){return $t(g)},play:()=>{i||(k.play(),Bt(C))},pause:()=>k.pause(),stop:()=>{if(i=!0,k.playState==="idle")return;const{currentTime:f}=k;if(f){const S=Oo({...o,autoplay:!1});e.setWithVelocity(S.sample(f-Hr).value,S.sample(f).value,Hr)}p()},complete:()=>{d||k.finish()},cancel:p}}function ay({keyframes:e,delay:t,onUpdate:s,onComplete:r}){const o=()=>(s&&s(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Ce,pause:Ce,stop:Ce,then:a=>(a(),Promise.resolve()),cancel:Ce,complete:Ce});return t?Oo({keyframes:[0,1],duration:0,delay:t,onComplete:o}):o()}const iy={type:"spring",stiffness:500,damping:25,restSpeed:10},ly=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),cy={type:"keyframes",duration:.8},dy={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uy=(e,{keyframes:t})=>t.length>2?cy:Vs.has(e)?e.startsWith("scale")?ly(t[1]):iy:dy,Ji=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(hs.test(t)||t==="0")&&!t.startsWith("url(")),my=new Set(["brightness","contrast","saturate","opacity"]);function fy(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=s.match(da)||[];if(!r)return e;const o=s.replace(r,"");let a=my.has(t)?1:0;return r!==s&&(a*=100),t+"("+a+o+")"}const hy=/([a-z-]*)\(.*?\)/g,el={...hs,getAnimatableNone:e=>{const t=e.match(hy);return t?t.map(fy).join(" "):e}},py={...yh,color:Be,backgroundColor:Be,outlineColor:Be,fill:Be,stroke:Be,borderColor:Be,borderTopColor:Be,borderRightColor:Be,borderBottomColor:Be,borderLeftColor:Be,filter:el,WebkitFilter:el},xc=e=>py[e];function op(e,t){let s=xc(e);return s!==el&&(s=hs),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const ap=e=>/^0[^.\s]+$/.test(e);function gy(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||ap(e)}function xy(e,t,s,r){const o=Ji(t,s);let a;Array.isArray(s)?a=[...s]:a=[null,s];const i=r.from!==void 0?r.from:e.get();let l;const c=[];for(let d=0;d<a.length;d++)a[d]===null&&(a[d]=d===0?i:a[d-1]),gy(a[d])&&c.push(d),typeof a[d]=="string"&&a[d]!=="none"&&a[d]!=="0"&&(l=a[d]);if(o&&c.length&&l)for(let d=0;d<c.length;d++){const m=c[d];a[m]=op(t,l)}return a}function vy({when:e,delay:t,delayChildren:s,staggerChildren:r,staggerDirection:o,repeat:a,repeatType:i,repeatDelay:l,from:c,elapsed:d,...m}){return!!Object.keys(m).length}function vc(e,t){return e[t]||e.default||e}const yy={skipAnimations:!1},yc=(e,t,s,r={})=>o=>{const a=vc(r,e)||{},i=a.delay||r.delay||0;let{elapsed:l=0}=r;l=l-As(i);const c=xy(t,e,s,a),d=c[0],m=c[c.length-1],u=Ji(e,d),g=Ji(e,m);let x={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...a,delay:-l,onUpdate:E=>{t.set(E),a.onUpdate&&a.onUpdate(E)},onComplete:()=>{o(),a.onComplete&&a.onComplete()}};if(vy(a)||(x={...x,...uy(e,x)}),x.duration&&(x.duration=As(x.duration)),x.repeatDelay&&(x.repeatDelay=As(x.repeatDelay)),!u||!g||fv.current||a.type===!1||yy.skipAnimations)return ay(x);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const E=oy(t,e,x);if(E)return E}return Oo(x)};function _o(e){return!!(Ze(e)&&e.add)}const ip=e=>/^\-?\d*\.?\d+$/.test(e);function bc(e,t){e.indexOf(t)===-1&&e.push(t)}function jc(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class Nc{constructor(){this.subscriptions=[]}add(t){return bc(this.subscriptions,t),()=>jc(this.subscriptions,t)}notify(t,s,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,s,r);else for(let a=0;a<o;a++){const i=this.subscriptions[a];i&&i(t,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const by=e=>!isNaN(parseFloat(e));class jy{constructor(t,s={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,o=!0)=>{this.prev=this.current,this.current=r;const{delta:a,timestamp:i}=Ve;this.lastUpdated!==i&&(this.timeDelta=a,this.lastUpdated=i,ge.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ge.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=by(this.current),this.owner=s.owner}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new Nc);const r=this.events[t].add(s);return t==="change"?()=>{r(),ge.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,r){this.set(s),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?sp(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xn(e,t){return new jy(e,t)}const lp=e=>t=>t.test(e),Ny={test:e=>e==="auto",parse:e=>e},cp=[Os,re,Tt,Gt,E0,P0,Ny],An=e=>cp.find(lp(e)),wy=[...cp,Be,hs],Sy=e=>wy.find(lp(e));function Cy(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,xn(s))}function ky(e,t){const s=ma(e,t);let{transitionEnd:r={},transition:o={},...a}=s?e.makeTargetAnimatable(s,!1):{};a={...a,...r};for(const i in a){const l=U0(a[i]);Cy(e,i,l)}}function Py(e,t,s){var r,o;const a=Object.keys(t).filter(l=>!e.hasValue(l)),i=a.length;if(i)for(let l=0;l<i;l++){const c=a[l],d=t[c];let m=null;Array.isArray(d)&&(m=d[0]),m===null&&(m=(o=(r=s[c])!==null&&r!==void 0?r:e.readValue(c))!==null&&o!==void 0?o:t[c]),m!=null&&(typeof m=="string"&&(ip(m)||ap(m))?m=parseFloat(m):!Sy(m)&&hs.test(d)&&(m=op(c,d)),e.addValue(c,xn(m,{owner:e})),s[c]===void 0&&(s[c]=m),m!==null&&e.setBaseTarget(c,m))}}function Ey(e,t){return t?(t[e]||t.default||t).from:void 0}function Ty(e,t,s){const r={};for(const o in e){const a=Ey(o,t);if(a!==void 0)r[o]=a;else{const i=s.getValue(o);i&&(r[o]=i.get())}}return r}function Ay({protectedKeys:e,needsAnimating:t},s){const r=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,r}function My(e,t){const s=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==s)return!0}else return s!==t}function dp(e,t,{delay:s=0,transitionOverride:r,type:o}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");r&&(a=r);const d=[],m=o&&e.animationState&&e.animationState.getState()[o];for(const u in l){const g=e.getValue(u),x=l[u];if(!g||x===void 0||m&&Ay(m,u))continue;const E={delay:s,elapsed:0,...vc(a||{},u)};if(window.HandoffAppearAnimations){const p=e.getProps()[uh];if(p){const v=window.HandoffAppearAnimations(p,u,g,ge);v!==null&&(E.elapsed=v,E.isHandoff=!0)}}let k=!E.isHandoff&&!My(g,x);if(E.type==="spring"&&(g.getVelocity()||E.velocity)&&(k=!1),g.animation&&(k=!1),k)continue;g.start(yc(u,g,x,e.shouldReduceMotion&&Vs.has(u)?{type:!1}:E));const C=g.animation;_o(c)&&(c.add(u),C.then(()=>c.remove(u))),d.push(C)}return i&&Promise.all(d).then(()=>{i&&ky(e,i)}),d}function tl(e,t,s={}){const r=ma(e,t,s.custom);let{transition:o=e.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(o=s.transitionOverride);const a=r?()=>Promise.all(dp(e,r,s)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:m,staggerDirection:u}=o;return Dy(e,t,d+c,m,u,s)}:()=>Promise.resolve(),{when:l}=o;if(l){const[c,d]=l==="beforeChildren"?[a,i]:[i,a];return c().then(()=>d())}else return Promise.all([a(),i(s.delay)])}function Dy(e,t,s=0,r=0,o=1,a){const i=[],l=(e.variantChildren.size-1)*r,c=o===1?(d=0)=>d*r:(d=0)=>l-d*r;return Array.from(e.variantChildren).sort(Ly).forEach((d,m)=>{d.notify("AnimationStart",t),i.push(tl(d,t,{...a,delay:s+c(m)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(i)}function Ly(e,t){return e.sortNodePosition(t)}function Ry(e,t,s={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const o=t.map(a=>tl(e,a,s));r=Promise.all(o)}else if(typeof t=="string")r=tl(e,t,s);else{const o=typeof t=="function"?ma(e,t,s.custom):t;r=Promise.all(dp(e,o,s))}return r.then(()=>e.notify("AnimationComplete",t))}const Iy=[...rc].reverse(),Fy=rc.length;function $y(e){return t=>Promise.all(t.map(({animation:s,options:r})=>Ry(e,s,r)))}function Vy(e){let t=$y(e);const s=_y();let r=!0;const o=(c,d)=>{const m=ma(e,d);if(m){const{transition:u,transitionEnd:g,...x}=m;c={...c,...x,...g}}return c};function a(c){t=c(e)}function i(c,d){const m=e.getProps(),u=e.getVariantContext(!0)||{},g=[],x=new Set;let E={},k=1/0;for(let p=0;p<Fy;p++){const v=Iy[p],f=s[v],S=m[v]!==void 0?m[v]:u[v],T=fr(S),A=v===d?f.isActive:null;A===!1&&(k=p);let M=S===u[v]&&S!==m[v]&&T;if(M&&r&&e.manuallyAnimateOnMount&&(M=!1),f.protectedKeys={...E},!f.isActive&&A===null||!S&&!f.prevProp||la(S)||typeof S=="boolean")continue;let b=Oy(f.prevProp,S)||v===d&&f.isActive&&!M&&T||p>k&&T,N=!1;const y=Array.isArray(S)?S:[S];let P=y.reduce(o,{});A===!1&&(P={});const{prevResolvedValues:w={}}=f,L={...w,...P},F=q=>{b=!0,x.has(q)&&(N=!0,x.delete(q)),f.needsAnimating[q]=!0};for(const q in L){const _=P[q],I=w[q];if(E.hasOwnProperty(q))continue;let R=!1;Fo(_)&&Fo(I)?R=!Lh(_,I):R=_!==I,R?_!==void 0?F(q):x.add(q):_!==void 0&&x.has(q)?F(q):f.protectedKeys[q]=!0}f.prevProp=S,f.prevResolvedValues=P,f.isActive&&(E={...E,...P}),r&&e.blockInitialAnimation&&(b=!1),b&&(!M||N)&&g.push(...y.map(q=>({animation:q,options:{type:v,...c}})))}if(x.size){const p={};x.forEach(v=>{const f=e.getBaseTarget(v);f!==void 0&&(p[v]=f)}),g.push({animation:p})}let C=!!g.length;return r&&(m.initial===!1||m.initial===m.animate)&&!e.manuallyAnimateOnMount&&(C=!1),r=!1,C?t(g):Promise.resolve()}function l(c,d,m){var u;if(s[c].isActive===d)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(x=>{var E;return(E=x.animationState)===null||E===void 0?void 0:E.setActive(c,d)}),s[c].isActive=d;const g=i(m,c);for(const x in s)s[x].protectedKeys={};return g}return{animateChanges:i,setActive:l,setAnimateFunction:a,getState:()=>s}}function Oy(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Lh(t,e):!1}function ys(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _y(){return{animate:ys(!0),whileInView:ys(),whileHover:ys(),whileTap:ys(),whileDrag:ys(),whileFocus:ys(),exit:ys()}}class zy extends vs{constructor(t){super(t),t.animationState||(t.animationState=Vy(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),la(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){}}let By=0;class Uy extends vs{constructor(){super(...arguments),this.id=By++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s,custom:r}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===o)return;const a=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});s&&!t&&a.then(()=>s(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const qy={animation:{Feature:zy},exit:{Feature:Uy}},Xd=(e,t)=>Math.abs(e-t);function Gy(e,t){const s=Xd(e.x,t.x),r=Xd(e.y,t.y);return Math.sqrt(s**2+r**2)}class up{constructor(t,s,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=Za(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,x=Gy(u.offset,{x:0,y:0})>=3;if(!g&&!x)return;const{point:E}=u,{timestamp:k}=Ve;this.history.push({...E,timestamp:k});const{onStart:C,onMove:p}=this.handlers;g||(C&&C(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,u)},this.handlePointerMove=(u,g)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=Ka(g,this.transformPagePoint),ge.update(this.updatePoint,!0)},this.handlePointerUp=(u,g)=>{this.end();const{onEnd:x,onSessionEnd:E,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Za(u.type==="pointercancel"?this.lastMoveEventInfo:Ka(g,this.transformPagePoint),this.history);this.startEvent&&x&&x(u,C),E&&E(u,C)},!Eh(t))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=r,this.contextWindow=o||window;const i=ua(t),l=Ka(i,this.transformPagePoint),{point:c}=l,{timestamp:d}=Ve;this.history=[{...c,timestamp:d}];const{onSessionStart:m}=s;m&&m(t,Za(l,this.history)),this.removeListeners=cs(Ft(this.contextWindow,"pointermove",this.handlePointerMove),Ft(this.contextWindow,"pointerup",this.handlePointerUp),Ft(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Bt(this.updatePoint)}}function Ka(e,t){return t?{point:t(e.point)}:e}function Qd(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Za({point:e},t){return{point:e,delta:Qd(e,mp(t)),offset:Qd(e,Hy(t)),velocity:Wy(t,.1)}}function Hy(e){return e[0]}function mp(e){return e[e.length-1]}function Wy(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,r=null;const o=mp(e);for(;s>=0&&(r=e[s],!(o.timestamp-r.timestamp>As(t)));)s--;if(!r)return{x:0,y:0};const a=$t(o.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const i={x:(o.x-r.x)/a,y:(o.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function rt(e){return e.max-e.min}function sl(e,t=0,s=.01){return Math.abs(e-t)<=s}function Yd(e,t,s,r=.5){e.origin=r,e.originPoint=ye(t.min,t.max,e.origin),e.scale=rt(s)/rt(t),(sl(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ye(s.min,s.max,e.origin)-e.originPoint,(sl(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Xn(e,t,s,r){Yd(e.x,t.x,s.x,r?r.originX:void 0),Yd(e.y,t.y,s.y,r?r.originY:void 0)}function Kd(e,t,s){e.min=s.min+t.min,e.max=e.min+rt(t)}function Xy(e,t,s){Kd(e.x,t.x,s.x),Kd(e.y,t.y,s.y)}function Zd(e,t,s){e.min=t.min-s.min,e.max=e.min+rt(t)}function Qn(e,t,s){Zd(e.x,t.x,s.x),Zd(e.y,t.y,s.y)}function Qy(e,{min:t,max:s},r){return t!==void 0&&e<t?e=r?ye(t,e,r.min):Math.max(e,t):s!==void 0&&e>s&&(e=r?ye(s,e,r.max):Math.min(e,s)),e}function Jd(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function Yy(e,{top:t,left:s,bottom:r,right:o}){return{x:Jd(e.x,s,o),y:Jd(e.y,t,r)}}function eu(e,t){let s=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,r]=[r,s]),{min:s,max:r}}function Ky(e,t){return{x:eu(e.x,t.x),y:eu(e.y,t.y)}}function Zy(e,t){let s=.5;const r=rt(e),o=rt(t);return o>r?s=pr(t.min,t.max-r,e.min):r>o&&(s=pr(e.min,e.max-o,t.min)),fs(0,1,s)}function Jy(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const nl=.35;function eb(e=nl){return e===!1?e=0:e===!0&&(e=nl),{x:tu(e,"left","right"),y:tu(e,"top","bottom")}}function tu(e,t,s){return{min:su(e,t),max:su(e,s)}}function su(e,t){return typeof e=="number"?e:e[t]||0}const nu=()=>({translate:0,scale:1,origin:0,originPoint:0}),tn=()=>({x:nu(),y:nu()}),ru=()=>({min:0,max:0}),Pe=()=>({x:ru(),y:ru()});function lt(e){return[e("x"),e("y")]}function fp({top:e,left:t,right:s,bottom:r}){return{x:{min:t,max:s},y:{min:e,max:r}}}function tb({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function sb(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function Ja(e){return e===void 0||e===1}function rl({scale:e,scaleX:t,scaleY:s}){return!Ja(e)||!Ja(t)||!Ja(s)}function Ns(e){return rl(e)||hp(e)||e.z||e.rotate||e.rotateX||e.rotateY}function hp(e){return ou(e.x)||ou(e.y)}function ou(e){return e&&e!=="0%"}function zo(e,t,s){const r=e-s,o=t*r;return s+o}function au(e,t,s,r,o){return o!==void 0&&(e=zo(e,o,r)),zo(e,s,r)+t}function ol(e,t=0,s=1,r,o){e.min=au(e.min,t,s,r,o),e.max=au(e.max,t,s,r,o)}function pp(e,{x:t,y:s}){ol(e.x,t.translate,t.scale,t.originPoint),ol(e.y,s.translate,s.scale,s.originPoint)}function nb(e,t,s,r=!1){const o=s.length;if(!o)return;t.x=t.y=1;let a,i;for(let l=0;l<o;l++){a=s[l],i=a.projectionDelta;const c=a.instance;c&&c.style&&c.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&sn(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,pp(e,i)),r&&Ns(a.latestValues)&&sn(e,a.latestValues))}t.x=iu(t.x),t.y=iu(t.y)}function iu(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Xt(e,t){e.min=e.min+t,e.max=e.max+t}function lu(e,t,[s,r,o]){const a=t[o]!==void 0?t[o]:.5,i=ye(e.min,e.max,a);ol(e,t[s],t[r],i,t.scale)}const rb=["x","scaleX","originX"],ob=["y","scaleY","originY"];function sn(e,t){lu(e.x,t,rb),lu(e.y,t,ob)}function gp(e,t){return fp(sb(e.getBoundingClientRect(),t))}function ab(e,t,s){const r=gp(e,s),{scroll:o}=t;return o&&(Xt(r.x,o.offset.x),Xt(r.y,o.offset.y)),r}const xp=({current:e})=>e?e.ownerDocument.defaultView:null,ib=new WeakMap;class lb{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pe(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=m=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(ua(m,"page").point)},a=(m,u)=>{const{drag:g,dragPropagation:x,onDragStart:E}=this.getProps();if(g&&!x&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Ah(g),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),lt(C=>{let p=this.getAxisMotionValue(C).get()||0;if(Tt.test(p)){const{projection:v}=this.visualElement;if(v&&v.layout){const f=v.layout.layoutBox[C];f&&(p=rt(f)*(parseFloat(p)/100))}}this.originPoint[C]=p}),E&&ge.update(()=>E(m,u),!1,!0);const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},i=(m,u)=>{const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:E,onDrag:k}=this.getProps();if(!g&&!this.openGlobalLock)return;const{offset:C}=u;if(x&&this.currentDirection===null){this.currentDirection=cb(C),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",u.point,C),this.updateAxis("y",u.point,C),this.visualElement.render(),k&&k(m,u)},l=(m,u)=>this.stop(m,u),c=()=>lt(m=>{var u;return this.getAnimationState(m)==="paused"&&((u=this.getAxisMotionValue(m).animation)===null||u===void 0?void 0:u.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new up(t,{onSessionStart:o,onStart:a,onMove:i,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:xp(this.visualElement)})}stop(t,s){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&ge.update(()=>a(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,r){const{drag:o}=this.getProps();if(!r||!Wr(t,o,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(i=Qy(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){var t;const{dragConstraints:s,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;s&&Js(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&o?this.constraints=Yy(o.layoutBox,s):this.constraints=!1,this.elastic=eb(r),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&lt(i=>{this.getAxisMotionValue(i)&&(this.constraints[i]=Jy(o.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Js(t))return!1;const r=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=ab(r,o.root,this.visualElement.getTransformPagePoint());let i=Ky(o.layout.layoutBox,a);if(s){const l=s(tb(i));this.hasMutatedConstraints=!!l,l&&(i=fp(l))}return i}startAnimation(t){const{drag:s,dragMomentum:r,dragElastic:o,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=lt(m=>{if(!Wr(m,s,this.currentDirection))return;let u=c&&c[m]||{};i&&(u={min:0,max:0});const g=o?200:1e6,x=o?40:1e7,E={type:"inertia",velocity:r?t[m]:0,bounceStiffness:g,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...u};return this.startAxisValueAnimation(m,E)});return Promise.all(d).then(l)}startAxisValueAnimation(t,s){const r=this.getAxisMotionValue(t);return r.start(yc(t,r,0,s))}stopAnimation(){lt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){lt(t=>{var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(t){const s="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),o=r[s];return o||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){lt(s=>{const{drag:r}=this.getProps();if(!Wr(s,r,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(s);if(o&&o.layout){const{min:i,max:l}=o.layout.layoutBox[s];a.set(t[s]-ye(i,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!Js(s)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};lt(i=>{const l=this.getAxisMotionValue(i);if(l){const c=l.get();o[i]=Zy({min:c,max:c},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),lt(i=>{if(!Wr(i,t,null))return;const l=this.getAxisMotionValue(i),{min:c,max:d}=this.constraints[i];l.set(ye(c,d,o[i]))})}addListeners(){if(!this.visualElement.current)return;ib.set(this.visualElement,this);const t=this.visualElement.current,s=Ft(t,"pointerdown",c=>{const{drag:d,dragListener:m=!0}=this.getProps();d&&m&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Js(c)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),r();const i=Rt(window,"resize",()=>this.scalePositionWithinConstraints()),l=o.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(lt(m=>{const u=this.getAxisMotionValue(m);u&&(this.originPoint[m]+=c[m].translate,u.set(u.get()+c[m].translate))}),this.visualElement.render())});return()=>{i(),s(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:i=nl,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:r,dragPropagation:o,dragConstraints:a,dragElastic:i,dragMomentum:l}}}function Wr(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function cb(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class db extends vs{constructor(t){super(t),this.removeGroupControls=Ce,this.removeListeners=Ce,this.controls=new lb(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ce}unmount(){this.removeGroupControls(),this.removeListeners()}}const cu=e=>(t,s)=>{e&&ge.update(()=>e(t,s))};class ub extends vs{constructor(){super(...arguments),this.removePointerDownListener=Ce}onPointerDown(t){this.session=new up(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xp(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:cu(t),onStart:cu(s),onMove:r,onEnd:(a,i)=>{delete this.session,o&&ge.update(()=>o(a,i))}}}mount(){this.removePointerDownListener=Ft(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function mb(){const e=j.useContext(sc);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:r}=e,o=j.useId();return j.useEffect(()=>r(o),[]),!t&&s?[!1,()=>s&&s(o)]:[!0]}const lo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function du(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Mn={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(re.test(e))e=parseFloat(e);else return e;const s=du(e,t.target.x),r=du(e,t.target.y);return`${s}% ${r}%`}},fb={correct:(e,{treeScale:t,projectionDelta:s})=>{const r=e,o=hs.parse(e);if(o.length>5)return r;const a=hs.createTransformer(e),i=typeof o[0]!="number"?1:0,l=s.x.scale*t.x,c=s.y.scale*t.y;o[0+i]/=l,o[1+i]/=c;const d=ye(l,c,.5);return typeof o[2+i]=="number"&&(o[2+i]/=d),typeof o[3+i]=="number"&&(o[3+i]/=d),a(o)}};class hb extends jt.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r,layoutId:o}=this.props,{projection:a}=t;b0(pb),a&&(s.group&&s.group.add(a),r&&r.register&&o&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),lo.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:r,drag:o,isPresent:a}=this.props,i=r.projection;return i&&(i.isPresent=a,o||t.layoutDependency!==s||s===void 0?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||ge.postRender(()=>{const l=i.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:o}=t;o&&(o.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function vp(e){const[t,s]=mb(),r=j.useContext(fh);return jt.createElement(hb,{...e,layoutGroup:r,switchLayoutGroup:j.useContext(hh),isPresent:t,safeToRemove:s})}const pb={borderRadius:{...Mn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mn,borderTopRightRadius:Mn,borderBottomLeftRadius:Mn,borderBottomRightRadius:Mn,boxShadow:fb},yp=["TopLeft","TopRight","BottomLeft","BottomRight"],gb=yp.length,uu=e=>typeof e=="string"?parseFloat(e):e,mu=e=>typeof e=="number"||re.test(e);function xb(e,t,s,r,o,a){o?(e.opacity=ye(0,s.opacity!==void 0?s.opacity:1,vb(r)),e.opacityExit=ye(t.opacity!==void 0?t.opacity:1,0,yb(r))):a&&(e.opacity=ye(t.opacity!==void 0?t.opacity:1,s.opacity!==void 0?s.opacity:1,r));for(let i=0;i<gb;i++){const l=`border${yp[i]}Radius`;let c=fu(t,l),d=fu(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||mu(c)===mu(d)?(e[l]=Math.max(ye(uu(c),uu(d),r),0),(Tt.test(d)||Tt.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||s.rotate)&&(e.rotate=ye(t.rotate||0,s.rotate||0,r))}function fu(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const vb=bp(0,.5,Bh),yb=bp(.5,.95,Ce);function bp(e,t,s){return r=>r<e?0:r>t?1:s(pr(e,t,r))}function hu(e,t){e.min=t.min,e.max=t.max}function it(e,t){hu(e.x,t.x),hu(e.y,t.y)}function pu(e,t,s,r,o){return e-=t,e=zo(e,1/s,r),o!==void 0&&(e=zo(e,1/o,r)),e}function bb(e,t=0,s=1,r=.5,o,a=e,i=e){if(Tt.test(t)&&(t=parseFloat(t),t=ye(i.min,i.max,t/100)-i.min),typeof t!="number")return;let l=ye(a.min,a.max,r);e===a&&(l-=t),e.min=pu(e.min,t,s,l,o),e.max=pu(e.max,t,s,l,o)}function gu(e,t,[s,r,o],a,i){bb(e,t[s],t[r],t[o],t.scale,a,i)}const jb=["x","scaleX","originX"],Nb=["y","scaleY","originY"];function xu(e,t,s,r){gu(e.x,t,jb,s?s.x:void 0,r?r.x:void 0),gu(e.y,t,Nb,s?s.y:void 0,r?r.y:void 0)}function vu(e){return e.translate===0&&e.scale===1}function jp(e){return vu(e.x)&&vu(e.y)}function wb(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Np(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function yu(e){return rt(e.x)/rt(e.y)}class Sb{constructor(){this.members=[]}add(t){bc(this.members,t),t.scheduleRender()}remove(t){if(jc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(o=>t===o);if(s===0)return!1;let r;for(let o=s;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,s){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,s&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:r}=t;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function bu(e,t,s){let r="";const o=e.x.translate/t.x,a=e.y.translate/t.y;if((o||a)&&(r=`translate3d(${o}px, ${a}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),s){const{rotate:c,rotateX:d,rotateY:m}=s;c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),m&&(r+=`rotateY(${m}deg) `)}const i=e.x.scale*t.x,l=e.y.scale*t.y;return(i!==1||l!==1)&&(r+=`scale(${i}, ${l})`),r||"none"}const Cb=(e,t)=>e.depth-t.depth;class kb{constructor(){this.children=[],this.isDirty=!1}add(t){bc(this.children,t),this.isDirty=!0}remove(t){jc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Cb),this.isDirty=!1,this.children.forEach(t)}}function Pb(e,t){const s=performance.now(),r=({timestamp:o})=>{const a=o-s;a>=t&&(Bt(r),e(a-t))};return ge.read(r,!0),()=>Bt(r)}function Eb(e){window.MotionDebug&&window.MotionDebug.record(e)}function Tb(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Ab(e,t,s){const r=Ze(e)?e:xn(e);return r.start(yc("",r,t,s)),r.animation}const ju=["","X","Y","Z"],Mb={visibility:"hidden"},Nu=1e3;let Db=0;const ws={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function wp({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(i={},l=t==null?void 0:t()){this.id=Db++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ws.totalNodes=ws.resolvedTargetDeltas=ws.recalculatedProjection=0,this.nodes.forEach(Ib),this.nodes.forEach(_b),this.nodes.forEach(zb),this.nodes.forEach(Fb),Eb(ws)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new kb)}addEventListener(i,l){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new Nc),this.eventHandlers.get(i).add(l)}notifyListeners(i,...l){const c=this.eventHandlers.get(i);c&&c.notify(...l)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Tb(i),this.instance=i;const{layoutId:c,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let u;const g=()=>this.root.updateBlockedByResize=!1;e(i,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=Pb(g,250),lo.hasAnimatedSinceResize&&(lo.hasAnimatedSinceResize=!1,this.nodes.forEach(Su))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&m&&(c||d)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:g,hasRelativeTargetChanged:x,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||Hb,{onLayoutAnimationStart:C,onLayoutAnimationComplete:p}=m.getProps(),v=!this.targetLayout||!Np(this.targetLayout,E)||x,f=!g&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||f||g&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,f);const S={...vc(k,"layout"),onPlay:C,onComplete:p};(m.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else g||Su(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Bt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Bb),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const u=this.path[m];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(wu);return}this.isUpdating||this.nodes.forEach(Vb),this.isUpdating=!1,this.nodes.forEach(Ob),this.nodes.forEach(Lb),this.nodes.forEach(Rb),this.clearAllSnapshots();const l=performance.now();Ve.delta=fs(0,1e3/60,l-Ve.timestamp),Ve.timestamp=l,Ve.isProcessing=!0,Ua.update.process(Ve),Ua.preRender.process(Ve),Ua.render.process(Ve),Ve.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach($b),this.sharedNodes.forEach(Ub)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:i,isRoot:r(this.instance),offset:s(this.instance)})}resetTransform(){if(!o)return;const i=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!jp(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,m=d!==this.prevTransformTemplateValue;i&&(l||Ns(this.latestValues)||m)&&(o(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return i&&(c=this.removeTransform(c)),Wb(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return Pe();const l=i.measureViewportBox(),{scroll:c}=this.root;return c&&(Xt(l.x,c.offset.x),Xt(l.y,c.offset.y)),l}removeElementScroll(i){const l=Pe();it(l,i);for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:m,options:u}=d;if(d!==this.root&&m&&u.layoutScroll){if(m.isRoot){it(l,i);const{scroll:g}=this.root;g&&(Xt(l.x,-g.offset.x),Xt(l.y,-g.offset.y))}Xt(l.x,m.offset.x),Xt(l.y,m.offset.y)}}return l}applyTransform(i,l=!1){const c=Pe();it(c,i);for(let d=0;d<this.path.length;d++){const m=this.path[d];!l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&sn(c,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Ns(m.latestValues)&&sn(c,m.latestValues)}return Ns(this.latestValues)&&sn(c,this.latestValues),c}removeTransform(i){const l=Pe();it(l,i);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Ns(d.latestValues))continue;rl(d.latestValues)&&d.updateSnapshot();const m=Pe(),u=d.measurePageBox();it(m,u),xu(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,m)}return Ns(this.latestValues)&&xu(l,this.latestValues),l}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ve.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(i||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:g}=this.options;if(!(!this.layout||!(u||g))){if(this.resolvedRelativeTargetAt=Ve.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pe(),this.relativeTargetOrigin=Pe(),Qn(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),it(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Pe(),this.targetWithTransforms=Pe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Xy(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):it(this.target,this.layout.layoutBox),pp(this.target,this.targetDelta)):it(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pe(),this.relativeTargetOrigin=Pe(),Qn(this.relativeTargetOrigin,this.target,x.target),it(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ws.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||rl(this.parent.latestValues)||hp(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Ve.timestamp&&(d=!1),d)return;const{layout:m,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||u))return;it(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,x=this.treeScale.y;nb(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:E}=l;if(!E){this.projectionTransform&&(this.projectionDelta=tn(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=tn(),this.projectionDeltaWithTransform=tn());const k=this.projectionTransform;Xn(this.projectionDelta,this.layoutCorrected,E,this.latestValues),this.projectionTransform=bu(this.projectionDelta,this.treeScale),(this.projectionTransform!==k||this.treeScale.x!==g||this.treeScale.y!==x)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),ws.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(i,l=!1){const c=this.snapshot,d=c?c.latestValues:{},m={...this.latestValues},u=tn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=Pe(),x=c?c.source:void 0,E=this.layout?this.layout.source:void 0,k=x!==E,C=this.getStack(),p=!C||C.members.length<=1,v=!!(k&&!p&&this.options.crossfade===!0&&!this.path.some(Gb));this.animationProgress=0;let f;this.mixTargetDelta=S=>{const T=S/1e3;Cu(u.x,i.x,T),Cu(u.y,i.y,T),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qn(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qb(this.relativeTarget,this.relativeTargetOrigin,g,T),f&&wb(this.relativeTarget,f)&&(this.isProjectionDirty=!1),f||(f=Pe()),it(f,this.relativeTarget)),k&&(this.animationValues=m,xb(m,d,this.latestValues,T,v,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Bt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ge.update(()=>{lo.hasAnimatedSinceResize=!0,this.currentAnimation=Ab(0,Nu,{...i,onUpdate:l=>{this.mixTargetDelta(l),i.onUpdate&&i.onUpdate(l)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Nu),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:m}=i;if(!(!l||!c||!d)){if(this!==i&&this.layout&&d&&Sp(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Pe();const u=rt(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+u;const g=rt(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+g}it(l,c),sn(l,m),Xn(this.projectionDeltaWithTransform,this.layoutCorrected,l,m)}}registerSharedNode(i,l){this.sharedNodes.has(i)||this.sharedNodes.set(i,new Sb),this.sharedNodes.get(i).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:l}=this.options;return l?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:l}=this.options;return l?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetRotation(){const{visualElement:i}=this.options;if(!i)return;let l=!1;const{latestValues:c}=i;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const d={};for(let m=0;m<ju.length;m++){const u="rotate"+ju[m];c[u]&&(d[u]=c[u],i.setStaticValue(u,0))}i.render();for(const m in d)i.setStaticValue(m,d[m]);i.scheduleRender()}getProjectionStyles(i){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Mb;const d={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=io(i==null?void 0:i.pointerEvents)||"",d.transform=m?m(this.latestValues,""):"none",d;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=io(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!Ns(this.latestValues)&&(k.transform=m?m({},""):"none",this.hasProjected=!1),k}const g=u.animationValues||u.latestValues;this.applyTransformsToTarget(),d.transform=bu(this.projectionDeltaWithTransform,this.treeScale,g),m&&(d.transform=m(g,d.transform));const{x,y:E}=this.projectionDelta;d.transformOrigin=`${x.origin*100}% ${E.origin*100}% 0`,u.animationValues?d.opacity=u===this?(c=(l=g.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:d.opacity=u===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const k in Ro){if(g[k]===void 0)continue;const{correct:C,applyTo:p}=Ro[k],v=d.transform==="none"?g[k]:C(g[k],u);if(p){const f=p.length;for(let S=0;S<f;S++)d[p[S]]=v}else d[k]=v}return this.options.layoutId&&(d.pointerEvents=u===this?io(i==null?void 0:i.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var l;return(l=i.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(wu),this.root.sharedNodes.clear()}}}function Lb(e){e.updateLayout()}function Rb(e){var t;const s=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=e.layout,{animationType:a}=e.options,i=s.source!==e.layout.source;a==="size"?lt(u=>{const g=i?s.measuredBox[u]:s.layoutBox[u],x=rt(g);g.min=r[u].min,g.max=g.min+x}):Sp(a,s.layoutBox,r)&&lt(u=>{const g=i?s.measuredBox[u]:s.layoutBox[u],x=rt(r[u]);g.max=g.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+x)});const l=tn();Xn(l,r,s.layoutBox);const c=tn();i?Xn(c,e.applyTransform(o,!0),s.measuredBox):Xn(c,r,s.layoutBox);const d=!jp(l);let m=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:g,layout:x}=u;if(g&&x){const E=Pe();Qn(E,s.layoutBox,g.layoutBox);const k=Pe();Qn(k,r,x.layoutBox),Np(E,k)||(m=!0),u.options.layoutRoot&&(e.relativeTarget=k,e.relativeTargetOrigin=E,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:s,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:m})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Ib(e){ws.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Fb(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function $b(e){e.clearSnapshot()}function wu(e){e.clearMeasurements()}function Vb(e){e.isLayoutDirty=!1}function Ob(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Su(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function _b(e){e.resolveTargetDelta()}function zb(e){e.calcProjection()}function Bb(e){e.resetRotation()}function Ub(e){e.removeLeadSnapshot()}function Cu(e,t,s){e.translate=ye(t.translate,0,s),e.scale=ye(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function ku(e,t,s,r){e.min=ye(t.min,s.min,r),e.max=ye(t.max,s.max,r)}function qb(e,t,s,r){ku(e.x,t.x,s.x,r),ku(e.y,t.y,s.y,r)}function Gb(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Hb={duration:.45,ease:[.4,0,.1,1]},Pu=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Eu=Pu("applewebkit/")&&!Pu("chrome/")?Math.round:Ce;function Tu(e){e.min=Eu(e.min),e.max=Eu(e.max)}function Wb(e){Tu(e.x),Tu(e.y)}function Sp(e,t,s){return e==="position"||e==="preserve-aspect"&&!sl(yu(t),yu(s),.2)}const Xb=wp({attachResizeListener:(e,t)=>Rt(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ei={current:void 0},Cp=wp({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ei.current){const e=new Xb({});e.mount(window),e.setOptions({layoutScroll:!0}),ei.current=e}return ei.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Qb={pan:{Feature:ub},drag:{Feature:db,ProjectionNode:Cp,MeasureLayout:vp}},Yb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Kb(e){const t=Yb.exec(e);if(!t)return[,];const[,s,r]=t;return[s,r]}function al(e,t,s=1){const[r,o]=Kb(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const i=a.trim();return ip(i)?parseFloat(i):i}else return Qi(o)?al(o,t,s+1):o}function Zb(e,{...t},s){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:s};s&&(s={...s}),e.values.forEach(o=>{const a=o.get();if(!Qi(a))return;const i=al(a,r);i&&o.set(i)});for(const o in t){const a=t[o];if(!Qi(a))continue;const i=al(a,r);i&&(t[o]=i,s||(s={}),s[o]===void 0&&(s[o]=a))}return{target:t,transitionEnd:s}}const Jb=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),kp=e=>Jb.has(e),ej=e=>Object.keys(e).some(kp),Au=e=>e===Os||e===re,Mu=(e,t)=>parseFloat(e.split(", ")[t]),Du=(e,t)=>(s,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/);if(o)return Mu(o[1],t);{const a=r.match(/^matrix\((.+)\)$/);return a?Mu(a[1],e):0}},tj=new Set(["x","y","z"]),sj=Nr.filter(e=>!tj.has(e));function nj(e){const t=[];return sj.forEach(s=>{const r=e.getValue(s);r!==void 0&&(t.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),t.length&&e.render(),t}const vn={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Du(4,13),y:Du(5,14)};vn.translateX=vn.x;vn.translateY=vn.y;const rj=(e,t,s)=>{const r=t.measureViewportBox(),o=t.current,a=getComputedStyle(o),{display:i}=a,l={};i==="none"&&t.setStaticValue("display",e.display||"block"),s.forEach(d=>{l[d]=vn[d](r,a)}),t.render();const c=t.measureViewportBox();return s.forEach(d=>{const m=t.getValue(d);m&&m.jump(l[d]),e[d]=vn[d](c,a)}),e},oj=(e,t,s={},r={})=>{t={...t},r={...r};const o=Object.keys(t).filter(kp);let a=[],i=!1;const l=[];if(o.forEach(c=>{const d=e.getValue(c);if(!e.hasValue(c))return;let m=s[c],u=An(m);const g=t[c];let x;if(Fo(g)){const E=g.length,k=g[0]===null?1:0;m=g[k],u=An(m);for(let C=k;C<E&&g[C]!==null;C++)x?fc(An(g[C])===x):x=An(g[C])}else x=An(g);if(u!==x)if(Au(u)&&Au(x)){const E=d.get();typeof E=="string"&&d.set(parseFloat(E)),typeof g=="string"?t[c]=parseFloat(g):Array.isArray(g)&&x===re&&(t[c]=g.map(parseFloat))}else u!=null&&u.transform&&(x!=null&&x.transform)&&(m===0||g===0)?m===0?d.set(x.transform(m)):t[c]=u.transform(g):(i||(a=nj(e),i=!0),l.push(c),r[c]=r[c]!==void 0?r[c]:t[c],d.jump(g))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,d=rj(t,e,l);return a.length&&a.forEach(([m,u])=>{e.getValue(m).set(u)}),e.render(),ia&&c!==null&&window.scrollTo({top:c}),{target:d,transitionEnd:r}}else return{target:t,transitionEnd:r}};function aj(e,t,s,r){return ej(t)?oj(e,t,s,r):{target:t,transitionEnd:r}}const ij=(e,t,s,r)=>{const o=Zb(e,t,r);return t=o.target,r=o.transitionEnd,aj(e,t,s,r)},il={current:null},Pp={current:!1};function lj(){if(Pp.current=!0,!!ia)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>il.current=e.matches;e.addListener(t),t()}else il.current=!1}function cj(e,t,s){const{willChange:r}=t;for(const o in t){const a=t[o],i=s[o];if(Ze(a))e.addValue(o,a),_o(r)&&r.add(o);else if(Ze(i))e.addValue(o,xn(a,{owner:e})),_o(r)&&r.remove(o);else if(i!==a)if(e.hasValue(o)){const l=e.getValue(o);!l.hasAnimated&&l.set(a)}else{const l=e.getStaticValue(o);e.addValue(o,xn(l!==void 0?l:a,{owner:e}))}}for(const o in s)t[o]===void 0&&e.removeValue(o);return t}const Lu=new WeakMap,Ep=Object.keys(hr),dj=Ep.length,Ru=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],uj=oc.length;class mj{constructor({parent:t,props:s,presenceContext:r,reducedMotionConfig:o,visualState:a},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ge.render(this.render,!1,!0);const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=s,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=i,this.isControllingVariants=ca(s),this.isVariantNode=mh(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(s,{});for(const u in m){const g=m[u];l[u]!==void 0&&Ze(g)&&(g.set(l[u],!1),_o(d)&&d.add(u))}}scrapeMotionValuesFromProps(t,s){return{}}mount(t){this.current=t,Lu.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),Pp.current||lj(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:il.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Lu.delete(this.current),this.projection&&this.projection.unmount(),Bt(this.notifyUpdate),Bt(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,s){const r=Vs.has(t),o=s.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&ge.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=s.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{o(),a()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...s},r,o,a){let i,l;for(let c=0;c<dj;c++){const d=Ep[c],{isEnabled:m,Feature:u,ProjectionNode:g,MeasureLayout:x}=hr[d];g&&(i=g),m(s)&&(!this.features[d]&&u&&(this.features[d]=new u(this)),x&&(l=x))}if((this.type==="html"||this.type==="svg")&&!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:d,drag:m,dragConstraints:u,layoutScroll:g,layoutRoot:x}=s;this.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!m||u&&Js(u),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:a,layoutScroll:g,layoutRoot:x})}return l}updateFeatures(){for(const t in this.features){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}makeTargetAnimatable(t,s=!0){return this.makeTargetAnimatableFromInstance(t,this.props,s)}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<Ru.length;r++){const o=Ru[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a=t["on"+o];a&&(this.propEventSubscriptions[o]=this.on(o,a))}this.prevMotionValues=cj(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const s={};for(let r=0;r<uj;r++){const o=oc[r],a=this.props[o];(fr(a)||a===!1)&&(s[o]=a)}return s}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){s!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,s)),this.values.set(t,s),this.latestValues[t]=s.get()}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&s!==void 0&&(r=xn(s,{owner:this}),this.addValue(t,r)),r}readValue(t){var s;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var s;const{initial:r}=this.props,o=typeof r=="string"||typeof r=="object"?(s=mc(this.props,r))===null||s===void 0?void 0:s[t]:void 0;if(r&&o!==void 0)return o;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Ze(a)?a:this.initialValues[t]!==void 0&&o===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new Nc),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class Tp extends mj{sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:r}){delete s[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:s,...r},{transformValues:o},a){let i=Ty(r,t||{},this);if(o&&(s&&(s=o(s)),r&&(r=o(r)),i&&(i=o(i))),a){Py(this,r,i);const l=ij(this,r,i,s);s=l.transitionEnd,r=l.target}return{transition:t,transitionEnd:s,...r}}}function fj(e){return window.getComputedStyle(e)}class hj extends Tp{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,s){if(Vs.has(s)){const r=xc(s);return r&&r.default||0}else{const r=fj(t),o=(xh(s)?r.getPropertyValue(s):r[s])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:s}){return gp(t,s)}build(t,s,r,o){ic(t,s,r,o.transformTemplate)}scrapeMotionValuesFromProps(t,s){return uc(t,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ze(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}renderInstance(t,s,r,o){wh(t,s,r,o)}}class pj extends Tp{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Vs.has(s)){const r=xc(s);return r&&r.default||0}return s=Sh.has(s)?s:nc(s),t.getAttribute(s)}measureInstanceViewportBox(){return Pe()}scrapeMotionValuesFromProps(t,s){return kh(t,s)}build(t,s,r,o){cc(t,s,r,this.isSVGTag,o.transformTemplate)}renderInstance(t,s,r,o){Ch(t,s,r,o)}mount(t){this.isSVGTag=dc(t.tagName),super.mount(t)}}const gj=(e,t)=>ac(e)?new pj(t,{enableHardwareAcceleration:!1}):new hj(t,{enableHardwareAcceleration:!0}),xj={layout:{ProjectionNode:Cp,MeasureLayout:vp}},vj={...qy,...dv,...Qb,...xj},ti=v0((e,t)=>K0(e,t,vj,gj));class yj{constructor(){this.notifications=[],this.nextId=1,this.container=null,this.init()}init(){document.getElementById("notification-container")?this.container=document.getElementById("notification-container"):(this.container=document.createElement("div"),this.container.id="notification-container",this.container.className="fixed top-4 right-4 z-50 space-y-2 max-w-sm",document.body.appendChild(this.container))}show(t,s="info",r=4e3){const o=this.nextId++,a={id:o,message:t,type:s,timestamp:Date.now()};return this.notifications.push(a),this.renderNotification(a),setTimeout(()=>{this.remove(o)},r),o}renderNotification(t){const s=document.createElement("div");s.id=`notification-${t.id}`,s.className="notification-item transform transition-all duration-300 ease-out opacity-0 translate-x-full";const r={success:"background-color: #10b981 !important; color: white !important; border: 2px solid #059669 !important;",error:"background-color: #ef4444 !important; color: white !important; border: 2px solid #dc2626 !important;",warning:"background-color: #eab308 !important; color: black !important; border: 2px solid #ca8a04 !important;",info:"background-color: #3b82f6 !important; color: white !important; border: 2px solid #2563eb !important;",achievement:"background-color: #8b5cf6 !important; color: white !important; border: 2px solid #7c3aed !important;"};s.innerHTML=`
      <div class="rounded-lg shadow-lg p-4 flex items-center justify-between" style="${r[t.type]}">
        <div class="flex items-center space-x-3">
          <span class="text-xl">${this.getIcon(t.type)}</span>
          <p class="font-medium">${t.message}</p>
        </div>
        <button onclick="window.notificationService.remove(${t.id})" class="text-white hover:text-gray-200 ml-2">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
    `,this.container.appendChild(s),setTimeout(()=>{s.classList.remove("opacity-0","translate-x-full")},10)}getIcon(t){const s={success:"✅",error:"❌",warning:"⚠️",info:"ℹ️",achievement:"🏆"};return s[t]||s.info}remove(t){const s=document.getElementById(`notification-${t}`);s&&(s.classList.add("opacity-0","translate-x-full"),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},300)),this.notifications=this.notifications.filter(r=>r.id!==t)}success(t,s){return this.show(t,"success",s)}error(t,s){return this.show(t,"error",s)}warning(t,s){return this.show(t,"warning",s)}info(t,s){return this.show(t,"info",s)}achievement(t,s){return this.show(t,"achievement",s||6e3)}clear(){this.notifications.forEach(t=>{this.remove(t.id)})}showAchievement(t){const s=`🏆 ${t.title}: ${t.description}`;return this.achievement(s,8e3)}showLevelUp(t){const s=`🎉 Parabéns! Você chegou ao nível ${t}!`;return this.achievement(s,6e3)}showStreak(t){const s=`🔥 Incrível! Streak de ${t} dias!`;return this.success(s,5e3)}}const K=new yj;window.notificationService=K;const oe={save:(e,t)=>{try{return localStorage.setItem(e,JSON.stringify(t)),{success:!0}}catch(s){return console.error("Erro ao salvar dados:",s),{success:!1,error:s.message}}},load:e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.error("Erro ao carregar dados:",t),null}},remove:e=>{try{return localStorage.removeItem(e),{success:!0}}catch(t){return console.error("Erro ao remover dados:",t),{success:!1,error:t.message}}},clear:()=>{try{return localStorage.clear(),{success:!0}}catch(e){return console.error("Erro ao limpar dados:",e),{success:!1,error:e.message}}},hasData:e=>localStorage.getItem(e)!==null},ie={USER:"yufinUser",SESSION:"yufinSession",PROGRESS:"yufinProgress",SETTINGS:"yufinSettings",ACHIEVEMENTS:"yufinAchievements",STREAK:"yufinStreak",DAILY_GOALS:"yufinDailyGoals",ANALYTICS:"yufinAnalytics",CACHE:"yufinCache",PREFERENCES:"yufinPreferences",CURRENT_MODULE:"yufinCurrentModule"},Xr="yufin_dev_mode_enabled";class bj{constructor(){this.isEnabled=this.isDevModeEnabled()}checkAdminStatus(t){var r;return t?["admin@yufin.com","dev@yufin.com","test@yufin.com"].includes((r=t.email)==null?void 0:r.toLowerCase()):!1}enableDevMode(t){return this.checkAdminStatus(t)?(localStorage.setItem(Xr,"true"),this.isEnabled=!0,console.log("🔧 Modo Dev ATIVADO para:",t.email),this.logAction("DEV_MODE_ENABLED",{userId:t.id,email:t.email},t),!0):(console.warn("🔒 Acesso negado ao Modo Dev - usuário não autorizado"),!1)}disableDevMode(t){return localStorage.setItem(Xr,"false"),this.isEnabled=!1,console.log("🔧 Modo Dev DESATIVADO para:",t.email),this.logAction("DEV_MODE_DISABLED",{userId:t.id,email:t.email},t),!0}toggleDevMode(t){return this.checkAdminStatus(t)?this.isEnabled?this.disableDevMode(t):this.enableDevMode(t):(console.warn("🔒 Acesso negado ao Modo Dev - usuário não autorizado"),!1)}isDevModeEnabled(){const s=localStorage.getItem(Xr)==="true";return this.isEnabled=s,s}logAction(t,s,r){const o={timestamp:new Date().toISOString(),action:t,userId:r==null?void 0:r.id,userEmail:r==null?void 0:r.email,data:s,devMode:!0};console.log("🔧 [DEV MODE LOG]",o);const a=JSON.parse(localStorage.getItem("yufin_dev_logs")||"[]");a.push(o),a.length>50&&a.splice(0,a.length-50),localStorage.setItem("yufin_dev_logs",JSON.stringify(a))}clearLogs(){localStorage.removeItem("yufin_dev_logs"),console.log("🔧 Logs do Modo Dev limpos")}getLogs(){return JSON.parse(localStorage.getItem("yufin_dev_logs")||"[]")}reset(){localStorage.removeItem(Xr),this.clearLogs(),this.isEnabled=!1,console.log("🔧 Modo Dev resetado completamente")}}const ke=new bj,Iu=({user:e,setUser:t,onNavigate:s,currentModule:r=1})=>{var W,O,Z,se,B,H,Y,ee,ne;const[o,a]=j.useState(null),[i,l]=j.useState(!0),[c,d]=j.useState(r),[m,u]=j.useState(0),[g,x]=j.useState(null),[E,k]=j.useState(!1),C=j.useRef(null),[p,v]=j.useState([]),[f,S]=j.useState(!1);j.useEffect(()=>{M(),T();const z=localStorage.getItem("darkMode")==="true";S(z)},[e]),j.useEffect(()=>{const z=()=>{console.log("🔧 Modo Dev alterado, recarregando progresso..."),M()};return window.addEventListener("devModeChanged",z),()=>{window.removeEventListener("devModeChanged",z)}},[]),j.useEffect(()=>{o&&!i&&b()},[o,i]),j.useEffect(()=>{d(r)},[r]),j.useEffect(()=>{if(o&&C.current){const z=o.progress.progressPercentage;console.log("🎬 Iniciando animação da barra:",{targetProgress:z});const J=2e3,le=Date.now(),me=()=>{const wt=Date.now()-le,kr=Math.min(wt/J,1),Dp=1-Math.pow(1-kr,3),fa=Math.round(z*Dp);u(fa),C.current&&C.current.style.setProperty("--target-width",`${fa}%`),kr<1?requestAnimationFrame(me):console.log("✅ Animação concluída:",{finalValue:fa})};setTimeout(()=>{me()},300)}},[o]);const T=async()=>{try{const z=await ue("/classes");v(z)}catch(z){console.error("Erro ao carregar turmas:",z)}},A=z=>{const J=p.find(le=>le.id===z);return J?J.name:"Turma não encontrada"},M=async()=>{var z;try{l(!0),console.log("🔄 Carregando progresso da série...");const J=ke.isDevModeEnabled(),le=J?`/users/${e.id}/grade-progress?devMode=true`:`/users/${e.id}/grade-progress`,me=await ue(le);if(console.log("📊 Progresso recebido:",me),J&&((z=me.progress)!=null&&z.byModule)&&typeof me.progress.byModule=="object"&&!Array.isArray(me.progress.byModule)){const wt=me.progress.byModule[e.gradeId];wt&&(me.progress.byModule=wt,console.log("🔧 [DEV MODE] Usando dados da série:",e.gradeId))}a(me)}catch(J){console.error("Erro ao carregar progresso:",J),K.error("Erro ao carregar progresso da série")}finally{l(!1)}},h=()=>{if(!o||!o.progress||!o.progress.hasContent)return!1;const{byModule:z}=o.progress;return Object.values(z).every(J=>J&&J.completed===J.total&&J.total>0)},b=async()=>{try{const z=await ue(`/users/${e.id}/grade-progression-status`);x(z)}catch(z){console.error("Erro ao carregar status da progressão:",z)}},N=async()=>{if(ke.isDevModeEnabled()){console.log("🔧 [DEV MODE] Solicitando progressão real via backend");try{k(!0);const J=await _e(`/users/${e.id}/request-grade-progression`,{devMode:!0});if(J.devMode){const le={...e,gradeId:J.nextGrade};t(le),await M(),ke.logAction("GRADE_PROGRESSION_DEV",{userId:e.id,fromGrade:e.gradeId,toGrade:J.nextGrade,devModeBypass:!0},e),K.success(J.message)}}catch(J){console.error("Erro na progressão em modo dev:",J),K.error("Erro ao navegar para próxima série")}finally{k(!1)}return}try{k(!0);const J=await _e(`/users/${e.id}/request-grade-progression`);K.success(J.message),await b()}catch(J){console.error("Erro ao solicitar progressão:",J),K.error(J.message||"Erro ao solicitar progressão")}finally{k(!1)}},y=async()=>{if(ke.isDevModeEnabled()){console.log("🔧 [DEV MODE] Solicitando retorno real via backend");try{const J=await _e(`/users/${e.id}/return-to-previous-grade`,{devMode:!0});if(J.devMode){const le={...e,gradeId:J.previousGrade};t(le),await M(),ke.logAction("GRADE_RETURN_DEV",{userId:e.id,fromGrade:e.gradeId,toGrade:J.previousGrade,devModeBypass:!0},e),K.success(J.message)}}catch(J){console.error("Erro no retorno em modo dev:",J),K.error("Erro ao retornar ao ano anterior")}return}try{const J=await _e(`/users/${e.id}/return-to-previous-grade`);K.success(J.message);const le={...e};le.gradeId=J.previousGrade,t(le),await M(),await b()}catch(J){console.error("Erro ao voltar ao ano anterior:",J),K.error(J.message||"Erro ao voltar ao ano anterior")}},P=async z=>{try{await ls(`/users/${e.id}/current-module`,{currentModule:z}),d(z),oe.save(ie.CURRENT_MODULE,z);const J={...e,currentModule:z};t(J)}catch(J){console.error("Erro ao atualizar módulo:",J),K.error("Erro ao atualizar módulo")}},w=z=>{console.log("🎯 Clique na lição:",z.title),console.log("  - canAccess:",z.canAccess),console.log("  - isCompleted:",z.isCompleted),console.log("  - Módulo:",z.module,"Ordem:",z.order);const J=ke.isDevModeEnabled();if(J&&ke.logAction("LESSON_ACCESS",{lessonId:z._id,lessonTitle:z.title,module:z.module,order:z.order,canAccess:z.canAccess,isCompleted:z.isCompleted,devModeBypass:!0},e),!J&&!z.canAccess){console.log("❌ Lição bloqueada!"),K.warning("Complete as lições anteriores primeiro!");return}console.log("✅ Lição liberada, navegando..."),s("lesson",{lessonId:z._id,currentModule:c,lessonModule:z.module})},L=z=>{const J={"6º Ano":{1:"O que é dinheiro?",2:"Contas Simples",3:"Consumo Consciente",4:"Projeto Prático"},"7º Ano":{1:"Orçamento e Controle",2:"Consumo e Publicidade",3:"Introdução a Investimentos",4:"Segurança Financeira"},"8º Ano":{1:"Orçamento Familiar Avançado",2:"Crédito e Consumo",3:"Investimentos Básicos",4:"Impacto e Segurança"},"9º Ano":{1:"Finanças Pessoais",2:"Empreendedorismo Básico",3:"Introdução à Economia",4:"Ética e Segurança"},"1º Ano EM":{1:"Renda e Orçamento",2:"Investimentos e Poupança",3:"Tributação Básica",4:"Segurança e Consciência"},"2º Ano EM":{1:"Economia do Dia a Dia",2:"Mercado Financeiro",3:"Proteção e Risco",4:"Tecnologia e Inovação"},"3º Ano EM":{1:"Projeto de Vida Financeiro",2:"Economia Global",3:"Inovação e Futuro",4:"Legado e Cidadania Financeira"}};return(J[e.gradeId]||J["6º Ano"])[z]||`Módulo ${z}`},F=z=>{if(z.title&&z.title.toLowerCase().includes("revisão e celebração"))return"Revise tudo que aprendeu, celebre suas conquistas e prepare-se para novos desafios";const J={"6º Ano":{1:{1:"Descubra o que é dinheiro e como ele funciona no nosso dia a dia",2:"Aprenda a contar e calcular com moedas e notas",3:"Entenda como o dinheiro é usado para comprar coisas"},2:{1:"Aprenda a fazer contas simples de adição e subtração com dinheiro",2:"Pratique cálculos básicos com preços e troco",3:"Desenvolva habilidades matemáticas fundamentais"},3:{1:"Entenda a diferença entre necessidades e desejos",2:"Aprenda a fazer escolhas inteligentes de consumo",3:"Desenvolva consciência sobre gastos e economia"},4:{1:"Aplique tudo que aprendeu em um projeto prático",2:"Crie seu primeiro orçamento pessoal",3:"Celebre suas conquistas e planeje o futuro"}},"7º Ano":{1:{1:"Aprenda a criar e gerenciar orçamentos pessoais",2:"Controle seus gastos e receitas de forma organizada",3:"Desenvolva disciplina financeira básica"},2:{1:"Entenda como a publicidade influencia suas compras",2:"Aprenda a resistir a impulsos de consumo",3:"Torne-se um consumidor mais consciente"},3:{1:"Descubra o que são investimentos e como funcionam",2:"Aprenda sobre poupança e rendimento",3:"Planeje seu futuro financeiro"},4:{1:"Proteja-se contra fraudes e golpes financeiros",2:"Aprenda sobre seguros e proteção",3:"Mantenha sua segurança financeira"}},"8º Ano":{1:{1:"Crie e gerencie orçamentos familiares completos",2:"Planeje finanças pessoais avançadas",3:"Desenvolva estratégias de planejamento financeiro"},2:{1:"Entenda como funciona o crédito e financiamento",2:"Aprenda sobre juros e parcelamentos",3:"Tome decisões conscientes sobre empréstimos"},3:{1:"Explore diferentes tipos de investimentos",2:"Aprenda sobre renda fixa e variável",3:"Construa uma carteira de investimentos"},4:{1:"Entenda o impacto social e ambiental do dinheiro",2:"Aprenda sobre investimento responsável",3:"Proteja-se contra riscos financeiros"}},"9º Ano":{1:{1:"Domine conceitos avançados de finanças pessoais",2:"Planeje objetivos financeiros de longo prazo",3:"Desenvolva estratégias de crescimento patrimonial"},2:{1:"Descubra o mundo do empreendedorismo",2:"Aprenda a criar e gerenciar um negócio",3:"Desenvolva habilidades de liderança financeira"},3:{1:"Entenda como a economia afeta suas finanças",2:"Aprenda sobre inflação e políticas econômicas",3:"Compreenda o contexto macroeconômico"},4:{1:"Desenvolva ética e responsabilidade financeira",2:"Aprenda sobre investimento sustentável",3:"Proteja-se contra riscos e fraudes avançadas"}},"1º Ano EM":{1:{1:"Gerencie renda e despesas de forma profissional",2:"Planeje orçamentos complexos e detalhados",3:"Desenvolva controle financeiro avançado"},2:{1:"Explore estratégias avançadas de investimento",2:"Aprenda sobre diversificação de carteira",3:"Maximize retornos com gestão de risco"},3:{1:"Entenda o sistema tributário brasileiro",2:"Aprenda sobre impostos e declarações",3:"Otimize sua situação fiscal"},4:{1:"Mantenha segurança em transações digitais",2:"Desenvolva consciência sobre privacidade financeira",3:"Proteja-se contra cibercrimes financeiros"}},"2º Ano EM":{1:{1:"Analise indicadores econômicos do dia a dia",2:"Entenda como a economia impacta suas decisões",3:"Desenvolva visão macroeconômica"},2:{1:"Explore o funcionamento do mercado financeiro",2:"Aprenda sobre bolsa de valores e derivativos",3:"Desenvolva estratégias de trading"},3:{1:"Proteja-se contra riscos financeiros complexos",2:"Aprenda sobre hedge e proteção de carteira",3:"Desenvolva gestão avançada de risco"},4:{1:"Explore fintechs e inovações financeiras",2:"Aprenda sobre blockchain e criptomoedas",3:"Prepare-se para o futuro das finanças"}},"3º Ano EM":{1:{1:"Planeje seu projeto de vida financeiro completo",2:"Defina metas de longo prazo e estratégias",3:"Prepare-se para a vida adulta financeira"},2:{1:"Entenda a economia global e seus impactos",2:"Aprenda sobre investimentos internacionais",3:"Desenvolva visão global das finanças"},3:{1:"Explore inovações e tendências futuras",2:"Prepare-se para mudanças no mercado financeiro",3:"Desenvolva adaptabilidade financeira"},4:{1:"Construa um legado financeiro responsável",2:"Desenvolva cidadania financeira ativa",3:"Contribua para uma sociedade financeiramente saudável"}}};return((J[z.gradeId]||J["6º Ano"])[z.module]||{})[z.order]||z.description||"Aprenda conceitos importantes de educação financeira"},q=z=>{if(z.title&&z.title.toLowerCase().includes("revisão e celebração"))return["🎉 celebração","📚 revisão","🏆 conquistas","🚀 futuro"];const J={"6º Ano":{1:["dinheiro","básico","introdução"],2:["matemática","cálculos","prática"],3:["consumo","consciência","escolhas"],4:["projeto","aplicação","celebração"]},"7º Ano":{1:["orçamento","controle","organização"],2:["publicidade","consumo","consciência"],3:["investimentos","poupança","futuro"],4:["segurança","proteção","prevenção"]},"8º Ano":{1:["orçamento","família","planejamento"],2:["crédito","juros","financiamento"],3:["investimentos","carteira","risco"],4:["impacto","sustentabilidade","responsabilidade"]},"9º Ano":{1:["finanças","pessoais","avançado"],2:["empreendedorismo","negócios","liderança"],3:["economia","inflação","políticas"],4:["ética","sustentabilidade","responsabilidade"]},"1º Ano EM":{1:["renda","orçamento","profissional"],2:["investimentos","diversificação","retorno"],3:["tributação","impostos","otimização"],4:["segurança","digital","privacidade"]},"2º Ano EM":{1:["economia","indicadores","macro"],2:["mercado","financeiro","trading"],3:["risco","proteção","hedge"],4:["tecnologia","fintech","inovação"]},"3º Ano EM":{1:["projeto","vida","planejamento"],2:["global","internacional","economia"],3:["futuro","inovação","adaptabilidade"],4:["legado","cidadania","responsabilidade"]}},me=(J[z.gradeId]||J["6º Ano"])[z.module]||["educação financeira"],kr={"budget-distribution":["orçamento","distribuição"],comparison:["comparação","análise"],calculation:["cálculo","matemática"],simulation:["simulação","prática"],project:["projeto","aplicação"]}[z.type]||[];return[...me,...kr]},_=z=>z<=3?"bg-green-500":z<=6?"bg-yellow-500":"bg-red-500",I=z=>{if(o&&o.grade&&o.grade.achievements){const me=o.grade.achievements.find(wt=>wt.id===`module_${z}_complete`);if(me)return{title:`${me.icon} ${me.title}`,description:me.description,reward:`${me.rewards.yuCoins} YüCoins + ${me.rewards.xp} XP`,icon:me.icon}}const J={"6º Ano":{1:{title:"🏆 Mestre do Dinheiro",description:"Complete todas as lições do módulo de introdução",reward:"50 YüCoins + 100 XP",icon:"💰"},2:{title:"🧮 Calculadora Humana",description:"Domine a matemática financeira básica",reward:"75 YüCoins + 150 XP",icon:"📊"},3:{title:"💡 Consciência Total",description:"Desenvolva consciência financeira completa",reward:"100 YüCoins + 200 XP",icon:"🎯"},4:{title:"🚀 Projetista Financeiro",description:"Execute projetos práticos com sucesso",reward:"150 YüCoins + 300 XP",icon:"🏆"}},"7º Ano":{1:{title:"📊 Gestor de Orçamento",description:"Complete todas as lições do módulo de orçamento",reward:"75 YüCoins + 150 XP",icon:"📊"},2:{title:"🛒 Consumidor Inteligente",description:"Domine o consumo consciente e inteligente",reward:"100 YüCoins + 200 XP",icon:"🛒"},3:{title:"💹 Investidor Iniciante",description:"Desenvolva conhecimentos sobre poupança e investimentos",reward:"125 YüCoins + 250 XP",icon:"💹"},4:{title:"🛡️ Protetor Financeiro",description:"Execute projetos de segurança financeira com sucesso",reward:"175 YüCoins + 350 XP",icon:"🛡️"}}};return(J[e.gradeId]||J["6º Ano"])[z]};if(i)return n.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-gray-900 dark:to-gray-800 z-50",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"text-lg font-yufin",style:{background:"linear-gradient(to bottom, #EE9116, #f59e0b)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"YuFin"})})]})});if(!o)return n.jsx("div",{className:"text-center p-8",children:n.jsx("p",{className:"text-gray-600",children:"Nenhuma série atribuída. Entre em contato com sua escola."})});const{grade:R,progress:V}=o,$=I(c),D=V.byModule[c],Q=D&&D.completed===D.total&&D.total>0,G=`module_${c}_complete`,U=(O=(W=e.progress)==null?void 0:W.achievements)==null?void 0:O.includes(G);return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-gray-900 dark:to-gray-800",children:[n.jsx("div",{className:"fixed top-0 left-0 right-0 w-full bg-white shadow-lg z-50 rounded-b-xl",style:{borderBottom:"3px solid #EE9116"},children:n.jsxs("div",{className:"flex justify-between items-center h-16 lg:h-18 xl:h-20 px-6 lg:px-8 xl:px-12 w-full",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-lg",children:"👤"})}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-base font-semibold text-gray-800",children:e.name}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-xs",style:f?{color:"#ffffff"}:{color:"#6b7280"},children:["Nível ",((Z=e.progress)==null?void 0:Z.level)||1]}),n.jsxs("span",{className:"text-xs text-primary font-medium",children:["• ",((se=e.progress)==null?void 0:se.totalXp)||((B=e.progress)==null?void 0:B.xp)||0,"/",((H=e.progress)==null?void 0:H.xpToNextLevel)||100," XP"]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-lg px-4 py-2 border-2 border-yellow-300 shadow-sm",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-lg",children:"💰"}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-bold",style:{color:"#EE9116"},children:((Y=e.progress)==null?void 0:Y.yuCoins)||0}),n.jsx("div",{className:"text-xs",style:f?{color:"#ffffff"}:{color:"#6b7280"},children:"YüCoins"})]})]})}),n.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-lg px-4 py-2 border-2 border-yellow-300 shadow-sm",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-lg",children:"🔥"}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-bold",style:{color:"#EE9116"},children:((ee=e.progress)==null?void 0:ee.streak)||0}),n.jsx("div",{className:"text-xs",style:f?{color:"#ffffff"}:{color:"#6b7280"},children:"Dias"})]})]})})]})]})}),n.jsxs("div",{className:"pt-0",children:[ke.isDevModeEnabled()&&n.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-40 bg-red-500 text-white text-sm px-4 py-2 rounded-lg shadow-lg animate-pulse",children:"🔧 MODO DEV ATIVO - Todas as séries e lições liberadas"}),n.jsx("div",{className:"mt-12 h-64 pb-20"}),n.jsx("div",{className:"max-w-6xl lg:max-w-7xl xl:max-w-8xl 2xl:max-w-9xl mx-auto p-6 lg:p-8 xl:p-12",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-lg border-2 border-orange-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-orange-600",children:R.name}),n.jsx("p",{className:"text-gray-600",children:R.description})]}),n.jsx("div",{className:"text-right",children:V.hasContent?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[V.totalCompleted,"/",V.totalLessons]}),n.jsx("div",{className:"text-gray-600",children:"lições concluídas"})]}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"Em breve"})})})]}),n.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-lg",children:"🏫"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-700",children:e.classId?`Turma: ${A(e.classId)}`:"Sem turma atribuída"}),n.jsxs("div",{className:"text-xs text-gray-500",children:[e.gradeId," • ",e.classId?"Turma ativa":"Aguardando atribuição"]})]})]}),!e.classId&&n.jsx("div",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium",children:"⏳ Aguardando"})]})}),V.hasContent?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 shadow-inner",children:n.jsx("div",{ref:C,className:"progress-fill-animated rounded-full h-4 shadow-lg",style:{width:`${m}%`,"--target-width":`${m}%`,background:"linear-gradient(90deg, #EE9116, #FFB300, #FF8F00, #EE9116)",backgroundSize:"200% 100%"}})}),n.jsxs("div",{className:"text-center mt-3",children:[n.jsxs("span",{className:"text-xl font-bold text-orange-600",children:[m,"%"]}),n.jsx("span",{className:"text-gray-600 ml-1",children:" completo"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 shadow-inner",children:n.jsx("div",{className:"w-full bg-gray-300 rounded-full h-4"})}),n.jsx("div",{className:"text-center mt-3",children:n.jsx("span",{className:"text-xl font-bold text-orange-600",children:"Conteúdo em desenvolvimento"})})]})]})}),n.jsxs("div",{className:"max-w-6xl lg:max-w-7xl xl:max-w-8xl 2xl:max-w-9xl mx-auto p-6 lg:p-8 xl:p-12",children:[n.jsxs("div",{className:"flex space-x-3 mb-8 overflow-x-auto lg:grid lg:grid-cols-4 lg:gap-3 lg:overflow-x-visible",children:[[1,2,3,4].map(z=>{const J=V.byModule[z],le=J&&J.completed===J.total&&J.total>0;return n.jsx("button",{onClick:()=>P(z),className:`flex-shrink-0 px-6 py-4 rounded-xl font-semibold transition-all shadow-lg lg:flex-shrink lg:px-4 lg:py-3 lg:text-center ${c===z?"bg-white text-orange-600 border-2 border-orange-500 transform scale-105":le?"bg-green-500 text-white":"bg-white text-gray-700 hover:bg-yellow-50 border-2 border-yellow-200"}`,style:f?{backgroundColor:c===z?"#374151":le?"#10b981":"#374151",color:c===z?"#fb923c":"#ffffff",borderColor:c===z?"#fb923c":le?"#10b981":"#6b7280"}:{},children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-lg font-bold",style:f?{color:c===z?"#fb923c":"#ffffff"}:{},children:["Módulo ",z]}),n.jsx("div",{className:"text-sm opacity-90",style:f?{color:c===z?"#fb923c":"#e5e7eb"}:{},children:J?`${J.completed}/${J.total}`:"0/0"})]})},z)}),(h()||ke.isDevModeEnabled())&&n.jsx("div",{className:"flex-shrink-0",children:(ne=g==null?void 0:g.progression)!=null&&ne.requested&&!ke.isDevModeEnabled()?n.jsx("div",{className:"px-6 py-4 rounded-xl bg-blue-100 border-2 border-blue-300 shadow-lg",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold text-blue-700",children:"⏳"}),n.jsx("div",{className:"text-sm text-blue-600",children:"Aguardando"}),n.jsx("div",{className:"text-xs text-blue-500",children:"Autorização"})]})}):n.jsx("button",{onClick:N,disabled:E,className:`px-6 py-4 rounded-xl font-semibold transition-all shadow-lg transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed ${ke.isDevModeEnabled()?"bg-gradient-to-b from-purple-500 to-purple-600 text-white hover:from-purple-600 hover:to-purple-700":"bg-gradient-to-b from-primary to-secondary text-white hover:from-primary-dark hover:to-secondary-dark"}`,children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:ke.isDevModeEnabled()?"🔧":"🎓"}),n.jsx("div",{className:"text-sm",children:"Próximo"}),n.jsx("div",{className:"text-xs",children:"Ano"})]})})}),(e.gradeId!=="6º Ano"||ke.isDevModeEnabled())&&n.jsx("div",{className:"flex-shrink-0",children:n.jsx("button",{onClick:y,className:`px-6 py-4 rounded-xl font-semibold transition-all shadow-lg transform hover:scale-105 ${ke.isDevModeEnabled()?"bg-gradient-to-b from-purple-500 to-purple-600 text-white hover:from-purple-600 hover:to-purple-700":"bg-gradient-to-b from-primary to-secondary text-white hover:from-primary-dark hover:to-secondary-dark"}`,children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:ke.isDevModeEnabled()?"🔧":"⬅️"}),n.jsx("div",{className:"text-sm",children:"Ano"}),n.jsx("div",{className:"text-xs",children:"Anterior"})]})})})]}),n.jsxs(ti.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[n.jsxs("h3",{className:"text-3xl font-bold text-gray-800 mb-2 flex items-center",children:[n.jsx("span",{className:"mr-3 text-4xl",children:"📚"}),L(c)]}),n.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-yellow-400 to-orange-500 rounded"})]},c),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 lg:gap-6",children:[D&&D.lessons?D.lessons.map((z,J)=>{const le=ke.isDevModeEnabled(),me=le||z.canAccess;return console.log(`📋 Renderizando lição ${J+1}:`,{title:z.title,canAccess:z.canAccess,devModeAccess:me,isCompleted:z.isCompleted,module:z.module,order:z.order,id:z.id}),n.jsx(ti.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:J*.1},className:`relative bg-white rounded-xl shadow-lg border-2 transition-all cursor-pointer transform hover:scale-105 h-64 lg:h-80 hover:shadow-2xl ${z.isCompleted?"border-green-500 shadow-green-200":me?le&&!z.canAccess?"border-purple-300 hover:border-purple-400 shadow-purple-200":"border-yellow-300 hover:border-orange-400 shadow-yellow-200":"border-gray-300 opacity-60"}`,onClick:()=>w(z),children:n.jsxs("div",{className:"p-6 flex flex-col h-full",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",style:{height:"3rem"},children:[n.jsx("h4",{className:"font-bold text-gray-800 text-lg flex-1 pr-2 leading-tight",style:{display:"flex",alignItems:"center",height:"100%"},children:z.title}),n.jsx("div",{className:`w-3 h-3 rounded-full flex-shrink-0 ${_(z.difficulty)}`,style:{marginTop:"0.5rem"}})]}),n.jsx("div",{className:"mb-4",style:{height:"3rem",display:"flex",alignItems:"flex-start"},children:n.jsx("p",{className:"text-gray-600 text-sm leading-tight",style:{lineHeight:"1.4rem"},children:F(z)})}),n.jsx("div",{className:"mb-4",style:{height:"2.5rem",display:"flex",alignItems:"center"},children:n.jsx("div",{className:"flex flex-wrap gap-1",children:q(z).length>0?q(z).slice(0,2).map(wt=>n.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:wt},wt)):n.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs font-medium",children:"Sem tags"})})}),n.jsx("div",{className:"mb-4",style:{height:"2rem",display:"flex",alignItems:"center"},children:n.jsxs("div",{className:"flex items-center justify-between text-sm w-full",children:[n.jsxs("span",{style:f?{color:"#ffffff"}:{color:"#6b7280"},children:["⏱️ ",z.estimatedTime," min"]}),n.jsxs("span",{style:f?{color:"#ffffff"}:{color:"#6b7280"},children:["📊 ",z.order,"/12"]})]})}),n.jsx("div",{className:"flex-grow"}),n.jsx("button",{className:`w-full py-3 px-4 rounded-lg font-semibold transition-colors ${me?z.isCompleted?"bg-green-500 text-white hover:bg-green-600":le&&!z.canAccess?"bg-purple-600 text-white hover:bg-purple-700":"bg-orange-600 text-white hover:bg-orange-700":"bg-orange-400 text-white cursor-not-allowed"}`,style:{backgroundColor:me?z.isCompleted?"#10b981":le&&!z.canAccess?"#7c3aed":"#ea580c":"#fb923c",color:"white",height:"3rem"},children:me?z.isCompleted?"Revisar":le&&!z.canAccess?"🔧 Dev":"Começar":"Bloqueado"})]})},z.id)}):n.jsx("div",{className:"col-span-full text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"Nenhuma lição disponível para este módulo."})}),n.jsx(ti.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:`relative bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl shadow-lg border-2 transition-all hover:shadow-2xl ${Q?"border-yellow-400 shadow-yellow-200":"border-gray-300"}`,style:f?{background:"linear-gradient(135deg, #7c3aed 0%, #ec4899 100%)",borderColor:Q?"#fbbf24":"#6b7280"}:{},children:n.jsxs("div",{className:"p-6 text-white",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("div",{className:"text-4xl mb-2",children:$.icon}),n.jsx("h4",{className:"font-bold text-lg mb-2",style:f?{color:"#ffffff"}:{},children:$.title}),n.jsx("p",{className:"text-purple-100 text-sm mb-4",style:f?{color:"#e5e7eb"}:{},children:$.description})]}),n.jsx("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 mb-4",style:f?{backgroundColor:"rgba(255, 255, 255, 0.1)"}:{},children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm text-purple-600 font-semibold",style:f?{color:"#ffffff"}:{},children:"Recompensa"}),n.jsx("div",{className:"font-bold text-purple-900 !important",style:f?{color:"#ffffff"}:{color:"#581c87"},children:$.reward})]})}),n.jsx("div",{className:"text-center",children:Q?n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx("span",{className:"text-2xl",children:"🎉"}),n.jsx("span",{className:"font-bold text-white",style:f?{color:"#ffffff"}:{},children:U?"Conquistado!":"Módulo Completo!"})]}):n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm text-purple-100 mb-2",style:f?{color:"#e5e7eb"}:{},children:"Progresso"}),n.jsx("div",{className:"font-bold text-white",style:f?{color:"#ffffff"}:{},children:D?`${D.completed}/${D.total}`:"0/0"})]})})]})})]}),n.jsx("div",{className:"mt-12 h-64 pb-20"})]})]})]})},we=({title:e,timeSpent:t,onExit:s,children:r,icon:o,reviewMode:a})=>{const[i,l]=j.useState(!1);return j.useEffect(()=>{const c=localStorage.getItem("darkMode")==="true";l(c);const d=()=>{const m=localStorage.getItem("darkMode")==="true";l(m)};return window.addEventListener("darkModeChanged",d),()=>{window.removeEventListener("darkModeChanged",d)}},[]),n.jsxs("div",{className:"h-screen lesson-background flex flex-col font-sans",children:[n.jsx("div",{className:"backdrop-blur-md p-4 shadow-xl border-b-4 border-primary-dark rounded-b-3xl",style:{backgroundColor:i?"rgba(55, 65, 81, 0.9)":"rgba(255, 255, 255, 0.9)"},children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{onClick:s,className:"transition text-2xl font-bold px-2 py-1 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",style:{color:i?"#ffffff":"#6b7280"},"aria-label":"Sair da lição",children:"←"}),n.jsxs("div",{className:"flex items-center gap-2",children:[o&&n.jsx("span",{className:"text-3xl",children:o}),n.jsx("h1",{className:"text-2xl lg:text-3xl xl:text-4xl font-yufin font-bold drop-shadow-sm tracking-tight",style:{color:i?"#ffffff":"#EE9116"},children:e})]}),n.jsxs("div",{className:"text-sm font-semibold min-w-[48px] text-right font-sans",style:{color:i?"#ffffff":"#6b7280"},children:[t,"s"]})]})}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-6 lg:p-8 xl:p-12 pb-20 lesson-content-background",children:n.jsxs("div",{className:"rounded-2xl shadow-2xl border-2 border-primary/20 p-6 lg:p-8 xl:p-12 max-w-2xl lg:max-w-4xl xl:max-w-5xl 2xl:max-w-6xl w-full animate-fade-in font-sans transition-all duration-300 overflow-y-auto",style:{backgroundColor:i?"rgba(55, 65, 81, 0.95)":"rgba(255, 255, 255, 0.95)"},children:[a&&n.jsxs("div",{className:"mb-4 p-3 rounded-xl border text-center font-bold flex items-center justify-center gap-2 animate-fadeIn",style:{backgroundColor:i?"#451a03":"#fef3c7",borderColor:i?"#fbbf24":"#f59e0b",color:i?"#fbbf24":"#92400e"},children:[n.jsx("span",{className:"text-xl",children:"🔄"})," Modo Revisão Ativo — Nenhuma recompensa será computada"]}),r]})})]})},jj=({lesson:e,onComplete:t,onExit:s})=>{var v,f,S,T,A,M,h;const[r,o]=j.useState([]),[a,i]=j.useState(null),[l,c]=j.useState(0),[d,m]=j.useState(0),[u]=j.useState(Date.now()),[g,x]=j.useState(!1);j.useEffect(()=>{const b=localStorage.getItem("darkMode")==="true";x(b);const N=()=>{const y=localStorage.getItem("darkMode")==="true";x(y)};return window.addEventListener("darkModeChanged",N),()=>{window.removeEventListener("darkModeChanged",N)}},[]),j.useEffect(()=>{var L,F,q,_,I,R,V,$,D;let b=[],N=!1,y=!1;(L=e.content)!=null&&L.items&&((F=e.content)!=null&&F.zones)?(b=e.content.items.map(Q=>Q.text||Q),N=!0):(q=e.content)!=null&&q.items&&((_=e.content)!=null&&_.dropZones)?(b=e.content.items.map(Q=>Q.text||Q),N=!0):(I=e.content)!=null&&I.items&&((R=e.content)!=null&&R.categories)?(b=e.content.items.map(Q=>Q.text||Q),y=!0):(V=e.content)!=null&&V.items?b=e.content.items:($=e.content)!=null&&$.zones?(b=e.content.zones.flatMap(Q=>Q.items),N=!0):(D=e.content)!=null&&D.pairs&&(b=e.content.pairs.flatMap(Q=>[Q.left,Q.right]));const w=[...b].sort(()=>Math.random()-.5).map((Q,G)=>({text:typeof Q=="string"?Q:Q.text||Q.name||"Item",id:typeof Q=="object"&&Q.id?Q.id:G,isPlaced:!1,order:G+1,isZonesFormat:N,isCategoriesFormat:y,originalItem:Q}));o(w)},[e]),j.useEffect(()=>{const b=setInterval(()=>{m(Math.floor((Date.now()-u)/1e3))},1e3);return()=>clearInterval(b)},[u]),j.useEffect(()=>{r.length>0&&r.every(N=>N.isPlaced)&&setTimeout(()=>{p()},500)},[r]);const E=(b,N)=>{i(N),b.dataTransfer.effectAllowed="move"},k=b=>{b.preventDefault(),b.dataTransfer.dropEffect="move"},C=(b,N)=>{if(b.preventDefault(),a){let y=!1;if(e.content.zones||e.content.dropZones){const P=e.content.items.find(w=>(typeof w=="object"?w.text:w)===a.text);y=P&&P.correctZone===N}else if(e.content.categories){const P=e.content.items.find(w=>(typeof w=="object"?w.text:w)===a.text);y=P&&P.correctCategory===N}y&&(o(P=>P.map(w=>w.id===a.id?{...w,isPlaced:!0,zone:N}:w)),c(P=>P+25)),i(null)}},p=()=>{setTimeout(()=>{let b=0;const N=r.length;r.forEach(w=>{if(w.isPlaced&&w.zone){const L=e.content.items.find(F=>(typeof F=="object"?F.text:F)===w.text);if(L){const F=e.content.zones||e.content.dropZones?L.correctZone:L.correctCategory;w.zone===F&&b++}}});const y=b===N,P=y?100:Math.round(b/N*100);t({score:P,timeSpent:d,isPerfect:y,correctAnswers:b,totalQuestions:N})},100)};return n.jsxs(we,{title:e.title,timeSpent:d,onExit:s,icon:"🎯",children:[n.jsxs("div",{className:"text-center mb-6 font-sans",children:[((v=e.content)==null?void 0:v.scenario)&&typeof e.content.scenario=="string"&&n.jsx("p",{className:"text-gray-600 mb-4 font-sans",children:e.content.scenario}),((S=(f=e.content)==null?void 0:f.scenario)==null?void 0:S.description)&&n.jsx("p",{className:"text-gray-600 mb-4 font-sans",children:e.content.scenario.description}),((T=e.content)==null?void 0:T.instructions)&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[n.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:e.content.instructions.title}),n.jsx("p",{className:"text-blue-700 text-sm",children:e.content.instructions.description})]})]}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center",children:"Categorias:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-4xl mx-auto",children:(A=e.content)!=null&&A.zones||(M=e.content)!=null&&M.dropZones?(e.content.zones||e.content.dropZones).map((b,N)=>n.jsx("div",{onDragOver:k,onDrop:y=>C(y,b.id),className:`p-6 border-2 border-dashed rounded-2xl transition-all duration-200 text-center font-medium shadow-lg font-sans min-h-[120px] flex flex-col justify-center ${r.find(y=>y.isPlaced&&y.zone===b.id)?"border-green-300":"border-gray-300 hover:border-blue-400"}`,style:{backgroundColor:r.find(y=>y.isPlaced&&y.zone===b.id)?g?"#064e3b":"#f0fdf4":g?"#374151":"#ffffff",color:g?"#ffffff":"#1f2937",borderColor:b.color+"40"},children:(()=>{const y=r.filter(P=>P.isPlaced&&P.zone===b.id);return y.length>0?n.jsxs("div",{className:"space-y-2 font-sans",children:[n.jsxs("div",{className:"flex items-center justify-center mb-2",children:[n.jsx("span",{className:"text-2xl mr-2",children:b.icon}),n.jsx("p",{className:"font-bold font-sans",style:{color:g?"#ffffff":"#1f2937"},children:b.name})]}),y.map((P,w)=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-green-300",style:{backgroundColor:g?"#065f46":"#dcfce7",color:g?"#ffffff":"#1f2937"},children:[n.jsx("p",{className:"font-medium font-sans text-sm",children:P.text}),n.jsx("span",{className:"text-green-600 text-lg font-sans",children:"✓"})]},w))]}):n.jsxs("div",{className:"text-center font-sans",children:[n.jsxs("div",{className:"flex items-center justify-center mb-2",children:[n.jsx("span",{className:"text-2xl mr-2",children:b.icon}),n.jsx("p",{className:"font-bold font-sans",style:{color:g?"#ffffff":"#1f2937"},children:b.name})]}),n.jsx("p",{className:"text-sm font-sans",style:{color:g?"#d1d5db":"#6b7280"},children:"Arraste um item aqui"})]})})()},N)):(h=e.content)!=null&&h.categories?e.content.categories.map((b,N)=>n.jsx("div",{onDragOver:k,onDrop:y=>C(y,b.id),className:`p-6 border-2 border-dashed rounded-2xl transition-all duration-200 text-center font-medium shadow-lg font-sans min-h-[120px] flex flex-col justify-center ${r.find(y=>y.isPlaced&&y.zone===b.id)?"border-green-300":"border-gray-300 hover:border-blue-400"}`,style:{backgroundColor:r.find(y=>y.isPlaced&&y.zone===b.id)?g?"#064e3b":"#f0fdf4":g?"#374151":"#ffffff",color:g?"#ffffff":"#1f2937",borderColor:b.color+"40"},children:(()=>{const y=r.filter(P=>P.isPlaced&&P.zone===b.id);return y.length>0?n.jsxs("div",{className:"space-y-2 font-sans",children:[n.jsx("p",{className:"font-bold font-sans text-center mb-2",style:{color:g?"#ffffff":"#1f2937"},children:b.name}),y.map((P,w)=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-green-300",style:{backgroundColor:g?"#065f46":"#dcfce7",color:g?"#ffffff":"#1f2937"},children:[n.jsx("p",{className:"font-medium font-sans text-sm",children:P.text}),n.jsx("span",{className:"text-green-600 text-lg font-sans",children:"✓"})]},w))]}):n.jsxs("div",{className:"text-center font-sans",children:[n.jsx("p",{className:"font-bold font-sans mb-2",style:{color:g?"#ffffff":"#1f2937"},children:b.name}),n.jsx("p",{className:"text-sm font-sans",style:{color:g?"#d1d5db":"#6b7280"},children:"Arraste um item aqui"})]})})()},N)):null})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-lg font-bold mb-4 text-center",style:{color:g?"#ffffff":"#1f2937"},children:"Itens:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-w-6xl mx-auto",children:r.filter(b=>!b.isPlaced).map((b,N)=>n.jsx("div",{draggable:!0,onDragStart:y=>E(y,b),className:"p-4 border-2 border-gray-300 rounded-xl shadow-md cursor-move hover:shadow-lg hover:border-blue-400 transition-all duration-200 font-sans h-20 flex items-center justify-center",style:{backgroundColor:g?"#374151":"#ffffff",color:g?"#ffffff":"#1f2937"},children:n.jsx("p",{className:"font-medium text-center font-sans text-sm leading-tight",children:b.text})},b.id))})]})]})]})},Nj=({lesson:e,onComplete:t,onExit:s})=>{var N;const[r,o]=j.useState(0),[a,i]=j.useState([]),[l,c]=j.useState(null),[d,m]=j.useState(!1),[u,g]=j.useState(!1),[x,E]=j.useState(0),[k,C]=j.useState(!1),[p,v]=j.useState(0),[f,S]=j.useState(!1);j.useEffect(()=>{const y=localStorage.getItem("darkMode")==="true";S(y);const P=()=>{const w=localStorage.getItem("darkMode")==="true";S(w)};return window.addEventListener("darkModeChanged",P),()=>{window.removeEventListener("darkModeChanged",P)}},[]);const T=jt.useMemo(()=>e.content.questions&&e.content.questions.length>0?{questions:e.content.questions.map(y=>({id:y.id,category:y.category||"geral",difficulty:y.difficulty||"medio",question:y.question,options:y.options,correctAnswer:y.correctAnswer,explanation:y.explanation,points:y.points||10}))}:e.content.question&&e.content.options?{questions:[{id:1,category:"geral",difficulty:"medio",question:e.content.question,options:e.content.options,correctAnswer:0,explanation:"Explicação não disponível",points:10}]}:{questions:[]},[e.content]);j.useEffect(()=>{const y=setInterval(()=>{E(P=>P+1)},1e3);return()=>clearInterval(y)},[]);const A=(N=T.questions)==null?void 0:N[r],M=y=>{if(d)return;c(y),m(!0);const P=y===A.correctAnswer;g(P);const w=P?A.points:0;v(L=>L+w),i(L=>[...L,{questionIndex:r,answer:y,isCorrect:P,points:w}]),setTimeout(()=>{C(!0)},500)},h=()=>{if(r<T.questions.length-1)o(y=>y+1),c(null),m(!1),g(!1),C(!1);else{const y=T.questions.reduce((L,F)=>L+F.points,0),P=Math.round(p/y*100);t({score:P,timeSpent:x,isPerfect:p===y,totalScore:p,totalPossiblePoints:y,correctAnswers:a.filter(L=>L.isCorrect).length,totalQuestions:T.questions.length,selectedAnswers:[...a,{questionIndex:r,answer:l,isCorrect:u,points:u?A.points:0}]})}},b=y=>{if(!d)return f?"bg-gray-700 border-2 border-gray-500 hover:border-primary transition-colors":"bg-white border-2 border-gray-300 hover:border-primary transition-colors";const P=y===A.correctAnswer;return P?f?"bg-green-900 border-2 border-green-500 text-green-200":"bg-green-100 border-2 border-green-500 text-green-800":l===y&&!P?f?"bg-red-900 border-2 border-red-500 text-red-200":"bg-red-100 border-2 border-red-500 text-red-800":f?"bg-gray-600 border-2 border-gray-400 text-gray-300":"bg-gray-100 border-2 border-gray-300 text-gray-500"};return!T.questions||T.questions.length===0?n.jsx(we,{title:e.title,timeSpent:x,onExit:s,icon:"❓",children:n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📝"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dados da lição não disponíveis"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Esta lição está sendo preparada."}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Voltar"})]})})}):n.jsxs(we,{title:e.title,timeSpent:x,onExit:s,children:[n.jsx("div",{className:"text-center mb-6",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Pergunta ",r+1," de ",T.questions.length]})}),A&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary p-6 text-white",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-bold",style:{background:"linear-gradient(to right, #EE9116, #FFB300)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:r+1})}),n.jsxs("div",{children:[n.jsx("span",{className:"text-lg font-semibold",children:"Pergunta"}),n.jsx("div",{className:"text-sm opacity-90",children:"Escolha a resposta correta"})]})]}),n.jsx("p",{className:"text-xl leading-relaxed",style:{color:"#ffffff"},children:A.question})]}),n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"grid grid-cols-2 gap-6",children:A.options.map((y,P)=>n.jsx("button",{onClick:()=>M(P),disabled:d,className:`group relative p-4 rounded-lg text-left transition-all duration-200 border-2 ${d?b(P):"hover:shadow-md"} ${d?"cursor-default":"cursor-pointer"}`,style:{backgroundColor:d?void 0:f?"#374151":"#f9fafb",borderColor:d?void 0:f?"#6b7280":"#e5e7eb",color:d?void 0:f?"#ffffff":"#1f2937"},children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg ${d?P===A.correctAnswer?"bg-green-500 text-white":l===P?"bg-red-500 text-white":"bg-gray-200 text-gray-500":"bg-gradient-to-r from-primary to-secondary text-white"}`,children:String.fromCharCode(65+P)}),n.jsx("span",{className:"text-sm font-medium flex-1",style:{color:d?void 0:f?"#ffffff":"#1f2937"},children:y}),d&&P===A.correctAnswer&&n.jsx("div",{className:"text-xl",children:"✅"}),d&&l===P&&P!==A.correctAnswer&&n.jsx("div",{className:"text-xl",children:"❌"})]})},P))})})]}),k&&A&&n.jsxs("div",{className:"rounded-xl shadow-lg p-6 mb-6",style:{backgroundColor:f?"#374151":"#ffffff",borderColor:f?"#4b5563":"#e5e7eb"},children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:f?"#451a03":"#fef3c7"},children:n.jsx("span",{className:"text-lg",style:{color:f?"#fbbf24":"#d97706"},children:"💡"})}),n.jsx("h4",{className:"font-bold text-lg",style:{color:f?"#ffffff":"#1f2937"},children:"Explicação"})]}),n.jsx("p",{className:"leading-relaxed",style:{color:f?"#e5e7eb":"#374151"},children:A.explanation})]}),d&&n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("button",{onClick:h,className:"gradient-primary text-white px-8 py-3 rounded-lg font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary",children:r<T.questions.length-1?"Próxima Pergunta →":"Finalizar Quiz 🏆"})})]})},wj=({lesson:e,onComplete:t,onExit:s,reviewMode:r})=>{var A,M;const[o,a]=j.useState(null),[i,l]=j.useState(!1),[c,d]=j.useState(!1),[m,u]=j.useState(0),[g,x]=j.useState(!1),[E,k]=j.useState(0),[C,p]=j.useState(!1);j.useEffect(()=>{const h=localStorage.getItem("darkMode")==="true";p(h);const b=()=>{const N=localStorage.getItem("darkMode")==="true";p(N)};return window.addEventListener("darkModeChanged",b),()=>{window.removeEventListener("darkModeChanged",b)}},[]),j.useEffect(()=>{const h=setInterval(()=>{u(b=>b+1)},1e3);return()=>clearInterval(h)},[]);const v=jt.useMemo(()=>{if(!e.content)return{options:[],question:"",currentSituation:null};if(e.content.scenario&&e.content.options&&e.content.comparison)return{scenario:e.content.scenario,options:e.content.options.map(h=>({text:h.choice,correct:h.correct,feedback:h.feedback,details:h.details,analysis:h.analysis})),comparison:e.content.comparison,conclusion:e.content.conclusion,isDetailedFormat:!0};if(e.content.situations&&e.content.situations.length>0){const h=e.content.situations[E];if(h.options&&h.options[0]&&h.options[0].brand)return{options:h.options.map(b=>({text:`${b.brand} - R$ ${b.price.toFixed(2).replace(".",",")}${b.quantity?` (${b.quantity} unidades)`:""} - ${b.quality}`,correct:b.brand===h.correctAnswer,explanation:h.explanation,details:b})),question:h.question,currentSituation:h,totalSituations:e.content.situations.length,scenario:e.content.scenario};if(h.options&&h.options[0]&&h.options[0].choice)return{options:h.options.map(b=>({text:b.choice,correct:b.quality==="excelente"||b.quality==="boa",explanation:b.feedback,consequence:b.consequence,impact:b.impact,quality:b.quality,details:b})),question:h.situation,currentSituation:h,totalSituations:e.content.situations.length,scenario:e.content.scenario}}return e.content.options&&e.content.options.length>0?{options:e.content.options,question:e.content.question||e.content.text,currentSituation:null,totalSituations:1,scenario:e.content.scenario}:e.content.choices&&e.content.choices.length>0?{options:e.content.choices.map(h=>({text:h.text,correct:h.correct,feedback:h.feedback,explanation:h.feedback,points:h.points||(h.correct?100:50)})),question:e.content.question||"Escolha a melhor opção",currentSituation:null,totalSituations:1,scenario:e.content.scenario}:{options:[],question:"",currentSituation:null}},[e.content,E]),f=h=>{if(i)return;a(h),l(!0);const b=(v.currentSituation&&v.currentSituation.options&&v.currentSituation.options[0]&&v.currentSituation.options[0].choice,h.correct);d(b),setTimeout(()=>{x(!0)},500)},S=()=>{if(v.totalSituations>1&&E<v.totalSituations-1){k(N=>N+1),a(null),l(!1),d(!1),x(!1);return}t({score:c?100:50,timeSpent:m,isPerfect:c,feedback:o.explanation||o.feedback})},T=h=>i?h.correct?"bg-green-100 border-2 border-green-500 text-green-800":o===h&&!h.correct?"bg-red-100 border-2 border-red-500 text-red-800":"bg-gray-100 border-2 border-gray-300 text-gray-500":"bg-white border-2 border-gray-300 hover:border-primary transition-colors";return console.log("🔍 ChoicesLesson - lesson title:",e.title),console.log("🔍 ChoicesLesson - options count:",((M=(A=e.content)==null?void 0:A.options)==null?void 0:M.length)||0),n.jsxs(we,{title:e.title,timeSpent:m,onExit:s,icon:"💭",reviewMode:r,children:[n.jsxs("div",{className:"text-center mb-8 font-sans",children:[v.isDetailedFormat&&v.scenario&&n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4 font-sans",children:v.scenario.title}),n.jsx("p",{className:"text-gray-600 font-sans mb-4",children:v.scenario.description}),n.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 mb-4",children:n.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["💡 ",v.scenario.objective]})})]}),!v.isDetailedFormat&&v.scenario&&n.jsx("p",{className:"text-sm text-gray-500 mb-2 font-sans",children:v.scenario}),!v.isDetailedFormat&&n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4 font-sans",children:v.question}),v.totalSituations>1&&n.jsxs("p",{className:"text-sm text-gray-600 font-sans",children:["Situação ",E+1," de ",v.totalSituations]}),n.jsx("p",{className:"text-gray-600 font-sans",children:v.isDetailedFormat?"Analise as opções e escolha a melhor decisão":"Escolha a melhor opção"})]}),n.jsx("div",{className:"space-y-4 mb-6 font-sans",children:v.options&&v.options.length>0?v.options.map((h,b)=>n.jsx("button",{onClick:()=>f(h),disabled:i,className:`w-full p-4 rounded-2xl text-left font-medium shadow-md border-2 transition-all duration-200 font-sans ${T(h)} ${i?"cursor-default":"hover:scale-105 cursor-pointer"} focus:outline-none focus:ring-2 focus:ring-primary`,tabIndex:0,children:n.jsxs("div",{className:"flex items-start font-sans",children:[n.jsxs("span",{className:"text-lg font-semibold mr-3 font-sans mt-1",children:[String.fromCharCode(65+b),"."]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-lg font-sans block mb-2",children:h.text}),v.isDetailedFormat&&h.details&&n.jsx("div",{className:"text-sm text-gray-600 space-y-1",children:n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("span",{children:[n.jsx("strong",{children:"Marca:"})," ",h.details.brand]}),n.jsxs("span",{children:[n.jsx("strong",{children:"Preço:"})," R$ ",h.details.price]}),n.jsxs("span",{children:[n.jsx("strong",{children:"Qualidade:"})," ",h.details.quality]}),n.jsxs("span",{children:[n.jsx("strong",{children:"Durabilidade:"})," ",h.details.durability]})]})})]})]})},b)):n.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Opções não disponíveis"}),n.jsx("p",{className:"text-gray-600",children:"Esta lição está sendo preparada ou há um problema de carregamento."}),n.jsx("div",{className:"mt-4 text-sm text-gray-500",children:n.jsxs("p",{children:["Conteúdo recebido: ",JSON.stringify(e.content,null,2)]})})]})}),g&&n.jsxs("div",{className:`p-4 rounded-2xl mb-6 text-center shadow-lg border-2 font-sans transition-all duration-200 ${(o==null?void 0:o.quality)==="excelente"?"bg-green-50 text-green-800 border-green-200":(o==null?void 0:o.quality)==="boa"?"bg-blue-50 text-blue-800 border-blue-200":(o==null?void 0:o.quality)==="ruim"?"bg-red-50 text-red-800 border-red-200":c?"bg-green-50 text-green-800 border-green-200":"bg-red-50 text-red-800 border-red-200"}`,children:[n.jsx("div",{className:"text-2xl mb-2",children:(o==null?void 0:o.quality)==="excelente"?"🎉":(o==null?void 0:o.quality)==="boa"?"👍":(o==null?void 0:o.quality)==="ruim"?"😔":c?"🎉":"😔"}),n.jsx("p",{className:"font-semibold font-sans",children:(o==null?void 0:o.quality)==="excelente"?"Excelente escolha!":(o==null?void 0:o.quality)==="boa"?"Boa escolha!":(o==null?void 0:o.quality)==="ruim"?"Pode melhorar!":c?"Excelente escolha!":"Tente novamente!"}),n.jsx("p",{className:"text-sm font-sans mb-2",children:(o==null?void 0:o.explanation)||(o==null?void 0:o.feedback)}),v.isDetailedFormat&&(o==null?void 0:o.analysis)&&n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[n.jsx("p",{className:"text-sm font-medium text-green-800 mb-2",children:"✅ Pontos Positivos:"}),n.jsx("ul",{className:"text-sm text-green-700 space-y-1",children:o.analysis.pros.map((h,b)=>n.jsxs("li",{children:["• ",h]},b))})]}),n.jsxs("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:[n.jsx("p",{className:"text-sm font-medium text-red-800 mb-2",children:"⚠️ Pontos de Atenção:"}),n.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:o.analysis.cons.map((h,b)=>n.jsxs("li",{children:["• ",h]},b))})]})]}),n.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"💡 Lição Aprendida:"}),n.jsx("p",{className:"text-sm text-blue-700",children:o.analysis.lesson})]})]}),!v.isDetailedFormat&&(o==null?void 0:o.consequence)&&n.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Consequência:"}),n.jsx("p",{className:"text-sm text-blue-700",children:o.consequence}),(o==null?void 0:o.impact)&&n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1 mt-2",children:"Impacto:"}),n.jsx("p",{className:"text-sm text-blue-700",children:o.impact})]})]})]}),i&&n.jsx("div",{className:"mt-6",children:n.jsx("button",{onClick:S,className:"w-full bg-primary text-white py-4 rounded-2xl font-bold text-lg shadow-lg hover:bg-primary-dark transition-colors transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary font-sans",children:v.totalSituations>1&&E<v.totalSituations-1?"Próxima Situação":"Continuar"})})]})},Sj=({lesson:e,onComplete:t,onExit:s})=>{var p,v;const[r,o]=j.useState([]),[a,i]=j.useState({}),[l,c]=j.useState(0),[d,m]=j.useState(!1),u=jt.useMemo(()=>{if(!e.content)return{categories:[],items:[]};if(e.content.categories&&e.content.categories.length>0&&e.content.items&&e.content.items.length>0)return{categories:e.content.categories.map(f=>f.name),items:e.content.items.map(f=>({text:f.text||f,category:f.correctCategory||f.category,correctCategory:f.correctCategory||f.category}))};if(e.content.categories&&e.content.categories.length>0){const f=[];return e.content.categories.forEach(S=>{S.items&&Array.isArray(S.items)&&S.items.forEach(T=>{f.push({text:T,category:S.name,correctCategory:S.name})})}),{categories:e.content.categories.map(S=>S.name),items:f}}return e.content.items&&e.content.items.length>0?{categories:[...new Set(e.content.items.map(S=>S.category))],items:e.content.items}:{categories:[],items:[]}},[e.content]);j.useEffect(()=>{const f=[...u.items].sort(()=>Math.random()-.5);o(f),console.log("🔍 Dados da lição recebidos:",{title:e.title,type:e.type,text:e.content.text,categories:u.categories,items:u.items});const S=setInterval(()=>{c(T=>T+1)},1e3);return()=>clearInterval(S)},[u.items,e.title,e.type,e.content.text]);const g=(f,S)=>{i(A=>({...A,[f.text]:S})),o(A=>A.filter(M=>M.text!==f.text));const T={...a,[f.text]:S};Object.keys(T).length===u.items.length&&x(T)},x=f=>{const S=u.items.filter(M=>f[M.text]===M.correctCategory||f[M.text]===M.category).length,T=Math.round(S/u.items.length*100),A=S===u.items.length;m(!0),setTimeout(()=>{t({score:T,timeSpent:l,isPerfect:A,correctAnswers:S,totalItems:u.items.length})},2e3)},E=()=>u.categories,k=f=>Object.entries(a).filter(([S,T])=>T===f).map(([S])=>S),C=f=>{i(S=>{const T={...S};return delete T[f],T}),o(S=>[...S,u.items.find(T=>T.text===f)])};return console.log("🔍 ClassifyLesson - lesson title:",e.title),console.log("🔍 ClassifyLesson - categories count:",((p=u.categories)==null?void 0:p.length)||0),console.log("🔍 ClassifyLesson - items count:",((v=u.items)==null?void 0:v.length)||0),n.jsxs(we,{title:e.title,timeSpent:l,onExit:s,icon:"📂",children:[n.jsxs("div",{className:"text-center mb-8 font-sans",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4 font-sans",children:e.content.scenario?e.content.scenario.split(".")[0]+".":e.content.text||"Classifique os itens nas categorias corretas"}),n.jsx("p",{className:"text-gray-600 font-sans",children:e.content.scenario?e.content.scenario.split(".").slice(1).join(".").trim():"Classifique os itens nas categorias corretas"})]}),u.items&&u.items.length>0&&u.categories&&u.categories.length>0?n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8 font-sans",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-center font-sans",children:"Itens:"}),n.jsx("div",{className:"space-y-4 font-sans w-full max-w-md",children:r&&r.map((f,S)=>n.jsx("div",{draggable:!0,onDragStart:T=>T.dataTransfer.setData("item",JSON.stringify(f)),className:"p-4 border-2 border-dashed rounded-2xl bg-white shadow-md cursor-move text-center font-medium hover:bg-interface hover:border-primary transition-all duration-200 font-sans",children:f.text},S))})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-center font-sans",children:"Categorias:"}),n.jsx("div",{className:"space-y-4 font-sans w-full max-w-md",children:E()&&E().map(f=>n.jsxs("div",{onDrop:S=>{S.preventDefault();const T=JSON.parse(S.dataTransfer.getData("item"));g(T,f)},onDragOver:S=>S.preventDefault(),className:"border-2 border-dashed border-gray-300 rounded-2xl p-4 min-h-[100px] bg-gray-50 shadow-inner hover:border-primary transition-all duration-200 font-sans",children:[n.jsx("h4",{className:"font-semibold text-lg mb-2 text-center font-sans",children:f}),n.jsx("div",{className:"space-y-1 font-sans",children:k(f)&&k(f).map((S,T)=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded p-2 text-sm shadow-sm font-sans flex items-center justify-between",children:[n.jsx("span",{children:S}),n.jsx("button",{onClick:()=>C(S),className:"ml-2 text-red-400 hover:text-red-600 transition-colors rounded-full focus:outline-none focus:ring-2 focus:ring-red-300",title:"Remover da categoria","aria-label":"Remover da categoria",children:"×"})]},T))})]},f))})]})]}):n.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📝"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Conteúdo não disponível"}),n.jsx("p",{className:"text-gray-600",children:"Esta lição está sendo preparada."})]}),d&&n.jsxs("div",{className:"mt-6 p-4 bg-green-50 text-green-800 rounded-2xl text-center shadow-lg border-2 border-green-200 font-sans transition-all duration-200",children:[n.jsx("div",{className:"text-2xl mb-2",children:"🎉"}),n.jsx("p",{className:"font-semibold font-sans",children:"Classificação concluída!"})]})]})},Cj=({lesson:e,onComplete:t,onExit:s})=>{var I,R,V,$,D,Q,G,U,W,O,Z,se;const[r,o]=j.useState([]),[a,i]=j.useState([]),[l,c]=j.useState(null),[d,m]=j.useState(null),[u,g]=j.useState([]),[x,E]=j.useState(0),[k,C]=j.useState(!1),[p,v]=j.useState([]),[f,S]=j.useState([]),[T,A]=j.useState([]),[M,h]=j.useState(!1),[b,N]=j.useState(!1);j.useEffect(()=>{const B=localStorage.getItem("darkMode")==="true";N(B);const H=()=>{const Y=localStorage.getItem("darkMode")==="true";N(Y)};return window.addEventListener("darkModeChanged",H),()=>{window.removeEventListener("darkModeChanged",H)}},[]);const y=jt.useMemo(()=>{var B;return e.content?e.content.gameConfig?{pairs:((B=e.content.pairs)==null?void 0:B.map(H=>({left:H.left||"Item esquerdo",right:H.right||"Item direito",text:`${H.left||""} - ${H.right||""}`,explanation:H.explanation||"",educationalTip:H.educationalTip||"",category:H.category||"",difficulty:H.difficulty||"médio"})))||[],gameFormat:e.content.gameConfig.format||"association",gameConfig:e.content.gameConfig,instructions:e.content.instructions,visual:e.content.visual,feedback:e.content.feedback}:e.content.pairs&&e.content.pairs.length>0?{pairs:e.content.pairs.map(H=>{var Y,ee,ne,z;return{left:((Y=H.card1)==null?void 0:Y.text)||H.left||"Item esquerdo",right:((ee=H.card2)==null?void 0:ee.text)||H.right||"Item direito",text:`${((ne=H.card1)==null?void 0:ne.text)||H.left||""} - ${((z=H.card2)==null?void 0:z.text)||H.right||""}`,explanation:H.explanation||"",educationalTip:H.educationalTip||""}}),gameFormat:e.content.gameFormat||"association",gameSettings:e.content.gameSettings||{}}:e.content.pairs&&e.content.pairs.length>0?{pairs:e.content.pairs.map(H=>{var Y,ee;return{left:H.left||((Y=H.text)==null?void 0:Y.split(" - ")[0])||"Item esquerdo",right:H.right||((ee=H.text)==null?void 0:ee.split(" - ")[1])||"Item direito",text:`${H.left||""} - ${H.right||""}`,explanation:H.explanation||"",educationalTip:H.educationalTip||""}}),gameFormat:"association",gameSettings:{}}:e.content.items&&e.content.items.length>0?{pairs:e.content.items.map(H=>{var Y,ee;return{left:((Y=H.text)==null?void 0:Y.split(" - ")[0])||"Item esquerdo",right:((ee=H.text)==null?void 0:ee.split(" - ")[1])||"Item direito",text:H.text||"Item",explanation:H.explanation||"",educationalTip:H.educationalTip||""}}),gameFormat:"association",gameSettings:{}}:{pairs:[],gameFormat:"association",gameSettings:{}}:{pairs:[],gameFormat:"association"}},[e.content]);j.useEffect(()=>{var Y;if((y.gameFormat||((Y=e.content)==null?void 0:Y.gameFormat)||"association")==="memory"){const ee=[];y.pairs.forEach((ne,z)=>{ee.push({id:`card-${z}-left`,text:ne.left,pairId:z,type:"left",isFlipped:!1,isMatched:!1}),ee.push({id:`card-${z}-right`,text:ne.right,pairId:z,type:"right",isFlipped:!1,isMatched:!1})}),v(ee.sort(()=>Math.random()-.5)),console.log("🎮 Memory cards initialized:",ee.length)}else{const ee=y.pairs.map(z=>({...z,left:z.left})),ne=y.pairs.map(z=>({...z,right:z.right}));o(ee.sort(()=>Math.random()-.5)),i(ne.sort(()=>Math.random()-.5)),console.log("🔗 Association items initialized")}const H=setInterval(()=>{E(ee=>ee+1)},1e3);return()=>clearInterval(H)},[y.pairs,y.gameFormat,(I=e.content)==null?void 0:I.gameFormat]);const P=(B,H)=>{H==="left"?l===B?c(null):(c(B),m(null)):m(d===B?null:B)},w=()=>{if(l&&d){const B=l.left,H=d.right;y.pairs.find(ee=>ee.left===B&&ee.right===H)&&(g(ee=>[...ee,{left:l,right:d}]),o(ee=>ee.filter(ne=>ne!==l)),i(ee=>ee.filter(ne=>ne!==d)),u.length+1===y.pairs.length&&L()),c(null),m(null)}},L=()=>{C(!0),setTimeout(()=>{t({score:100,timeSpent:x,isPerfect:!0,totalMatches:u.length+1})},2e3)},F=B=>{if(M||B.isFlipped||B.isMatched)return;const H=[...f,B];if(S(H),v(Y=>Y.map(ee=>ee.id===B.id?{...ee,isFlipped:!0}:ee)),H.length===2){h(!0);const[Y,ee]=H;Y.pairId===ee.pairId?(A(z=>[...z,Y,ee]),v(z=>z.map(J=>J.id===Y.id||J.id===ee.id?{...J,isMatched:!0,isFlipped:!0}:J)),T.length+2===p.length&&setTimeout(()=>{C(!0),t({score:100,timeSpent:x,isPerfect:!0,totalMatches:y.pairs.length})},1e3),setTimeout(()=>{S([]),h(!1)},500)):setTimeout(()=>{v(z=>z.map(J=>J.id===Y.id||J.id===ee.id?{...J,isFlipped:!1}:J)),setTimeout(()=>{S([]),h(!1)},500)},1500)}},q=(B,H)=>{const Y=H==="left"?l===B:d===B;return u.some(ne=>H==="left"?ne.left===B:ne.right===B)?"bg-green-100 border-green-500 text-green-800":Y?"bg-primary text-white":"bg-white border-gray-300 hover:border-primary"},_=(B,H)=>{const Y=H==="left"?l===B:d===B;return u.some(ne=>H==="left"?ne.left===B:ne.right===B)?{}:Y?{}:{backgroundColor:b?"#374151":"#ffffff",color:b?"#ffffff":"#1f2937",borderColor:b?"#6b7280":"#d1d5db"}};return n.jsxs(we,{title:e.title,timeSpent:x,onExit:s,icon:"🔗",children:[n.jsx("style",{children:`
        .backface-hidden {
          backface-visibility: hidden;
        }
        .transform-style-preserve-3d {
          transform-style: preserve-3d;
        }
        .rotate-y-180 {
          transform: rotateY(180deg);
        }
        [transform-style:preserve-3d] {
          transform-style: preserve-3d;
        }
        [perspective:1000px] {
          perspective: 1000px;
        }
        .card-120x80 {
          width: 120px;
          height: 80px;
        }
      `}),n.jsxs("div",{className:"text-center mb-8 font-sans",children:[((V=(R=e.content)==null?void 0:R.scenario)==null?void 0:V.description)&&n.jsx("p",{className:"mb-4 font-sans",style:{color:b?"#d1d5db":"#6b7280"},children:e.content.scenario.description}),(($=e.content)==null?void 0:$.scenario)&&typeof e.content.scenario=="string"&&n.jsx("p",{className:"mb-4 font-sans",style:{color:b?"#d1d5db":"#6b7280"},children:e.content.scenario}),y.instructions&&y.instructions[y.gameFormat]&&n.jsxs("div",{className:"p-4 rounded-lg mb-4",style:{backgroundColor:b?"#1e3a8a":"#dbeafe"},children:[n.jsx("h3",{className:"font-bold mb-2",style:{color:b?"#93c5fd":"#1e40af"},children:y.instructions[y.gameFormat].title}),n.jsx("p",{className:"text-sm",style:{color:b?"#bfdbfe":"#1d4ed8"},children:y.instructions[y.gameFormat].description})]}),((D=e.content)==null?void 0:D.instructions)&&Array.isArray(e.content.instructions)&&n.jsxs("div",{className:"p-4 rounded-lg mb-4",style:{backgroundColor:b?"#1e3a8a":"#dbeafe"},children:[n.jsx("h3",{className:"font-bold mb-2",style:{color:b?"#93c5fd":"#1e40af"},children:"Instruções:"}),n.jsx("ul",{className:"text-sm space-y-1",style:{color:b?"#bfdbfe":"#1d4ed8"},children:e.content.instructions.map((B,H)=>n.jsxs("li",{children:["• ",B]},H))})]}),y.gameSettings&&y.gameSettings[y.gameFormat]&&n.jsxs("div",{className:"p-4 rounded-lg mb-4",style:{backgroundColor:b?"#1e3a8a":"#dbeafe"},children:[n.jsx("h3",{className:"font-bold mb-2",style:{color:b?"#93c5fd":"#1e40af"},children:y.gameSettings[y.gameFormat].title}),n.jsx("p",{className:"text-sm",style:{color:b?"#bfdbfe":"#1d4ed8"},children:y.gameSettings[y.gameFormat].instructions})]})]}),y.pairs&&y.pairs.length>0?y.gameFormat==="memory"||((Q=e.content)==null?void 0:Q.gameFormat)==="memory"?n.jsx("div",{className:"mb-8 font-sans",children:n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"grid gap-8 max-w-5xl",style:{gridTemplateColumns:"repeat(4, 1fr)",display:"grid"},children:p.length>0?p.map(B=>n.jsx("div",{className:"relative cursor-pointer mx-auto",style:{width:"120px",height:"80px"},onClick:()=>F(B),children:n.jsx("div",{className:`w-full h-full rounded-lg shadow-lg flex items-center justify-center text-center text-sm font-medium transition-all duration-300 ${B.isFlipped||B.isMatched?"border-2 border-green-500":"border-2 border-orange-600 text-white"}`,style:{background:B.isFlipped||B.isMatched?b?"#374151":"white":"linear-gradient(135deg, #f97316 0%, #eab308 100%)",color:B.isFlipped||B.isMatched?b?"#ffffff":"#1f2937":"white"},children:B.isFlipped||B.isMatched?n.jsx("span",{className:"p-2 leading-tight",children:B.text}):n.jsx("span",{className:"text-2xl font-bold",children:"?"})})},B.id)):n.jsxs("div",{className:"col-span-4 text-center p-8",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🎴"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Carregando cards..."}),n.jsx("p",{className:"text-gray-600",children:"Preparando o jogo da memória"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Cards: ",p.length]})]})})})}):n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8 font-sans",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-center font-sans",style:{color:b?"#ffffff":"#1f2937"},children:"Coluna A"}),n.jsx("div",{className:"space-y-4 font-sans",children:r.concat((u==null?void 0:u.map(B=>B.left))||[]).map((B,H)=>{const Y=u.some(ee=>ee.left===B);return n.jsxs("div",{onClick:()=>!Y&&P(B,"left"),className:`p-4 border-2 rounded-2xl text-center font-medium shadow-md cursor-pointer transition-all duration-200 font-sans h-20 flex items-center justify-center ${q(B,"left")} ${l===B?"ring-2 ring-primary":""} ${Y?"opacity-60 cursor-not-allowed bg-green-50 border-green-200 text-green-800":""}`,style:_(B,"left"),children:[n.jsx("span",{className:"leading-tight",children:B.left}),Y&&n.jsx("span",{className:"ml-2 text-green-600 font-bold font-sans",children:"✓"})]},H)})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-center font-sans",style:{color:b?"#ffffff":"#1f2937"},children:"Coluna B"}),n.jsx("div",{className:"space-y-4 font-sans",children:a.concat((u==null?void 0:u.map(B=>B.right))||[]).map((B,H)=>{const Y=u.some(ee=>ee.right===B);return n.jsxs("div",{onClick:()=>!Y&&P(B,"right"),className:`p-4 border-2 rounded-2xl text-center font-medium shadow-md cursor-pointer transition-all duration-200 font-sans h-20 flex items-center justify-center ${q(B,"right")} ${d===B?"ring-2 ring-primary":""} ${Y?"opacity-60 cursor-not-allowed bg-green-50 border-green-200 text-green-800":""}`,style:_(B,"right"),children:[n.jsx("span",{className:"leading-tight",children:B.right}),Y&&n.jsx("span",{className:"ml-2 text-green-600 font-bold font-sans",children:"✓"})]},H)})})]})]}):n.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📝"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Conteúdo não disponível"}),n.jsx("p",{className:"text-gray-600",children:"Esta lição está sendo preparada."})]}),y.gameFormat==="association"&&l&&d&&n.jsx("div",{className:"flex justify-center mb-8 font-sans",children:n.jsx("button",{onClick:w,className:"bg-teal text-white px-8 py-4 rounded-2xl font-bold text-lg shadow-lg hover:bg-teal-dark transition-colors focus:outline-none focus:ring-2 focus:ring-teal font-sans",children:"Fazer Associação"})}),k&&n.jsxs("div",{className:"mt-6 p-4 bg-green-100 text-green-800 rounded-xl text-center shadow-lg border-2 border-green-400",children:[n.jsx("div",{className:"text-2xl mb-2",children:"🎉"}),n.jsx("h3",{className:"font-bold text-lg mb-2",children:((U=(G=y.feedback)==null?void 0:G.success)==null?void 0:U.title)||"Parabéns! Jogo Concluído!"}),n.jsx("p",{className:"font-semibold mb-3",children:((O=(W=y.feedback)==null?void 0:W.success)==null?void 0:O.message)||"Você completou a lição com sucesso!"}),((se=(Z=y.feedback)==null?void 0:Z.success)==null?void 0:se.tips)&&n.jsxs("div",{className:"text-left bg-green-50 p-3 rounded-lg",children:[n.jsx("h4",{className:"font-semibold mb-2",children:"💡 Dicas importantes:"}),n.jsx("ul",{className:"list-disc list-inside text-sm space-y-1",children:y.feedback.success.tips.map((B,H)=>n.jsx("li",{children:B},H))})]})]})]})},kj=({lesson:e,onComplete:t,onExit:s})=>{var h,b,N;const[r,o]=j.useState(null),[a,i]=j.useState(!1),[l,c]=j.useState(!1),[d,m]=j.useState(0),[u,g]=j.useState(!1),[x,E]=j.useState(0),[k,C]=j.useState([]),[p,v]=j.useState([]);j.useEffect(()=>{const y=setInterval(()=>{m(P=>P+1)},1e3);return()=>clearInterval(y)},[]);const f=y=>{const P=[...y];for(let w=P.length-1;w>0;w--){const L=Math.floor(Math.random()*(w+1));[P[w],P[L]]=[P[L],P[w]]}return P},S=jt.useMemo(()=>{if(!e.content)return{scenario:"",options:[],isProjectFormat:!1};if(e.content.scenario&&e.content.phases&&Array.isArray(e.content.phases)){const y=e.content.phases[x];if(y){const P=(y.choices||[]).map((w,L)=>({text:w.text||w.choice||`Opção ${String.fromCharCode(65+L)}`,choice:w.text||w.choice||`Opção ${String.fromCharCode(65+L)}`,value:w.value||w.text,correct:w.correct!==void 0?w.correct:!0,feedback:w.feedback||w.outcome||`Você escolheu: ${w.text}`,outcome:w.feedback||w.outcome||`Você escolheu: ${w.text}`}));return{scenario:e.content.scenario,currentPhase:y,totalPhases:e.content.phases.length,options:P,isProjectFormat:!1,isProgressiveFormat:!0,scoring:e.content.scoring||{},conclusion:e.content.conclusion||{}}}}if(e.content.scenario&&e.content.phases){const y=e.content.phases.map((P,w)=>({text:`Fase ${P.phase}: ${P.title}`,outcome:`Você escolheu a ${P.title.toLowerCase()}. ${P.tasks.map(L=>L.description).join(" ")}`,correct:!0,feedback:`Excelente! A ${P.title.toLowerCase()} é fundamental para o sucesso da feira.`,phase:P}));return{scenario:e.content.scenario,options:y,isProjectFormat:!0,phases:e.content.phases,materials:e.content.materials||[],successCriteria:e.content.successCriteria||[]}}return e.content.scenario&&e.content.options?{scenario:e.content.scenario,options:e.content.options.map((y,P)=>({text:y.choice||y.text||`Opção ${String.fromCharCode(65+P)}`,outcome:y.outcome||y.feedback||"",correct:y.correct!==void 0?y.correct:!1,feedback:y.outcome||y.feedback||""})),isProjectFormat:!1}:e.content.options&&e.content.options.length>0?{scenario:e.content.text||e.content.scenario||"Escolha a melhor ação para esta situação",options:e.content.options.map(y=>({text:y.text||y.choice||"Opção",outcome:y.outcome||y.feedback||"",correct:y.correct||!1,feedback:y.feedback||y.outcome||""})),isProjectFormat:!1}:{scenario:"Escolha a melhor ação para esta situação",options:[],isProjectFormat:!1}},[e.content,x]);j.useEffect(()=>{if(S.isProgressiveFormat&&S.options){const y=f(S.options);v(y)}},[x,S.isProgressiveFormat,S.options]);const T=y=>{a||(o(y),i(!0),c(y.correct),C(P=>[...P,{phase:x,option:y,correct:y.correct}]),setTimeout(()=>{g(!0)},500))},A=()=>{var w;if(S.isProgressiveFormat)if(x<S.totalPhases-1){E(L=>L+1),o(null),i(!1),c(!1),g(!1);return}else{const L=k.every(q=>q.correct);t({score:L?100:50,timeSpent:d,isPerfect:L,feedback:((w=S.conclusion)==null?void 0:w.message)||"Simulação concluída!",phaseHistory:k,totalPhases:S.totalPhases});return}let y=l?100:50,P=l;e.title&&e.title.toLowerCase().includes("empréstimo")&&(r.text&&r.text.toLowerCase().includes("usado à vista")?(y=100,P=!0):r.text&&r.text.toLowerCase().includes("guardar dinheiro")?(y=80,P=!1):(y=50,P=!1)),t({score:y,timeSpent:d,isPerfect:P,feedback:r.feedback||r.outcome})},M=y=>a?r===y?y.correct?"bg-green-100 border-2 border-green-500 text-green-800":"bg-red-100 border-2 border-red-500 text-red-800":"bg-gray-100 border-2 border-gray-300 text-gray-500":"bg-white border-2 border-gray-300 hover:border-primary transition-colors";return console.log("🔍 SimulationLesson - lesson title:",e.title),console.log("🔍 SimulationLesson - options count:",((h=S.options)==null?void 0:h.length)||0),n.jsxs(we,{title:e.title,timeSpent:d,onExit:s,icon:"🎮",children:[n.jsxs("div",{className:"text-center mb-8 font-sans",children:[S.isProgressiveFormat&&n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"flex justify-center items-center space-x-2 mb-2",children:n.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Fase ",x+1," de ",S.totalPhases]})}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${(x+1)/S.totalPhases*100}%`}})})]}),n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4 font-sans",children:S.isProgressiveFormat?(b=S.currentPhase)==null?void 0:b.title:typeof S.scenario=="object"?S.scenario.title:S.scenario}),S.isProgressiveFormat&&((N=S.currentPhase)==null?void 0:N.description)&&n.jsx("p",{className:"text-gray-600 font-sans mb-4",children:S.currentPhase.description}),typeof S.scenario=="object"&&S.scenario.description&&!S.isProgressiveFormat&&n.jsx("p",{className:"text-gray-600 font-sans",children:S.scenario.description}),n.jsx("p",{className:"text-gray-600 font-sans",children:S.isProjectFormat?"Escolha uma fase para começar a organizar sua feira de trocas":S.isProgressiveFormat?"Escolha a melhor resposta para esta situação histórica":"Escolha a melhor ação para esta situação"}),S.isProjectFormat&&n.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"📋 Informações do Projeto"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Materiais necessários:"}),n.jsxs("ul",{className:"text-blue-600 space-y-1",children:[S.materials.slice(0,3).map((y,P)=>n.jsxs("li",{children:["• ",y]},P)),S.materials.length>3&&n.jsxs("li",{children:["• E mais ",S.materials.length-3," itens..."]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Critérios de sucesso:"}),n.jsx("ul",{className:"text-blue-600 space-y-1",children:S.successCriteria.slice(0,2).map((y,P)=>n.jsxs("li",{children:["• ",y]},P))})]})]})]})]}),n.jsx("div",{className:"space-y-4 mb-6 font-sans",children:(S.isProgressiveFormat?p:S.options)&&(S.isProgressiveFormat?p:S.options).length>0?(S.isProgressiveFormat?p:S.options).map((y,P)=>n.jsx("button",{onClick:()=>T(y),disabled:a,className:`w-full p-4 rounded-2xl text-left font-medium shadow-md border-2 transition-all duration-200 font-sans ${M(y)} ${a?"cursor-default":"hover:scale-105 cursor-pointer"} focus:outline-none focus:ring-2 focus:ring-primary`,tabIndex:0,children:n.jsxs("div",{className:"flex items-center font-sans",children:[n.jsxs("span",{className:"text-lg font-semibold mr-3 font-sans",children:[String.fromCharCode(65+P),"."]}),n.jsx("span",{className:"text-lg font-sans",children:y.choice||y.text||`Opção ${String.fromCharCode(65+P)}`})]})},P)):n.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📝"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Conteúdo não disponível"}),n.jsx("p",{className:"text-gray-600",children:"Esta lição está sendo preparada."})]})}),u&&r&&n.jsxs("div",{className:`p-4 rounded-2xl mb-6 text-center shadow-lg border-2 font-sans transition-all duration-200 ${l?"bg-green-50 text-green-800 border-green-200":"bg-red-50 text-red-800 border-red-200"}`,children:[n.jsx("h4",{className:"font-bold mb-2 font-sans",children:l?"✅ Resposta Correta!":"❌ Resposta Incorreta"}),n.jsx("p",{className:"font-sans mb-3",children:r.feedback||r.outcome||"Obrigado por participar desta simulação!"}),S.isProgressiveFormat&&r.historical_note&&n.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg border border-blue-300",children:[n.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:"📚 Nota Histórica:"}),n.jsx("p",{className:"text-sm text-blue-700",children:r.historical_note})]}),S.isProjectFormat&&r.phase&&n.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg border border-green-300",children:[n.jsx("h5",{className:"font-semibold text-green-800 mb-2",children:"📝 Tarefas desta fase:"}),n.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[r.phase.tasks.slice(0,3).map((y,P)=>n.jsxs("div",{className:"flex items-start",children:[n.jsx("span",{className:"text-green-600 mr-2",children:"•"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:y.task}),n.jsx("p",{className:"text-green-600",children:y.description})]})]},P)),r.phase.tasks.length>3&&n.jsxs("p",{className:"text-green-600 text-xs",children:["E mais ",r.phase.tasks.length-3," tarefas..."]})]})]})]}),a&&n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:A,className:"bg-primary text-white px-8 py-3 rounded-lg font-bold text-lg hover:bg-primary-dark transition-colors transform hover:scale-105 shadow-lg font-sans",children:S.isProgressiveFormat?x<S.totalPhases-1?"Próxima Fase":"Finalizar Simulação":"Continuar"})})]})},Pj=({lesson:e,onComplete:t,onExit:s})=>{var T,A,M,h,b,N,y,P;const[r,o]=j.useState(0),[a,i]=j.useState(""),[l,c]=j.useState([]),[d,m]=j.useState(0),[u]=j.useState(Date.now()),[g,x]=j.useState(!1),[E,k]=j.useState(!1),C=jt.useMemo(()=>e.content?e.content.examples&&e.content.examples.length>0?{examples:e.content.examples.map(w=>({question:w.scenario||w.question||"Pergunta não encontrada",calculation:w.calculation||w.hint||"",answer:w.answer||w.expectedAnswer||"",explanation:w.explanation||w.feedback||"Explicação não disponível"})),problems:[]}:e.content.problems&&e.content.problems.length>0?{examples:[],problems:e.content.problems.map(w=>({question:w.question||w.problem||"Pergunta não encontrada",calculation:w.calculation||w.hint||"",answer:w.correctAnswer||w.answer||w.expectedAnswer||"",explanation:w.explanation||w.feedback||"Explicação não disponível",tolerance:w.tolerance||.01,context:w.context||"",stepByStep:w.stepByStep||[],formula:w.formula||""}))}:{examples:[],problems:[]}:{examples:[],problems:[]},[e.content]);j.useEffect(()=>{const w=setInterval(()=>{m(Math.floor((Date.now()-u)/1e3))},1e3);return()=>clearInterval(w)},[u]);const p=((T=C.examples)==null?void 0:T[r])||((A=C.problems)==null?void 0:A[r])||e.content,v=()=>{var V;if(!a.trim())return;const w=$=>{let D=$.trim().replace(/\s/g,"").replace(",",".");D=D.replace(/[,.]$/,"");const Q=D.split(".");return Q.length>2&&(D=Q[0]+"."+Q.slice(1).join("")),D.includes(".")&&(D=D.replace(/\.?0+$/,""),D.endsWith(".")&&(D=D.slice(0,-1))),D},L=w(a),F=w(((V=p.answer)==null?void 0:V.toString())||""),q=parseFloat(L),_=parseFloat(F),I=p.tolerance||.01,R=!isNaN(q)&&!isNaN(_)&&Math.abs(q-_)<=I;k(R),x(!0),c($=>[...$,{problemIndex:r,userAnswer:a.trim(),expectedAnswer:p.answer,isCorrect:R}]),setTimeout(()=>{var D,Q;x(!1);const $=(((D=C.examples)==null?void 0:D.length)||0)+(((Q=C.problems)==null?void 0:Q.length)||0);if($>0&&r<$-1)o(G=>G+1),i("");else{const G=l.filter(W=>W.isCorrect).length+(R?1:0),U=Math.round(G/$*100);t({score:U,timeSpent:d,isPerfect:G===$,correctAnswers:G,totalQuestions:$,userAnswers:[...l,{problemIndex:r,userAnswer:a.trim(),expectedAnswer:p.answer,isCorrect:R}]})}},2e3)},f=w=>{w.key==="Enter"&&!g&&v()};if(!((M=C.examples)!=null&&M.length)&&!((h=C.problems)!=null&&h.length))return n.jsx(we,{title:e.title,timeSpent:d,onExit:s,icon:"✏️",children:n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📝"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dados da lição não disponíveis"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Esta lição está sendo preparada."}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Voltar"})]})})});const S=(((b=C.examples)==null?void 0:b.length)||0)+(((N=C.problems)==null?void 0:N.length)||0);return n.jsxs(we,{title:e.title,timeSpent:d,onExit:s,icon:"✏️",children:[n.jsxs("div",{className:"text-center mb-6 font-sans",children:[((P=(y=e.content)==null?void 0:y.scenario)==null?void 0:P.description)&&n.jsx("p",{className:"text-gray-600 mb-4 font-sans",children:e.content.scenario.description}),S>0&&n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:[n.jsxs("p",{className:"text-sm text-blue-700 font-medium",children:["Problema ",r+1," de ",S]}),n.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2 mt-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/S*100}%`}})})]})]}),p?n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border-2 border-gray-200 mb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 font-sans",children:S>0?`Problema ${r+1}:`:"Pergunta:"}),p.context&&n.jsx("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:n.jsx("p",{className:"text-sm text-blue-700 font-sans",children:p.context})}),n.jsx("p",{className:"text-lg text-gray-700 mb-6 font-sans",children:p.question}),p.hint&&n.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg mb-4",children:n.jsxs("p",{className:"text-sm text-yellow-700 font-sans",children:["💡 Dica: ",p.hint]})}),p.formula&&n.jsx("div",{className:"bg-green-50 p-3 rounded-lg mb-4",children:n.jsxs("p",{className:"text-sm text-green-700 font-sans",children:["📐 Fórmula: ",p.formula]})}),n.jsx("div",{className:"mb-4",children:n.jsx("input",{type:"text",value:a,onChange:w=>i(w.target.value),onKeyPress:f,disabled:g,placeholder:"Digite sua resposta...",className:`w-full p-4 border-2 rounded-lg text-lg focus:outline-none transition-colors font-sans ${g?E?"border-green-500 bg-green-50":"border-red-500 bg-red-50":"border-gray-300 focus:border-primary"}`})}),!g&&n.jsx("button",{onClick:v,disabled:!a.trim(),className:"w-full bg-primary text-white py-3 rounded-lg font-bold text-lg hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Verificar Resposta"})]}):n.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📝"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Problema não encontrado"}),n.jsx("p",{className:"text-gray-600",children:"Este problema está sendo preparado."})]}),g&&p&&n.jsxs("div",{className:`p-6 rounded-lg mb-6 text-center shadow-lg border-2 font-sans transition-all duration-200 ${E?"bg-green-50 text-green-800 border-green-200":"bg-red-50 text-red-800 border-red-200"}`,children:[n.jsx("div",{className:"text-4xl mb-3",children:E?"🎉":"😔"}),n.jsx("p",{className:"text-xl font-bold mb-2 font-sans",children:E?"Correto!":"Incorreto!"}),n.jsxs("p",{className:"text-lg mb-3 font-sans",children:["Sua resposta: ",n.jsxs("span",{className:"font-bold",children:['"',a,'"']})]}),!E&&p.answer&&n.jsxs("p",{className:"text-lg mb-3 font-sans",children:["Resposta correta: ",n.jsxs("span",{className:"font-bold",children:['"',p.answer,'"']})]}),p.explanation&&n.jsx("p",{className:"text-sm font-sans",children:p.explanation}),S>0&&r<S-1&&n.jsx("p",{className:"text-sm mt-3 font-sans",children:"Próximo problema em 2 segundos..."})]}),l.length>0&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-bold text-gray-800 mb-3 font-sans",children:"Respostas anteriores:"}),n.jsx("div",{className:"space-y-2",children:l.map((w,L)=>n.jsxs("div",{className:"flex justify-between items-center text-sm",children:[n.jsx("span",{className:"font-sans",children:S>0?`Problema ${w.problemIndex+1}:`:"Resposta:"}),n.jsxs("span",{className:`font-bold font-sans ${w.isCorrect?"text-green-600":"text-red-600"}`,children:[w.userAnswer," ",w.isCorrect?"✓":"✗"]})]},L))})]})]})},Ej=({lesson:e,onComplete:t,onExit:s,reviewMode:r})=>{const[o,a]=j.useState(null),[i,l]=j.useState(!1),[c,d]=j.useState(!1),[m,u]=j.useState(0),[g,x]=j.useState(!1),[E,k]=j.useState(!1);j.useEffect(()=>{const T=localStorage.getItem("darkMode")==="true";k(T);const A=()=>{const M=localStorage.getItem("darkMode")==="true";k(M)};return window.addEventListener("darkModeChanged",A),()=>{window.removeEventListener("darkModeChanged",A)}},[]),j.useEffect(()=>{const T=setInterval(()=>{u(A=>A+1)},1e3);return()=>clearInterval(T)},[]);const C=()=>{var T,A;if((T=e.content)!=null&&T.budget)return e.content.budget;if((A=e.content)!=null&&A.scenario){const M=e.content.scenario.match(/R\$ (\d+),00/);return M?parseInt(M[1]):0}return 0},p=T=>{if(i)return;const A=C(),M=(T.cost||T.price)<=A;a(T),l(!0),d(M),setTimeout(()=>{x(!0)},500)},v=()=>{const T=C(),A=o.cost||o.price||0;let M=0,h="";A>T?(M=0,h=`Você escolheu uma opção que custa R$ ${A},00, mas seu orçamento é de R$ ${T},00. Tente escolher algo dentro do seu orçamento!`):A===0?(M=100,h="Excelente! Poupar tudo mostra disciplina financeira. Você está construindo um futuro melhor!"):A<=T*.2?(M=90,h=`Muito bom! Você gastou pouco e ainda pode poupar R$ ${T-A},00. Boa decisão financeira!`):A<=T*.5?(M=75,h=`Boa escolha! Você gastou moderadamente e ainda pode poupar R$ ${T-A},00.`):(M=50,h="Você gastou a maior parte da sua mesada. Tente pensar em opções mais econômicas na próxima vez!"),t({score:M,timeSpent:m,isPerfect:M>=90,feedback:h})},f=T=>{if(!i)return"bg-white border-2 border-gray-300 hover:border-primary transition-colors";const A=C(),M=(T.cost||T.price)<=A;return o===T?M?"bg-green-100 border-2 border-green-500 text-green-800":"bg-red-100 border-2 border-red-500 text-red-800":"bg-gray-100 border-2 border-gray-300 text-gray-500"},S=C();return n.jsxs(we,{title:e.title,timeSpent:m,onExit:s,icon:"🎁",reviewMode:r,children:[n.jsxs("div",{className:"text-center mb-8 font-sans",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4 font-sans",children:e.content.text?e.content.text.replace(/^Poupí: ?/i,"🐷 "):e.content.text}),n.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:n.jsx("p",{className:"text-blue-800 font-semibold",children:e.content.scenario})})]}),n.jsx("div",{className:"space-y-4 mb-6 font-sans",children:e.content.options&&e.content.options.map((T,A)=>n.jsxs("button",{onClick:()=>p(T),disabled:i,className:`w-full p-4 rounded-2xl text-left font-medium shadow-md border-2 transition-all duration-200 font-sans ${f(T)} ${i?"cursor-default":"hover:scale-105 cursor-pointer"} focus:outline-none focus:ring-2 focus:ring-primary`,style:{backgroundColor:i?void 0:E?"#374151":"#ffffff",color:i?void 0:E?"#ffffff":"#1f2937",borderColor:i?void 0:E?"#6b7280":"#d1d5db"},tabIndex:0,children:[n.jsxs("div",{className:"flex items-center justify-between font-sans",children:[n.jsxs("div",{className:"flex items-center font-sans",children:[n.jsxs("span",{className:"text-lg font-semibold mr-3 font-sans",style:{color:i?void 0:E?"#ffffff":"#1f2937"},children:[String.fromCharCode(65+A),"."]}),n.jsx("span",{className:"text-lg font-sans",style:{color:i?void 0:E?"#ffffff":"#1f2937"},children:T.item||T.text||"Opção não encontrada"})]}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:"text-sm font-bold",style:{color:i?void 0:E?"#60a5fa":"#2563eb"},children:["R$ ",T.cost||T.price||0,",00"]})})]}),T.benefit&&n.jsxs("div",{className:"mt-2 text-sm text-left",style:{color:i?void 0:E?"#d1d5db":"#6b7280"},children:["💡 ",T.benefit]})]},A))}),g&&n.jsxs("div",{className:`p-4 rounded-2xl mb-6 text-center shadow-lg border-2 font-sans transition-all duration-200 ${c?"bg-green-50 text-green-800 border-green-200":"bg-yellow-50 text-yellow-800 border-yellow-200"}`,children:[n.jsx("div",{className:"text-2xl mb-2",children:c?"🎉":"📝"}),n.jsx("p",{className:"font-semibold font-sans",children:c?"Excelente escolha!":"Ajuste sua escolha!"}),n.jsx("p",{className:"text-sm font-sans mt-2",children:o.price>S?`Você escolheu um item que custa R$ ${o.price},00, mas seu orçamento é de R$ ${S},00.`:"Você escolheu algo dentro do seu orçamento. Boa decisão!"})]}),i&&n.jsx("div",{className:"mt-6",children:n.jsx("button",{onClick:v,className:"w-full bg-primary text-white py-4 rounded-2xl font-bold text-lg shadow-lg hover:bg-primary-dark transition-colors transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary font-sans",children:"Continuar"})})]})},Tj=({lesson:e,onComplete:t,onExit:s,reviewMode:r})=>{var I;const[o,a]=j.useState([]),[i,l]=j.useState(0),[c,d]=j.useState(!1),[m,u]=j.useState(""),[g,x]=j.useState(!1),[E,k]=j.useState(0),[C,p]=j.useState(!0);j.useEffect(()=>{const R=setInterval(()=>{l(V=>V+1)},1e3);return()=>clearInterval(R)},[]);const f=(()=>{var R;return((R=e.content)==null?void 0:R.budget)||100})(),S=((I=e.content)==null?void 0:I.products)||[],T=S.length,A=()=>{E<T-1?k(R=>R+1):p(!1)},M=()=>{E>0&&k(R=>R-1)},h=R=>{const V=o.find($=>$.id===R.id);a(V?$=>$.map(D=>D.id===R.id?{...D,quantity:D.quantity+1}:D):$=>[...$,{...R,quantity:1}]),A()},b=()=>{p(!0),k(0)},N=R=>{a(V=>V.filter($=>$.id!==R))},y=()=>o.reduce((R,V)=>{const $=V.promotion?V.promotionPrice:V.price;return R+$*V.quantity},0),P=()=>o.reduce((R,V)=>V.promotion?R+(V.price-V.promotionPrice)*V.quantity:R,0),w=()=>{const R=y(),V=P(),$=f-R;let D="";R>f?(D=`Você ultrapassou o orçamento! Total: R$ ${R.toFixed(2).replace(".",",")}, Orçamento: R$ ${f.toFixed(2).replace(".",",")}. Remova alguns itens.`,x(!1)):R===0?(D=`Excelente! Você não gastou nada e economizou R$ ${f.toFixed(2).replace(".",",")}. Disciplina financeira exemplar!`,x(!0)):$>=f*.3?(D=`Muito bom! Você gastou R$ ${R.toFixed(2).replace(".",",")} e ainda tem R$ ${$.toFixed(2).replace(".",",")}. Economia: R$ ${V.toFixed(2).replace(".",",")}`,x(!0)):$>=f*.1?(D=`Boa escolha! Você gastou R$ ${R.toFixed(2).replace(".",",")} e ainda tem R$ ${$.toFixed(2).replace(".",",")}. Economia: R$ ${V.toFixed(2).replace(".",",")}`,x(!0)):(D=`Você gastou quase todo o orçamento (R$ ${R.toFixed(2).replace(".",",")}). Tente ser mais seletivo nas próximas compras.`,x(!1)),u(D),d(!0)},L=()=>{const R=y();P();const V=f-R;let $=0;R>f?$=0:R===0?$=100:V>=f*.3?$=90:V>=f*.1?$=75:$=50,t({score:$,timeSpent:i,isPerfect:$>=90,feedback:m})},F=y();P();const q=f-F,_=S[E];return n.jsxs(we,{title:e.title,timeSpent:i,onExit:s,icon:"🛒",reviewMode:r,children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"🛒 Compras Coletivas no Supermercado"}),n.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:n.jsx("p",{className:"text-blue-800 font-semibold",children:e.content.scenario||"Você e seus amigos têm R$ "+f.toFixed(2).replace(".",",")+" para fazer compras coletivas. Decida entre necessidades básicas e desejos, considerando o orçamento limitado!"})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[C&&_&&n.jsxs("div",{className:"bg-white p-6 rounded-lg border-2 border-gray-200",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Produto ",E+1," de ",T]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(E+1)/T*100}%`}})})]}),n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:_.name}),n.jsx("div",{className:"mb-3",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${_.category==="necessidade"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:_.category==="necessidade"?"🥗 Necessidade":"🎉 Desejo"})}),n.jsx("div",{className:"mb-4",children:_.promotion?n.jsxs("div",{children:[n.jsxs("span",{className:"text-lg text-gray-500 line-through",children:["R$ ",_.price.toFixed(2).replace(".",",")]}),n.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["R$ ",_.promotionPrice.toFixed(2).replace(".",",")]}),n.jsxs("span",{className:"text-sm bg-red-100 text-red-600 px-3 py-1 rounded-full",children:["-",Math.round((_.price-_.promotionPrice)/_.price*100),"% OFF"]})]}):n.jsxs("div",{className:"text-3xl font-bold text-gray-800",children:["R$ ",_.price.toFixed(2).replace(".",",")]})}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:o.some(R=>R.id===_.id)?()=>N(_.id):()=>h(_),className:`py-3 px-8 rounded-lg transition-colors font-bold text-lg ${o.some(R=>R.id===_.id)?"!bg-red-500 !text-white hover:!bg-red-600":"bg-green-500 text-white hover:bg-green-600"}`,style:o.some(R=>R.id===_.id)?{backgroundColor:"#ef4444",color:"white"}:{},children:o.some(R=>R.id===_.id)?"Remover":"Adicionar"})}),n.jsxs("div",{className:"flex justify-between mt-6",children:[n.jsx("button",{onClick:M,disabled:E===0,className:`px-4 py-2 rounded-lg transition-colors ${E===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:"← Anterior"}),n.jsx("button",{onClick:A,disabled:E===T-1,className:`px-4 py-2 rounded-lg transition-colors ${E===T-1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:"Próximo →"})]})]})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"🛒 Seu Carrinho"}),!C&&n.jsx("button",{onClick:b,className:"!bg-blue-600 !text-white px-4 py-2 rounded-lg hover:!bg-blue-700 transition-colors text-sm font-medium shadow-sm border border-blue-600",style:{backgroundColor:"#2563eb",color:"white"},children:"🔄 Ver Mais Produtos"})]}),o.length===0?n.jsxs("div",{className:"text-center text-gray-500 py-8",children:[n.jsx("div",{className:"text-4xl mb-2",children:"🛒"}),n.jsx("p",{children:"Seu carrinho está vazio"}),n.jsx("p",{className:"text-sm",children:"Adicione produtos para começar!"})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🛒"}),n.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:o.length}),n.jsx("p",{className:"text-lg text-gray-700",children:"itens no carrinho"})]}),n.jsxs("div",{className:"border-t pt-4 space-y-2",children:[n.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{className:F>f?"text-red-600":"text-green-600",children:["R$ ",F.toFixed(2).replace(".",",")]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Orçamento:"}),n.jsxs("span",{children:["R$ ",f.toFixed(2).replace(".",",")]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Restante:"}),n.jsxs("span",{className:q<0?"text-red-600":"text-green-600",children:["R$ ",q.toFixed(2).replace(".",",")]})]})]})]})]}),c&&n.jsxs("div",{className:`p-4 rounded-lg mb-6 text-center ${g?"bg-green-50 text-green-800 border-2 border-green-200":"bg-red-50 text-red-800 border-2 border-red-200"}`,children:[n.jsx("div",{className:"text-2xl mb-2",children:g?"🎉":"💡"}),n.jsx("p",{className:"font-semibold",children:m})]}),n.jsx("div",{className:"flex space-x-4",children:c?n.jsx("button",{onClick:L,className:"flex-1 bg-primary text-white py-3 rounded-lg font-bold text-lg hover:bg-primary-dark transition-colors",children:"Continuar"}):n.jsx("button",{onClick:w,disabled:o.length===0,className:`flex-1 py-3 rounded-lg font-bold text-lg transition-colors ${o.length===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-primary-dark"}`,children:"🛒 Finalizar Compra"})})]})},Aj=({lesson:e,onComplete:t,onExit:s})=>{var h,b,N;const[r,o]=j.useState({}),[a,i]=j.useState(0),[l,c]=j.useState(!1),[d,m]=j.useState(!1),[u,g]=j.useState(""),[x,E]=j.useState(!1),[k,C]=j.useState(!1);j.useEffect(()=>{const y=localStorage.getItem("darkMode")==="true";C(y);const P=()=>{const w=localStorage.getItem("darkMode")==="true";C(w)};return window.addEventListener("darkModeChanged",P),()=>{window.removeEventListener("darkModeChanged",P)}},[]),j.useEffect(()=>{const y=setInterval(()=>{i(P=>P+1)},1e3);return()=>clearInterval(y)},[]);const p=(y,P)=>{o(w=>({...w,[y]:parseInt(P)||0}))},v=()=>{var F,q;const y=Object.values(r).reduce((_,I)=>_+I,0),P=(q=(F=e.content)==null?void 0:F.text)==null?void 0:q.match(/R\$ (\d+),00/),w=P?parseInt(P[1]):150,L=y===w;c(!0),E(L),m(!0),g(L?"Parabéns! Você distribuiu sua mesada perfeitamente! Isso mostra que você sabe planejar seus gastos.":`Você distribuiu R$ ${y},00 de R$ ${w},00. Tente novamente para distribuir exatamente R$ ${w},00.`)},f=()=>{var F,q;const y=Object.values(r).reduce((_,I)=>_+I,0),P=(q=(F=e.content)==null?void 0:F.text)==null?void 0:q.match(/R\$ (\d+),00/),w=P?parseInt(P[1]):150,L=y===w;t({score:L?100:Math.max(0,100-Math.abs(y-w)*2),timeSpent:a,isPerfect:L,feedback:u})},S=Object.values(r).reduce((y,P)=>y+P,0),T=(b=(h=e.content)==null?void 0:h.text)==null?void 0:b.match(/R\$ (\d+),00/),A=T?parseInt(T[1]):150,M=A-S;return n.jsxs(we,{title:e.title,timeSpent:a,onExit:s,icon:"💰",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:e.content.text}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Distribua seu orçamento entre as categorias abaixo:"}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-bold text-blue-800",children:"Orçamento Total:"}),n.jsxs("span",{className:"font-bold text-blue-800",children:["R$ ",A,",00"]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-2",children:[n.jsx("span",{className:"text-sm text-blue-600",children:"Distribuído:"}),n.jsxs("span",{className:`font-bold ${S>A?"text-red-600":"text-green-600"}`,children:["R$ ",S,",00"]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-sm text-blue-600",children:"Restante:"}),n.jsxs("span",{className:`font-bold ${M<0?"text-red-600":"text-green-600"}`,children:["R$ ",M,",00"]})]})]})]}),n.jsx("div",{className:"space-y-4 mb-6",children:(N=e.content)!=null&&N.categories&&e.content.categories.length>0?e.content.categories.map((y,P)=>n.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("label",{className:"font-bold text-gray-800",children:y.name}),n.jsxs("span",{className:"text-sm text-gray-600",children:["Sugestão: R$ ",y.budget,",00"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-gray-600",children:"R$"}),n.jsx("input",{type:"number",min:"0",max:A,value:r[y.name]||"",onChange:w=>p(y.name,w.target.value),className:"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"0"}),n.jsx("span",{className:"text-gray-600",children:",00"})]})]},P)):n.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg border-2 border-yellow-200",children:n.jsx("p",{className:"text-yellow-800 text-center",children:"⚠️ Categorias não disponíveis. Esta lição está sendo preparada."})})}),d?n.jsxs("div",{className:"text-center space-y-4",children:[n.jsxs("div",{className:`p-4 rounded-lg border-2 ${x?"bg-green-50 border-green-200 text-green-800":"bg-yellow-50 border-yellow-200 text-yellow-800"}`,children:[n.jsxs("div",{className:"flex items-center justify-center mb-2",children:[n.jsx("span",{className:"text-2xl mr-2",children:x?"🎉":"📝"}),n.jsx("h3",{className:"font-bold text-lg",children:x?"Parabéns!":"Quase lá!"})]}),n.jsx("p",{className:"text-sm",children:u})]}),n.jsx("button",{onClick:f,className:"px-8 py-3 rounded-lg font-bold text-white bg-primary hover:bg-primary-dark transition-colors",children:x?"Continuar":"Tentar Novamente"})]}):n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:v,className:"px-8 py-3 rounded-lg font-bold text-white bg-primary hover:bg-primary-dark transition-colors",children:"Verificar Distribuição"})})]})},Mj=({lesson:e,onComplete:t,onExit:s})=>{var A,M,h;const[r,o]=j.useState(0),[a,i]=j.useState([]),[l,c]=j.useState(""),[d,m]=j.useState(0),[u]=j.useState(Date.now()),[g,x]=j.useState(!1),[E,k]=j.useState(!1),[C,p]=j.useState(!1);j.useEffect(()=>{const b=localStorage.getItem("darkMode")==="true";p(b);const N=()=>{const y=localStorage.getItem("darkMode")==="true";p(y)};return window.addEventListener("darkModeChanged",N),()=>{window.removeEventListener("darkModeChanged",N)}},[]);const v=jt.useMemo(()=>e.content?e.content.problems&&e.content.problems.length>0?{problems:e.content.problems.map(b=>({id:b.id,level:b.level||"intermediário",title:b.title||`Problema ${b.id}`,context:b.context||"",question:b.question||b.description||b.problem||"Problema não encontrado",givenData:b.givenData||{},formula:b.formula||"",steps:b.steps||[],hint:b.hint||"",answer:b.correctAnswer||b.solution||b.answer||0,explanation:b.explanation||b.feedback||"Explicação não disponível",tolerance:b.tolerance||.01}))}:e.content.problems&&e.content.problems.length>0?{problems:e.content.problems.map(b=>({id:b.id||0,level:"intermediário",title:`Problema ${b.id||0}`,context:"",question:b.question||b.problem||"Problema não encontrado",givenData:{},formula:"",steps:[],hint:"",answer:b.answer||b.solution||0,explanation:b.explanation||b.feedback||"Explicação não disponível",tolerance:b.tolerance||.01}))}:{problems:[]}:{problems:[]},[e.content]);jt.useMemo(()=>v.problems.map(b=>({question:b.question})),[v]),j.useEffect(()=>{const b=setInterval(()=>{m(Math.floor((Date.now()-u)/1e3))},1e3);return()=>clearInterval(b)},[u]);const f=(A=v.problems)==null?void 0:A[r],S=()=>{var F;if(!l.trim())return;const b=l.trim().replace(",","."),N=parseFloat(b),y=f.answer,P=((F=v.problems[r])==null?void 0:F.tolerance)||.01,w=Math.abs(N-y),L=w<=P;console.log("🔍 Debug Math Problems:"),console.log("  User Answer:",N),console.log("  Correct Answer:",y),console.log("  Tolerance:",P),console.log("  Difference:",w),console.log("  Is Correct:",L),k(L),x(!0),i(q=>[...q,{problemIndex:r,userAnswer:N,correctAnswer:y,isCorrect:L}]),setTimeout(()=>{if(x(!1),r<v.problems.length-1)o(q=>q+1),c("");else{const q=a.filter(R=>R.isCorrect).length+(L?1:0),_=v.problems.length,I=Math.round(q/_*100);t({score:I,timeSpent:d,isPerfect:q===_,correctAnswers:q,totalQuestions:_,userAnswers:[...a,{problemIndex:r,userAnswer:N,correctAnswer:y,isCorrect:L}]})}},2e3)},T=b=>{b.key==="Enter"&&!g&&S()};return console.log("🔍 MathProblemsLesson - lesson title:",e.title),console.log("🔍 MathProblemsLesson - problems count:",v.problems.length),console.log("🔍 MathProblemsLesson - current problem question:",f==null?void 0:f.question),!v.problems||v.problems.length===0?n.jsx(we,{title:e.title,timeSpent:d,onExit:s,icon:"🧮",children:n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📝"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dados da lição não disponíveis"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Esta lição está sendo preparada."}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Voltar"})]})})}):n.jsxs(we,{title:e.title,timeSpent:d,onExit:s,icon:"🧮",children:[n.jsxs("div",{className:"text-center mb-6 font-sans",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4 font-sans",children:((M=e.content)==null?void 0:M.text)||"Problemas Matemáticos"}),v.problems&&v.problems.length>0&&n.jsxs("div",{className:"p-3 rounded-lg mb-4",style:{backgroundColor:C?"#1e3a8a":"#dbeafe"},children:[n.jsxs("p",{className:"text-sm font-medium",style:{color:C?"#93c5fd":"#1e40af"},children:["Problema ",r+1," de ",v.problems.length]}),n.jsx("div",{className:"w-full rounded-full h-2 mt-2",style:{backgroundColor:C?"#1e40af":"#bfdbfe"},children:n.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/v.problems.length*100}%`,backgroundColor:C?"#3b82f6":"#2563eb"}})})]}),((h=e.content)==null?void 0:h.instructions)&&e.content.instructions.length>0&&n.jsxs("div",{className:"p-3 rounded-lg mb-6",style:{backgroundColor:C?"#451a03":"#fef3c7"},children:[n.jsx("h3",{className:"font-bold mb-2",style:{color:C?"#fbbf24":"#92400e"},children:"Instruções:"}),n.jsx("ul",{className:"text-sm text-left",style:{color:C?"#fbbf24":"#a16207"},children:e.content.instructions.map((b,N)=>n.jsxs("li",{className:"mb-1",children:["• ",b]},N))})]})]}),f?n.jsxs("div",{className:"p-6 rounded-lg shadow-lg border-2 mb-6",style:{backgroundColor:C?"#374151":"#ffffff",borderColor:C?"#4b5563":"#e5e7eb"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-bold font-sans",style:{color:C?"#ffffff":"#1f2937"},children:["Problema ",r+1,": ",f.title]}),n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${f.level==="básico"?"bg-green-100 text-green-800":f.level==="intermediário"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:f.level})]}),f.context&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[n.jsx("h4",{className:"font-bold text-blue-800 mb-2",children:"📋 Situação:"}),n.jsx("p",{className:"text-sm text-blue-700",children:f.context})]}),f.givenData&&Object.keys(f.givenData).length>0&&n.jsxs("div",{className:"p-4 rounded-lg mb-4 border",style:{backgroundColor:C?"#064e3b":"#f0fdf4",borderColor:C?"#10b981":"#bbf7d0"},children:[n.jsxs("h4",{className:"font-bold mb-3 flex items-center",style:{color:C?"#10b981":"#166534"},children:[n.jsx("span",{className:"text-lg mr-2",children:"📊"}),"Dados Fornecidos:"]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(f.givenData).map(([b,N])=>n.jsxs("div",{className:"p-3 rounded-lg border shadow-sm",style:{backgroundColor:C?"#374151":"#ffffff",borderColor:C?"#10b981":"#bbf7d0"},children:[n.jsx("div",{className:"text-xs font-medium uppercase tracking-wide mb-1",style:{color:C?"#6ee7b7":"#059669"},children:b.replace(/([A-Z])/g," $1").replace(/^./,y=>y.toUpperCase())}),n.jsx("div",{className:"text-lg font-bold",style:{color:C?"#10b981":"#166534"},children:typeof N=="number"?N.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):N})]},b))})]}),n.jsx("p",{className:"text-lg mb-6 font-sans",style:{color:C?"#e5e7eb":"#374151"},children:f.question}),f.hint&&n.jsxs("div",{className:"p-3 rounded-lg mb-4",style:{backgroundColor:C?"#451a03":"#fef3c7"},children:[n.jsx("h4",{className:"font-bold mb-1",style:{color:C?"#fbbf24":"#92400e"},children:"💡 Dica:"}),n.jsx("p",{className:"text-sm",style:{color:C?"#fbbf24":"#a16207"},children:f.hint})]}),n.jsx("div",{className:"mb-4",children:n.jsx("input",{type:"number",value:l,onChange:b=>c(b.target.value),onKeyPress:T,disabled:g,placeholder:"Digite sua resposta (ex: 2,30 ou 2.30)...",className:`w-full p-4 border-2 rounded-lg text-lg focus:outline-none transition-colors font-sans ${g?E?"border-green-500 bg-green-50":"border-red-500 bg-red-50":"border-gray-300 focus:border-primary"}`,style:{backgroundColor:g?E?"#f0fdf4":"#fef2f2":C?"#374151":"#ffffff",color:C?"#ffffff":"#1f2937"}})}),!g&&n.jsx("button",{onClick:S,disabled:!l.trim(),className:"w-full bg-primary text-white py-3 rounded-lg font-bold text-lg hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Verificar Resposta"})]}):n.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📝"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Problema não encontrado"}),n.jsx("p",{className:"text-gray-600",children:"Este problema está sendo preparado."})]}),g&&f&&n.jsxs("div",{className:`p-6 rounded-lg mb-6 shadow-lg border-2 font-sans transition-all duration-200 ${E?"bg-green-50 text-green-800 border-green-200":"bg-red-50 text-red-800 border-red-200"}`,children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("div",{className:"text-4xl mb-3",children:E?"🎉":"😔"}),n.jsx("p",{className:"text-xl font-bold mb-2 font-sans",children:E?"Correto!":"Incorreto!"}),n.jsxs("p",{className:"text-lg mb-3 font-sans",children:["Sua resposta: ",n.jsx("span",{className:"font-bold",children:l})]})]}),r<v.problems.length-1&&n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-sm mt-3 font-sans",children:"Próximo problema em 2 segundos..."})})]}),a.length>0&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-bold text-gray-800 mb-3 font-sans",children:"Respostas anteriores:"}),n.jsx("div",{className:"space-y-2",children:a.map((b,N)=>n.jsxs("div",{className:"flex justify-between items-center text-sm",children:[n.jsxs("span",{className:"font-sans",children:["Problema ",b.problemIndex+1,":"]}),n.jsxs("span",{className:`font-bold font-sans ${b.isCorrect?"text-green-600":"text-red-600"}`,children:[b.userAnswer," ",b.isCorrect?"✓":"✗"]})]},N))})]})]})},Dj=({lesson:e,onComplete:t,onExit:s})=>{var f,S,T,A,M,h;if(console.log("🔍 ShoppingSimulationLesson - lesson title:",e==null?void 0:e.title),console.log("🔍 ShoppingSimulationLesson - products count:",((S=(f=e==null?void 0:e.content)==null?void 0:f.products)==null?void 0:S.length)||0),console.log("🔍 ShoppingSimulationLesson - budget:",(T=e==null?void 0:e.content)==null?void 0:T.budget),!e)return n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"😵"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Erro ao carregar lição"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"A lição não foi encontrada ou está corrompida."}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Voltar"})]})});if(!e.content)return n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📝"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Conteúdo não encontrado"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Esta lição não possui conteúdo válido."}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Voltar"})]})});const[r,o]=j.useState([]),[a,i]=j.useState(0),[l,c]=j.useState(0),[d]=j.useState(Date.now()),[m,u]=j.useState(!1),[g,x]=j.useState("");j.useEffect(()=>{const b=setInterval(()=>{c(Math.floor((Date.now()-d)/1e3))},1e3);return()=>clearInterval(b)},[d]);const E=b=>{var N;if(r.find(y=>y.name===b.name))o(y=>y.filter(P=>P.name!==b.name)),i(y=>y-b.price);else{const y=((N=e.content.scenario)==null?void 0:N.budget)||e.content.budget||0;a+b.price<=y&&(o(P=>[...P,b]),i(P=>P+b.price))}},k=()=>{var F,q,_,I;const b=((F=e.content.scenario)==null?void 0:F.budget)||e.content.budget||0,N=r.filter(R=>R.type==="necessidade").length,y=r.filter(R=>R.type==="desejo").length,P=r.filter(R=>R.type==="investimento").length;let w=0,L="";a<=b?w+=30:w-=20,N>=1&&(w+=25),P>=1&&(w+=25),y===0&&(w+=20),w>=80?L=((q=e.content.feedback)==null?void 0:q.success)||"Excelente! Você fez escolhas muito inteligentes!":w>=50?L=((_=e.content.feedback)==null?void 0:_.warning)||"Bom trabalho! Você pode melhorar ainda mais!":L=((I=e.content.feedback)==null?void 0:I.failure)||"Continue praticando! Você vai melhorar!",x(L),u(!0)},C=b=>{var w;const N=r.find(L=>L.name===b.name),y=((w=e.content.scenario)==null?void 0:w.budget)||e.content.budget||0,P=a+b.price<=y;return N?"bg-green-100 border-green-500 text-green-800":P?"bg-white border-gray-300 hover:border-primary hover:bg-blue-50 cursor-pointer":"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed"},p=b=>{switch(b){case"necessidade":return"text-blue-600";case"desejo":return"text-purple-600";case"investimento":return"text-green-600";default:return"text-gray-600"}},v=b=>{switch(b){case"necessidade":return"🔵";case"desejo":return"🟣";case"investimento":return"🟢";default:return"⚪"}};return n.jsxs(we,{title:e.title,timeSpent:l,onExit:s,icon:"🛒",children:[n.jsx("div",{className:"text-center mb-6 font-sans",children:e.content.scenario&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[n.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:e.content.scenario.title||"Cenário"}),n.jsx("p",{className:"text-blue-700 text-sm",children:e.content.scenario.description||"Escolha os itens corretos"})]})}),n.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg mb-6 text-center",children:[n.jsxs("p",{className:"text-lg font-bold text-yellow-800",children:["Orçamento: R$ ",((A=e.content.scenario)==null?void 0:A.budget)||e.content.budget||0]}),n.jsxs("p",{className:"text-sm text-yellow-700",children:["Gasto: R$ ",a," | Restante: R$ ",(((M=e.content.scenario)==null?void 0:M.budget)||e.content.budget||0)-a]})]}),e.content.objectives&&e.content.objectives.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:"Objetivos:"}),n.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:e.content.objectives.map((b,N)=>n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),b]},N))})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:(((h=e.content.scenario)==null?void 0:h.items)||e.content.products||e.content.items||[]).map((b,N)=>{const y={...b,type:b.type||(b.category==="Essencial"?"necessidade":b.category==="Desejo"?"desejo":b.category==="Investimento"?"investimento":"necessidade")};return n.jsx("div",{onClick:()=>E(y),className:`p-4 rounded-lg border-2 transition-all duration-200 ${C(y)}`,children:n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h3",{className:"font-bold text-lg text-gray-800 leading-tight flex-1 mr-3",children:y.name}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:"text-xl font-bold text-green-600",children:["R$ ",y.price]})})]}),y.description&&n.jsx("div",{className:"mb-3",children:n.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:y.description})}),y.persuasion&&n.jsx("div",{className:"mb-3",children:n.jsx("p",{className:"text-sm text-orange-600 leading-relaxed font-medium",children:y.persuasion})}),n.jsx("div",{className:"flex-1"}),n.jsxs("div",{className:"flex items-center justify-end pt-2 border-t border-gray-100",children:[n.jsx("span",{className:"mr-1",children:v(y.type)}),n.jsx("span",{className:`text-xs font-medium capitalize ${p(y.type)}`,children:y.type})]})]})},N)})}),r.length>0&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[n.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:"Itens Selecionados:"}),n.jsx("div",{className:"space-y-2",children:r.map((b,N)=>n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:b.name}),n.jsxs("span",{className:"text-green-600 font-bold",children:["R$ ",b.price]})]},N))}),n.jsx("div",{className:"border-t pt-2 mt-2",children:n.jsxs("div",{className:"flex justify-between items-center font-bold",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{className:"text-green-600",children:["R$ ",a]})]})})]}),m&&n.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg mb-6 text-center",children:[n.jsx("h3",{className:"text-xl font-bold text-blue-800 mb-4",children:"Resultado da Simulação"}),n.jsx("p",{className:"text-blue-700 mb-4",children:g}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"bg-white p-3 rounded",children:[n.jsx("p",{className:"font-bold text-blue-600",children:"Necessidades"}),n.jsx("p",{className:"text-2xl font-bold",children:r.filter(b=>b.type==="necessidade").length})]}),n.jsxs("div",{className:"bg-white p-3 rounded",children:[n.jsx("p",{className:"font-bold text-purple-600",children:"Desejos"}),n.jsx("p",{className:"text-2xl font-bold",children:r.filter(b=>b.type==="desejo").length})]}),n.jsxs("div",{className:"bg-white p-3 rounded",children:[n.jsx("p",{className:"font-bold text-green-600",children:"Poupança"}),n.jsx("p",{className:"text-2xl font-bold",children:r.filter(b=>b.type==="investimento").length})]})]})]}),n.jsx("div",{className:"flex gap-4",children:m?n.jsx("button",{onClick:()=>{var L;const b=((L=e.content.scenario)==null?void 0:L.budget)||e.content.budget||0,N=r.filter(F=>F.type==="necessidade").length,y=r.filter(F=>F.type==="desejo").length,P=r.filter(F=>F.type==="investimento").length;let w=0;a<=b&&(w+=30),N>=1&&(w+=25),P>=1&&(w+=25),y===0&&(w+=20),t({score:Math.max(0,Math.min(100,w)),timeSpent:l,isPerfect:N>=1&&P>=1&&a<=b,correctAnswers:N+P,totalQuestions:r.length,feedback:g})},className:"flex-1 bg-primary text-white py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Continuar"}):n.jsx("button",{onClick:k,disabled:r.length===0,className:"flex-1 bg-primary text-white py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Finalizar Compra"})})]})},Fu=({lesson:e,onComplete:t,onExit:s})=>{var M;const[r,o]=j.useState(""),[a,i]=j.useState([]),[l,c]=j.useState([]),[d,m]=j.useState("search"),[u,g]=j.useState(0),[x,E]=j.useState(!1),[k,C]=j.useState(!1);j.useEffect(()=>{const h=setInterval(()=>{g(b=>b+1)},1e3);return()=>clearInterval(h)},[]);const p=jt.useMemo(()=>e.content?e.content.productDatabase&&e.content.productDatabase.length>0?{productDatabase:e.content.productDatabase,searchTerms:e.content.searchTerms||[],scenario:e.content.scenario||{title:"Pesquisa de Preços",description:"Use a barra de pesquisa para encontrar produtos"}}:e.content.products&&e.content.products.length>0?{productDatabase:e.content.products,searchTerms:[],scenario:e.content.scenario||{title:"Comparação de Preços",description:"Compare as opções disponíveis"}}:{productDatabase:[],searchTerms:[],scenario:""}:{productDatabase:[],searchTerms:[],scenario:""},[e.content]),v=()=>{if(!r.trim())return;const h=p.productDatabase.filter(b=>b.searchKeywords.some(N=>N.toLowerCase().includes(r.toLowerCase())));i(h),m("results")},f=h=>["smartphone","celular","telefone","mobile","android","iphone","samsung","xiaomi","motorola","lg","nokia","huawei"].some(N=>h.toLowerCase().includes(N.toLowerCase())),S=h=>{l.length<3&&!l.find(b=>b.id===h.id)&&c([...l,h])},T=h=>{c(l.filter(b=>b.id!==h))},A=()=>{l.length!==0&&(l.reduce((h,b)=>{const N=b.rating*20-b.price/10+(b.warranty==="Grátis"?10:0),y=h.rating*20-h.price/10+(h.warranty==="Grátis"?10:0);return N>y?b:h}),C(l.some(h=>h.isBestValue)),m("final"),E(!0))};return!p.productDatabase||p.productDatabase.length===0?n.jsx(we,{title:e.title,timeSpent:u,onExit:s,icon:"💰",children:n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📝"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dados da lição não disponíveis"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Esta lição está sendo preparada."}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Voltar"})]})})}):n.jsxs(we,{title:e.title,timeSpent:u,onExit:s,icon:"💰",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:p.scenario.title}),n.jsx("p",{className:"text-gray-600 mb-4",children:p.scenario.description})]}),d==="search"&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border-2 border-gray-200 mb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"🔍 Pesquisar Produtos"}),n.jsxs("div",{className:"flex gap-4 mb-4",children:[n.jsx("input",{type:"text",placeholder:"Digite o que você está procurando...",value:r,onChange:h=>o(h.target.value),className:"flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",onKeyPress:h=>h.key==="Enter"&&v()}),n.jsx("button",{onClick:v,disabled:!r.trim(),className:"bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Pesquisar"})]}),p.searchTerms.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Sugestões:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:p.searchTerms.map((h,b)=>n.jsx("button",{onClick:()=>o(h),className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm hover:bg-gray-200 transition-colors",children:h},b))})]})]}),d==="results"&&n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:['📋 Resultados para "',r,'" (',a.length," produtos encontrados)"]}),n.jsx("button",{onClick:()=>m("search"),className:"text-primary hover:text-primary-dark font-medium",children:"Nova Pesquisa"})]}),a.length===0&&!f(r)&&n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[n.jsx("div",{className:"text-4xl mb-3",children:"📱"}),n.jsx("h4",{className:"text-lg font-bold text-yellow-800 mb-2",children:"Produto não encontrado"}),n.jsx("p",{className:"text-yellow-700 mb-4",children:"Esta loja especializa-se em smartphones. Tente pesquisar por termos como:"}),n.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:p.searchTerms.map((h,b)=>n.jsx("button",{onClick:()=>{o(h),v()},className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm hover:bg-yellow-200 transition-colors",children:h},b))})]}),a.length===0&&f(r)&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[n.jsx("div",{className:"text-4xl mb-3",children:"🔍"}),n.jsx("h4",{className:"text-lg font-bold text-blue-800 mb-2",children:"Nenhum produto encontrado"}),n.jsxs("p",{className:"text-blue-700 mb-4",children:['Não encontramos produtos para "',r,'". Tente termos mais específicos:']}),n.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:p.searchTerms.map((h,b)=>n.jsx("button",{onClick:()=>{o(h),v()},className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm hover:bg-blue-200 transition-colors",children:h},b))})]}),a.map((h,b)=>n.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-bold text-gray-800 mb-1",children:h.name}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:h.description}),n.jsxs("div",{className:"flex gap-4 text-xs text-gray-500",children:[n.jsxs("span",{children:["🏪 ",h.store]}),n.jsxs("span",{children:["⭐ ",h.rating,"/5"]}),n.jsxs("span",{children:["🛡️ ",h.warranty]}),n.jsxs("span",{children:["🚚 ",h.delivery]})]})]}),n.jsxs("div",{className:"text-right ml-4",children:[n.jsxs("div",{className:"font-bold text-lg text-green-600",children:["R$ ",h.price.toFixed(2).replace(".",",")]}),n.jsx("button",{onClick:()=>S(h),disabled:l.length>=3||l.find(N=>N.id===h.id),className:"mt-2 bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-dark transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:l.find(N=>N.id===h.id)?"Adicionado":"Comparar"})]})]})},h.id))]}),l.length>0&&d!=="final"&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 mb-6",children:[n.jsxs("h3",{className:"text-lg font-bold text-blue-800 mb-3",children:["📊 Produtos Selecionados para Comparação (",l.length,"/3)"]}),n.jsx("div",{className:"space-y-2",children:l.map(h=>n.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg",children:[n.jsxs("span",{className:"font-medium",children:[h.name," - R$ ",h.price.toFixed(2).replace(".",",")," - ",h.store]}),n.jsx("button",{onClick:()=>T(h.id),className:"text-red-500 hover:text-red-700 font-medium",children:"Remover"})]},h.id))}),l.length>=2&&n.jsx("button",{onClick:A,className:"mt-4 w-full bg-primary text-white py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Finalizar Comparação"})]}),d==="final"&&((M=e.content)==null?void 0:M.comparisonTable)&&l.length>0&&n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border-2 border-gray-200 mb-6",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:["📊 ",e.content.comparisonTable.title]}),n.jsx("p",{className:"text-gray-600 mb-6",children:e.content.comparisonTable.description}),n.jsx("div",{className:"overflow-x-auto max-w-full",children:n.jsxs("table",{className:"w-full border-collapse bg-gray-100 min-w-max",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-200",children:[n.jsx("th",{className:"border border-gray-300 p-3 text-left font-semibold text-gray-800 min-w-[150px]",children:"Diferenciais"}),l.map(h=>{const b=l.find(y=>y.isBestValue),N=b&&h.id===b.id;return n.jsx("th",{className:`border border-gray-300 p-3 text-center font-semibold min-w-[120px] ${N?"bg-green-100 text-green-800 border-green-300":"text-gray-800"}`,children:h.store},h.id)})]})}),n.jsx("tbody",{children:e.content.comparisonTable.differentials.map((h,b)=>n.jsxs("tr",{className:"bg-white",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium text-gray-800",children:h.name}),l.map(N=>{const y=l.find(L=>L.isBestValue),P=y&&N.id===y.id;let w=!1;if(h.id==="frete-gratis")w=N.delivery.toLowerCase().includes("grátis")||N.delivery.toLowerCase().includes("gratis");else if(h.id==="garantia-estendida")w=N.warranty.includes("18")||N.warranty.includes("24")||N.warranty.includes("36");else if(h.id==="avaliacao-alta")w=N.rating>=4.5;else if(h.id==="preco-competitivo"){const L=l.reduce((F,q)=>q.price<F.price?q:F);w=N.id===L.id}return n.jsx("td",{className:`border border-gray-300 p-3 text-center ${P?"bg-green-50 border-green-200":""}`,children:w?n.jsx("span",{className:"text-green-600 text-2xl",children:"✓"}):n.jsx("span",{className:"text-red-500 text-2xl",children:"✗"})},N.id)})]},h.id))})]})})]}),x&&n.jsxs("div",{className:`p-6 rounded-lg mb-6 text-center shadow-lg border-2 ${k?"bg-green-50 text-green-800 border-green-200":"bg-yellow-50 text-yellow-800 border-yellow-200"}`,children:[n.jsx("div",{className:"text-4xl mb-3",children:k?"🎉":"💡"}),n.jsx("h3",{className:"text-xl font-bold mb-2",children:k?"Excelente Pesquisa!":"Boa Pesquisa!"}),n.jsx("p",{className:"mb-4",children:k?"Você encontrou o melhor custo-benefício! Parabéns pela pesquisa detalhada!":"Você fez uma boa pesquisa! Continue praticando para encontrar sempre as melhores ofertas!"})]}),x&&n.jsx("div",{className:"text-center mb-6",children:n.jsx("button",{onClick:()=>{t({score:k?100:75,timeSpent:u,isPerfect:k,selectedProducts:l.map(b=>b.name),totalProducts:l.length})},className:"bg-primary text-white px-8 py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors",children:"Finalizar Lição"})})]})},$u=({lesson:e,onComplete:t,onExit:s})=>{var w,L,F,q;const[r,o]=j.useState({}),[a,i]=j.useState(0),[l,c]=j.useState(!1),[d,m]=j.useState(""),[u,g]=j.useState(!1),[x,E]=j.useState(null),[k,C]=j.useState(new Set),[p,v]=j.useState({}),[f,S]=j.useState(!1);j.useEffect(()=>{const _=localStorage.getItem("darkMode")==="true";S(_);const I=()=>{const R=localStorage.getItem("darkMode")==="true";S(R)};return window.addEventListener("darkModeChanged",I),()=>{window.removeEventListener("darkModeChanged",I)}},[]);const A=(()=>{var _,I,R,V,$;if(x!=null&&x.totalBudget)return x.totalBudget;if((I=(_=e.content)==null?void 0:_.gameConfig)!=null&&I.totalBudget)return e.content.gameConfig.totalBudget;if((R=e.content)!=null&&R.totalBudget)return e.content.totalBudget;if((V=e.content)!=null&&V.budget)return e.content.budget;if(($=e.content)!=null&&$.scenario){const D=e.content.scenario.match(/R\$ (\d+),00/);return D?parseInt(D[1]):5e3}return 5e3})(),M=j.useMemo(()=>{var R;if(!x||!((R=e.content)!=null&&R.categories))return{};if(["Orçamento de Viagem","Meu Primeiro Orçamento","Análise de fluxo de caixa","Gestão de risco de portfólio"].includes(e.title)){const $={"Orçamento de Viagem":{label:"Planejamento",icon:"✈️"},"Meu Primeiro Orçamento":{label:"Meu Orçamento",icon:"💰"},"Análise de fluxo de caixa":{label:"Fluxo de Caixa",icon:"📊"},"Gestão de risco de portfólio":{label:"Portfólio",icon:"📈"}}[e.title],D={single:{categories:[],total:0,maxTotal:0,label:$.label,icon:$.icon}};return e.content.categories.forEach(Q=>{const G=r[Q.name]||0;D.single.categories.push({...Q,allocated:G}),D.single.total+=G}),D.single.maxTotal=A,D}const I={necessidades:{categories:[],total:0,maxTotal:0,label:"Necessidades",icon:"🏠"},desejos:{categories:[],total:0,maxTotal:0,label:"Desejos/Lazer",icon:"🎯"},poupanca:{categories:[],total:0,maxTotal:0,label:"Poupança/Investimentos",icon:"💰"},doacoes:{categories:[],total:0,maxTotal:0,label:"Doações/Legado",icon:"🤝"}};return x.adjustments?Object.keys(x.adjustments).forEach(V=>{const D=x.adjustments[V].maxPercentage/100;V==="Necessidades"?I.necessidades.maxTotal=Math.round(A*D):V==="Desejos/Lazer"?I.desejos.maxTotal=Math.round(A*D):V==="Poupança/Investimentos"?I.poupanca.maxTotal=Math.round(A*D):V==="Doações/Legado"&&(I.doacoes.maxTotal=Math.round(A*D))}):(I.necessidades.maxTotal=Math.round(A*.5),I.desejos.maxTotal=Math.round(A*.3),I.poupanca.maxTotal=Math.round(A*.2)),e.content.categories.forEach(V=>{const $=r[V.name]||0;e.title==="O Orçamento da Família"?["alimentacao","moradia","transporte","saude"].includes(V.id)?(I.necessidades.categories.push({...V,allocated:$}),I.necessidades.total+=$):["educacao","lazer"].includes(V.id)?(I.desejos.categories.push({...V,allocated:$}),I.desejos.total+=$):["poupanca","investimentos","reserva","emergencia","renda-fixa","acoes","fundos","alternativos"].includes(V.id)?(I.poupanca.categories.push({...V,allocated:$}),I.poupanca.total+=$):(I.poupanca.categories.push({...V,allocated:$}),I.poupanca.total+=$):x.adjustments&&V.group?V.group==="Necessidades"?(I.necessidades.categories.push({...V,allocated:$}),I.necessidades.total+=$):V.group==="Desejos/Lazer"?(I.desejos.categories.push({...V,allocated:$}),I.desejos.total+=$):V.group==="Poupança/Investimentos"?(I.poupanca.categories.push({...V,allocated:$}),I.poupanca.total+=$):V.group==="Doações/Legado"&&(I.doacoes.categories.push({...V,allocated:$}),I.doacoes.total+=$):x.adjustments||(V.priority==="high"||["alimentacao","moradia","transporte","saude","educacao","hospedagem","necessidades","essenciais","operacional"].includes(V.id)?(I.necessidades.categories.push({...V,allocated:$}),I.necessidades.total+=$):V.priority==="medium"||["lazer","atracoes","brinquedos","presentes","marketing","pesquisa"].includes(V.id)?(I.desejos.categories.push({...V,allocated:$}),I.desejos.total+=$):V.priority==="low"||["poupanca","investimentos","reserva","emergencia","renda-fixa","acoes","fundos","alternativos"].includes(V.id)?(I.poupanca.categories.push({...V,allocated:$}),I.poupanca.total+=$):(I.necessidades.categories.push({...V,allocated:$}),I.necessidades.total+=$))}),I},[x,r,A,(w=e.content)==null?void 0:w.categories]);j.useEffect(()=>{const _=setInterval(()=>{i(I=>I+1)},1e3);return()=>clearInterval(_)},[]);const h=(_,I)=>{if(I===""||I===null||I===void 0){o(V=>({...V,[_]:0}));return}const R=parseInt(I,10);!isNaN(R)&&R>=0&&o(V=>({...V,[_]:R}))},b=()=>{const _=Object.values(r).reduce((O,Z)=>O+Z,0),I=_<=A&&_>0,R=M;let V=!0,$=[],D=[];Object.entries(R).forEach(([O,Z])=>{Z.categories.forEach(se=>{(!se.allocated||se.allocated<1)&&(V=!1,D.push(se.name))})});const Q=["Orçamento familiar avançado","Planejamento financeiro pessoal","Planejamento financeiro familiar avançado","Planejamento financeiro corporativo","Planejamento financeiro estratégico"];if((x!=null&&x.adjustments||Q.includes(e.title))&&Object.entries(R).forEach(([O,Z])=>{Z.maxTotal>0&&Z.total>Z.maxTotal&&(V=!1,$.push(`${Z.label} (R$ ${Z.total} > R$ ${Z.maxTotal})`))}),["Orçamento de Viagem","Meu Primeiro Orçamento","Análise de fluxo de caixa","Gestão de risco de portfólio","Planejamento financeiro corporativo","Planejamento financeiro estratégico"].includes(e.title)&&_>A){V=!1;const O={"Orçamento de Viagem":"Planejamento","Meu Primeiro Orçamento":"Meu Orçamento","Análise de fluxo de caixa":"Fluxo de Caixa","Gestão de risco de portfólio":"Portfólio","Planejamento financeiro corporativo":"Orçamento Corporativo","Planejamento financeiro estratégico":"Estratégia Financeira"};$.push(`${O[e.title]} (R$ ${_} > R$ ${A})`)}_<A*.9&&(V=!1);const U=I&&V,W=U?100:Math.max(0,100-Math.abs(_-A)*2);if(g(U),c(!0),U&&x&&(C(O=>new Set([...O,x.id])),v(O=>({...O,[x.id]:{scenario:x,score:W,totalAllocated:_,groups:R}}))),U)if(e.content.scenarios&&e.content.scenarios.length>1){const O=e.content.scenarios.filter(Z=>!k.has(Z.id)&&Z.id!==x.id);O.length>0?m(`Excelente! Cenário "${x.title}" concluído! Ainda faltam ${O.length} cenário(s) para completar a lição.`):m("Parabéns! Você completou todos os cenários! A lição está concluída.")}else m(`Excelente! Cenário "${x.title}" concluído! A lição está concluída.`);else D.length>0?m(`Você precisa alocar pelo menos R$ 1,00 em cada categoria! Categorias vazias: ${D.join(", ")}`):_>A?m(`Você ultrapassou o orçamento! Distribuiu R$ ${_.toLocaleString("pt-BR")},00 de R$ ${A.toLocaleString("pt-BR")},00. Tente reduzir alguns gastos.`):_===0?m(`Você precisa distribuir o orçamento! Planeje como gastar os R$ ${A.toLocaleString("pt-BR")},00 entre as categorias.`):$.length>0?m(`Ajuste necessário! Grupos que excederam o limite: ${$.join(", ")}`):x!=null&&x.adjustments?m(`Você distribuiu R$ ${_.toLocaleString("pt-BR")},00 de R$ ${A.toLocaleString("pt-BR")},00. Tente usar mais do orçamento disponível!`):m(`Excelente! Você distribuiu R$ ${_.toLocaleString("pt-BR")},00 de R$ ${A.toLocaleString("pt-BR")},00. Distribuição equilibrada!`)},N=()=>{if(e.content.scenarios&&e.content.scenarios.every(I=>k.has(I.id))){const R=Object.values(p).reduce((V,$)=>V+$.score,0)/Object.keys(p).length;t({score:Math.round(R),timeSpent:a,isPerfect:R>=90,feedback:`Lição concluída! Você completou todos os ${e.content.scenarios.length} cenário(s) com uma pontuação média de ${Math.round(R)} pontos.`,scenarioResults:p})}else o({}),c(!1),m(""),g(!1),E(null)},y=Object.values(r).reduce((_,I)=>_+I,0),P=A-y;return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-fadeIn {
          animation: fadeIn 0.5s ease-out;
        }
      `}),n.jsxs(we,{title:e.title,timeSpent:a,onExit:s,icon:"💰",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:e.content.scenario||"Distribua o orçamento mensal da família"}),n.jsx("div",{className:"text-gray-600 mb-6",children:e.content.instructions&&Array.isArray(e.content.instructions)?n.jsx("ul",{className:"text-left max-w-2xl mx-auto space-y-2",children:e.content.instructions.map((_,I)=>n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-primary mr-2",children:"•"}),n.jsx("span",{children:_})]},I))}):n.jsx("p",{children:e.content.instructions||"Distribua o dinheiro entre as diferentes categorias respeitando os limites:"})}),((L=e.content)==null?void 0:L.scenarios)&&e.content.scenarios.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Escolha um cenário:"}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Progresso: ",k.size,"/",((F=e.content.scenarios)==null?void 0:F.length)||0," cenários"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:e.content.scenarios.map((_,I)=>{const V=(Q=>({selected:"border-primary bg-primary/10 text-primary",unselected:"border-gray-200 bg-white hover:border-gray-300",completed:"border-green-500 bg-green-50 text-green-700"}))(_.classLevel),$=k.has(_.id),D=(x==null?void 0:x.id)===_.id;return n.jsxs("button",{onClick:()=>{(x==null?void 0:x.id)===_.id?(E(null),o({})):E(_)},className:`p-4 rounded-lg border-2 text-left transition-all h-full flex flex-col ${$?V.completed:D?V.selected:V.unselected}`,children:[n.jsx("h4",{className:"font-bold text-sm mb-3 h-8 flex items-center",children:_.title}),n.jsxs("div",{className:"text-xs text-gray-600 space-y-2 flex-1",children:[n.jsx("p",{className:"font-medium leading-tight",children:_.description.split(" - ")[0]}),n.jsx("p",{className:"text-gray-500 leading-tight",children:_.description.split(" - ")[1]})]}),$&&n.jsx("div",{className:"mt-3 text-xs text-green-600 font-medium h-4 flex items-center",children:"Concluído"})]},_.id)})})]}),x&&x.opportunities&&n.jsxs("div",{className:"p-4 rounded-lg mb-6 border",style:{backgroundColor:f?"#374151":"#f9fafb",borderColor:f?"#4b5563":"#e5e7eb"},children:[n.jsxs("h3",{className:"font-bold text-lg mb-3",style:{color:f?"#ffffff":"#1f2937"},children:["🎯 Oportunidades Disponíveis para ",x.title]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:x.opportunities.map((_,I)=>n.jsxs("div",{className:"flex items-center text-sm",style:{color:f?"#e5e7eb":"#374151"},children:[n.jsx("span",{className:"mr-2",children:"✓"}),n.jsx("span",{children:_})]},I))})]})]}),n.jsx("div",{className:"space-y-6 mb-6",children:x&&((q=e.content)==null?void 0:q.categories)&&e.content.categories.length>0&&n.jsx("div",{className:"animate-fadeIn",children:Object.entries(M).map(([I,R])=>{if(e.title==="O Orçamento da Família"&&I==="doacoes")return null;if(e.title!=="O Orçamento da Família"){if(R.categories.length===0)return null}const V=["Orçamento de Viagem","Meu Primeiro Orçamento","Análise de fluxo de caixa","Gestão de risco de portfólio"],$=["O Orçamento da Família","Orçamento familiar avançado","Planejamento financeiro pessoal","Planejamento financeiro familiar avançado","Planejamento financeiro corporativo","Planejamento financeiro estratégico"];return e.title==="O Orçamento da Família"||x!=null&&x.adjustments&&R.total>R.maxTotal||x!=null&&x.adjustments&&R.total===R.maxTotal||$.includes(e.title)&&R.total>R.maxTotal||$.includes(e.title)&&R.total===R.maxTotal||V.includes(e.title)&&R.total>R.maxTotal,n.jsxs("div",{className:"p-6 rounded-xl border-2 transition-all duration-300 hover:shadow-lg",style:{backgroundColor:f?"#374151":"#ffffff",borderColor:f?"#4b5563":"#e5e7eb"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-3xl mr-4",children:R.icon}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold",style:{color:f?"#ffffff":"#1f2937"},children:R.label}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsxs("span",{className:"text-sm",style:{color:f?"#d1d5db":"#6b7280"},children:["R$ ",R.total.toLocaleString("pt-BR"),",00"]}),(()=>{const D=["Orçamento de Viagem","Meu Primeiro Orçamento","Análise de fluxo de caixa","Gestão de risco de portfólio","Planejamento financeiro corporativo","Planejamento financeiro estratégico"],Q=["O Orçamento da Família","Orçamento familiar avançado","Planejamento financeiro pessoal","Planejamento financeiro familiar avançado","Planejamento financeiro corporativo","Planejamento financeiro estratégico"];return e.title==="O Orçamento da Família"||D.includes(e.title)||Q.includes(e.title)||x!=null&&x.adjustments?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-gray-400",children:"/"}),n.jsxs("span",{className:"text-sm font-semibold",style:{color:f?"#ffffff":"#1f2937"},children:["R$ ",R.maxTotal.toLocaleString("pt-BR"),",00"]})]}):null})()]})]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-bold ${e.title==="O Orçamento da Família"?"bg-gray-100 text-gray-700":x!=null&&x.adjustments&&R.total>R.maxTotal?"bg-red-100 text-red-700":x!=null&&x.adjustments&&R.total===R.maxTotal?"bg-green-100 text-green-700":$.includes(e.title)&&R.total>R.maxTotal?"bg-red-100 text-red-700":$.includes(e.title)&&R.total===R.maxTotal?"bg-green-100 text-green-700":V.includes(e.title)&&R.total>R.maxTotal?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:e.title==="O Orçamento da Família"?"Disponível":x!=null&&x.adjustments&&R.total>R.maxTotal?"Excedeu":x!=null&&x.adjustments&&R.total===R.maxTotal?"Perfeito":$.includes(e.title)&&R.total>R.maxTotal?"Excedeu":$.includes(e.title)&&R.total===R.maxTotal?"Perfeito":V.includes(e.title)&&R.total>R.maxTotal?"Excedeu":"Disponível"})})]}),n.jsx("div",{className:"space-y-4",children:R.categories.map((D,Q)=>n.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border transition-colors ${!D.allocated||D.allocated<1?"border-red-300":"hover:border-gray-300"}`,style:{backgroundColor:!D.allocated||D.allocated<1?f?"#7f1d1d":"#fef2f2":f?"#4b5563":"#ffffff",borderColor:!D.allocated||D.allocated<1?"#dc2626":f?"#6b7280":"#e5e7eb"},children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"text-2xl",children:D.icon}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",style:{color:f?"#ffffff":"#1f2937"},children:D.name}),n.jsx("p",{className:"text-sm mt-1",style:{color:f?"#d1d5db":"#6b7280"},children:D.description}),(!D.allocated||D.allocated<1)&&n.jsx("p",{className:"text-xs mt-1 font-medium",style:{color:"#dc2626"},children:"Mínimo: R$ 1,00"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",style:{color:f?"#ffffff":"#374151"},children:"R$"}),n.jsx("input",{type:"number",min:"0",step:"1",value:D.allocated||"",onChange:G=>h(D.name,G.target.value),className:`w-28 px-3 py-2 border-2 rounded-lg focus:outline-none text-right font-medium ${!D.allocated||D.allocated<1?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-primary"}`,style:{backgroundColor:f?"#374151":"#ffffff",color:f?"#ffffff":"#1f2937"},placeholder:"1"}),n.jsx("span",{className:"font-medium",style:{color:f?"#ffffff":"#374151"},children:",00"})]})]},Q))})]},I)})})}),x&&n.jsxs("div",{className:"mb-6 p-4 rounded-lg border",style:{backgroundColor:f?"#374151":"#f9fafb",borderColor:f?"#4b5563":"#e5e7eb"},children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium",style:{color:f?"#d1d5db":"#6b7280"},children:"Total Distribuído:"}),n.jsxs("span",{className:`font-bold text-lg ${y>A?"text-red-600":"text-green-600"}`,children:["R$ ",y.toLocaleString("pt-BR"),",00"]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-sm font-medium",style:{color:f?"#d1d5db":"#6b7280"},children:"Orçamento Total:"}),n.jsxs("span",{className:"font-bold text-lg",style:{color:f?"#ffffff":"#1f2937"},children:["R$ ",A.toLocaleString("pt-BR"),",00"]})]}),P!==0&&n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-sm font-medium",style:{color:f?"#d1d5db":"#6b7280"},children:"Restante:"}),n.jsxs("span",{className:`font-bold text-lg ${P<0?"text-red-600":"text-blue-600"}`,children:["R$ ",P.toLocaleString("pt-BR"),",00"]})]})]}),l&&n.jsxs("div",{className:`p-4 rounded-lg mb-6 text-center ${u?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[n.jsx("div",{className:"text-2xl mb-2",children:u?"🎉":"💡"}),n.jsx("p",{className:"font-semibold",children:d})]}),x&&(l?n.jsx("button",{onClick:N,className:"w-full bg-primary text-white py-3 rounded-lg font-bold text-lg hover:bg-primary-dark transition-colors",children:e.content.scenarios&&e.content.scenarios.every(_=>k.has(_.id))?"Concluir Lição":"Próximo Cenário"}):n.jsx("button",{onClick:b,disabled:y===0,className:`w-full py-3 rounded-lg font-bold text-lg transition-colors ${y===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-primary-dark"}`,children:"Verificar Planejamento"}))]})]})},Vu=({lesson:e,onComplete:t,onExit:s})=>{var M,h,b,N,y,P,w,L;const[r,o]=j.useState(0),[a,i]=j.useState(0),[l,c]=j.useState(0),[d,m]=j.useState(!1),[u,g]=j.useState(""),[x,E]=j.useState(!1),[k,C]=j.useState(!1),p=((M=e.content)==null?void 0:M.months)||[],v=((b=(h=e.content)==null?void 0:h.goal)==null?void 0:b.price)||200,f=((y=(N=e.content)==null?void 0:N.goal)==null?void 0:y.item)||"Videogame";j.useEffect(()=>{const F=setInterval(()=>{c(q=>q+1)},1e3);return()=>clearInterval(F)},[]);const S=F=>{const q=a+F.savings;i(q),g(F.feedback),m(!0),E(F.isCorrect),r<p.length-1?setTimeout(()=>{o(_=>_+1),m(!1)},2e3):setTimeout(()=>{C(!0),m(!1)},2e3)},T=()=>{const F=k?100:Math.round(a/v*100),q=a>=v;t({score:F,timeSpent:l,isPerfect:q,feedback:k?`Parabéns! Você conseguiu economizar R$ ${a.toFixed(2).replace(".",",")} para seu ${f}!`:u})},A=p[r];return k?n.jsxs(we,{title:e.title,timeSpent:l,onExit:s,icon:"🎯",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Jogo Concluído!"}),n.jsx("p",{className:"text-lg text-gray-600 mb-6",children:((P=e.content)==null?void 0:P.finalGoal)||"Parabéns por completar o desafio!"}),n.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border-2 border-green-200 mb-6",children:[n.jsx("h3",{className:"text-xl font-bold text-green-800 mb-2",children:"Resultado Final:"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",a.toFixed(2).replace(".",",")," poupados"]}),n.jsxs("p",{className:"text-green-700",children:["Meta: R$ ",v.toFixed(2).replace(".",",")," para ",f]}),n.jsx("p",{className:"text-green-700 mt-2",children:a>=v?"🎯 Meta alcançada!":`Faltaram R$ ${(v-a).toFixed(2).replace(".",",")}`})]})]}),n.jsx("button",{onClick:T,className:"w-full bg-primary text-white py-3 rounded-lg font-bold text-lg hover:bg-primary-dark transition-colors",children:"Continuar"})]}):A?n.jsxs(we,{title:e.title,timeSpent:l,onExit:s,icon:"🎯",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:((w=e.content)==null?void 0:w.scenario)||"Desafio de Poupança"}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsxs("span",{className:"text-sm text-blue-600",children:["Mês ",r+1," de ",p.length]}),n.jsxs("span",{className:"text-sm text-blue-600",children:["Meta: R$ ",v.toFixed(2).replace(".",",")]})]}),n.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(a/v*100,100)}%`}})}),n.jsxs("div",{className:"flex justify-between items-center mt-2",children:[n.jsxs("span",{className:"text-sm text-blue-600",children:["Poupado: R$ ",a.toFixed(2).replace(".",",")]}),n.jsxs("span",{className:"text-sm text-blue-600",children:["Faltam: R$ ",Math.max(0,v-a).toFixed(2).replace(".",",")]})]})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg border-2 border-gray-200 mb-6",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center",children:["Mês ",r+1,": Você recebeu R$ ",A.income.toFixed(2).replace(".",",")]}),A.scenario&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[n.jsx("h4",{className:"text-md font-semibold text-blue-800 mb-2",children:"Situação:"}),n.jsx("p",{className:"text-blue-700",children:A.scenario})]}),n.jsx("div",{className:"space-y-3",children:(L=A.choices)==null?void 0:L.map((F,q)=>n.jsx("button",{onClick:()=>S(F),disabled:d,className:`w-full p-4 rounded-lg text-left font-medium transition-all duration-200 ${d?"bg-gray-100 cursor-not-allowed":F.isCorrect?"bg-green-50 hover:bg-green-100 cursor-pointer hover:scale-105 border-2 border-green-200":"bg-orange-50 hover:bg-orange-100 cursor-pointer hover:scale-105 border-2 border-orange-200"}`,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h5",{className:"font-bold text-gray-800 mb-1",children:F.title}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:F.description}),F.expenses&&n.jsxs("div",{className:"text-xs text-gray-500",children:[n.jsx("p",{className:"font-semibold mb-1",children:"Gastos:"}),F.expenses.map((_,I)=>n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:_.item}),n.jsxs("span",{children:["R$ ",_.amount.toFixed(2).replace(".",",")]})]},I)),n.jsxs("div",{className:"border-t pt-1 mt-1 flex justify-between font-semibold",children:[n.jsx("span",{children:"Poupança:"}),n.jsxs("span",{className:"text-green-600",children:["R$ ",F.savings.toFixed(2).replace(".",",")]})]})]})]}),n.jsx("div",{className:"ml-4",children:n.jsx("span",{className:`text-2xl ${F.isCorrect?"text-green-600":"text-orange-600"}`,children:F.isCorrect?"💾":"💸"})})]})},F.id))})]}),d&&n.jsxs("div",{className:`p-4 rounded-lg mb-6 text-center ${x?"bg-green-50 text-green-800":"bg-yellow-50 text-yellow-800"}`,children:[n.jsx("div",{className:"text-2xl mb-2",children:x?"🎉":"💡"}),n.jsx("p",{className:"font-semibold",children:u})]})]}):n.jsx(we,{title:e.title,timeSpent:l,onExit:s,icon:"🎯",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-gray-600",children:"Carregando desafio..."})})})},Lj=({lesson:e,onComplete:t,onExit:s})=>{var P;const[r,o]=j.useState(0),[a,i]=j.useState(null),[l,c]=j.useState({item:"",cost:"",months:"",category:""}),[d,m]=j.useState(0),[u,g]=j.useState(!1),[x,E]=j.useState({}),[k,C]=j.useState(""),[p,v]=j.useState(!1);j.useEffect(()=>{const w=localStorage.getItem("darkMode")==="true";v(w);const L=()=>{const F=localStorage.getItem("darkMode")==="true";v(F)};return window.addEventListener("darkModeChanged",L),()=>{window.removeEventListener("darkModeChanged",L)}},[]),j.useEffect(()=>{const w=setInterval(()=>{m(L=>L+1)},1e3);return()=>clearInterval(w)},[]);const f=()=>{r<2&&(o(w=>w+1),C(""),r===1&&(i(null),c({item:"",cost:"",months:"",category:""})))},S=()=>{r>0&&(o(w=>w-1),C(""))},T=w=>{C(w)},A=()=>{const w=e.content.examples[r],L=parseFloat(k),F=parseFloat(w.answer),q=Math.abs(L-F)<=1;E(_=>({..._,[r]:{userAnswer:L,isCorrect:q,correctAnswer:F,monthlySavings:F}}))},M=(w,L)=>{c(F=>({...F,[w]:L}))},h=w=>{i(w),c(L=>({...L,category:w.id}))},b=()=>{if(l.item&&l.cost&&l.months&&l.category){const w=Math.round(parseFloat(l.cost)/parseInt(l.months));g(!0),setTimeout(()=>{t({score:100,timeSpent:d,isPerfect:!0,userGoal:{...l,monthlySavings:w}})},2e3)}},N=e.content.examples[r],y=x[r];return n.jsxs(we,{title:e.title,timeSpent:d,onExit:s,icon:"🎯",children:[n.jsxs("div",{className:"text-center mb-8 font-sans",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4 font-sans",style:{color:p?"#ffffff":"#1f2937"},children:e.content.scenario}),n.jsx("p",{className:"font-sans",style:{color:p?"#d1d5db":"#6b7280"},children:"Resolva os exemplos e depois crie sua própria meta!"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"border-2 rounded-xl p-6",style:{backgroundColor:p?"#1e3a8a":"#dbeafe",borderColor:p?"#3b82f6":"#93c5fd"},children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",style:{color:p?"#93c5fd":"#1e40af"},children:r<2?`Cenário ${r+1} (${N.character})`:"Cenário 3 (Sua Meta)"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:S,disabled:r===0,className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${r===0?"cursor-not-allowed":""}`,style:{backgroundColor:r===0?p?"#4b5563":"#e5e7eb":p?"#1e40af":"#dbeafe",color:r===0?"#9ca3af":p?"#93c5fd":"#1e40af"},children:"← Anterior"}),n.jsx("button",{onClick:f,disabled:r===2,className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${r===2?"cursor-not-allowed":""}`,style:{backgroundColor:r===2?p?"#4b5563":"#e5e7eb":p?"#1e40af":"#dbeafe",color:r===2?"#9ca3af":p?"#93c5fd":"#1e40af"},children:"Próximo →"})]})]}),n.jsx("div",{className:"space-y-4",children:r<2?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"rounded-lg p-4 border",style:{backgroundColor:p?"#374151":"#ffffff",borderColor:p?"#4b5563":"#93c5fd"},children:[n.jsx("h4",{className:"font-semibold mb-2",style:{color:p?"#ffffff":"#1f2937"},children:"Situação:"}),n.jsx("p",{style:{color:p?"#e5e7eb":"#374151"},children:N.scenario}),N.category&&n.jsx("div",{className:"mt-2",children:n.jsx("span",{className:"inline-block text-xs px-2 py-1 rounded",style:{backgroundColor:p?"#1e40af":"#dbeafe",color:p?"#93c5fd":"#1e40af"},children:(P=e.content.goalCategories.find(w=>w.id===N.category))==null?void 0:P.name})})]}),n.jsxs("div",{className:"rounded-lg p-4 border",style:{backgroundColor:p?"#581c87":"#faf5ff",borderColor:p?"#7c3aed":"#d8b4fe"},children:[n.jsx("h4",{className:"font-semibold mb-3",style:{color:p?"#e9d5ff":"#581c87"},children:"🎯 Sua vez! Calcule:"}),n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("input",{type:"number",placeholder:"Digite sua resposta...",value:k,onChange:w=>T(w.target.value),className:"flex-1 p-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500",disabled:y,style:{backgroundColor:p?"#374151":"#ffffff",color:p?"#ffffff":"#1f2937"}}),n.jsx("button",{onClick:A,disabled:!k||y,className:`px-4 py-2 rounded-lg font-medium transition-all duration-300 ${!k||y?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white shadow-lg transform hover:scale-105"}`,children:"Verificar"})]}),y&&n.jsxs("div",{className:`p-3 rounded-lg ${y.isCorrect?"bg-green-100 border border-green-300":"bg-red-100 border border-red-300"}`,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:"text-xl",children:y.isCorrect?"✅":"❌"}),n.jsx("span",{className:`font-semibold ${y.isCorrect?"text-green-800":"text-red-800"}`,children:y.isCorrect?"Correto!":"Tente novamente!"})]}),y.isCorrect?n.jsx("p",{className:"text-green-700 text-sm",children:N.explanation}):n.jsxs("p",{className:"text-red-700 text-sm",children:["Resposta correta: R$ ",y.correctAnswer.toFixed(2).replace(".",",")," por mês"]})]})]})]}):n.jsx(n.Fragment,{children:a?n.jsxs("div",{className:"rounded-lg p-4 border",style:{backgroundColor:p?"#581c87":"#faf5ff",borderColor:p?"#7c3aed":"#d8b4fe"},children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h4",{className:"font-semibold",style:{color:p?"#e9d5ff":"#581c87"},children:"🎯 Defina sua meta:"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm",style:{color:p?"#d1d5db":"#6b7280"},children:"Categoria:"}),n.jsx("span",{className:"font-semibold text-sm",style:{color:p?"#e9d5ff":"#581c87"},children:a.name}),n.jsx("button",{onClick:()=>i(null),className:"text-xs underline",style:{color:p?"#a78bfa":"#7c3aed"},children:"Trocar"})]})]}),n.jsx("div",{className:"space-y-4",children:e.content.inputFields.filter(w=>w.type!=="select").map((w,L)=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:p?"#ffffff":"#374151"},children:w.label}),n.jsx("input",{type:w.type,placeholder:w.placeholder,value:w.label.includes("O que você quer comprar")||w.label.includes("Qual produto")||w.label.includes("Para onde")||w.label.includes("Qual investimento")||w.label.includes("Qual empresa")||w.label.includes("Qual estratégia")||w.label.includes("Qual gasto")||w.label.includes("Qual hábito")||w.label.includes("Qual causa")?l.item||"":w.label.includes("Quanto custa")||w.label.includes("Qual seu orçamento")||w.label.includes("Quanto quer gastar")||w.label.includes("Quanto quer investir")||w.label.includes("Quanto quer economizar")||w.label.includes("Quanto quer doar")?l.cost||"":(w.label.includes("Em quantos meses")||w.label.includes("Em quanto tempo")||w.label.includes("Por quantos meses")||w.label.includes("Por quantos anos"))&&l.months||"",onChange:F=>M(w.label.includes("O que você quer comprar")||w.label.includes("Qual produto")||w.label.includes("Para onde")||w.label.includes("Qual investimento")||w.label.includes("Qual empresa")||w.label.includes("Qual estratégia")||w.label.includes("Qual gasto")||w.label.includes("Qual hábito")||w.label.includes("Qual causa")?"item":w.label.includes("Quanto custa")||w.label.includes("Qual seu orçamento")||w.label.includes("Quanto quer gastar")||w.label.includes("Quanto quer investir")||w.label.includes("Quanto quer economizar")||w.label.includes("Quanto quer doar")?"cost":"months",F.target.value),className:"w-full p-3 border border-purple-300 rounded-lg focus:outline-none",style:{backgroundColor:p?"#374151":"#ffffff",color:p?"#ffffff":"#1f2937",borderColor:p?"#6b7280":"#d8b4fe"}})]},L))}),l.cost&&l.months&&n.jsxs("div",{className:"mt-4 p-3 rounded-lg border",style:{backgroundColor:p?"#1e3a8a":"#dbeafe",borderColor:p?"#3b82f6":"#93c5fd"},children:[n.jsx("h4",{className:"font-semibold mb-2",style:{color:p?"#93c5fd":"#1e40af"},children:"📊 Seu plano de poupança:"}),n.jsxs("p",{style:{color:p?"#bfdbfe":"#1d4ed8"},children:["Para comprar ",n.jsx("strong",{children:l.item||"seu objetivo"})," por R$ ",l.cost," em ",l.months," meses, você precisará guardar ",n.jsxs("strong",{children:["R$ ",Math.round(parseFloat(l.cost)/parseInt(l.months)),",00 por mês"]}),"."]}),n.jsxs("p",{className:"text-sm mt-2",style:{color:p?"#93c5fd":"#2563eb"},children:["Categoria: ",n.jsx("strong",{children:a.name})]})]}),n.jsx("button",{onClick:b,disabled:!l.item||!l.cost||!l.months,className:`w-full mt-4 py-3 px-6 rounded-lg font-bold text-lg transition-all duration-300 ${l.item&&l.cost&&l.months?"bg-primary text-white shadow-lg transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Criar Meta Financeira"})]}):n.jsxs("div",{className:"rounded-lg p-4 border",style:{backgroundColor:p?"#581c87":"#faf5ff",borderColor:p?"#7c3aed":"#d8b4fe"},children:[n.jsx("h4",{className:"font-semibold mb-4",style:{color:p?"#e9d5ff":"#581c87"},children:"🎯 Primeiro, escolha uma categoria para sua meta:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.content.goalCategories.map(w=>n.jsx("div",{onClick:()=>h(w),className:"rounded-lg shadow-md p-4 cursor-pointer hover:shadow-lg transition-all duration-200 transform hover:scale-105",style:{backgroundColor:p?"#374151":"#ffffff",borderColor:p?"#4b5563":"#e5e7eb"},children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl mb-2",children:w.icon}),n.jsx("h5",{className:"font-bold mb-1",style:{color:p?"#ffffff":"#1f2937"},children:w.name}),n.jsx("p",{className:"text-sm mb-3",style:{color:p?"#d1d5db":"#6b7280"},children:w.description}),n.jsxs("div",{className:"rounded p-2",style:{backgroundColor:p?"#4b5563":"#f9fafb"},children:[n.jsx("h6",{className:"font-semibold text-xs mb-1",style:{color:p?"#ffffff":"#374151"},children:"Exemplos:"}),n.jsx("ul",{className:"text-xs space-y-1",style:{color:p?"#d1d5db":"#6b7280"},children:w.examples.slice(0,2).map((L,F)=>n.jsxs("li",{children:["• ",L]},F))})]})]})},w.id))})]})})})]}),n.jsx("div",{className:"text-center",children:n.jsxs("p",{className:"text-gray-600 text-sm",children:[r+1," de 3 cenários"]})})]}),u&&n.jsxs("div",{className:"mt-6 p-6 bg-green-50 text-green-800 rounded-2xl text-center shadow-lg border-2 border-green-200",children:[n.jsx("div",{className:"text-4xl mb-3",children:"🎉"}),n.jsx("h3",{className:"text-xl font-bold mb-2",children:e.content.successMessage}),n.jsxs("p",{className:"text-sm",children:["Sua meta: ",l.item," - R$ ",l.cost," em ",l.months," meses"]}),n.jsxs("p",{className:"text-sm font-semibold mt-2",children:["Você precisará guardar R$ ",Math.round(parseFloat(l.cost)/parseInt(l.months))," por mês!"]}),a&&n.jsxs("p",{className:"text-sm mt-1",children:["Categoria: ",a.name]})]})]})},Rj={"drag-drop":jj,quiz:Nj,choices:wj,classify:Sj,match:Cj,simulation:kj,input:Pj,"budget-choices":Ej,"shopping-cart":Tj,"categories-simulation":Aj,"math-problems":Mj,"shopping-simulation":Dj,"price-comparison":Fu,price_comparison:Fu,"budget-distribution":$u,budget_distribution:$u,"progress-game":Vu,progress_game:Vu,goals:Lj},Ij=({lesson:e,onComplete:t,onExit:s,reviewMode:r})=>{const o=Rj[e.type];return o?n.jsx(o,{lesson:e,onComplete:t,onExit:s,reviewMode:r}):n.jsx("div",{className:"min-h-screen bg-interface flex items-center justify-center",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-4",children:"Tipo de Lição Não Suportado"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Este tipo de lição ainda não foi implementado."}),n.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-dark transition",children:"Voltar"})]})})};class Fj{constructor(){this.initializeProgress()}initializeProgress(){if(!oe.load(ie.PROGRESS)){const s={totalXp:0,currentLevel:1,xpToNextLevel:100,streak:0,lastActivityDate:null,dailyGoal:50,dailyProgress:0,achievements:[],completedLessons:[],totalLessonsCompleted:0,perfectLessons:0,timeSpent:0};oe.save(ie.PROGRESS,s)}}updateProgress(t,s,r,o,a=!1){const i=oe.load(ie.PROGRESS)||{},l=50,c=Math.floor(r*.5),d=l+c;i.totalXp=(i.totalXp||0)+d;const m=this.calculateLevel(i.totalXp),u=m>(i.currentLevel||1);return u?(i.currentLevel=m,i.xpToNextLevel=this.calculateXpToNextLevel(m),K.success(`🎉 Parabéns! Você chegou ao nível ${m}!`)):i.xpToNextLevel=this.calculateXpToNextLevel(i.currentLevel||1),i.streak=this.updateStreak(i.streak,i.lastActivityDate),i.lastActivityDate=new Date().toISOString(),i.dailyProgress=(i.dailyProgress||0)+d,i.dailyProgress>=(i.dailyGoal||50)&&K.success("🎯 Meta diária atingida! +10 YüCoins!"),i.completedLessons||(i.completedLessons=[]),i.completedLessons.includes(s)||(i.completedLessons.push(s),i.totalLessonsCompleted=(i.totalLessonsCompleted||0)+1),a&&(i.perfectLessons=(i.perfectLessons||0)+1),i.timeSpent=(i.timeSpent||0)+o,oe.save(ie.PROGRESS,i),{totalXp:i.totalXp,level:i.currentLevel,xpToNextLevel:i.xpToNextLevel,streak:i.streak,dailyProgress:i.dailyProgress,leveledUp:u,lessonXp:d}}calculateLevel(t){const s=Math.max(0,t||0);return Math.floor(1+Math.sqrt(s/100))}calculateXpToNextLevel(t){const s=Math.max(1,t||1),r=Math.pow(s,2)*100;return console.log(`ProgressService - XP para nível ${s}: ${r}`),r}updateStreak(t,s){if(!s)return 1;const r=new Date(s),a=Math.abs(new Date-r),i=Math.ceil(a/(1e3*60*60*24));return i===1?(t||0)+1:i===0?t||0:1}getProgress(){const t=oe.load(ie.PROGRESS)||{};if(t.totalXp!==void 0&&t.currentLevel!==void 0){const s=this.calculateXpToNextLevel(t.currentLevel);t.xpToNextLevel!==s&&(t.xpToNextLevel=s,oe.save(ie.PROGRESS,t))}return t}setDailyGoal(t){const s=this.getProgress();s.dailyGoal=t,oe.save(ie.PROGRESS,s)}resetDailyProgress(){const t=this.getProgress();t.dailyProgress=0,oe.save(ie.PROGRESS,t)}checkAchievements(){const t=this.getProgress(),s=t.achievements||[],r=[];return t.totalLessonsCompleted===1&&!s.includes("first_lesson")&&r.push("first_lesson"),t.streak>=7&&!s.includes("week_streak")&&r.push("week_streak"),t.currentLevel>=5&&!s.includes("level_5")&&r.push("level_5"),t.perfectLessons>=10&&!s.includes("perfect_10")&&r.push("perfect_10"),r.length>0&&(t.achievements=[...s,...r],oe.save(ie.PROGRESS,t),r.forEach(o=>{const a=this.getAchievementData(o);K.success(`🏆 ${a.title}: ${a.description}`)})),r}getAchievementData(t){return{first_lesson:{title:"Primeira Lição",description:"Complete sua primeira lição",icon:"🎯",reward:{xp:50,yuCoins:10}},week_streak:{title:"Semana Consistente",description:"Complete lições por 7 dias seguidos",icon:"🔥",reward:{xp:200,yuCoins:50}},level_5:{title:"Nível 5",description:"Alcance o nível 5",icon:"⭐",reward:{xp:100,yuCoins:25}},perfect_10:{title:"Perfeição",description:"Complete 10 lições com pontuação perfeita",icon:"💎",reward:{xp:300,yuCoins:75}}}[t]||{title:"Conquista Desconhecida",description:"Conquista não encontrada",icon:"❓",reward:{xp:0,yuCoins:0}}}generateReport(){const t=this.getProgress();return{level:t.currentLevel,totalXp:t.totalXp,xpToNextLevel:t.xpToNextLevel,streak:t.streak,totalLessonsCompleted:t.totalLessonsCompleted,perfectLessons:t.perfectLessons,achievements:t.achievements||[],timeSpent:t.timeSpent,dailyGoal:t.dailyGoal,dailyProgress:t.dailyProgress}}}const $j=new Fj;class Vj{constructor(){this.achievements=[{id:"first_lesson",title:"Primeira Lição",description:"Complete sua primeira lição",icon:"🎯",xpReward:50,condition:t=>{var s,r;return((r=(s=t.progress)==null?void 0:s.completedLessons)==null?void 0:r.length)>=1}},{id:"streak_3",title:"Consistente",description:"Mantenha um streak de 3 dias",icon:"🔥",xpReward:100,condition:t=>{var s;return((s=t.progress)==null?void 0:s.streak)>=3}},{id:"streak_7",title:"Dedicado",description:"Mantenha um streak de 7 dias",icon:"🔥🔥",xpReward:250,condition:t=>{var s;return((s=t.progress)==null?void 0:s.streak)>=7}},{id:"streak_30",title:"Viciado",description:"Mantenha um streak de 30 dias",icon:"🔥🔥🔥",xpReward:1e3,condition:t=>{var s;return((s=t.progress)==null?void 0:s.streak)>=30}},{id:"perfect_lesson",title:"Perfeição",description:"Complete uma lição com pontuação perfeita",icon:"⭐",xpReward:100,condition:t=>{var s;return((s=t.progress)==null?void 0:s.perfectLessons)>=1}},{id:"level_5",title:"Aprendiz",description:"Alcance o nível 5",icon:"📚",xpReward:200,condition:t=>{var s;return((s=t.progress)==null?void 0:s.level)>=5}},{id:"level_10",title:"Estudioso",description:"Alcance o nível 10",icon:"🎓",xpReward:500,condition:t=>{var s;return((s=t.progress)==null?void 0:s.level)>=10}},{id:"coins_100",title:"Economista Júnior",description:"Acumule 100 YüCoins",icon:"💰",xpReward:150,condition:t=>{var s;return((s=t.progress)==null?void 0:s.yuCoins)>=100}},{id:"coins_500",title:"Economista Sênior",description:"Acumule 500 YüCoins",icon:"🏦",xpReward:300,condition:t=>{var s;return((s=t.progress)==null?void 0:s.yuCoins)>=500}},{id:"lessons_10",title:"Persistente",description:"Complete 10 lições",icon:"📖",xpReward:200,condition:t=>{var s,r;return((r=(s=t.progress)==null?void 0:s.completedLessons)==null?void 0:r.length)>=10}},{id:"lessons_25",title:"Determinado",description:"Complete 25 lições",icon:"📚",xpReward:400,condition:t=>{var s,r;return((r=(s=t.progress)==null?void 0:s.completedLessons)==null?void 0:r.length)>=25}},{id:"daily_goal_week",title:"Meta Semanal",description:"Atinga sua meta diária por 7 dias seguidos",icon:"🎯",xpReward:300,condition:t=>{var s;return((s=t.progress)==null?void 0:s.dailyGoalStreak)>=7}},{id:"module_1_complete",title:"🏆 Mestre do Dinheiro",description:"Complete todas as lições do módulo de introdução",icon:"💰",xpReward:100,yuCoinsReward:50,condition:t=>{var o,a,i,l,c,d;const s=((i=(a=(o=t.progress)==null?void 0:o.moduleProgress)==null?void 0:a[1])==null?void 0:i.completed)||0,r=((d=(c=(l=t.progress)==null?void 0:l.moduleProgress)==null?void 0:c[1])==null?void 0:d.total)||3;return s>=r&&r>0}},{id:"module_2_complete",title:"🧮 Calculadora Humana",description:"Domine a matemática financeira básica",icon:"📊",xpReward:150,yuCoinsReward:75,condition:t=>{var o,a,i,l,c,d;const s=((i=(a=(o=t.progress)==null?void 0:o.moduleProgress)==null?void 0:a[2])==null?void 0:i.completed)||0,r=((d=(c=(l=t.progress)==null?void 0:l.moduleProgress)==null?void 0:c[2])==null?void 0:d.total)||3;return s>=r&&r>0}},{id:"module_3_complete",title:"💡 Consciência Total",description:"Desenvolva consciência financeira completa",icon:"🎯",xpReward:200,yuCoinsReward:100,condition:t=>{var o,a,i,l,c,d;const s=((i=(a=(o=t.progress)==null?void 0:o.moduleProgress)==null?void 0:a[3])==null?void 0:i.completed)||0,r=((d=(c=(l=t.progress)==null?void 0:l.moduleProgress)==null?void 0:c[3])==null?void 0:d.total)||3;return s>=r&&r>0}},{id:"module_4_complete",title:"🚀 Projetista Financeiro",description:"Execute projetos práticos com sucesso",icon:"🏆",xpReward:300,yuCoinsReward:150,condition:t=>{var o,a,i,l,c,d;const s=((i=(a=(o=t.progress)==null?void 0:o.moduleProgress)==null?void 0:a[4])==null?void 0:i.completed)||0,r=((d=(c=(l=t.progress)==null?void 0:l.moduleProgress)==null?void 0:c[4])==null?void 0:d.total)||3;return s>=r&&r>0}}]}checkAchievements(t){const s=this.getUnlockedAchievements(t),r=[];return this.achievements.forEach(o=>{o.condition(t)&&!s.includes(o.id)&&r.push(o)}),r}getUnlockedAchievements(t){var s;return((s=t.progress)==null?void 0:s.achievements)||[]}unlockAchievement(t,s){var o,a,i;const r=((o=t.progress)==null?void 0:o.achievements)||[];if(!r.includes(s)){const l=this.getAchievementById(s);return{...t,progress:{...t.progress,achievements:[...r,s],xp:(((a=t.progress)==null?void 0:a.xp)||0)+((l==null?void 0:l.xpReward)||0),yuCoins:(((i=t.progress)==null?void 0:i.yuCoins)||0)+((l==null?void 0:l.yuCoinsReward)||0)}}}return t}processAchievementRewards(t,s){const r=this.getAchievementById(s);return r?{xp:r.xpReward||0,yuCoins:r.yuCoinsReward||0}:{xp:0,yuCoins:0}}getAllAchievements(){return this.achievements}getAchievementById(t){return this.achievements.find(s=>s.id===t)}getAchievementProgress(t){const s=this.getUnlockedAchievements(t).length,r=this.achievements.length;return{unlocked:s,total:r,percentage:Math.round(s/r*100)}}getNextAchievements(t){const s=this.getUnlockedAchievements(t);return this.achievements.filter(r=>!s.includes(r.id)).filter(r=>r.condition(t)).slice(0,3)}}const Oj=new Vj,_j=({onEnd:e})=>(j.useEffect(()=>{console.log("ConfettiEffect: MONTADO");const t=document.createElement("div");t.className="confetti-container",document.body.appendChild(t);const s=["#FFD700","#FF69B4","#00CFFF","#FF6347","#7CFC00","#EE9116"],r=40,o=[];for(let i=0;i<r;i++){const l=document.createElement("div");l.className="confetti",l.style.backgroundColor=s[Math.floor(Math.random()*s.length)],l.style.left=Math.random()*100+"vw",l.style.animationDelay=Math.random()*.5+"s",t.appendChild(l),o.push(l)}const a=setTimeout(()=>{o.forEach(i=>t.removeChild(i)),document.body.removeChild(t),e&&e(),console.log("ConfettiEffect: DESMONTADO")},2500);return()=>{clearTimeout(a),document.body.contains(t)&&(document.body.removeChild(t),console.log("ConfettiEffect: DESMONTADO (cleanup)"))}},[e]),r0.createPortal(null,document.body)),Ou=e=>{const{lessonId:t,user:s,setUser:r,setActiveScreen:o}=e,a=e.reviewMode||typeof e.activeScreen=="object"&&e.activeScreen.reviewMode||!1,[i,l]=j.useState(null),[c,d]=j.useState(!1),[m,u]=j.useState(null),[g,x]=j.useState(!0),[E,k]=j.useState(!1),[C,p]=j.useState(!1),[v,f]=j.useState(0),[S,T]=j.useState(null);j.useEffect(()=>{A()},[t]);const A=async()=>{try{x(!0),T(null),d(!1),u(null);const N=await ue(`/lessons/${t}`);l(N)}catch(N){console.error("Erro ao carregar lição:",N),K.error("Erro ao carregar lição")}finally{x(!1)}},M=async N=>{if(u(N),d(!0),!a)try{const y=await _e(`/users/${s.id}/complete-lesson`,{lessonId:t,score:N.score,timeSpent:N.timeSpent,isPerfect:N.isPerfect}),{student:P,reward:w,leveledUp:L,moduleAchievements:F,achievementRewards:q,xpBreakdown:_}=y;if(f(w||0),T(_||null),r(P),oe.save(ie.USER,P),F&&F.length>0){console.log("Conquistas de módulo desbloqueadas:",F),F.forEach(I=>{const R=I.split("_"),$=`module_${R[R.length-2]}_complete`,D=Oj.getAchievementById($);console.log("Conquista encontrada:",D),D?K.success(`🏆 ${D.title}: ${D.description}`):console.log("Conquista não encontrada para ID:",$)});try{const I=await _e(`/users/${P.id}/process-rewards`,{rewardType:"achievement",value:F.length});I.reward>0&&(K.success(`💰 +R$ ${I.reward.toFixed(2)} adicionados à poupança por conquistas!`),r(I.student),oe.save(ie.USER,I.student))}catch(I){console.error("Erro ao processar recompensa de conquista:",I)}}L?(p(!0),k(!0),console.log("Confetti: Subiu de nível!")):(p(!1),k(!1)),w>0&&(!F||F.length===0)&&K.success(`🎉 +R$ ${w.toFixed(2)} adicionados à sua poupança!`)}catch(y){console.error("Erro ao processar lição:",y),y.message.includes("já foi recompensada")?(K.warning("Esta lição já foi recompensada anteriormente."),f(0)):K.error("Erro ao atualizar progresso: "+y.message)}},h=()=>{o&&typeof o=="function"?(c||window.confirm("Tem certeza que deseja sair? Seu progresso será perdido."))&&o("home"):(console.error("setActiveScreen não está disponível"),e.onNavigate?e.onNavigate("home"):window.location.reload())},b=()=>{o&&typeof o=="function"?o("home"):(console.error("setActiveScreen não está disponível"),e.onNavigate?e.onNavigate("home"):window.location.reload())};if(g)return n.jsx("div",{className:"h-screen bg-interface flex items-center justify-center p-4 pb-20",children:n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center animate-fadeIn max-h-[70vh] overflow-y-auto",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Carregando lição..."})]})});if(!i)return n.jsx("div",{className:"h-screen bg-interface flex items-center justify-center p-4 pb-20",children:n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center max-h-[70vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-3",children:"Lição Não Encontrada"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"A lição solicitada não existe."}),n.jsx("button",{onClick:()=>{o&&typeof o=="function"?o("home"):e.onNavigate?e.onNavigate("home"):window.location.reload()},className:"bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-dark transition",children:"Voltar ao Dashboard"})]})});if(c&&m){const N=m.isPerfect;return n.jsxs("div",{className:"h-screen bg-gradient-to-b from-primary to-secondary flex items-center justify-center p-4 pb-20",children:[E&&n.jsx(_j,{onEnd:()=>k(!1)}),n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-md w-full text-center animate-bounce-in max-h-[70vh] overflow-y-auto",children:[n.jsx("div",{className:"text-6xl mb-3 animate-bounce",children:N?"🎉":"👍"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-3",children:N?"Perfeito!":"Lição Concluída!"}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-100 to-blue-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Pontuação"}),n.jsxs("p",{className:"text-3xl font-bold text-white",children:[m.score,"/100"]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-green-100 to-green-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Tempo"}),n.jsxs("p",{className:"text-xl font-semibold",children:[m.timeSpent,"s"]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-yellow-100 to-yellow-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"YüCoins Ganhos"}),n.jsxs("p",{className:"text-xl font-semibold text-yellow-600",children:["+",10," 💰"]})]}),v>0&&n.jsxs("div",{className:"bg-gradient-to-r from-green-100 to-green-200 rounded-lg p-4 animate-pulse",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"💰 Poupança Automática"}),n.jsxs("p",{className:"text-xl font-semibold text-green-600",children:["+R$ ",v.toFixed(2)]}),n.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Adicionado à sua carteira!"})]}),N&&n.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-purple-200 rounded-lg p-4 animate-pulse",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"🏆 Lição Perfeita!"}),n.jsx("p",{className:"text-lg font-bold text-purple-600",children:"Parabéns!"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{onClick:b,className:"w-full bg-primary text-white py-3 rounded-lg font-bold text-lg hover:bg-primary-dark transition-colors transform hover:scale-105 shadow-lg",children:"Continuar"})})]})]})}return n.jsx(Ij,{lesson:i,onComplete:M,onExit:h,reviewMode:a})},zj=({user:e})=>{const t=e.progress.completedLessons.length;return n.jsxs("div",{className:"min-h-screen bg-interface flex flex-col items-center p-4 pb-20",role:"main","aria-label":"Tela de Perfil",children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-8 animate-fadeIn","aria-label":"Título do Perfil",children:"Perfil do Usuário 🐷"}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[n.jsx("div",{className:"w-20 h-20 bg-teal rounded-full flex items-center justify-center",children:n.jsxs("span",{className:"text-2xl",children:["😊 ",e.progress.avatar.accessory||"Sem acessório"]})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold","aria-label":"Nome do Usuário",children:e.name}),n.jsxs("p",{className:"text-gray-600","aria-label":"Nível do Usuário",children:["6º Ano - Nível ",Math.floor(e.progress.xp/e.progress.maxXp)+1]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"XP:"})," ",e.progress.xp,"/",e.progress.maxXp]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:n.jsx("div",{className:"bg-teal h-4 rounded-full",style:{width:`${e.progress.xp/e.progress.maxXp*100}%`}})}),n.jsxs("p",{children:[n.jsx("strong",{children:"YüCoins:"})," ",e.progress.yuCoins]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Streak:"})," ",e.progress.streak," dias 🔥"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Medalhas:"})," ",t," 🏅"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Corações:"})," ",e.progress.hearts," ❤️"]})]}),n.jsx("button",{onClick:()=>alert("Poupí: Edite seu avatar na loja!"),className:"mt-4 w-full text-white px-6 py-3 rounded-full font-semibold hover:opacity-90 transition transform hover:scale-105",style:{backgroundColor:"rgb(238, 145, 22)"},"aria-label":"Editar Perfil",children:"Editar Perfil"})]})]})},Bj=({user:e})=>{var i,l,c,d,m;const[t,s]=j.useState(!1);j.useEffect(()=>{const u=localStorage.getItem("darkMode")==="true";s(u)},[]);const r=.1,o=(((i=e.savings)==null?void 0:i.balance)??0)*r,a=(((l=e.savings)==null?void 0:l.balance)??0)+o;return n.jsxs("div",{className:"min-h-screen bg-interface flex flex-col items-center p-4 pb-20",style:t?{backgroundColor:"#111827"}:{},children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-8",style:t?{color:"#fb923c"}:{},children:"Carteira Virtual 🐷"}),n.jsxs("div",{className:"bg-gradient-to-r from-green-400 to-green-600 rounded-lg shadow-lg p-6 max-w-md w-full border-2 mb-4",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Saldo Total"}),n.jsxs("p",{className:"text-4xl font-bold text-white mb-2",children:["R$ ",a.toFixed(2)]}),n.jsx("p",{className:"text-green-100 text-sm",children:"Incluindo incentivo educacional"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full border-2 mb-4",style:{borderColor:"rgb(238, 145, 22)",backgroundColor:t?"#374151":"white"},children:[n.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-800",style:t?{color:"#ffffff"}:{},children:"Poupança Base"}),n.jsxs("p",{className:"text-2xl font-semibold text-teal mb-2",style:t?{color:"#14b8a6"}:{},children:["R$ ",(((c=e.savings)==null?void 0:c.balance)??0).toFixed(2)]}),n.jsx("p",{className:"text-gray-600 text-sm mb-3",style:t?{color:"#e5e7eb"}:{},children:"Valor acumulado pelas suas conquistas"}),n.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3 border-l-4 border-yellow-400",style:t?{backgroundColor:"#451a03",borderLeftColor:"#fbbf24"}:{},children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium text-yellow-800",style:t?{color:"#fbbf24"}:{},children:"Incentivo Educacional"}),n.jsxs("span",{className:"text-lg font-bold text-yellow-600",style:t?{color:"#fbbf24"}:{},children:["+",r*100,"%"]})]}),n.jsxs("p",{className:"text-lg font-bold text-yellow-700 mt-1",style:t?{color:"#fbbf24"}:{},children:["R$ ",o.toFixed(2)]}),n.jsx("p",{className:"text-xs text-yellow-600 mt-1",style:t?{color:"#fbbf24"}:{},children:"Bônus por manter foco nos estudos"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full border-2",style:{borderColor:"rgb(238, 145, 22)",backgroundColor:t?"#374151":"white"},children:[n.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",style:t?{color:"#ffffff"}:{},children:"Histórico de Conquistas"}),n.jsx("div",{className:"space-y-3 max-h-40 overflow-y-auto",children:((m=(d=e.savings)==null?void 0:d.transactions)==null?void 0:m.length)>0?e.savings.transactions.map((u,g)=>n.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",style:t?{backgroundColor:"#4b5563"}:{},children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-800",style:t?{color:"#ffffff"}:{},children:u.reason}),n.jsx("p",{className:"text-xs text-gray-500",style:t?{color:"#e5e7eb"}:{},children:"Conquista recente"})]}),n.jsxs("span",{className:"text-green-600 font-bold",style:t?{color:"#10b981"}:{},children:["+ R$ ",u.amount.toFixed(2)]})]},g)):n.jsx("p",{className:"text-gray-500 text-sm",style:t?{color:"#e5e7eb"}:{},children:"Nenhuma transação registrada ainda."})}),n.jsx("p",{className:"text-center text-gray-500 text-sm mt-3",style:t?{color:"#e5e7eb"}:{},children:"Financiado por: Responsável"})]})]})};class Uj{constructor(){this.events=[],this.sessionStart=Date.now(),this.initializeAnalytics()}initializeAnalytics(){const t=oe.load(ie.ANALYTICS)||[];this.events=t,this.trackEvent("session_start",{timestamp:this.sessionStart,userAgent:navigator.userAgent,screenSize:`${window.innerWidth}x${window.innerHeight}`})}trackEvent(t,s={}){const r={id:Date.now()+Math.random(),event:t,timestamp:Date.now(),sessionDuration:Date.now()-this.sessionStart,...s};this.events.push(r),this.saveEvents()}trackLessonStart(t,s){this.trackEvent("lesson_start",{lessonId:t,lessonType:s,userProgress:this.getUserProgress()})}trackLessonComplete(t,s,r,o){this.trackEvent("lesson_complete",{lessonId:t,score:s,timeSpent:r,isPerfect:o,userProgress:this.getUserProgress()})}trackLevelUp(t,s){this.trackEvent("level_up",{newLevel:t,totalXp:s,userProgress:this.getUserProgress()})}trackAchievementUnlock(t,s){this.trackEvent("achievement_unlock",{achievementId:t,achievementName:s,userProgress:this.getUserProgress()})}trackStreakUpdate(t){this.trackEvent("streak_update",{streak:t,userProgress:this.getUserProgress()})}trackStorePurchase(t,s,r){this.trackEvent("store_purchase",{itemId:t,itemName:s,cost:r,userProgress:this.getUserProgress()})}trackNavigation(t){this.trackEvent("navigation",{screenName:t,userProgress:this.getUserProgress()})}trackError(t,s){this.trackEvent("error",{errorType:t,errorMessage:s,userProgress:this.getUserProgress()})}getUserProgress(){var r,o,a,i,l,c;const t=oe.load(ie.USER),s=oe.load(ie.PROGRESS);return{userId:t==null?void 0:t.id,userRole:t==null?void 0:t.role,level:(s==null?void 0:s.currentLevel)||((r=t==null?void 0:t.progress)==null?void 0:r.level)||1,totalXp:(s==null?void 0:s.totalXp)||((o=t==null?void 0:t.progress)==null?void 0:o.xp)||0,yuCoins:((a=t==null?void 0:t.progress)==null?void 0:a.yuCoins)||0,streak:(s==null?void 0:s.streak)||((i=t==null?void 0:t.progress)==null?void 0:i.streak)||0,completedLessons:((c=(l=t==null?void 0:t.progress)==null?void 0:l.completedLessons)==null?void 0:c.length)||0,perfectLessons:(s==null?void 0:s.perfectLessons)||0}}saveEvents(){this.events.length>1e3&&(this.events=this.events.slice(-1e3)),oe.save(ie.ANALYTICS,this.events)}generateReport(t="7d"){const s=Date.now(),r={"1d":24*60*60*1e3,"7d":7*24*60*60*1e3,"30d":30*24*60*60*1e3,all:1/0},o=s-(r[t]||r["7d"]),a=this.events.filter(i=>i.timestamp>=o);return{timeRange:t,totalEvents:a.length,sessionDuration:s-this.sessionStart,eventsByType:this.groupEventsByType(a),userEngagement:this.calculateEngagement(a),performance:this.calculatePerformance(a),errors:this.getErrors(a)}}groupEventsByType(t){return t.reduce((s,r)=>(s[r.event]=(s[r.event]||0)+1,s),{})}calculateEngagement(t){const s=t.filter(i=>i.event==="lesson_complete"),r=s.length,o=s.filter(i=>i.isPerfect).length,a=s.length>0?s.reduce((i,l)=>i+l.score,0)/s.length:0;return{totalLessons:r,perfectLessons:o,perfectRate:r>0?o/r*100:0,averageScore:Math.round(a),averageTimePerLesson:s.length>0?s.reduce((i,l)=>i+l.timeSpent,0)/s.length:0}}calculatePerformance(t){const s=t.filter(a=>a.event==="level_up").length,r=t.filter(a=>a.event==="achievement_unlock").length,o=t.filter(a=>a.event==="store_purchase").length;return{levelUps:s,achievements:r,storePurchases:o,totalSpent:o>0?t.filter(a=>a.event==="store_purchase").reduce((a,i)=>a+i.cost,0):0}}getErrors(t){return t.filter(s=>s.event==="error")}exportData(){return{events:this.events,sessionStart:this.sessionStart,userProgress:this.getUserProgress(),report:this.generateReport("all")}}cleanupOldData(){const t=Date.now()-2592e6;this.events=this.events.filter(s=>s.timestamp>=t),this.saveEvents()}}const ds=new Uj;setInterval(()=>{ds.cleanupOldData()},24*60*60*1e3);const qj=({user:e,setUser:t,setActiveScreen:s})=>{var f,S,T,A,M,h,b;const[r,o]=j.useState("all"),[a,i]=j.useState(""),[l,c]=j.useState(!1);j.useEffect(()=>{const N=localStorage.getItem("darkMode")==="true";c(N)},[]);const d=[{id:"all",name:"Todos",icon:"🛒"},{id:"clothes",name:"Roupas",icon:"👕"},{id:"accessories",name:"Acessórios",icon:"🎩"},{id:"effects",name:"Efeitos",icon:"✨"},{id:"powerups",name:"Power-ups",icon:"⚡"},{id:"collectibles",name:"Colecionáveis",icon:"🏆"}],m=[{id:"hat",name:"Chapéu de Estudante",cost:50,category:"clothes",rarity:"common",icon:"🎓",description:"Um chapéu elegante para estudantes dedicados"},{id:"glasses",name:"Óculos Inteligentes",cost:30,category:"accessories",rarity:"common",icon:"👓",description:"Óculos que te fazem parecer mais inteligente"},{id:"backpack",name:"Mochila Financeira",cost:70,category:"clothes",rarity:"rare",icon:"🎒",description:"Mochila especial para guardar seus conhecimentos"},{id:"tie",name:"Gravata Executiva",cost:40,category:"clothes",rarity:"common",icon:"👔",description:"Gravata para ocasiões especiais"},{id:"watch",name:"Relógio de Ouro",cost:100,category:"accessories",rarity:"epic",icon:"⌚",description:"Relógio de ouro para mostrar que você é valioso"},{id:"crown",name:"Coroa de Rei",cost:200,category:"accessories",rarity:"legendary",icon:"👑",description:"Coroa para os verdadeiros reis do dinheiro"},{id:"necklace",name:"Colar de Diamantes",cost:150,category:"accessories",rarity:"epic",icon:"💎",description:"Colar brilhante para impressionar"},{id:"ring",name:"Anel Mágico",cost:80,category:"accessories",rarity:"rare",icon:"💍",description:"Anel que traz sorte financeira"},{id:"sparkles",name:"Efeito Brilhante",cost:60,category:"effects",rarity:"rare",icon:"✨",description:"Faz você brilhar como uma estrela"},{id:"rainbow",name:"Arco-íris",cost:90,category:"effects",rarity:"epic",icon:"🌈",description:"Arco-íris mágico que te segue"},{id:"fire",name:"Chamas de Sucesso",cost:120,category:"effects",rarity:"epic",icon:"🔥",description:"Chamas que mostram seu sucesso"},{id:"xp_boost",name:"Boost de XP",cost:25,category:"powerups",rarity:"common",icon:"⚡",description:"Ganha 50% mais XP por 1 hora"},{id:"coin_multiplier",name:"Multiplicador de YüCoins",cost:35,category:"powerups",rarity:"rare",icon:"💰",description:"Ganha 2x YüCoins por 30 minutos"},{id:"streak_protector",name:"Protetor de Streak",cost:45,category:"powerups",rarity:"rare",icon:"🛡️",description:"Protege seu streak por 1 dia"},{id:"perfect_boost",name:"Boost Perfeito",cost:55,category:"powerups",rarity:"epic",icon:"⭐",description:"Aumenta chance de lição perfeita"},{id:"golden_pig",name:"Porquinho Dourado",cost:300,category:"collectibles",rarity:"legendary",icon:"🐷",description:"Porquinho dourado raro e valioso"},{id:"crystal_coin",name:"Moeda de Cristal",cost:250,category:"collectibles",rarity:"legendary",icon:"💎",description:"Moeda de cristal colecionável"},{id:"trophy",name:"Troféu de Campeão",cost:400,category:"collectibles",rarity:"legendary",icon:"🏆",description:"Troféu para verdadeiros campeões"},{id:"medal",name:"Medalha de Honra",cost:180,category:"collectibles",rarity:"epic",icon:"🥇",description:"Medalha de honra por excelência"}],u=N=>{const y={common:"text-gray-600",rare:"text-blue-600",epic:"text-purple-600",legendary:"text-yellow-600"};return y[N]||y.common},g=N=>{const y={common:"bg-gray-100",rare:"bg-blue-100",epic:"bg-purple-100",legendary:"bg-yellow-100"};return y[N]||y.common},x=m.filter(N=>{const y=r==="all"||N.category===r,P=N.name.toLowerCase().includes(a.toLowerCase())||N.description.toLowerCase().includes(a.toLowerCase());return y&&P}),E=N=>{var y,P,w;if((((y=e==null?void 0:e.progress)==null?void 0:y.yuCoins)??0)>=N.cost){const L={...e,progress:{...e==null?void 0:e.progress,yuCoins:(((P=e==null?void 0:e.progress)==null?void 0:P.yuCoins)??0)-N.cost,inventory:[...((w=e==null?void 0:e.progress)==null?void 0:w.inventory)??[],N.id]}};t(L),localStorage.setItem("yufinUser",JSON.stringify(L)),ds.trackStorePurchase(N.id,N.name,N.cost),K.success(`Parabéns! Você comprou ${N.name}!`),N.category==="powerups"&&k(N)}else K.error("YüCoins insuficientes! Complete mais lições para ganhar YüCoins.")},k=N=>{var w;const P={xp_boost:{type:"xp_multiplier",value:1.5,duration:36e5},coin_multiplier:{type:"coin_multiplier",value:2,duration:18e5},streak_protector:{type:"streak_protector",value:1,duration:864e5},perfect_boost:{type:"perfect_chance",value:1.3,duration:72e5}}[N.id];if(P){const L=((w=e==null?void 0:e.progress)==null?void 0:w.activeEffects)??[];L.push({...P,id:N.id,name:N.name,appliedAt:Date.now()});const F={...e,progress:{...e==null?void 0:e.progress,activeEffects:L}};t(F),localStorage.setItem("yufinUser",JSON.stringify(F)),K.success(`Power-up ${N.name} ativado!`)}},C=((f=e==null?void 0:e.progress)==null?void 0:f.inventory)??[],p=C.length,v=m.length;return n.jsx("div",{className:"min-h-screen bg-interface p-3 pb-20",style:l?{backgroundColor:"#111827"}:{},children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-4 border-2",style:{borderColor:"rgb(238, 145, 22)",backgroundColor:l?"#374151":"white"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("h1",{className:"text-2xl font-yufin text-primary",style:l?{color:"#fb923c"}:{},children:["🛍️ Loja YüFin - ",((S=e==null?void 0:e.progress)==null?void 0:S.yuCoins)??0," 💰"]})}),n.jsxs("div",{className:"text-right text-sm",children:[n.jsxs("div",{className:"text-gray-600",style:l?{color:"#e5e7eb"}:{},children:["Coleção: ",Math.round(p/v*100),"%"]}),n.jsxs("div",{className:"text-gray-600",style:l?{color:"#e5e7eb"}:{},children:["Power-ups: ",((A=(T=e==null?void 0:e.progress)==null?void 0:T.activeEffects)==null?void 0:A.length)??0]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-blue-100 text-blue-800 p-3 rounded-lg text-center border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("div",{className:"text-xs font-medium mb-1",children:"Possuídos"}),n.jsxs("div",{className:"text-lg font-bold",children:[p,"/",v]})]}),n.jsxs("div",{className:"bg-green-100 text-green-800 p-3 rounded-lg text-center border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("div",{className:"text-xs font-medium mb-1",children:"Ativos"}),n.jsx("div",{className:"text-lg font-bold",children:((h=(M=e==null?void 0:e.progress)==null?void 0:M.activeEffects)==null?void 0:h.length)??0})]}),n.jsxs("div",{className:"bg-purple-100 text-purple-800 p-3 rounded-lg text-center border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("div",{className:"text-xs font-medium mb-1",children:"Raros"}),n.jsx("div",{className:"text-lg font-bold",children:m.filter(N=>N.rarity==="legendary").length})]})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-3 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)",backgroundColor:l?"#374151":"white"},children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx("div",{className:"flex flex-wrap gap-4",children:d.map(N=>n.jsxs("button",{onClick:()=>o(N.id),className:`px-3 py-1 rounded-lg text-sm font-medium transition ${r===N.id?"text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,style:{backgroundColor:r===N.id?"rgb(238, 145, 22)":l?"#4b5563":"transparent",color:r===N.id?"white":l?"#ffffff":"inherit"},children:[N.icon," ",N.name]},N.id))}),n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Buscar itens...",value:a,onChange:N=>i(N.target.value),className:"w-full bg-gray-100 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",style:l?{backgroundColor:"#4b5563",borderColor:"#6b7280",color:"#ffffff"}:{}})})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 border-2",style:{borderColor:"rgb(238, 145, 22)",backgroundColor:l?"#374151":"white"},children:[n.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-3 text-center",style:l?{color:"#ffffff"}:{},children:r==="all"?"Todos os Itens":(b=d.find(N=>N.id===r))==null?void 0:b.name}),x.length===0?n.jsxs("div",{className:"text-center py-6",children:[n.jsx("div",{className:"text-4xl mb-2",children:"🔍"}),n.jsx("p",{className:"text-gray-600 text-sm",style:l?{color:"#e5e7eb"}:{},children:"Nenhum item encontrado com esses filtros."})]}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:x.map(N=>{var w;const y=C.includes(N.id),P=(((w=e==null?void 0:e.progress)==null?void 0:w.yuCoins)??0)>=N.cost;return n.jsxs("div",{className:`${g(N.rarity)} rounded-lg p-3 border-2 transition-all hover:scale-105 flex flex-col ${y?"border-green-500":"border-gray-200"}`,children:[n.jsxs("div",{className:"text-center mb-2 flex-1",children:[n.jsx("div",{className:"text-3xl mb-1",children:N.icon}),n.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-1",children:N.name}),n.jsx("p",{className:`text-xs font-medium ${u(N.rarity)} mb-1`,children:N.rarity.charAt(0).toUpperCase()+N.rarity.slice(1)}),n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:N.description}),n.jsxs("div",{className:"text-lg font-bold text-primary mb-2 flex items-center justify-center space-x-1",children:[n.jsx("span",{children:N.cost}),n.jsx("span",{className:"text-base",children:"💰"})]})]}),n.jsx("button",{onClick:()=>E(N),disabled:y||!P,className:`w-full py-2 px-3 rounded-lg text-sm font-medium transition mt-auto ${y?"text-white cursor-not-allowed":P?"text-white hover:opacity-90":"text-white cursor-not-allowed opacity-50"}`,style:{backgroundColor:y?"#10B981":P?"rgb(238, 145, 22)":"#9CA3AF"},children:y?"✅ Possuído":P?"Comprar":"YüCoins Insuficientes"})]},N.id)})})]})]})})},tt=[{id:1,module:"Introdução ao Dinheiro",title:"O que é o dinheiro?",type:"quiz",content:{question:"Qual é a função principal do dinheiro?",options:[{text:"Facilitar trocas e compras",correct:!0},{text:"Apenas guardar em casa",correct:!1}],rewards:{xp:50,yuCoins:10,savings:.5}}},{id:2,module:"Introdução ao Dinheiro",title:"História do dinheiro",type:"drag-drop",content:{text:"🐷 Poupí: Arraste na ordem correta da evolução do dinheiro!",items:[{text:"Escambo (troca de bens)",order:1},{text:"Moedas de metal",order:2},{text:"Notas de papel",order:3},{text:"Dinheiro digital",order:4}],rewards:{xp:50,yuCoins:10,savings:.5}}},{id:3,module:"Introdução ao Dinheiro",title:"Tipos de dinheiro",type:"classify",content:{text:"🐷 Poupí: Classifique cada tipo de dinheiro!",items:[{text:"Nota de R$10",category:"Físico",correct:!0},{text:"Cartão de débito",category:"Digital",correct:!0},{text:"Pix",category:"Digital",correct:!0},{text:"Moeda de R$1",category:"Físico",correct:!0}],rewards:{xp:50,yuCoins:10,savings:.5}}},{id:4,module:"Família e Finanças",title:"Receitas da família",type:"match",content:{text:"🐷 Poupí: Associe cada fonte de renda ao membro da família!",items:[{text:"Pai - Salário do trabalho",correct:!0},{text:"Mãe - Venda de produtos",correct:!0},{text:"Filho - Mesada",correct:!0},{text:"Avó - Aposentadoria",correct:!0}],rewards:{xp:60,yuCoins:12,savings:.8}}},{id:5,module:"Família e Finanças",title:"Despesas básicas",type:"classify",content:{text:"🐷 Poupí: Classifique como despesa essencial ou não essencial!",items:[{text:"Aluguel",category:"Essencial",correct:!0},{text:"Comida",category:"Essencial",correct:!0},{text:"Videogame",category:"Não Essencial",correct:!0},{text:"Conta de luz",category:"Essencial",correct:!0}],rewards:{xp:60,yuCoins:12,savings:.8}}},{id:6,module:"Família e Finanças",title:"Orçamento familiar",type:"simulation",content:{text:"🐷 Poupí: Organize um orçamento familiar de R$2000!",options:[{text:"R$800 moradia, R$600 alimentação, R$400 transporte, R$200 lazer",correct:!0,feedback:"Perfeito! Orçamento equilibrado!"},{text:"R$1800 lazer, R$200 outras despesas",correct:!1,feedback:"Priorize necessidades básicas primeiro!"},{text:"R$1000 moradia, R$500 alimentação, R$300 transporte, R$200 poupança",correct:!0,feedback:"Excelente! Incluiu poupança!"}],rewards:{xp:60,yuCoins:12,savings:.8}}},{id:7,module:"Necessidades vs Desejos",title:"Diferenciando necessidades",type:"classify",content:{text:"🐷 Poupí: Classifique como necessidade ou desejo!",items:[{text:"Comida",category:"Necessidade",correct:!0},{text:"Roupa",category:"Necessidade",correct:!0},{text:"Videogame novo",category:"Desejo",correct:!0},{text:"Remédio",category:"Necessidade",correct:!0}],rewards:{xp:70,yuCoins:15,savings:1}}},{id:8,module:"Necessidades vs Desejos",title:"Priorizando gastos",type:"choices",content:{text:"🐷 Poupí: Você tem R$50. O que deve comprar primeiro?",options:[{text:"Comida para a semana (R$30)",correct:!0,feedback:"Excelente! Priorizou necessidades básicas!"},{text:"Um brinquedo (R$50)",correct:!1,feedback:"Pense nas necessidades primeiro!"},{text:"Comida (R$30) + poupar R$20",correct:!0,feedback:"Perfeito! Equilibrou gastos e poupança!"}],rewards:{xp:70,yuCoins:15,savings:1}}},{id:9,module:"Necessidades vs Desejos",title:"Consumo consciente",type:"simulation",content:{text:"🐷 Poupí: Como fazer uma compra consciente?",options:[{text:"Pesquisar preços, comparar qualidade, pensar se realmente preciso",correct:!0,feedback:"Perfeito! Consumo consciente!"},{text:"Comprar o primeiro que vejo",correct:!1,feedback:"Sempre pesquise antes de comprar!"},{text:"Perguntar aos pais antes de comprar",correct:!0,feedback:"Boa ideia! Consulte sua família!"}],rewards:{xp:70,yuCoins:15,savings:1}}},{id:10,module:"Poupança e Metas",title:"O que é poupança?",type:"quiz",content:{question:"Para que serve a poupança?",options:[{text:"Guardar dinheiro para o futuro",correct:!0},{text:"Gastar tudo rapidamente",correct:!1}],rewards:{xp:80,yuCoins:18,savings:1.2}}},{id:11,module:"Poupança e Metas",title:"Criando metas financeiras",type:"input",content:{text:"🐷 Poupí: Crie uma meta financeira!",input:{placeholder:"Ex: Comprar um livro (R$30 em 3 meses)",value:30,description:"Quanto você quer economizar e em quanto tempo?"},rewards:{xp:80,yuCoins:18,savings:1.2}}},{id:12,module:"Poupança e Metas",title:"Planejamento de poupança",type:"simulation",content:{text:"🐷 Poupí: Você recebe R$20 de mesada. Como organizar?",options:[{text:"R$10 gastos, R$7 poupança, R$3 doação",correct:!0,feedback:"Excelente! Equilibrou tudo!"},{text:"R$20 gastos, R$0 poupança",correct:!1,feedback:"Tente poupar um pouco!"},{text:"R$15 gastos, R$5 poupança",correct:!0,feedback:"Bom! Começou a poupar!"}],rewards:{xp:80,yuCoins:18,savings:1.2}}}],_u={student:[{title:"Bem-vindo ao YuFin! 🎉",description:"Aqui você aprende sobre finanças brincando, ganha XP, sobe de nível e conquista recompensas!"},{title:"Trilha de Aprendizagem",description:"Complete lições para ganhar XP, moedas e avançar no seu caminho de aprendizado."},{title:"Poupança Educativa",description:"Ao aprender, você também acumula dinheiro virtual na sua poupança. Peça para seu responsável configurar as regras!"},{title:"Conquistas e Ranking",description:"Desafie-se, conquiste medalhas e veja seu nome no ranking dos melhores alunos!"},{title:"Pronto para começar?",description:'Clique em "Começar" e aproveite sua jornada!'}],parent:[{title:"Bem-vindo ao Painel do Responsável! 👨‍👩‍👧‍👦",description:"Acompanhe o progresso dos seus filhos, configure incentivos e veja relatórios detalhados."},{title:"Configuração de Poupança",description:"Defina quanto cada lição, streak ou conquista vale em dinheiro real para incentivar o aprendizado."},{title:"Relatórios e Recomendações",description:"Receba dicas e veja o desempenho de cada filho por matéria, progresso e engajamento."},{title:"Pronto para acompanhar?",description:'Clique em "Começar" para explorar o painel!'}],school:[{title:"Bem-vindo ao Painel da Escola! 🏫",description:"Visualize o desempenho de todos os alunos, turmas e matérias em tempo real."},{title:"Ranking e Engajamento",description:"Veja os alunos e turmas de destaque, taxas de engajamento e conquistas."},{title:"Relatórios Detalhados",description:"Exporte relatórios e use os dados para melhorar o ensino."},{title:"Pronto para liderar?",description:'Clique em "Começar" para usar o painel escolar!'}]},Bo=({profile:e,onFinish:t})=>{const s=_u[e]||_u.student,[r,o]=j.useState(0),a=()=>{r<s.length-1?o(r+1):t()},i=()=>{t()},l=c=>e==="student"&&r===0?n.jsxs("span",{children:["Bem-vindo ao ",n.jsx("span",{className:"font-cherry",children:"YuFin"}),"! 🎉"]}):c;return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 max-w-md w-full text-center animate-fadeIn",children:[n.jsx("h2",{className:"text-2xl font-bold text-primary mb-4",children:l(s[r].title)}),n.jsx("p",{className:"text-gray-700 mb-6",children:s[r].description}),n.jsxs("div",{className:"flex justify-between items-center mt-6",children:[n.jsx("button",{onClick:i,className:"text-gray-500 hover:text-primary text-sm px-4 py-2 rounded",children:"Pular"}),n.jsx("button",{onClick:a,className:"bg-primary text-white px-6 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:r===s.length-1?"Começar":"Avançar"})]}),n.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:s.map((c,d)=>n.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${d===r?"bg-primary":"bg-gray-300"}`},d))})]})})},Gj=({user:e})=>{const[t,s]=j.useState([]),[r,o]=j.useState(!0),[a,i]=j.useState(!1),[l,c]=j.useState({maxUses:1,expiresAt:"",metadata:{description:"",grade:"",studentName:""}});j.useEffect(()=>{d()},[]);const d=async()=>{try{o(!0);const C=await ue(`/registration-tokens?createdBy=${e.id}`);s(C)}catch(C){console.error("Erro ao carregar tokens:",C)}finally{o(!1)}},m=async()=>{try{const C={createdBy:e.id,type:"parent",maxUses:l.maxUses||null,expiresAt:l.expiresAt||null,metadata:l.metadata};await _e("/registration-tokens",C),i(!1),c({maxUses:1,expiresAt:"",metadata:{description:"",grade:"",studentName:""}}),d()}catch(C){console.error("Erro ao criar token:",C)}},u=async C=>{if(window.confirm("Tem certeza que deseja excluir este token?"))try{await oa(`/registration-tokens/${C}`),d()}catch(p){console.error("Erro ao excluir token:",p)}},g=C=>{navigator.clipboard.writeText(C),alert("Token copiado para a área de transferência!")},x=C=>new Date(C).toLocaleDateString("pt-BR"),E=C=>C.isActive?C.expiresAt&&new Date>new Date(C.expiresAt)?"text-orange-600":"text-green-600":"text-red-600",k=C=>C.isActive?C.expiresAt&&new Date>new Date(C.expiresAt)?"Expirado":C.maxUses&&C.usedCount>=C.maxUses?"Usado":"Ativo":"Inativo";return r?n.jsx("div",{className:"text-center py-8",children:"Carregando tokens..."}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Tokens para Filhos"}),n.jsx("button",{onClick:()=>i(!0),className:"bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Gerar Token para Filho"})]}),a&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border",children:[n.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Criar Token para Filho"}),n.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded-lg border border-green-200",children:[n.jsx("p",{className:"text-sm text-green-700",children:n.jsx("strong",{children:"💡 Como funciona:"})}),n.jsxs("ul",{className:"text-xs text-green-600 mt-1 space-y-1",children:[n.jsx("li",{children:"• Gere um token para seu filho se registrar"}),n.jsx("li",{children:"• Seu filho usará o token para criar a conta"}),n.jsx("li",{children:"• Ele terá acesso independente da escola"}),n.jsx("li",{children:"• Você pode acompanhar o progresso dele"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Filho"}),n.jsx("input",{type:"text",value:l.metadata.studentName,onChange:C=>c({...l,metadata:{...l.metadata,studentName:C.target.value}}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Nome do seu filho"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Série/Ano"}),n.jsx("input",{type:"text",value:l.metadata.grade,onChange:C=>c({...l,metadata:{...l.metadata,grade:C.target.value}}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Ex: 6º Ano"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Máximo de Usos"}),n.jsx("input",{type:"number",value:l.maxUses,onChange:C=>c({...l,maxUses:C.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Deixe vazio para ilimitado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Expiração"}),n.jsx("input",{type:"datetime-local",value:l.expiresAt,onChange:C=>c({...l,expiresAt:C.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição (Opcional)"}),n.jsx("textarea",{value:l.metadata.description,onChange:C=>c({...l,metadata:{...l.metadata,description:C.target.value}}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",rows:"3",placeholder:"Ex: Token para João estudar educação financeira"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:m,className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition",children:"Criar Token"}),n.jsx("button",{onClick:()=>i(!1),className:"bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 transition",children:"Cancelar"})]})]}),n.jsx("div",{className:"space-y-4",children:t.length===0?n.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[n.jsx("p",{className:"text-gray-600",children:"Nenhum token criado ainda."}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Crie um token para seu filho começar a estudar!"})]}):t.map(C=>n.jsxs("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E(C)}`,children:k(C)}),n.jsx("span",{className:"text-sm text-gray-500",children:"👨‍👩‍👧‍👦 Responsável (B2C)"})]}),n.jsx("button",{onClick:()=>u(C.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Excluir"})]}),n.jsx("div",{className:"mb-3",children:n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono",children:C.token}),n.jsx("button",{onClick:()=>g(C.token),className:"text-primary hover:text-primary-dark text-sm",children:"📋 Copiar"})]})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Usos:"})," ",C.usedCount,C.maxUses&&`/${C.maxUses}`]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Criado:"})," ",x(C.createdAt)]}),C.expiresAt&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Expira:"})," ",x(C.expiresAt)]}),C.metadata.studentName&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Para:"})," ",C.metadata.studentName]})]}),C.usedBy&&C.usedBy.length>0&&n.jsxs("div",{className:"mt-3 pt-3 border-t",children:[n.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Usado por:"}),n.jsx("div",{className:"space-y-1",children:C.usedBy.map((p,v)=>n.jsxs("div",{className:"text-sm text-gray-600",children:[p.studentName," - ",x(p.usedAt)]},v))})]})]},C.id))})]})},zu="onboarding_parent_seen",Bu=({user:e,setActiveScreen:t,setUser:s})=>{var V,$,D,Q,G,U,W;const[r,o]=j.useState(null),[a,i]=j.useState("7d"),[l,c]=j.useState(!1),[d,m]=j.useState(!1),[u,g]=j.useState(!1),[x,E]=j.useState(""),[k,C]=j.useState([]),[p,v]=j.useState(!1),[f,S]=j.useState([]),[T,A]=j.useState(!0),[M,h]=j.useState("overview");j.useEffect(()=>{localStorage.getItem(zu)||m(!0)},[]),j.useEffect(()=>{u&&(v(!0),ue("/users").then(O=>{C(O.filter(Z=>Z.role==="student")),v(!1)}).catch(()=>v(!1)))},[u]),j.useEffect(()=>{ue("/users").then(O=>{S(O),A(!1)}).catch(()=>A(!1))},[]);const b=k.filter(O=>O.id&&!(e.linkedStudents||[]).includes(O.id.toString())&&!O.parentId&&O.playerId&&O.playerId.toLowerCase().includes(x.toLowerCase()));console.log("Debug - Alunos disponíveis para vínculo:",{searchTerm:x,allStudentsCount:k.length,availableStudentsCount:b.length,allStudents:k.map(O=>({id:O.id,name:O.name,email:O.email,playerId:O.playerId,schoolId:O.schoolId})),availableStudents:b.map(O=>({id:O.id,name:O.name,email:O.email,playerId:O.playerId,schoolId:O.schoolId}))});const N=b[0]||null,y=()=>{m(!1),localStorage.setItem(zu,"1")},P=e.linkedStudents?f.filter(O=>O.id&&e.linkedStudents.includes(O.id.toString())&&O.role==="student"):[];if(console.log("Debug - Alunos vinculados:",{userLinkedStudents:e.linkedStudents,allUsersCount:f.length,linkedStudentsCount:P.length,linkedStudents:P.map(O=>({id:O.id,name:O.name}))}),T)return n.jsx("div",{className:"min-h-screen flex items-center justify-center text-xl",children:"Carregando filhos vinculados..."});const L=(()=>{if(P.length===0)return null;const O=P.reduce((Y,ee)=>{var ne;return Y+(((ne=ee.progress)==null?void 0:ne.xp)||0)},0),Z=P.reduce((Y,ee)=>{var ne,z;return Y+(((z=(ne=ee.progress)==null?void 0:ne.completedLessons)==null?void 0:z.length)||0)},0),se=P.reduce((Y,ee)=>{var ne;return Y+(((ne=ee.savings)==null?void 0:ne.balance)||0)},0),B=P.reduce((Y,ee)=>{var ne;return Y+(((ne=ee.progress)==null?void 0:ne.level)||1)},0)/P.length,H=P.reduce((Y,ee)=>{var ne;return Y+(((ne=ee.progress)==null?void 0:ne.streak)||0)},0);return{totalXp:O,totalLessons:Z,totalSavings:se,averageLevel:Math.round(B*10)/10,totalStreak:H,activeStudents:P.length}})(),F=O=>{var B;const Z=((B=O.progress)==null?void 0:B.completedLessons)||[],se={};return Z.forEach(H=>{const Y=tt.find(ee=>ee.id===H);Y&&Y.subject&&(se[Y.subject]||(se[Y.subject]={completed:0,total:0}),se[Y.subject].completed++)}),tt.forEach(H=>{H.subject&&(se[H.subject]||(se[H.subject]={completed:0,total:0}),se[H.subject].total++)}),se},q=O=>{var ee,ne,z,J;const Z=((ee=O.progress)==null?void 0:ee.streak)||0,se=((ne=O.progress)==null?void 0:ne.level)||1,B=((J=(z=O.progress)==null?void 0:z.completedLessons)==null?void 0:J.length)||0;let H="estável",Y="text-gray-600";return Z>=7?(H="crescendo",Y="text-green-600"):Z>=3?(H="melhorando",Y="text-blue-600"):Z===0&&(H="precisa atenção",Y="text-red-600"),{trend:H,trendColor:Y,streak:Z,level:se,completedLessons:B}},_=O=>{o(O),c(!0)},I=()=>{o(null),c(!1)},R=async()=>{if(N){console.log("Debug - Vincular filho:",{userId:e.id,user_id:e._id,studentId:N.id,student_id:N._id});try{if(N.schoolId)await _e(`/parents/${e.id}/request-link`,{studentId:N.id||N._id,message:"Solicitação de vínculo como responsável"}),g(!1),E(""),K.success("Solicitação de vínculo enviada! Aguarde a aprovação do aluno.");else{const O=await ls(`/users/${e.id||e._id}/vincular-filho`,{studentId:N.id||N._id});s(O),g(!1),E("");try{const Z=await ue("/users");S(Z)}catch(Z){console.error("Erro ao recarregar usuários:",Z)}K.success("Filho vinculado com sucesso!")}}catch(O){console.error("Erro ao processar vínculo:",O),K.error("Erro ao processar vínculo: "+O.message)}}};if(l&&r){const O=F(r),Z=q(r);return n.jsxs("div",{className:"min-h-screen bg-interface p-4 pb-20",children:[d&&n.jsx(Bo,{profile:"parent",onFinish:y}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("button",{onClick:I,className:"text-primary hover:text-primary-dark mb-2 flex items-center",children:"← Voltar ao Resumo"}),n.jsxs("h1",{className:"text-3xl font-yufin text-primary",children:["📊 Progresso de ",r.name]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Tendência"}),n.jsx("p",{className:`text-lg font-semibold ${Z.trendColor}`,children:Z.trend})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #3b82f6, #2563eb)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Nível Atual"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:((V=r.progress)==null?void 0:V.level)||1})]}),n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #10b981, #059669)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"XP Total"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:(($=r.progress)==null?void 0:$.xp)||0})]}),n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #8b5cf6, #7c3aed)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Streak"}),n.jsxs("p",{className:"text-2xl font-bold text-white",children:[Z.streak," 🔥"]})]}),n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #f97316, #ea580c)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Poupança"}),n.jsxs("p",{className:"text-2xl font-bold text-white",children:["R$ ",(((D=r.savings)==null?void 0:D.balance)||0).toFixed(2)]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"📚 Progresso por Matéria"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(O).map(([se,B])=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:se}),n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[n.jsxs("span",{children:[B.completed," de ",B.total," lições"]}),n.jsxs("span",{children:[Math.round(B.completed/B.total*100),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(B.completed/B.total*100,100)}%`}})})]},se))})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"✅ Lições Concluídas"}),n.jsxs("div",{className:"space-y-3",children:[(G=(Q=r.progress)==null?void 0:Q.completedLessons)==null?void 0:G.slice(-5).reverse().map(se=>{const B=tt.find(H=>H.id===se);return B?n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:B.title}),n.jsxs("p",{className:"text-sm text-gray-600",children:[B.subject," • ",B.type]})]}),n.jsx("span",{className:"text-green-600 font-semibold",children:"✅ Concluída"})]},se):null}),(!((U=r.progress)!=null&&U.completedLessons)||r.progress.completedLessons.length===0)&&n.jsx("p",{className:"text-gray-600 text-center py-4",children:"Nenhuma lição concluída ainda."})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"💡 Recomendações"}),n.jsxs("div",{className:"space-y-3",children:[Z.streak===0&&n.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:n.jsxs("p",{className:"text-yellow-800",children:[n.jsx("strong",{children:"Incentive a consistência:"})," ",r.name," não tem feito lições regularmente. Que tal estabelecer uma rotina diária?"]})}),Z.streak>=7&&n.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:n.jsxs("p",{className:"text-green-800",children:[n.jsx("strong",{children:"Excelente progresso!"})," ",r.name," está muito consistente. Continue incentivando essa dedicação!"]})}),((W=r.savings)==null?void 0:W.balance)>0&&n.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:n.jsxs("p",{className:"text-blue-800",children:[n.jsx("strong",{children:"Poupança em crescimento:"})," ",r.name," já tem R$ ",r.savings.balance.toFixed(2)," na poupança educativa. Que tal conversar sobre objetivos financeiros?"]})})]})]})]})]})}return n.jsxs("div",{className:"min-h-screen bg-interface p-4 pb-20",children:[d&&n.jsx(Bo,{profile:"parent",onFinish:y}),n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-4",children:"👨‍👩‍👧‍👦 Dashboard da Família"}),n.jsx("p",{className:"text-gray-600",children:"Acompanhe o progresso educacional e financeiro dos seus filhos"}),n.jsxs("div",{className:"flex space-x-2 mt-6",children:[n.jsx("button",{onClick:()=>h("overview"),className:`px-6 py-3 rounded-lg font-semibold transition-all duration-200 shadow-sm ${M==="overview"?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-md transform scale-105":"bg-white text-gray-700 hover:bg-gray-50 border-2 border-gray-200 hover:border-orange-300"}`,children:"📊 Visão Geral"}),n.jsx("button",{onClick:()=>h("tokens"),className:`px-6 py-3 rounded-lg font-semibold transition-all duration-200 shadow-sm ${M==="tokens"?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-md transform scale-105":"bg-white text-gray-700 hover:bg-gray-50 border-2 border-gray-200 hover:border-orange-300"}`,children:"🔑 Tokens para Filhos"})]})]}),M==="overview"&&n.jsxs(n.Fragment,{children:[L&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"📊 Resumo da Família"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:L.activeStudents}),n.jsx("p",{className:"text-gray-600",children:"Filhos Ativos"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:L.totalLessons}),n.jsx("p",{className:"text-gray-600",children:"Lições Concluídas"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:L.totalXp}),n.jsx("p",{className:"text-gray-600",children:"XP Total"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:L.averageLevel}),n.jsx("p",{className:"text-gray-600",children:"Nível Médio"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:["R$ ",L.totalSavings.toFixed(2)]}),n.jsx("p",{className:"text-gray-600",children:"Poupança Total"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"👶 Seus Filhos"}),n.jsx("button",{onClick:()=>g(!0),className:"bg-primary text-white px-6 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Vincular Filho"})]}),P.length===0?n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-600 mb-4",children:"Nenhum filho vinculado ainda."})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(O=>{var Y,ee,ne,z,J;const Z=q(O),se=F(O),B=Object.keys(se).length,H=Object.values(se).filter(le=>le.completed>0).length;return n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:O.name}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${Z.trendColor}`,children:Z.trend}),n.jsx("button",{onClick:async()=>{try{const le=await ls(`/users/${e.id}/desvincular-filho`,{studentId:O.id});s(le)}catch(le){alert("Erro ao remover filho: "+le.message)}},className:"ml-2 text-xs text-red-600 underline hover:text-red-800",children:"Remover"})]}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Nível:"}),n.jsx("span",{className:"font-semibold",children:((Y=O.progress)==null?void 0:Y.level)||1})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"XP:"}),n.jsx("span",{className:"font-semibold",children:((ee=O.progress)==null?void 0:ee.xp)||0})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Streak:"}),n.jsxs("span",{className:"font-semibold",children:["🔥 ",Z.streak]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Lições:"}),n.jsx("span",{className:"font-semibold",children:((z=(ne=O.progress)==null?void 0:ne.completedLessons)==null?void 0:z.length)||0})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Poupança:"}),n.jsxs("span",{className:"font-semibold",children:["R$ ",(((J=O.savings)==null?void 0:J.balance)||0).toFixed(2)]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[n.jsx("span",{children:"Progresso Geral"}),n.jsxs("span",{children:[H,"/",B," matérias"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${B>0?H/B*100:0}%`}})})]}),n.jsx("button",{onClick:()=>_(O),className:"w-full bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Ver Detalhes"})]},O.id)})}),u&&n.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Vincular Filho"}),n.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"🔒 Segurança:"})," Esta funcionalidade permite vincular alunos desvinculados via ID de jogador. Use o ID de jogador fornecido pelo aluno (ex: YUF123)."]})}),n.jsx("input",{type:"text",className:"w-full p-3 border border-gray-300 rounded-md mb-4",placeholder:"Digite o ID de jogador (ex: YUF123)...",value:x,onChange:O=>E(O.target.value)}),p&&n.jsx("p",{className:"text-gray-600 mb-4",children:"Carregando alunos..."}),!p&&x&&N&&n.jsx("div",{className:"mb-4 p-3 bg-gray-100 rounded text-gray-800",children:n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"font-semibold",children:"Aluno encontrado:"}),n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"font-bold text-lg",children:N.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:["🎮 ID: ",N.playerId]})]})]})}),!p&&x&&b.length===0&&n.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:n.jsx("p",{className:"text-sm text-yellow-800",children:"Nenhum aluno encontrado com esse ID de jogador. Verifique se o ID está correto e se o aluno está desvinculado."})}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancelar"}),n.jsx("button",{onClick:R,className:"px-4 py-2 rounded-lg bg-primary text-white font-semibold hover:bg-primary-dark",disabled:!N,children:"Vincular"})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"💰 Configurações Financeiras"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Gerencie as regras de poupança educativa para seus filhos"}),n.jsx("button",{onClick:()=>t("savings-config"),className:"w-full bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Configurar Poupança"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"📊 Relatórios Detalhados"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Acesse relatórios completos de progresso e engajamento"}),n.jsx("button",{onClick:()=>t("reports"),className:"w-full bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Ver Relatórios"})]})]})]}),M==="tokens"&&n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:n.jsx(Gj,{user:e})})]})]})},Hj=({user:e,setUser:t,setActiveScreen:s})=>{var k,C,p,v,f,S,T,A;console.log("SavingsConfig - Carregando configurações:",{userSavingsConfig:e.savingsConfig,userSavingsConfigString:JSON.stringify(e.savingsConfig)});const[r,o]=j.useState({perLesson:((k=e.savingsConfig)==null?void 0:k.perLesson)||.5,perStreak:((C=e.savingsConfig)==null?void 0:C.perStreak)||2,perPerfectLesson:((p=e.savingsConfig)==null?void 0:p.perPerfectLesson)||1,perLevelUp:((v=e.savingsConfig)==null?void 0:v.perLevelUp)||5,perAchievement:((f=e.savingsConfig)==null?void 0:f.perAchievement)||3,autoTransfer:((S=e.savingsConfig)==null?void 0:S.autoTransfer)||!1,monthlyLimit:((T=e.savingsConfig)==null?void 0:T.monthlyLimit)||100,weeklyGoal:((A=e.savingsConfig)==null?void 0:A.weeklyGoal)||20}),[a,i]=j.useState([]),[l,c]=j.useState(null),[d,m]=j.useState(!1);j.useEffect(()=>{ue("/users").then(M=>{const h=e.linkedStudents?M.filter(b=>e.linkedStudents.includes(b.id)&&b.role==="student"):[];i(h)})},[e.linkedStudents]);const u=(M,h)=>{o(b=>({...b,[M]:h}))},g=async()=>{try{console.log("Frontend - Salvando configurações:",{userId:e.id,config:r,configString:JSON.stringify(r,null,2)});const M=await ls(`/users/${e.id}`,{savingsConfig:r});console.log("Frontend - Configurações salvas:",{updatedUser:M,savingsConfig:M.savingsConfig,savingsConfigString:JSON.stringify(M.savingsConfig)}),t(M),K.success("Configurações de poupança salvas com sucesso!")}catch(M){console.error("Frontend - Erro ao salvar:",M),K.error("Erro ao salvar configurações: "+M.message)}},x=M=>{if(!M)return 0;const h=5,b=4,N=.3,y=2,P=1,w=h*b,L=w*N,q=w*r.perLesson+7*r.perStreak+L*r.perPerfectLesson+y*r.perLevelUp+P*r.perAchievement;return Math.min(q,r.monthlyLimit)},E=M=>{var w,L,F,q,_,I,R;const h=((w=M.savings)==null?void 0:w.balance)||0,b=((F=(L=M.progress)==null?void 0:L.completedLessons)==null?void 0:F.length)||0,N=((q=M.progress)==null?void 0:q.streak)||0,y=((_=M.progress)==null?void 0:_.level)||1,P=((R=(I=M.progress)==null?void 0:I.perfectLessons)==null?void 0:R.length)||0;return{currentSavings:h,completedLessons:b,streak:N,level:y,perfectLessons:P,monthlyProjection:x(M)}};return n.jsx("div",{className:"min-h-screen bg-interface p-4 pb-20",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("div",{children:[n.jsx("button",{onClick:()=>s("parent-dashboard"),className:"text-primary hover:text-primary-dark mb-2 flex items-center",children:"← Voltar ao Dashboard"}),n.jsx("h1",{className:"text-3xl font-yufin text-primary",children:"💰 Configurar Poupança Educativa"})]})}),n.jsx("p",{className:"text-gray-600",children:"Configure as regras de poupança para incentivar o aprendizado dos seus filhos"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"🎯 Recompensas por Atividade"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Por Lição Concluída (R$)"}),n.jsx("input",{type:"number",step:"0.1",min:"0",value:r.perLesson,onChange:M=>u("perLesson",parseFloat(M.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"0.50"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Valor depositado automaticamente quando seu filho completa uma lição"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Por Streak Diário (R$)"}),n.jsx("input",{type:"number",step:"0.1",min:"0",value:r.perStreak,onChange:M=>u("perStreak",parseFloat(M.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"2.00"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Bônus por manter consistência diária"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Por Lição Perfeita (R$)"}),n.jsx("input",{type:"number",step:"0.1",min:"0",value:r.perPerfectLesson,onChange:M=>u("perPerfectLesson",parseFloat(M.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"1.00"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Bônus extra por pontuação perfeita (100%)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Por Subida de Nível (R$)"}),n.jsx("input",{type:"number",step:"0.1",min:"0",value:r.perLevelUp,onChange:M=>u("perLevelUp",parseFloat(M.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"5.00"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Recompensa especial por evolução no aprendizado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Por Conquista (R$)"}),n.jsx("input",{type:"number",step:"0.1",min:"0",value:r.perAchievement,onChange:M=>u("perAchievement",parseFloat(M.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"3.00"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Bônus por desbloquear conquistas especiais"})]})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:n.jsx("button",{onClick:g,className:"w-full bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-dark transition",children:"💾 Salvar Configurações"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"👶 Selecione um Filho"}),a.length===0?n.jsx("p",{className:"text-gray-600 text-center py-4",children:"Nenhum filho vinculado ainda."}):n.jsx("div",{className:"space-y-2",children:a.map(M=>{var h,b;return n.jsx("button",{onClick:()=>c(M),className:`w-full p-3 rounded-lg border-2 transition ${(l==null?void 0:l.id)===M.id?"border-primary bg-primary text-white":"border-gray-300 hover:border-primary"}`,children:n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-semibold",children:M.name}),n.jsxs("div",{className:"text-sm opacity-80",children:["Nível ",((h=M.progress)==null?void 0:h.level)||1," • R$ ",(((b=M.savings)==null?void 0:b.balance)||0).toFixed(2)]})]})},M.id)})})]}),l&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:["📊 Estatísticas de ",l.name]}),(()=>{const M=E(l);return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["R$ ",M.currentSavings.toFixed(2)]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Poupança Atual"})]}),n.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:M.completedLessons}),n.jsx("div",{className:"text-sm text-gray-600",children:"Lições Concluídas"})]}),n.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[M.streak," 🔥"]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Streak Atual"})]}),n.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-orange-600",children:M.perfectLessons}),n.jsx("div",{className:"text-sm text-gray-600",children:"Lições Perfeitas"})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 text-white p-4 rounded-lg",children:[n.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",M.monthlyProjection.toFixed(2)]}),n.jsx("div",{className:"text-sm opacity-90",children:"Projeção Mensal com Configuração Atual"})]})]})})()]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"💡 Dicas e Recomendações"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3",children:n.jsxs("p",{className:"text-yellow-800 text-sm",children:[n.jsx("strong",{children:"Comece pequeno:"})," R$ 0,50 por lição é um bom ponto de partida"]})}),n.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3",children:n.jsxs("p",{className:"text-blue-800 text-sm",children:[n.jsx("strong",{children:"Incentive consistência:"})," Bônus por streak motiva hábitos diários"]})}),n.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-3",children:n.jsxs("p",{className:"text-green-800 text-sm",children:[n.jsx("strong",{children:"Recompense qualidade:"})," Bônus por lições perfeitas incentiva esforço"]})}),n.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3",children:n.jsxs("p",{className:"text-purple-800 text-sm",children:[n.jsx("strong",{children:"Defina limites:"})," Evite gastos excessivos com limite mensal"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"⚙️ Configurações Avançadas"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Limite Mensal (R$)"}),n.jsx("input",{type:"number",step:"1",min:"0",value:r.monthlyLimit,onChange:M=>u("monthlyLimit",parseFloat(M.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"100"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Limite máximo de depósitos por mês"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Meta Semanal (R$)"}),n.jsx("input",{type:"number",step:"1",min:"0",value:r.weeklyGoal,onChange:M=>u("weeklyGoal",parseFloat(M.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"20"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Meta de poupança semanal para incentivar consistência"})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",id:"autoTransfer",checked:r.autoTransfer,onChange:M=>u("autoTransfer",M.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),n.jsx("label",{htmlFor:"autoTransfer",className:"font-semibold text-gray-700",children:"Transferência Automática"})]}),n.jsx("p",{className:"text-sm text-gray-600 ml-7",children:"Transferir automaticamente para conta bancária quando atingir meta"})]})]})]})]})]})})},Wj=({user:e})=>n.jsxs("div",{className:"min-h-screen bg-interface flex flex-col items-center p-4 pb-20",children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-8",children:"Conquistas 🐷"}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Suas Conquistas"}),n.jsx("p",{className:"text-gray-600",children:"Nenhuma conquista desbloqueada ainda. Continue aprendendo!"})]})]}),Xj=({user:e})=>n.jsxs("div",{className:"min-h-screen bg-interface flex flex-col items-center p-4 pb-20",children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-8",children:"Ranking 🐷"}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Seu Ranking"}),n.jsx("p",{className:"text-gray-600",children:"Você está na posição #1 da sua turma!"})]})]}),Qj=({user:e})=>n.jsxs("div",{className:"min-h-screen bg-interface flex flex-col items-center p-4 pb-20",children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-8",children:"Notícias 🐷"}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Últimas Novidades"}),n.jsx("p",{className:"text-gray-600",children:"Nenhuma notícia disponível no momento."})]})]}),Yj=({user:e})=>{const[t,s]=j.useState([]),[r,o]=j.useState(!0),[a,i]=j.useState(!1),[l,c]=j.useState({type:"school",maxUses:1,expiresAt:"",metadata:{description:"",grade:"",classId:""}});j.useEffect(()=>{d()},[]);const d=async()=>{try{o(!0);const C=await ue(`/registration-tokens?createdBy=${e.id}`);s(C)}catch(C){console.error("Erro ao carregar tokens:",C)}finally{o(!1)}},m=async()=>{try{const C={createdBy:e.id,type:l.type,maxUses:l.maxUses||null,expiresAt:l.expiresAt||null,metadata:l.metadata};await _e("/registration-tokens",C),i(!1),c({type:"school",maxUses:1,expiresAt:"",metadata:{description:"",grade:"",classId:""}}),d()}catch(C){console.error("Erro ao criar token:",C)}},u=async C=>{if(window.confirm("Tem certeza que deseja excluir este token?"))try{await oa(`/registration-tokens/${C}`),d()}catch(p){console.error("Erro ao excluir token:",p)}},g=C=>{navigator.clipboard.writeText(C),alert("Token copiado para a área de transferência!")},x=C=>new Date(C).toLocaleDateString("pt-BR"),E=C=>C.isActive?C.expiresAt&&new Date>new Date(C.expiresAt)?"text-orange-600":"text-green-600":"text-red-600",k=C=>C.isActive?C.expiresAt&&new Date>new Date(C.expiresAt)?"Expirado":C.maxUses&&C.usedCount>=C.maxUses?"Usado":"Ativo":"Inativo";return r?n.jsx("div",{className:"text-center py-8",children:"Carregando tokens..."}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Tokens de Registro"}),n.jsx("button",{onClick:()=>i(!0),className:"bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Gerar Novo Token"})]}),a&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border",children:[n.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Criar Novo Token"}),n.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("p",{className:"text-sm text-blue-700",children:n.jsx("strong",{children:"🏫 Tokens Escolares (B2B):"})}),n.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Gere tokens para que seus alunos possam se registrar na plataforma."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),n.jsx("select",{value:l.type,disabled:!0,className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-gray-100",children:n.jsx("option",{value:"school",children:"🏫 Escola (B2B)"})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Máximo de Usos"}),n.jsx("input",{type:"number",value:l.maxUses,onChange:C=>c({...l,maxUses:C.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Deixe vazio para ilimitado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Expiração"}),n.jsx("input",{type:"datetime-local",value:l.expiresAt,onChange:C=>c({...l,expiresAt:C.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Série Sugerida"}),n.jsx("input",{type:"text",value:l.metadata.grade,onChange:C=>c({...l,metadata:{...l.metadata,grade:C.target.value}}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Ex: 6º Ano"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),n.jsx("textarea",{value:l.metadata.description,onChange:C=>c({...l,metadata:{...l.metadata,description:C.target.value}}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",rows:"3",placeholder:"Descrição do token (opcional)"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:m,className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition",children:"Criar Token"}),n.jsx("button",{onClick:()=>i(!1),className:"bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 transition",children:"Cancelar"})]})]}),n.jsx("div",{className:"space-y-4",children:t.length===0?n.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:n.jsx("p",{className:"text-gray-600",children:"Nenhum token criado ainda."})}):t.map(C=>n.jsxs("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E(C)}`,children:k(C)}),n.jsx("span",{className:"text-sm text-gray-500",children:C.type==="school"?"🏫 Escola":"👨‍👩‍👧‍👦 Responsável"})]}),n.jsx("button",{onClick:()=>u(C.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Excluir"})]}),n.jsx("div",{className:"mb-3",children:n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono",children:C.token}),n.jsx("button",{onClick:()=>g(C.token),className:"text-primary hover:text-primary-dark text-sm",children:"📋 Copiar"})]})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Usos:"})," ",C.usedCount,C.maxUses&&`/${C.maxUses}`]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Criado:"})," ",x(C.createdAt)]}),C.expiresAt&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Expira:"})," ",x(C.expiresAt)]}),C.metadata.description&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Descrição:"})," ",C.metadata.description]})]}),C.usedBy&&C.usedBy.length>0&&n.jsxs("div",{className:"mt-3 pt-3 border-t",children:[n.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Usado por:"}),n.jsx("div",{className:"space-y-1",children:C.usedBy.map((p,v)=>n.jsxs("div",{className:"text-sm text-gray-600",children:[p.studentName," - ",x(p.usedAt)]},v))})]})]},C.id))})]})},Uu="onboarding_school_seen",qu=({user:e,setActiveScreen:t})=>{var D,Q;const[s,r]=j.useState(null),[o,a]=j.useState("30d"),[i,l]=j.useState(!1),[c,d]=j.useState(!1),[m,u]=j.useState([]),[g,x]=j.useState(!0),[E,k]=j.useState([]),[C,p]=j.useState(!0),[v,f]=j.useState([]),[S,T]=j.useState(!0),[A,M]=j.useState(null),[h,b]=j.useState(!1),[N,y]=j.useState("overview");j.useEffect(()=>{localStorage.getItem(Uu)||d(!0)},[]),j.useEffect(()=>{ue("/users").then(G=>{u(G.filter(U=>U.role==="student")),x(!1)}).catch(()=>x(!1))},[]),j.useEffect(()=>{ue("/classes").then(G=>{k(G),p(!1)}).catch(()=>p(!1))},[]),j.useEffect(()=>{P()},[m]);const P=async()=>{var G,U;try{T(!0);const W=[];for(const O of m)if((G=O.gradeProgression)!=null&&G.nextGradeRequested&&!((U=O.gradeProgression)!=null&&U.nextGradeAuthorized)){const Z=await ue(`/users/${O.id}/grade-progression-status`);Z.progression.requested&&W.push({student:O,status:Z,requestDate:O.gradeProgression.nextGradeRequestDate})}f(W)}catch(W){console.error("Erro ao carregar solicitações:",W)}finally{T(!1)}},w=async(G,U="")=>{var W;try{const O=await _e(`/users/${A.student.id}/authorize-grade-progression`,{authorized:G,notes:U});if(K.success(O.message),b(!1),M(null),!G&&O.requestReset){console.log(`🔄 Progressão negada para ${O.studentName} - recarregando dados...`),await P();const Z=await ue("/users");u(Z.filter(B=>B.role==="student"));const se=await ue("/classes");k(se)}else if(O.studentUnlinked){console.log(`🔄 Aluno ${O.studentName} foi desvinculado da turma ${((W=O.previousClass)==null?void 0:W.name)||"anterior"}`);const Z=await ue("/users");u(Z.filter(B=>B.role==="student"));const se=await ue("/classes");k(se),await P()}else setTimeout(async()=>{await P();const Z=await ue("/users");u(Z.filter(B=>B.role==="student"));const se=await ue("/classes");k(se)},1e3)}catch(O){console.error("Erro ao autorizar progressão:",O),K.error("Erro ao processar autorização")}},L=()=>{d(!1),localStorage.setItem(Uu,"1")},q=(()=>{const G=new Set;E.forEach(Y=>{Array.isArray(Y.students)&&Y.students.forEach(ee=>{G.add(ee)})});const U=m.filter(Y=>G.has(Y.id)),W=U.length,O=U.reduce((Y,ee)=>{var ne;return Y+(((ne=ee.progress)==null?void 0:ne.xp)||0)},0),Z=U.reduce((Y,ee)=>{var ne,z;return Y+(((z=(ne=ee.progress)==null?void 0:ne.completedLessons)==null?void 0:z.length)||0)},0),se=W>0?U.reduce((Y,ee)=>{var ne;return Y+(((ne=ee.progress)==null?void 0:ne.level)||1)},0)/W:0,B=U.filter(Y=>{var ee;return(((ee=Y.progress)==null?void 0:ee.streak)||0)>0}).length,H=U.reduce((Y,ee)=>{var ne;return Y+(((ne=ee.savings)==null?void 0:ne.balance)||0)},0);return{totalStudents:W,totalXp:O,totalLessons:Z,averageLevel:Math.round(se*10)/10,activeStudents:B,totalSavings:H,engagementRate:W>0?Math.round(B/W*100):0}})();if(g)return n.jsx("div",{className:"min-h-screen flex items-center justify-center text-xl",children:"Carregando alunos..."});if(C)return n.jsx("div",{className:"min-h-screen flex items-center justify-center text-xl",children:"Carregando turmas..."});const _=G=>{const U=m.filter(B=>Array.isArray(G.students)&&G.students.includes(B.id.toString())),W=U.reduce((B,H)=>{var Y;return B+(((Y=H.progress)==null?void 0:Y.xp)||0)},0),O=U.reduce((B,H)=>{var Y,ee;return B+(((ee=(Y=H.progress)==null?void 0:Y.completedLessons)==null?void 0:ee.length)||0)},0),Z=U.length>0?U.reduce((B,H)=>{var Y;return B+(((Y=H.progress)==null?void 0:Y.level)||1)},0)/U.length:0,se=U.filter(B=>{var H;return(((H=B.progress)==null?void 0:H.streak)||0)>0}).length;return{totalStudents:U.length,totalXp:W,totalLessons:O,averageLevel:Math.round(Z*10)/10,activeStudents:se,engagementRate:U.length>0?Math.round(se/U.length*100):0,classStudents:U}},I=G=>{const U={};return G.forEach(W=>{var Z;(((Z=W.progress)==null?void 0:Z.completedLessons)||[]).forEach(se=>{const B=tt.find(H=>H.id===se);B&&B.subject&&(U[B.subject]||(U[B.subject]={completed:0,total:0,students:new Set}),U[B.subject].completed++,U[B.subject].students.add(W.id))})}),tt.forEach(W=>{W.subject&&(U[W.subject]||(U[W.subject]={completed:0,total:0,students:new Set}),U[W.subject].total+=G.length)}),U},R=()=>{const G=new Set;return E.forEach(W=>{Array.isArray(W.students)&&W.students.forEach(O=>{G.add(O)})}),m.filter(W=>G.has(W.id)).map(W=>{var O,Z,se,B,H;return{id:W.id,name:W.name,xp:((O=W.progress)==null?void 0:O.xp)||0,level:((Z=W.progress)==null?void 0:Z.level)||1,streak:((se=W.progress)==null?void 0:se.streak)||0,lessonsCompleted:((H=(B=W.progress)==null?void 0:B.completedLessons)==null?void 0:H.length)||0}}).sort((W,O)=>O.xp-W.xp).slice(0,10)},V=G=>{r(G),l(!0)},$=()=>{r(null),l(!1)};if(i&&s){const G=_(s),U=G.classStudents,W=I(U);return n.jsxs("div",{className:"min-h-screen bg-interface p-4 pb-20",children:[c&&n.jsx(Bo,{profile:"school",onFinish:L}),n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("button",{onClick:$,className:"text-primary hover:text-primary-dark mb-2 flex items-center",children:"← Voltar ao Resumo"}),n.jsxs("h1",{className:"text-3xl font-yufin text-primary",children:["📊 ",s.name]}),n.jsxs("p",{className:"text-gray-600",children:["Professor: ",s.teacher]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Taxa de Engajamento"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[G.engagementRate,"%"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #3b82f6, #2563eb)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Alunos"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:G.totalStudents})]}),n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #10b981, #059669)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"XP Total"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:G.totalXp})]}),n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #8b5cf6, #7c3aed)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Nível Médio"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:G.averageLevel})]}),n.jsxs("div",{className:"text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #f97316, #ea580c)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Lições"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:G.totalLessons})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"📚 Progresso por Matéria"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(W).map(([O,Z])=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:O}),n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[n.jsxs("span",{children:[Z.completed," lições concluídas"]}),n.jsxs("span",{children:[Z.students.size," alunos ativos"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(Z.completed/Z.total*100,100)}%`}})})]},O))})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"👥 Alunos da Turma"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:U.map((O,Z)=>{var se,B,H,Y,ee;return n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:O.name}),n.jsxs("span",{className:"text-sm text-gray-600",children:["#",Z+1]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Nível:"}),n.jsx("span",{className:"font-semibold ml-1",children:((se=O.progress)==null?void 0:se.level)||1})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"XP:"}),n.jsx("span",{className:"font-semibold ml-1",children:((B=O.progress)==null?void 0:B.xp)||0})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Streak:"}),n.jsxs("span",{className:"font-semibold ml-1",children:[((H=O.progress)==null?void 0:H.streak)||0," 🔥"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Lições:"}),n.jsx("span",{className:"font-semibold ml-1",children:((ee=(Y=O.progress)==null?void 0:Y.completedLessons)==null?void 0:ee.length)||0})]})]})]},O.id)})})]})]})]})}return n.jsxs("div",{className:"min-h-screen bg-interface p-4 pb-20",children:[c&&n.jsx(Bo,{profile:"school",onFinish:L}),n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-4",children:"🏫 Dashboard da Escola"}),n.jsx("p",{className:"text-gray-600",children:"Acompanhe o progresso educacional de toda a escola"}),n.jsxs("div",{className:"flex space-x-2 mt-6",children:[n.jsx("button",{onClick:()=>y("overview"),className:`px-6 py-3 rounded-lg font-semibold transition-all duration-200 shadow-sm ${N==="overview"?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-md transform scale-105":"bg-white text-gray-700 hover:bg-gray-50 border-2 border-gray-200 hover:border-orange-300"}`,children:"📊 Visão Geral"}),n.jsx("button",{onClick:()=>y("tokens"),className:`px-6 py-3 rounded-lg font-semibold transition-all duration-200 shadow-sm ${N==="tokens"?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-md transform scale-105":"bg-white text-gray-700 hover:bg-gray-50 border-2 border-gray-200 hover:border-orange-300"}`,children:"🔑 Tokens de Registro"}),n.jsx("button",{onClick:()=>y("progression"),className:`px-6 py-3 rounded-lg font-semibold transition-all duration-200 shadow-sm ${N==="progression"?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-md transform scale-105":"bg-white text-gray-700 hover:bg-gray-50 border-2 border-gray-200 hover:border-orange-300"}`,children:"🎓 Progressão Escolar"})]})]}),N==="overview"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"📊 Resumo da Escola"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:q.totalStudents}),n.jsx("p",{className:"text-gray-600",children:"Total de Alunos"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:q.activeStudents}),n.jsx("p",{className:"text-gray-600",children:"Alunos Ativos"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:q.totalLessons}),n.jsx("p",{className:"text-gray-600",children:"Lições Concluídas"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:q.totalXp}),n.jsx("p",{className:"text-gray-600",children:"XP Total"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:q.averageLevel}),n.jsx("p",{className:"text-gray-600",children:"Nível Médio"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-3xl font-bold text-teal-600 mb-2",children:[q.engagementRate,"%"]}),n.jsx("p",{className:"text-gray-600",children:"Engajamento"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"🏫 Turmas"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:E.map(G=>{const U=_(G);return n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:G.name}),n.jsx("span",{className:"text-sm text-gray-600",children:G.grade})]}),n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Professor:"}),n.jsx("span",{className:"font-semibold",children:G.teacher})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Alunos:"}),n.jsx("span",{className:"font-semibold",children:U.totalStudents})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Nível Médio:"}),n.jsx("span",{className:"font-semibold",children:U.averageLevel})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Engajamento:"}),n.jsxs("span",{className:"font-semibold",children:[U.engagementRate,"%"]})]})]}),n.jsx("button",{onClick:()=>V(G),className:"w-full bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Ver Detalhes"})]},G.id)})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"🏆 Ranking da Escola"}),n.jsx("div",{className:"space-y-3",children:R().map((G,U)=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center font-bold",children:U+1}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:G.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Nível ",G.level," • ",G.lessonsCompleted," lições"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-lg font-bold text-primary",children:[G.xp," XP"]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[G.streak," 🔥"]})]})]},G.id))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"📊 Relatórios Detalhados"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Acesse relatórios completos de progresso e engajamento"}),n.jsx("button",{onClick:()=>t("reports"),className:"w-full bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Ver Relatórios"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"📈 Análise de Performance"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Analise tendências e performance dos alunos"}),n.jsx("button",{onClick:()=>alert("Funcionalidade de análise de performance em desenvolvimento!"),className:"w-full bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Ver Análises"})]})]})]}),N==="tokens"&&n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:n.jsx(Yj,{user:e})}),N==="progression"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"🎓 Progressão Escolar"}),v.length>0?n.jsx("div",{className:"space-y-4",children:v.map((G,U)=>n.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-primary shadow-md hover:shadow-lg transition-all duration-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:G.student.name}),n.jsxs("p",{className:"text-sm text-gray-700 mt-1",children:["Solicitou progressão de ",n.jsx("strong",{className:"text-primary",children:G.status.currentGrade})," para ",n.jsx("strong",{className:"text-green-600",children:G.status.nextGrade})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["📅 Solicitado em: ",new Date(G.requestDate).toLocaleDateString("pt-BR")]})]}),n.jsx("div",{className:"flex space-x-2",children:n.jsx("button",{onClick:()=>{M(G),b(!0)},className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-all duration-200 font-semibold shadow-md hover:shadow-lg transform hover:scale-105",children:"Revisar"})})]})},G.student.id))}):n.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:n.jsx("p",{className:"text-gray-600",children:"Nenhuma solicitação de progressão pendente."})})]})]}),h&&A&&n.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 p-2 sm:p-4",style:{paddingBottom:"80px",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)"},children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-2xl mx-4 p-4 sm:p-6 border-2 overflow-y-auto",style:{borderColor:"rgb(238, 145, 22)",maxHeight:"calc(100vh - 120px)"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[n.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-800",children:"🎓 Revisar Progressão de Série"}),n.jsx("button",{onClick:()=>{b(!1),M(null)},className:"text-gray-500 hover:text-gray-700 text-xl sm:text-2xl font-bold transition-colors cursor-pointer p-0 m-0 border-0 bg-transparent focus:outline-none",children:"×"})]}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 sm:p-3 border-l-4 border-primary",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 flex items-center text-sm sm:text-base",children:"👤 Informações do Aluno"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1 sm:gap-3 text-xs sm:text-sm",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-gray-600 font-medium",children:"Nome:"}),n.jsx("span",{className:"font-semibold ml-2 text-gray-800 truncate",children:A.student.name})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-gray-600 font-medium",children:"Série Atual:"}),n.jsx("span",{className:"font-semibold ml-2 text-primary",children:A.status.currentGrade})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-gray-600 font-medium",children:"Nível:"}),n.jsx("span",{className:"font-semibold ml-2 text-gray-800",children:((D=A.student.progress)==null?void 0:D.level)||1})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-gray-600 font-medium",children:"XP Total:"}),n.jsx("span",{className:"font-semibold ml-2 text-gray-800",children:((Q=A.student.progress)==null?void 0:Q.xp)||0})]})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 sm:p-3 border-l-4 border-green-500",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 flex items-center text-sm sm:text-base",children:"📊 Progresso da Série Atual"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[n.jsx("span",{className:"text-gray-600 font-medium",children:"Lições Completadas:"}),n.jsxs("span",{className:"font-semibold text-gray-800",children:[A.status.completedLessons,"/",A.status.totalLessons]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 sm:h-3 shadow-inner",children:n.jsx("div",{className:"bg-green-500 h-2 sm:h-3 rounded-full shadow-sm transition-all duration-300",style:{width:`${A.status.completedLessons/A.status.totalLessons*100}%`}})}),n.jsx("div",{className:"flex items-center",children:A.status.hasCompletedCurrentGrade?n.jsx("span",{className:"text-green-600 text-xs sm:text-sm font-medium flex items-center",children:"✅ Série atual completamente finalizada"}):n.jsx("span",{className:"text-orange-600 text-xs sm:text-sm font-medium flex items-center",children:"⚠️ Série atual não completamente finalizada"})})]})]}),n.jsxs("div",{className:"bg-orange-50 rounded-lg p-2 sm:p-3 border-l-4 border-orange-500",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 flex items-center text-sm sm:text-base",children:"📝 Solicitação de Progressão"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs sm:text-sm text-gray-700",children:["O aluno solicitou progressão de ",n.jsx("strong",{className:"text-primary",children:A.status.currentGrade})," para ",n.jsx("strong",{className:"text-green-600",children:A.status.nextGrade})]}),n.jsxs("p",{className:"text-xs text-gray-500 flex items-center",children:["📅 Solicitado em: ",new Date(A.requestDate).toLocaleDateString("pt-BR")," às ",new Date(A.requestDate).toLocaleTimeString("pt-BR")]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[n.jsx("button",{onClick:()=>{w(!1,"")},className:"w-full bg-red-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold hover:bg-red-600 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 flex items-center justify-center text-xs sm:text-sm",children:"❌ Negar"}),n.jsx("button",{onClick:()=>{w(!0,"")},className:"w-full bg-green-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold hover:bg-green-600 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 flex items-center justify-center text-xs sm:text-sm",children:"✅ Autorizar"})]})]})]})})]})},Kj=({user:e,setActiveScreen:t})=>{var p,v,f,S,T,A,M;const[s,r]=j.useState(null),[o,a]=j.useState("7d"),[i,l]=j.useState(!0),[c,d]=j.useState("general"),[m,u]=j.useState([]);j.useEffect(()=>{ue("/users").then(h=>u(h))},[]),j.useEffect(()=>{g()},[o,c,m]);const g=()=>{l(!0);let h;e.role==="parent"?h=x():e.role==="school"?h=E():h=ds.generateReport(o);const b=oe.load(ie.PROGRESS),N={...h,progress:b||{},user:e};r(N),l(!1)},x=()=>{const h=e.linkedStudents?m.filter(y=>e.linkedStudents.includes(y.id)&&y.role==="student"):[],b={totalStudents:h.length,totalXp:h.reduce((y,P)=>{var w;return y+(((w=P.progress)==null?void 0:w.xp)||0)},0),totalLessons:h.reduce((y,P)=>{var w,L;return y+(((L=(w=P.progress)==null?void 0:w.completedLessons)==null?void 0:L.length)||0)},0),totalSavings:h.reduce((y,P)=>{var w;return y+(((w=P.savings)==null?void 0:w.balance)||0)},0),averageLevel:h.length>0?h.reduce((y,P)=>{var w;return y+(((w=P.progress)==null?void 0:w.level)||1)},0)/h.length:0,totalStreak:h.reduce((y,P)=>{var w;return y+(((w=P.progress)==null?void 0:w.streak)||0)},0),activeStudents:h.filter(y=>{var P;return(((P=y.progress)==null?void 0:P.streak)||0)>0}).length},N={};return h.forEach(y=>{var w;(((w=y.progress)==null?void 0:w.completedLessons)||[]).forEach(L=>{const F=tt.find(q=>q.id===L);F&&F.subject&&(N[F.subject]||(N[F.subject]={completed:0,total:0,students:new Set}),N[F.subject].completed++,N[F.subject].students.add(y.id))})}),tt.forEach(y=>{y.subject&&(N[y.subject]||(N[y.subject]={completed:0,total:0,students:new Set}),N[y.subject].total+=h.length)}),{familyStats:b,familySubjectProgress:N,linkedStudents:h,sessionDuration:0,userEngagement:{totalLessons:b.totalLessons,perfectLessons:h.reduce((y,P)=>{var w,L;return y+(((L=(w=P.progress)==null?void 0:w.perfectLessons)==null?void 0:L.length)||0)},0),perfectRate:b.totalLessons>0?h.reduce((y,P)=>{var w,L;return y+(((L=(w=P.progress)==null?void 0:w.perfectLessons)==null?void 0:L.length)||0)},0)/b.totalLessons*100:0,averageScore:85,averageTimePerLesson:300},performance:{achievements:h.reduce((y,P)=>{var w,L;return y+(((L=(w=P.progress)==null?void 0:w.achievements)==null?void 0:L.length)||0)},0),levelUps:h.reduce((y,P)=>{var w;return y+(((w=P.progress)==null?void 0:w.level)||1)},0)-h.length},eventsByType:{lesson_complete:b.totalLessons,level_up:h.reduce((y,P)=>{var w;return y+(((w=P.progress)==null?void 0:w.level)||1)},0)-h.length,achievement_unlock:h.reduce((y,P)=>{var w,L;return y+(((L=(w=P.progress)==null?void 0:w.achievements)==null?void 0:L.length)||0)},0)}}},E=()=>{const h=m.filter(P=>P.role==="student"&&P.schoolId===e.id),b={totalStudents:h.length,totalXp:h.reduce((P,w)=>{var L;return P+(((L=w.progress)==null?void 0:L.xp)||0)},0),totalLessons:h.reduce((P,w)=>{var L,F;return P+(((F=(L=w.progress)==null?void 0:L.completedLessons)==null?void 0:F.length)||0)},0),totalSavings:h.reduce((P,w)=>{var L;return P+(((L=w.savings)==null?void 0:L.balance)||0)},0),averageLevel:h.length>0?h.reduce((P,w)=>{var L;return P+(((L=w.progress)==null?void 0:L.level)||1)},0)/h.length:0,activeStudents:h.filter(P=>{var w;return(((w=P.progress)==null?void 0:w.streak)||0)>0}).length,engagementRate:h.length>0?h.filter(P=>{var w;return(((w=P.progress)==null?void 0:w.streak)||0)>0}).length/h.length*100:0},N={};h.forEach(P=>{var L;(((L=P.progress)==null?void 0:L.completedLessons)||[]).forEach(F=>{const q=tt.find(_=>_.id===F);q&&q.subject&&(N[q.subject]||(N[q.subject]={completed:0,total:0,students:new Set}),N[q.subject].completed++,N[q.subject].students.add(P.id))})}),tt.forEach(P=>{P.subject&&(N[P.subject]||(N[P.subject]={completed:0,total:0,students:new Set}),N[P.subject].total+=h.length)});const y=h.map(P=>{var w,L,F,q,_;return{id:P.id,name:P.name,xp:((w=P.progress)==null?void 0:w.xp)||0,level:((L=P.progress)==null?void 0:L.level)||1,streak:((F=P.progress)==null?void 0:F.streak)||0,lessonsCompleted:((_=(q=P.progress)==null?void 0:q.completedLessons)==null?void 0:_.length)||0}}).sort((P,w)=>w.xp-P.xp).slice(0,10);return{schoolStats:b,schoolSubjectProgress:N,schoolRanking:y,schoolStudents:h,sessionDuration:0,userEngagement:{totalLessons:b.totalLessons,perfectLessons:h.reduce((P,w)=>{var L,F;return P+(((F=(L=w.progress)==null?void 0:L.perfectLessons)==null?void 0:F.length)||0)},0),perfectRate:b.totalLessons>0?h.reduce((P,w)=>{var L,F;return P+(((F=(L=w.progress)==null?void 0:L.perfectLessons)==null?void 0:F.length)||0)},0)/b.totalLessons*100:0,averageScore:82,averageTimePerLesson:280},performance:{achievements:h.reduce((P,w)=>{var L,F;return P+(((F=(L=w.progress)==null?void 0:L.achievements)==null?void 0:F.length)||0)},0),levelUps:h.reduce((P,w)=>{var L;return P+(((L=w.progress)==null?void 0:L.level)||1)},0)-h.length},eventsByType:{lesson_complete:b.totalLessons,level_up:h.reduce((P,w)=>{var L;return P+(((L=w.progress)==null?void 0:L.level)||1)},0)-h.length,achievement_unlock:h.reduce((P,w)=>{var L,F;return P+(((F=(L=w.progress)==null?void 0:L.achievements)==null?void 0:F.length)||0)},0)}}},k=h=>{const b=Math.floor(h/3600),N=Math.floor(h%3600/60),y=h%60;return b>0?`${b}h ${N}m ${y}s`:N>0?`${N}m ${y}s`:`${y}s`},C=h=>{const b=Math.floor(h/36e5),N=Math.floor(h%(1e3*60*60)/(1e3*60));return b>0?`${b}h ${N}m`:`${N}m`};return i?n.jsx("div",{className:"min-h-screen bg-interface flex items-center justify-center",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Gerando relatório..."})]})}):n.jsx("div",{className:"min-h-screen bg-interface p-4 pb-20",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("button",{onClick:()=>t(e.role==="parent"?"parent-dashboard":e.role==="school"?"school-dashboard":"home"),className:"text-primary hover:text-primary-dark mb-2 flex items-center",children:"← Voltar ao Dashboard"}),n.jsx("h1",{className:"text-3xl font-yufin text-primary",children:"📊 Relatórios Detalhados"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[e.role==="parent"&&n.jsxs("select",{value:c,onChange:h=>d(h.target.value),className:"bg-white border-2 border-gray-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors hover:border-orange-300",children:[n.jsx("option",{value:"general",children:"Visão Geral"}),n.jsx("option",{value:"family",children:"Relatório Familiar"}),n.jsx("option",{value:"individual",children:"Individual por Filho"})]}),e.role==="school"&&n.jsxs("select",{value:c,onChange:h=>d(h.target.value),className:"bg-white border-2 border-gray-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors hover:border-orange-300",children:[n.jsx("option",{value:"general",children:"Visão Geral"}),n.jsx("option",{value:"school",children:"Relatório da Escola"}),n.jsx("option",{value:"classes",children:"Por Turmas"})]}),n.jsxs("select",{value:o,onChange:h=>a(h.target.value),className:"bg-white border-2 border-gray-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors hover:border-orange-300",children:[n.jsx("option",{value:"1d",children:"Último dia"}),n.jsx("option",{value:"7d",children:"Última semana"}),n.jsx("option",{value:"30d",children:"Último mês"}),n.jsx("option",{value:"all",children:"Todo período"})]}),n.jsx("button",{onClick:g,className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-6 py-2 rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 shadow-sm hover:shadow-md font-semibold",children:"🔄 Atualizar"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #3b82f6, #2563eb)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white mb-1",children:e.role==="parent"?"👶 Filhos Ativos":"👥 Alunos Ativos"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:e.role==="parent"&&(s!=null&&s.familyStats)?`${s.familyStats.activeStudents}/${s.familyStats.totalStudents}`:e.role==="school"&&(s!=null&&s.schoolStats)?`${s.schoolStats.activeStudents}/${s.schoolStats.totalStudents}`:"0/0"})]}),n.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #10b981, #059669)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white mb-1",children:"📚 Lições Concluídas"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:e.role==="parent"&&(s!=null&&s.familyStats)?s.familyStats.totalLessons:e.role==="school"&&(s!=null&&s.schoolStats)?s.schoolStats.totalLessons:0})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #8b5cf6, #7c3aed)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white mb-1",children:e.role==="parent"?"⭐ XP Total":"📊 Engajamento"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:e.role==="parent"&&(s!=null&&s.familyStats)?s.familyStats.totalXp:e.role==="school"&&(s!=null&&s.schoolStats)?`${Math.round(s.schoolStats.engagementRate)}%`:e.role==="parent"?0:"0%"})]}),n.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #f97316, #ea580c)"},children:[n.jsx("h3",{className:"text-sm font-medium text-white mb-1",children:e.role==="parent"?"💰 Poupança Total":"📈 Nível Médio"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:e.role==="parent"&&(s!=null&&s.familyStats)?`R$ ${s.familyStats.totalSavings.toFixed(2)}`:e.role==="school"&&(s!=null&&s.schoolStats)?Math.round(s.schoolStats.averageLevel*10)/10:e.role==="parent"?"R$ 0,00":0})]})]}),e.role==="student"&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-lg shadow-lg",children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Tempo Total"}),n.jsx("p",{className:"text-2xl font-bold",children:C(s.sessionDuration)})]}),n.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-lg shadow-lg",children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Lições Completadas"}),n.jsx("p",{className:"text-2xl font-bold",children:s.userEngagement.totalLessons})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-lg shadow-lg",children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Conquistas"}),n.jsx("p",{className:"text-2xl font-bold",children:s.performance.achievements})]}),n.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 rounded-lg shadow-lg",children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Níveis Subidos"}),n.jsx("p",{className:"text-2xl font-bold",children:s.performance.levelUps})]})]})]}),e.role==="parent"&&c==="family"&&(s==null?void 0:s.familySubjectProgress)&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"📚 Progresso Familiar por Matéria"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(s.familySubjectProgress).map(([h,b])=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:h}),n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[n.jsxs("span",{children:[b.completed," lições concluídas"]}),n.jsxs("span",{children:[b.students.size," filhos ativos"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(b.completed/b.total*100,100)}%`}})})]},h))})]}),e.role==="school"&&c==="school"&&(s==null?void 0:s.schoolSubjectProgress)&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"📚 Progresso Escolar por Matéria"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(s.schoolSubjectProgress).map(([h,b])=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:h}),n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[n.jsxs("span",{children:[b.completed," lições concluídas"]}),n.jsxs("span",{children:[b.students.size," alunos ativos"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(b.completed/b.total*100,100)}%`}})})]},h))})]}),e.role==="school"&&(s==null?void 0:s.schoolRanking)&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"🏆 Top 10 Alunos da Escola"}),n.jsx("div",{className:"space-y-3",children:s.schoolRanking.map((h,b)=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center font-bold",children:b+1}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:h.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Nível ",h.level," • ",h.lessonsCompleted," lições"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-lg font-bold text-primary",children:[h.xp," XP"]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[h.streak," 🔥"]})]})]},h.id))})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"📈 Engajamento"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-3xl font-bold text-primary mb-2",children:[Math.round(s.userEngagement.averageScore),"%"]}),n.jsx("p",{className:"text-gray-600",children:"Pontuação Média"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-3xl font-bold text-green-500 mb-2",children:[s.userEngagement.perfectRate.toFixed(1),"%"]}),n.jsx("p",{className:"text-gray-600",children:"Taxa de Perfeição"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-blue-500 mb-2",children:k(s.userEngagement.averageTimePerLesson)}),n.jsx("p",{className:"text-gray-600",children:"Tempo Médio/Lição"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-purple-500 mb-2",children:s.userEngagement.perfectLessons}),n.jsx("p",{className:"text-gray-600",children:"Lições Perfeitas"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"🎯 Atividades Recentes"}),n.jsx("div",{className:"space-y-4",children:s.eventsByType&&Object.entries(s.eventsByType).map(([h,b])=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("span",{className:"text-2xl",children:[h==="lesson_complete"&&"✅",h==="level_up"&&"🎉",h==="achievement_unlock"&&"🏆",h==="store_purchase"&&"🛒",h==="navigation"&&"🧭",h==="error"&&"❌",!["lesson_complete","level_up","achievement_unlock","store_purchase","navigation","error"].includes(h)&&"📊"]}),n.jsxs("span",{className:"font-medium text-gray-800",children:[h==="lesson_complete"&&"Lições Completadas",h==="level_up"&&"Subidas de Nível",h==="achievement_unlock"&&"Conquistas Desbloqueadas",h==="store_purchase"&&"Compras na Loja",h==="navigation"&&"Navegações",h==="error"&&"Erros",!["lesson_complete","level_up","achievement_unlock","store_purchase","navigation","error"].includes(h)&&h]})]}),n.jsx("span",{className:"text-lg font-bold text-primary",children:b})]},h))})]}),e.role==="student"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"📊 Progresso Geral"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Nível e XP"}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[n.jsx("span",{children:"Nível Atual"}),n.jsx("span",{children:s.progress.currentLevel||((p=e.progress)==null?void 0:p.level)||1})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${Math.min((s.progress.totalXp||((v=e.progress)==null?void 0:v.xp)||0)/(s.progress.xpToNextLevel||100)*100,100)}%`}})}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.progress.totalXp||((f=e.progress)==null?void 0:f.xp)||0," / ",s.progress.xpToNextLevel||100," XP"]})]})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Estatísticas"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"YüCoins:"}),n.jsxs("span",{className:"font-semibold",children:[((S=e.progress)==null?void 0:S.yuCoins)||0," 💰"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Streak:"}),n.jsxs("span",{className:"font-semibold",children:[s.progress.streak||((T=e.progress)==null?void 0:T.streak)||0," 🔥"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Lições Concluídas:"}),n.jsx("span",{className:"font-semibold",children:((M=(A=e.progress)==null?void 0:A.completedLessons)==null?void 0:M.length)||0})]})]})]})]})]}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:()=>t(e.role==="parent"?"parent-dashboard":e.role==="school"?"school-dashboard":"home"),className:"bg-primary text-white px-8 py-3 rounded-lg font-semibold hover:bg-primary-dark transition transform hover:scale-105",children:"Voltar ao Dashboard"})})]})})},Zj=({user:e})=>{const[t,s]=j.useState(!1);return j.useEffect(()=>{const r=localStorage.getItem("darkMode")==="true";s(r)},[]),n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-2 sm:p-4",style:t?{background:"linear-gradient(135deg, #111827 0%, #1f2937 100%)"}:{},children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 mb-4 sm:mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)",backgroundColor:t?"#374151":"white"},children:n.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-3 sm:gap-4",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-yufin text-primary mb-2",style:t?{color:"#fb923c"}:{},children:"🏆 Desafios"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",style:t?{color:"#e5e7eb"}:{},children:"Desafios especiais para aplicar o conhecimento em situações reais!"})]})})}),n.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-6 animate-pulse",children:"🚧"}),n.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",style:t?{color:"#ffffff"}:{},children:"Em Breve"}),n.jsx("p",{className:"text-lg text-gray-600 mb-6 max-w-md",style:t?{color:"#e5e7eb"}:{},children:"Estamos preparando desafios incríveis para você aplicar todo o conhecimento aprendido!"}),n.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-lg p-4 border border-yellow-200",style:t?{background:"linear-gradient(90deg, #451a03 0%, #7c2d12 100%)",borderColor:"#fbbf24"}:{},children:n.jsx("p",{className:"text-yellow-800 font-medium",style:t?{color:"#fbbf24"}:{},children:"💡 Desafios práticos que conectam teoria e realidade"})})]})})]})})},Jj=({user:e,handleLogout:t,onResetProgress:s})=>{const[r,o]=j.useState(!1),[a,i]=j.useState(!0),[l,c]=j.useState(!0),[d,m]=j.useState(!1),[u,g]=j.useState(!1);j.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission();const v=localStorage.getItem("darkMode")==="true",f=localStorage.getItem("notifications")!=="false",S=localStorage.getItem("sound")!=="false";o(v),i(f),c(S),e&&v?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");const T=ke.checkAdminStatus(e),A=ke.isDevModeEnabled();g(T),m(A)},[e]),j.useEffect(()=>{r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",r)},[r]);const x=()=>{"Notification"in window&&Notification.permission==="granted"?new Notification("Poupí te chama!",{body:"Complete um desafio diário hoje!"}):alert("Permissão de notificações não concedida. Habilite nas configurações do seu navegador.")},E=()=>{i(!a),localStorage.setItem("notifications",!a),a||x()},k=()=>{c(!l),localStorage.setItem("sound",!l)},C=()=>{const v=!r;o(v),localStorage.setItem("darkMode",v),window.dispatchEvent(new CustomEvent("darkModeChanged"))},p=()=>{if(ke.toggleDevMode(e)){const f=ke.isDevModeEnabled();m(f),window.dispatchEvent(new CustomEvent("devModeChanged",{detail:{enabled:f}})),f?K.success("🔧 Modo Dev ativado! Todas as lições e séries liberadas."):K.success("🔧 Modo Dev desativado. Voltando ao fluxo normal.")}else K.error("Acesso negado ao Modo Dev. Apenas administradores podem usar esta funcionalidade.")};return n.jsxs("div",{className:"min-h-screen bg-interface flex flex-col items-center p-4 pb-20",style:r?{backgroundColor:"#111827"}:{},role:"main","aria-label":"Tela de Configurações",children:[n.jsx("h1",{className:"text-4xl font-yufin text-primary mb-8 animate-fadeIn",style:r?{color:"#fb923c"}:{},"aria-label":"Título das Configurações",children:"Configurações ⚙️"}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full border-2",style:{borderColor:"rgb(238, 145, 22)",backgroundColor:r?"#374151":"white"},children:[n.jsx("h2",{className:"text-2xl font-bold mb-6",style:r?{color:"#ffffff"}:{},"aria-label":"Subtítulo das Configurações",children:"Ajustes"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",style:r?{backgroundColor:"#4b5563"}:{},children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-2xl mr-3",children:"🌙"}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-800",style:r?{color:"#ffffff"}:{},"aria-label":"Modo Escuro",children:"Modo Escuro"}),n.jsx("span",{className:"text-sm text-gray-600",style:r?{color:"#e5e7eb"}:{},children:"Alternar entre tema claro e escuro"})]})]}),n.jsx("button",{onClick:C,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r?"bg-primary":"bg-gray-300"}`,"aria-label":`${r?"Desativar":"Ativar"} modo escuro`,children:n.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r?"translate-x-6":"translate-x-1"}`})})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",style:r?{backgroundColor:"#4b5563"}:{},children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-2xl mr-3",children:"🔔"}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-800",style:r?{color:"#ffffff"}:{},"aria-label":"Notificações",children:"Notificações"}),n.jsx("span",{className:"text-sm text-gray-600",style:r?{color:"#e5e7eb"}:{},children:"Lembretes diários e conquistas"})]})]}),n.jsx("button",{onClick:E,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${a?"bg-primary":"bg-gray-300"}`,"aria-label":`${a?"Desativar":"Ativar"} notificações`,children:n.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a?"translate-x-6":"translate-x-1"}`})})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",style:r?{backgroundColor:"#4b5563"}:{},children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-2xl mr-3",children:"🔊"}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-gray-800",style:r?{color:"#ffffff"}:{},"aria-label":"Som",children:"Som"}),n.jsx("span",{className:"text-sm text-gray-600",style:r?{color:"#e5e7eb"}:{},children:"Sons de feedback e conquistas"})]})]}),n.jsx("button",{onClick:k,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${l?"bg-primary":"bg-gray-300"}`,"aria-label":`${l?"Desativar":"Ativar"} som`,children:n.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l?"translate-x-6":"translate-x-1"}`})})]}),u&&n.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border-2 border-red-200",style:r?{backgroundColor:"#7f1d1d",borderColor:"#dc2626"}:{},children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-2xl mr-3",children:"🔧"}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold text-red-800",style:r?{color:"#fca5a5"}:{},"aria-label":"Modo Dev",children:"Modo Dev"}),n.jsx("span",{className:"text-sm text-red-600",style:r?{color:"#fca5a5"}:{},children:d?"Todas as lições e séries liberadas":"Liberar todas as lições e séries"})]})]}),n.jsx("button",{onClick:p,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d?"bg-red-500":"bg-gray-300"}`,"aria-label":`${d?"Desativar":"Ativar"} modo dev`,children:n.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d?"translate-x-6":"translate-x-1"}`})})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-3",children:"Informações da Conta"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Nome:"})," ",e.name]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",e.email]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Tipo:"})," ",e.role==="student"?"Estudante":e.role==="parent"?"Responsável":"Escola"]})]})]}),n.jsx("button",{onClick:t,className:"mt-6 w-full text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 hover:opacity-90",style:{backgroundColor:"rgb(238, 145, 22)"},"aria-label":"Sair da Conta",children:"Sair da Conta"}),e.role==="student"&&n.jsx("button",{onClick:()=>{window.confirm("Tem certeza que deseja zerar o progresso da série atual? O progresso de outras séries será mantido. Esta ação não pode ser desfeita!")&&typeof s=="function"&&s()},className:"mt-4 w-full text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 hover:opacity-90",style:{backgroundColor:"rgb(238, 145, 22)"},"aria-label":"Zerar Progresso",children:"Zerar Progresso"})]})]})]})},eN=({user:e,setUser:t,setActiveScreen:s})=>{var q,_,I,R,V,$;const[r,o]=j.useState([]),[a,i]=j.useState([]),[l,c]=j.useState({sameClass:[],sameSchool:[]}),[d,m]=j.useState(""),[u,g]=j.useState(null),[x,E]=j.useState("friends"),[k,C]=j.useState(!1),[p,v]=j.useState(!1),[f,S]=j.useState([]),[T,A]=j.useState(!1);j.useEffect(()=>{const D=localStorage.getItem("darkMode")==="true";v(D);const Q=()=>{const G=localStorage.getItem("darkMode")==="true";v(G)};return window.addEventListener("darkModeChanged",Q),()=>{window.removeEventListener("darkModeChanged",Q)}},[]),j.useEffect(()=>{M(),h(),(e==null?void 0:e.role)==="student"&&b()},[e==null?void 0:e.id]);const M=async()=>{if(!(e!=null&&e.id)){console.error("ID do usuário não disponível");return}try{C(!0);const D=await ue(`/users/${e.id}/friends`);o(D.acceptedFriends||[]),i(D.pendingRequests||[])}catch(D){console.error("Erro ao carregar amigos:",D),K.error("Erro ao carregar lista de amigos")}finally{C(!1)}},h=async()=>{if(!(e!=null&&e.id)){console.error("ID do usuário não disponível");return}try{const D=await ue(`/users/${e.id}/friend-suggestions`);c(D.suggestions||{sameClass:[],sameSchool:[]})}catch(D){console.error("Erro ao carregar sugestões:",D)}},b=async()=>{if(!(e!=null&&e.id)){console.error("ID do usuário não disponível");return}try{A(!0);const D=await ue(`/students/${e.id}/pending-link-requests`);S(D.pendingRequests||[])}catch(D){console.error("Erro ao carregar solicitações de vínculo:",D)}finally{A(!1)}},N=async(D,Q)=>{if(!(e!=null&&e.id)){K.error("ID do usuário não disponível");return}if(!D){K.error("ID do responsável não disponível");return}try{await _e(`/students/${e.id}/respond-link-request`,{parentId:D,approved:Q}),K.success(Q?"Responsável vinculado com sucesso!":"Solicitação rejeitada."),b()}catch(G){console.error("Erro ao responder solicitação:",G),K.error("Erro ao processar solicitação")}},y=async(D,Q="suggestion")=>{var G,U,W;if(!(e!=null&&e.id)){K.error("ID do usuário não disponível");return}if(!D){K.error("ID do amigo não disponível");return}try{await _e(`/users/${e.id}/friends`,{targetUserId:D,source:Q}),ds.trackEvent("friend_added",{friendId:D,userId:e.id,source:Q}),K.success("Solicitação de amizade enviada!"),M(),h()}catch(O){console.error("Erro ao adicionar amigo:",O);const Z=(U=(G=O.response)==null?void 0:G.data)==null?void 0:U.error;Z?K.error(Z):((W=O.response)==null?void 0:W.status)===400?K.error("Erro na solicitação. Verifique os dados."):K.error("Erro ao adicionar amigo")}},P=async(D,Q)=>{if(!(e!=null&&e.id)){K.error("ID do usuário não disponível");return}if(!D){K.error("ID do amigo não disponível");return}console.log(`🔄 Frontend: Enviando solicitação - User ID: ${e.id}, Friend ID: ${D}, Action: ${Q}`);try{await a0(`/users/${e.id}/friends/${D}`,{action:Q}),K.success(Q==="accept"?"Solicitação aceita!":"Solicitação rejeitada!"),await M(),await h()}catch(G){console.error("Erro ao processar solicitação:",G),K.error("Erro ao processar solicitação")}},w=async()=>{var D,Q;if(!d.trim()){K.warning("Digite um ID de jogador");return}if(!d.trim().toUpperCase().startsWith("YUF")){K.error("ID de jogador inválido. Deve começar com YUF");return}try{C(!0);const G=await ue(`/users/search/${d.trim().toUpperCase()}`);if(G.id===e.id){g(null),K.error("Você não pode adicionar a si mesmo como amigo");return}g(G),K.success("Jogador encontrado!")}catch(G){console.error("Erro ao buscar jogador:",G),g(null),((D=G.response)==null?void 0:D.status)===404?K.error("Jogador não encontrado. Verifique o ID."):((Q=G.response)==null?void 0:Q.status)===400?K.error("ID de jogador inválido. Deve começar com YUF"):K.error("Erro ao buscar jogador")}finally{C(!1)}},L=async D=>{if(!(e!=null&&e.id)){K.error("ID do usuário não disponível");return}if(!D){K.error("ID do amigo não disponível");return}if(window.confirm("Tem certeza que deseja remover este amigo?"))try{await oa(`/users/${e.id}/friends/${D}`),K.success("Amigo removido com sucesso!"),M()}catch(Q){console.error("Erro ao remover amigo:",Q),K.error("Erro ao remover amigo")}},F=async(D,Q)=>{if(!(e!=null&&e.id)){K.error("ID do usuário não disponível");return}if(!D){K.error("ID do amigo não disponível");return}try{const G=await _e(`/users/${e.id}/send-gift`,{friendId:D,giftType:Q}),U={...e,progress:{...e.progress,yuCoins:G.sender.yuCoins}};t(U),localStorage.setItem("yufinUser",JSON.stringify(U)),ds.trackEvent("gift_sent",{friendId:D,giftType:Q,cost:G.cost}),K.success(`Presente enviado para ${G.recipient.name}!`)}catch(G){console.error("Erro ao enviar presente:",G),G.message.includes("YüCoins insuficientes")?K.error("YüCoins insuficientes para enviar este presente!"):G.message.includes("amigos")?K.error("Vocês precisam ser amigos para enviar presentes"):K.error("Erro ao enviar presente")}};return n.jsx("div",{className:"min-h-screen bg-interface p-3 pb-20",style:p?{backgroundColor:"#111827"}:{},children:n.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-6 border-2",style:{borderColor:"rgb(238, 145, 22)",backgroundColor:p?"#374151":"white"},children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("div",{className:"flex items-center space-x-3",children:n.jsx("h1",{className:"text-2xl font-yufin text-primary",style:p?{color:"#fb923c"}:{},children:"👥 Amigos"})})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-blue-100 text-blue-800 p-3 rounded-lg text-center border-2",style:{borderColor:"rgb(238, 145, 22)",backgroundColor:p?"#1e3a8a":"#dbeafe",color:p?"#93c5fd":"#1e40af"},children:[n.jsx("div",{className:"text-xs font-medium mb-1",style:p?{color:"#93c5fd"}:{},children:"Amigos"}),n.jsx("div",{className:"text-lg font-bold",style:p?{color:"#93c5fd"}:{},children:(r==null?void 0:r.length)||0})]}),n.jsxs("div",{className:"bg-yellow-100 text-yellow-800 p-3 rounded-lg text-center border-2",style:{borderColor:"rgb(238, 145, 22)",backgroundColor:p?"#451a03":"#fef3c7",color:p?"#fbbf24":"#92400e"},children:[n.jsx("div",{className:"text-xs font-medium mb-1",style:p?{color:"#fbbf24"}:{},children:"Pendentes"}),n.jsx("div",{className:"text-lg font-bold",style:p?{color:"#fbbf24"}:{},children:((a==null?void 0:a.length)||0)+((e==null?void 0:e.role)==="student"&&(f==null?void 0:f.length)||0)})]})]}),n.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded-lg border-2",style:{borderColor:"rgb(238, 145, 22)",backgroundColor:p?"#451a03":"#fef3c7"},children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",style:p?{color:"#fbbf24"}:{},children:"Seu ID de Jogador:"}),n.jsx("p",{className:"text-lg font-bold text-gray-800",style:p?{color:"#ffffff"}:{},children:(e==null?void 0:e.playerId)||"Não gerado"})]}),(e==null?void 0:e.playerId)&&n.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(e.playerId),K.success("ID de jogador copiado para a área de transferência!")}catch{const Q=document.createElement("textarea");Q.value=e.playerId,document.body.appendChild(Q),Q.select(),document.execCommand("copy"),document.body.removeChild(Q),K.success("ID de jogador copiado para a área de transferência!")}},className:"text-gray-500 hover:text-primary transition-colors p-2 rounded-lg hover:bg-yellow-100",title:"Copiar ID de jogador",children:"📋"})]})}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[n.jsxs("button",{onClick:()=>E("friends"),className:`px-3 sm:px-4 py-2 rounded-lg text-sm font-medium transition ${x==="friends"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["👥 Amigos (",(r==null?void 0:r.length)||0,")"]}),n.jsxs("button",{onClick:()=>E("requests"),className:`px-3 sm:px-4 py-2 rounded-lg text-sm font-medium transition ${x==="requests"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["📨 Solicitações (",((a==null?void 0:a.length)||0)+((e==null?void 0:e.role)==="student"&&(f==null?void 0:f.length)||0),")"]}),n.jsx("button",{onClick:()=>E("suggestions"),className:`px-3 sm:px-4 py-2 rounded-lg text-sm font-medium transition ${x==="suggestions"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"🔍 Sugestões"}),n.jsx("button",{onClick:()=>E("search"),className:`px-3 sm:px-4 py-2 rounded-lg text-sm font-medium transition ${x==="search"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"🎮 Buscar por ID"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[x==="friends"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Meus Amigos"}),k?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Carregando amigos..."})]}):r.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-6xl mb-4",children:"👥"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Você ainda não tem amigos adicionados."}),n.jsx("button",{onClick:()=>E("suggestions"),className:"bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-dark transition",children:"Encontrar Amigos"})]}):n.jsx("div",{className:"space-y-4",children:r==null?void 0:r.map(D=>{var Q;return n.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center text-white font-bold text-lg",children:D.name?D.name.charAt(0):"?"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800 text-lg",children:D.name||"Nome não disponível"}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[n.jsxs("span",{children:["Nível ",D.level||1]}),n.jsxs("span",{children:["🏫 ",D.gradeId||"N/A"]}),n.jsxs("span",{children:["🎮 ",D.playerId||"N/A"]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>F(D.id,"yuCoins"),disabled:(((Q=e.progress)==null?void 0:Q.yuCoins)||0)<10,className:"bg-yellow-500 text-white px-3 py-1 rounded-lg text-sm hover:bg-yellow-600 transition disabled:opacity-50 disabled:cursor-not-allowed",title:"Enviar 10 YüCoins (Custo: 10 YüCoins)",children:"💰 Presente"}),n.jsx("button",{onClick:()=>L(D.id),className:"bg-red-500 text-white px-3 py-1 rounded-lg text-sm hover:bg-red-600 transition",title:"Remover amigo",children:"❌ Remover"})]})]})},D.id)})})]}),x==="requests"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Solicitações Pendentes"}),(e==null?void 0:e.role)==="student"&&f.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"👨‍👩‍👧‍👦 Solicitações de Vínculo"}),n.jsx("div",{className:"space-y-3",children:f==null?void 0:f.map(D=>n.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:"👨‍👩‍👧‍👦"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800 text-lg",children:D.parentName||"Nome não disponível"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Deseja se vincular como responsável"}),D.message&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:['"',D.message,'"']}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:D.requestDate?new Date(D.requestDate).toLocaleDateString("pt-BR"):"Data não disponível"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>N(D.parentId,!0),className:"bg-green-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-green-600 transition",children:"✅ Aceitar"}),n.jsx("button",{onClick:()=>N(D.parentId,!1),className:"bg-red-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-600 transition",children:"❌ Rejeitar"})]})]})},D.parentId))})]}),a.length===0&&(!(e!=null&&e.role)==="student"||f.length===0)?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📨"}),n.jsx("p",{className:"text-gray-600",children:"Nenhuma solicitação pendente."})]}):n.jsx("div",{className:"space-y-4",children:a.map(D=>n.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center text-white font-bold text-lg",children:D.name?D.name.charAt(0):"?"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800 text-lg",children:D.name||"Nome não disponível"}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[n.jsxs("span",{children:["Nível ",D.level||1]}),n.jsxs("span",{children:["🏫 ",D.gradeId||"N/A"]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>P(D.id,"accept"),className:"bg-green-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-green-600 transition",children:"✅ Aceitar"}),n.jsx("button",{onClick:()=>P(D.id,"reject"),className:"bg-red-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-600 transition",children:"❌ Rejeitar"})]})]})},D.id))})]}),x==="suggestions"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Sugestões de Amigos"}),((q=l==null?void 0:l.sameClass)==null?void 0:q.length)>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"👥 Mesma Turma"}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-3 lg:gap-4",children:(_=l==null?void 0:l.sameClass)==null?void 0:_.map(D=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 lg:p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white font-bold",children:D.name?D.name.charAt(0):"?"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:D.name||"Nome não disponível"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Nível ",D.level||1," • ",D.gradeId||"N/A"]})]})]}),n.jsx("button",{onClick:()=>y(D.id,"class"),className:"bg-primary text-white px-3 py-1 rounded-lg text-sm hover:bg-primary-dark transition",children:"Adicionar"})]},D.id))})]}),((I=l==null?void 0:l.sameSchool)==null?void 0:I.length)>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"🏫 Mesma Escola"}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-3 lg:gap-4",children:(R=l==null?void 0:l.sameSchool)==null?void 0:R.map(D=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 lg:p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white font-bold",children:D.name?D.name.charAt(0):"?"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:D.name||"Nome não disponível"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Nível ",D.level||1," • ",D.gradeId||"N/A"]})]})]}),n.jsx("button",{onClick:()=>y(D.id,"school"),className:"bg-primary text-white px-3 py-1 rounded-lg text-sm hover:bg-primary-dark transition",children:"Adicionar"})]},D.id))})]}),(!((V=l==null?void 0:l.sameClass)!=null&&V.length)||l.sameClass.length===0)&&(!(($=l==null?void 0:l.sameSchool)!=null&&$.length)||l.sameSchool.length===0)&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),n.jsx("p",{className:"text-gray-600",children:"Nenhuma sugestão disponível no momento."})]})]}),x==="search"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Buscar por ID de Jogador"}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{type:"text",placeholder:"Digite o ID (ex: YUF123)",value:d,onChange:D=>m(D.target.value.toUpperCase()),className:"flex-1 bg-gray-100 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary"}),n.jsx("button",{onClick:w,disabled:k,className:"bg-primary text-white px-4 py-2 rounded-lg text-sm hover:bg-primary-dark transition disabled:opacity-50",children:k?"🔍":"Buscar"})]})}),u&&n.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center text-white font-bold text-lg",children:u.name?u.name.charAt(0):"?"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800 text-lg",children:u.name||"Nome não disponível"}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[u.level&&n.jsxs("span",{children:["Nível ",u.level]}),u.gradeId&&n.jsxs("span",{children:["🏫 ",u.gradeId]}),n.jsxs("span",{children:["🎮 ",u.playerId||"N/A"]})]})]})]}),n.jsx("button",{onClick:()=>y(u.id,"playerId"),className:"bg-primary text-white px-4 py-2 rounded-lg text-sm hover:bg-primary-dark transition",children:"Adicionar Amigo"})]})}),n.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"💡 Como usar:"}),n.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[n.jsx("li",{children:"• Peça o ID de jogador para seu amigo"}),n.jsx("li",{children:"• Digite o ID no campo acima (ex: YUF123)"}),n.jsx("li",{children:'• Clique em "Buscar" para encontrar o jogador'}),n.jsx("li",{children:'• Clique em "Adicionar Amigo" para enviar solicitação'})]})]})]})]})]})})};class tN{constructor(){this.userProfiles=new Map,this.learningPatterns=new Map,this.recommendationCache=new Map}analyzeUserProfile(t,s){const r={learningStyle:this.determineLearningStyle(t,s),difficultyPreference:this.calculateDifficultyPreference(t,s),preferredLessonTypes:this.analyzePreferredLessonTypes(t,s),optimalStudyTime:this.determineOptimalStudyTime(t,s),motivationFactors:this.identifyMotivationFactors(t,s),weakAreas:this.identifyWeakAreas(t,s),strongAreas:this.identifyStrongAreas(t,s)};return this.userProfiles.set(t.id,r),r}determineLearningStyle(t,s){var a,i,l,c;const r=this.getLessonTypeStats(t,s),o={visual:((a=r.dragAndDrop)==null?void 0:a.averageScore)||0,auditory:((i=r.quiz)==null?void 0:i.averageScore)||0,kinesthetic:((l=r.simulation)==null?void 0:l.averageScore)||0,reading:((c=r.input)==null?void 0:c.averageScore)||0};return Object.keys(o).reduce((d,m)=>o[d]>o[m]?d:m)}calculateDifficultyPreference(t,s){const o=(s.completedLessons||[]).map(i=>{const l=tt.find(c=>c.id===i);return(l==null?void 0:l.userScore)||0}),a=o.reduce((i,l)=>i+l,0)/o.length||0;return a>=90?"challenging":a>=70?"moderate":"easy"}analyzePreferredLessonTypes(t,s){const r=this.getLessonTypeStats(t,s),o=[];return Object.entries(r).forEach(([a,i])=>{i.averageScore>80&&i.completionRate>.8&&o.push(a)}),o}determineOptimalStudyTime(t,s){const o=(s.activityHistory||[]).map(c=>({hour:new Date(c.timestamp).getHours(),score:c.score})),a={};o.forEach(c=>{a[c.hour]||(a[c.hour]={totalScore:0,count:0}),a[c.hour].totalScore+=c.score,a[c.hour].count+=1});let i=9,l=0;return Object.entries(a).forEach(([c,d])=>{const m=d.totalScore/d.count;m>l&&(l=m,i=parseInt(c))}),i}identifyMotivationFactors(t,s){var o;const r=[];return s.streak>5&&r.push("consistency"),((o=s.achievements)==null?void 0:o.length)>3&&r.push("achievements"),s.level>3&&r.push("progress"),s.perfectLessons>5&&r.push("perfection"),r}identifyWeakAreas(t,s){const r=[],o=this.getLessonTypeStats(t,s);return Object.entries(o).forEach(([a,i])=>{i.averageScore<70&&r.push({type:a,averageScore:i.averageScore,recommendation:this.generateWeakAreaRecommendation(a)})}),r}identifyStrongAreas(t,s){const r=[],o=this.getLessonTypeStats(t,s);return Object.entries(o).forEach(([a,i])=>{i.averageScore>90&&r.push({type:a,averageScore:i.averageScore,recommendation:this.generateStrongAreaRecommendation(a)})}),r}generateRecommendations(t,s){const r=this.analyzeUserProfile(t,s),o=[];return r.weakAreas.forEach(a=>{o.push({type:"improvement",priority:"high",title:`Melhorar em ${a.type}`,description:a.recommendation,action:`practice_${a.type}`})}),o.push({type:"learning_style",priority:"medium",title:`Aproveite seu estilo ${r.learningStyle}`,description:this.getLearningStyleTip(r.learningStyle),action:"focus_learning_style"}),r.difficultyPreference==="challenging"&&o.push({type:"challenge",priority:"medium",title:"Tente lições mais difíceis",description:"Você está pronto para desafios maiores!",action:"increase_difficulty"}),o.push({type:"timing",priority:"low",title:"Horário ideal de estudo",description:`Seu melhor horário é às ${r.optimalStudyTime}h`,action:"schedule_study_time"}),o}adaptDifficulty(t,s,r){if(!this.userProfiles.get(t.id))return"moderate";const a=this.getRecentPerformance(t,s,r);return a.averageScore>90?"challenging":a.averageScore<60?"easy":"moderate"}generatePersonalizedContent(t,s,r){return this.userProfiles.get(t.id)?{difficulty:this.adaptDifficulty(t,s,r),hints:this.generatePersonalizedHints(t,s),encouragement:this.generateEncouragement(t,s),nextSteps:this.suggestNextSteps(t,s)}:null}generatePersonalizedHints(t,s){const r=this.identifyWeakAreas(t,s),o=[];return r.forEach(a=>{o.push({type:a.type,hint:this.getHintForWeakArea(a.type),priority:"high"})}),o}generateEncouragement(t,s){const r=this.identifyMotivationFactors(t,s);return r.includes("consistency")?"Você está mantendo uma rotina incrível! Continue assim! 🔥":r.includes("achievements")?"Parabéns pelas suas conquistas! Você está se superando! 🏆":r.includes("progress")?"Seu progresso é impressionante! Você está aprendendo muito! 📈":"Você está no caminho certo! Continue aprendendo! 💪"}suggestNextSteps(t,s){const r=s.completedLessons||[],o=tt.filter(l=>!r.includes(l.id)),a=this.identifyWeakAreas(t,s);return o.filter(l=>a.some(c=>l.type===c.type)).slice(0,3)}getLessonTypeStats(t,s){const r=s.completedLessons||[],o={};return r.forEach(a=>{const i=tt.find(l=>l.id===a);i&&(o[i.type]||(o[i.type]={scores:[],completed:0}),o[i.type].scores.push(i.userScore||0),o[i.type].completed+=1)}),Object.keys(o).forEach(a=>{const i=o[a].scores;o[a].averageScore=i.reduce((l,c)=>l+c,0)/i.length,o[a].completionRate=o[a].completed/r.length}),o}getRecentPerformance(t,s,r){const i=(s.completedLessons||[]).slice(-5).map(l=>tt.find(c=>c.id===l)).filter(l=>l&&l.type===r).map(l=>l.userScore||0);return{averageScore:i.reduce((l,c)=>l+c,0)/i.length||0,count:i.length}}generateWeakAreaRecommendation(t){return{quiz:"Pratique mais questões de múltipla escolha","drag-and-drop":"Tente organizar itens em ordem",classify:"Exercite a categorização de conceitos",match:"Pratique associações entre elementos",simulation:"Experimente cenários práticos",input:"Pratique respostas escritas"}[t]||"Continue praticando!"}generateStrongAreaRecommendation(t){return{quiz:"Você é excelente em testes!","drag-and-drop":"Sua organização é perfeita!",classify:"Você tem ótima capacidade de categorização!",match:"Suas associações são precisas!",simulation:"Você toma ótimas decisões!",input:"Suas respostas são muito criativas!"}[t]||"Continue assim!"}getLearningStyleTip(t){return{visual:"Tente visualizar os conceitos com imagens e diagramas",auditory:"Leia em voz alta e discuta os conceitos",kinesthetic:"Pratique com simulações e atividades práticas",reading:"Foque em textos e explicações detalhadas"}[t]||"Continue explorando diferentes formas de aprender!"}getHintForWeakArea(t){return{quiz:"Leia todas as opções antes de escolher","drag-and-drop":"Pense na ordem lógica dos itens",classify:"Identifique as características principais de cada categoria",match:"Procure por palavras-chave que se relacionam",simulation:"Considere as consequências de cada escolha",input:"Escreva suas ideias antes de responder"}[t]||"Tome seu tempo para pensar!"}}const Gu=new tN;class sN{constructor(){this.rankings=new Map,this.competitions=new Map,this.seasonalEvents=new Map,this.initializeSeasonalEvents()}updateRanking(t,s,r){const o={userId:t,name:s.name,level:r.level||1,totalXp:r.totalXp||0,streak:r.streak||0,perfectLessons:r.perfectLessons||0,lastUpdated:new Date().toISOString()};this.rankings.set(t,o),this.saveRankings();const a=this.getUserRankingPosition(t),i=s.previousRanking||999;if(a<i){const l=i-a;K.success(`🎉 Você subiu ${l} posição(ões) no ranking! Agora está em #${a}`)}return a}getUserRankingPosition(t){return Array.from(this.rankings.values()).sort((r,o)=>r.level!==o.level?o.level-r.level:r.totalXp!==o.totalXp?o.totalXp-r.totalXp:o.streak-r.streak).findIndex(r=>r.userId===t)+1}getTopRankings(t=10){return Array.from(this.rankings.values()).sort((s,r)=>s.level!==r.level?r.level-s.level:s.totalXp!==r.totalXp?r.totalXp-s.totalXp:r.streak-s.streak).slice(0,t)}createCompetition(t){const s={id:`comp-${Date.now()}`,title:t.title,description:t.description,type:t.type,startDate:t.startDate,endDate:t.endDate,participants:[],rewards:t.rewards,leaderboard:[],isActive:!1};return this.competitions.set(s.id,s),this.saveCompetitions(),s}joinCompetition(t,s,r){const o=this.competitions.get(t);if(!o)return!1;const a={userId:s,name:r.name,joinedAt:new Date().toISOString(),score:0,progress:{xp:0,streak:0,perfectLessons:0}};return o.participants.push(a),this.updateCompetitionLeaderboard(t),this.saveCompetitions(),K.success(`🎯 Você entrou na competição "${o.title}"!`),!0}updateCompetitionProgress(t,s,r){const o=this.competitions.get(t);if(!o||!o.isActive)return;const a=o.participants.find(l=>l.userId===s);if(!a)return;let i=0;switch(o.type){case"xp_race":i=r.totalXp-a.progress.xp,a.progress.xp=r.totalXp;break;case"streak_challenge":i=r.streak-a.progress.streak,a.progress.streak=r.streak;break;case"perfect_lessons":i=r.perfectLessons-a.progress.perfectLessons,a.progress.perfectLessons=r.perfectLessons;break}a.score+=i,this.updateCompetitionLeaderboard(t),this.saveCompetitions()}updateCompetitionLeaderboard(t){const s=this.competitions.get(t);s&&(s.leaderboard=s.participants.sort((r,o)=>o.score-r.score).map((r,o)=>({...r,position:o+1})))}endCompetition(t){const s=this.competitions.get(t);if(!s)return;s.isActive=!1,s.endDate=new Date().toISOString();const r=s.leaderboard.slice(0,3);r.forEach((o,a)=>{const i=s.rewards[a]||s.rewards[0];this.distributeCompetitionReward(o.userId,i,s.title)}),this.saveCompetitions(),r.forEach((o,a)=>{const i=a+1,l=s.rewards[a]||s.rewards[0];K.success(`🏆 Parabéns! Você ficou em ${i}º lugar na competição "${s.title}"! Recompensa: ${l.xp} XP + ${l.yuCoins} YüCoins`)})}initializeSeasonalEvents(){const s=new Date().getMonth()+1,o={1:{name:"Ano Novo Financeiro",theme:"planning",bonus:1.5},2:{name:"Carnaval de Economia",theme:"celebration",bonus:1.3},3:{name:"Março das Metas",theme:"goals",bonus:1.4},4:{name:"Abril dos Investimentos",theme:"investment",bonus:1.6},5:{name:"Maio das Mães",theme:"family",bonus:1.2},6:{name:"Junho Junino",theme:"festival",bonus:1.3},7:{name:"Julho das Férias",theme:"vacation",bonus:1.1},8:{name:"Agosto dos Pais",theme:"family",bonus:1.2},9:{name:"Setembro da Independência",theme:"freedom",bonus:1.4},10:{name:"Outubro das Crianças",theme:"kids",bonus:1.5},11:{name:"Novembro da Consciência",theme:"awareness",bonus:1.3},12:{name:"Dezembro de Natal",theme:"christmas",bonus:1.7}}[s];o&&this.activateSeasonalEvent(o)}activateSeasonalEvent(t){const s={id:`event-${Date.now()}`,name:t.name,theme:t.theme,bonus:t.bonus,startDate:new Date().toISOString(),endDate:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString(),isActive:!0,participants:[],specialRewards:this.generateSpecialRewards(t.theme)};this.seasonalEvents.set(s.id,s),this.saveSeasonalEvents()}generateSpecialRewards(t){const s={planning:[{name:"Planejador Mestre",xp:500,yuCoins:100,icon:"📋"},{name:"Estrategista Financeiro",xp:300,yuCoins:75,icon:"🎯"}],celebration:[{name:"Celebrador",xp:400,yuCoins:80,icon:"🎉"},{name:"Festivo",xp:250,yuCoins:60,icon:"🎊"}],goals:[{name:"Conquistador de Metas",xp:600,yuCoins:120,icon:"🎯"},{name:"Focado",xp:350,yuCoins:85,icon:"🎯"}],investment:[{name:"Investidor Iniciante",xp:700,yuCoins:150,icon:"📈"},{name:"Poupador Inteligente",xp:450,yuCoins:100,icon:"💰"}],family:[{name:"Familiar",xp:300,yuCoins:70,icon:"👨‍👩‍👧‍👦"},{name:"Protetor",xp:200,yuCoins:50,icon:"🛡️"}],festival:[{name:"Festivo",xp:350,yuCoins:80,icon:"🎪"},{name:"Celebrador",xp:250,yuCoins:60,icon:"🎊"}],vacation:[{name:"Viajante",xp:400,yuCoins:90,icon:"✈️"},{name:"Aventureiro",xp:300,yuCoins:70,icon:"🏖️"}],freedom:[{name:"Livre",xp:500,yuCoins:110,icon:"🕊️"},{name:"Independente",xp:350,yuCoins:85,icon:"🏛️"}],kids:[{name:"Criança Brilhante",xp:600,yuCoins:130,icon:"🌟"},{name:"Aprendiz Feliz",xp:400,yuCoins:95,icon:"😊"}],awareness:[{name:"Consciente",xp:450,yuCoins:100,icon:"🧠"},{name:"Informado",xp:300,yuCoins:75,icon:"📚"}],christmas:[{name:"Natalino",xp:800,yuCoins:200,icon:"🎄"},{name:"Generoso",xp:500,yuCoins:120,icon:"🎁"}]};return s[t]||s.celebration}applySeasonalBonus(t,s){const r=Array.from(this.seasonalEvents.values()).filter(i=>i.isActive);if(r.length===0)return s;const o=r.reduce((i,l)=>i+l.bonus,0),a=Math.floor(s*(o-1));return r.forEach(i=>{i.participants.includes(t)||i.participants.push(t)}),this.saveSeasonalEvents(),s+a}checkAdvancedAchievements(t,s){var l,c,d,m,u;const r=[],o=this.getUserRankingPosition(t.id);o<=10&&!((l=s.achievements)!=null&&l.includes("top_10"))&&r.push({id:"top_10",title:"Top 10",description:"Chegou ao top 10 do ranking",icon:"🏆",reward:{xp:500,yuCoins:100}}),o<=3&&!((c=s.achievements)!=null&&c.includes("top_3"))&&r.push({id:"top_3",title:"Top 3",description:"Chegou ao top 3 do ranking",icon:"🥇",reward:{xp:1e3,yuCoins:200}});const a=this.getCompetitionWins(t.id);return a>=1&&!((d=s.achievements)!=null&&d.includes("first_win"))&&r.push({id:"first_win",title:"Primeira Vitória",description:"Venceu sua primeira competição",icon:"🏅",reward:{xp:300,yuCoins:75}}),a>=5&&!((m=s.achievements)!=null&&m.includes("champion"))&&r.push({id:"champion",title:"Campeão",description:"Venceu 5 competições",icon:"👑",reward:{xp:800,yuCoins:150}}),this.getEventParticipations(t.id)>=3&&!((u=s.achievements)!=null&&u.includes("event_master"))&&r.push({id:"event_master",title:"Mestre dos Eventos",description:"Participou de 3 eventos sazonais",icon:"🎪",reward:{xp:400,yuCoins:90}}),r}getCompetitionWins(t){return Array.from(this.competitions.values()).filter(s=>!s.isActive).filter(s=>{var r;return((r=s.leaderboard[0])==null?void 0:r.userId)===t}).length}getEventParticipations(t){return Array.from(this.seasonalEvents.values()).filter(s=>s.participants.includes(t)).length}distributeCompetitionReward(t,s,r){console.log(`🏆 Recompensa distribuída para ${t}: ${s.xp} XP + ${s.yuCoins} YüCoins`)}saveRankings(){oe.save("rankings",Array.from(this.rankings.entries()))}saveCompetitions(){oe.save("competitions",Array.from(this.competitions.entries()))}saveSeasonalEvents(){oe.save("seasonalEvents",Array.from(this.seasonalEvents.entries()))}loadData(){try{const t=oe.load("rankings")||[];this.rankings=new Map(t);const s=oe.load("competitions")||[];this.competitions=new Map(s);const r=oe.load("seasonalEvents")||[];this.seasonalEvents=new Map(r)}catch(t){console.error("Erro ao carregar dados de gamificação:",t)}}}const Qt=new sN;class nN{constructor(){this.metrics={pageLoadTimes:{},componentRenderTimes:{},lessonLoadTimes:{},memoryUsage:[]},this.initializeMonitoring()}startPageLoadTimer(t){const s=performance.now();return()=>{const r=performance.now()-s;this.metrics.pageLoadTimes[t]=r,console.log(`📊 ${t} carregou em ${r.toFixed(2)}ms`),r>3e3&&console.warn(`⚠️ Carregamento lento detectado: ${t} (${r.toFixed(2)}ms)`)}}measureComponentRender(t,s){const r=performance.now(),o=s(),a=performance.now()-r;return this.metrics.componentRenderTimes[t]=a,a>100&&console.warn(`⚠️ Renderização lenta: ${t} (${a.toFixed(2)}ms)`),o}async preloadLesson(t){const s=performance.now();try{await new Promise(o=>setTimeout(o,100));const r=performance.now()-s;return this.metrics.lessonLoadTimes[t]=r,{success:!0,loadTime:r}}catch(r){return console.error(`❌ Erro ao pré-carregar lição ${t}:`,r),{success:!1,error:r}}}optimizeImage(t,s=300){return`${t}?w=${s}&q=80&format=webp`}debounce(t,s){let r;return function(...a){const i=()=>{clearTimeout(r),t(...a)};clearTimeout(r),r=setTimeout(i,s)}}throttle(t,s){let r;return function(){const o=arguments,a=this;r||(t.apply(a,o),r=!0,setTimeout(()=>r=!1,s))}}cleanupOldData(){const t=Date.now()-6048e5;Object.keys(this.metrics.pageLoadTimes).forEach(s=>{this.metrics.pageLoadTimes[s].timestamp<t&&delete this.metrics.pageLoadTimes[s]})}generatePerformanceReport(){const t=Object.values(this.metrics.pageLoadTimes).reduce((r,o)=>r+o,0)/Object.values(this.metrics.pageLoadTimes).length||0,s=Object.values(this.metrics.componentRenderTimes).reduce((r,o)=>r+o,0)/Object.values(this.metrics.componentRenderTimes).length||0;return{averagePageLoadTime:t,averageComponentRenderTime:s,totalPagesTracked:Object.keys(this.metrics.pageLoadTimes).length,totalComponentsTracked:Object.keys(this.metrics.componentRenderTimes).length,recommendations:this.generateRecommendations()}}generateRecommendations(){const t=[],s=Object.values(this.metrics.pageLoadTimes).reduce((r,o)=>r+o,0)/Object.values(this.metrics.pageLoadTimes).length||0;return s>2e3&&t.push("Implementar lazy loading para componentes pesados"),s>3e3&&t.push("Considerar code splitting para reduzir bundle size"),t}initializeMonitoring(){"memory"in performance&&setInterval(()=>{this.metrics.memoryUsage.push({timestamp:Date.now(),used:performance.memory.usedJSHeapSize,total:performance.memory.totalJSHeapSize})},3e4),setInterval(()=>{this.cleanupOldData()},24*60*60*1e3)}}const Hu=new nN,rN=({user:e,setUser:t,setActiveScreen:s})=>{var f,S,T,A,M;const[r,o]=j.useState(null),[a,i]=j.useState([]),[l,c]=j.useState(null),[d,m]=j.useState([]),[u,g]=j.useState(null),[x,E]=j.useState(!0),[k,C]=j.useState(!1);j.useEffect(()=>{const h=localStorage.getItem("darkMode")==="true";C(h)},[]),j.useEffect(()=>{(async()=>{const b=Hu.startPageLoadTimer("IntelligentDashboard");try{const N=$j.getProgress(),y=Gu.analyzeUserProfile(e,N);o(y);const P=Gu.generateRecommendations(e,N);i(P);const w=Qt.updateRanking(e.id,e,N);c(w);const L=Array.from(Qt.seasonalEvents.values()).filter(_=>_.isActive);m(L);const F=Hu.generatePerformanceReport();g(F);const q=Qt.checkAdvancedAchievements(e,N);q.length>0&&q.forEach(_=>{K.success(`🏆 ${_.title}: ${_.description}`)}),b(),E(!1)}catch(N){console.error("Erro ao inicializar dashboard:",N),E(!1)}})()},[e]);const p=h=>{switch(h.action){case"practice_quiz":s("lesson-4");break;case"practice_drag-and-drop":s("lesson-1");break;case"increase_difficulty":K.info("Lições mais difíceis serão sugeridas!");break;case"schedule_study_time":K.info(`Seu horário ideal é às ${r==null?void 0:r.optimalStudyTime}h`);break;default:K.info("Recomendação processada!")}},v=h=>{Qt.joinCompetition(h,e.id,e)&&K.success("Você entrou na competição!")};return x?n.jsx("div",{className:"min-h-screen bg-interface flex items-center justify-center",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Carregando painel inteligente..."})]})}):n.jsxs("div",{className:"flex flex-col min-h-screen bg-interface",style:k?{backgroundColor:"#111827"}:{},children:[n.jsx("div",{className:"bg-white rounded-b-xl shadow-md sticky top-0 z-20 w-full",style:{borderBottom:"3px solid #EE9116",backgroundColor:k?"#374151":"white"},children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-xl font-bold text-gray-800 mb-1",style:k?{color:"#ffffff"}:{},children:["Olá, ",e.name,"! ",(r==null?void 0:r.learningStyle)&&`(${r.learningStyle})`]}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",style:k?{color:"#e5e7eb"}:{},children:[n.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-medium",style:k?{backgroundColor:"#1e3a8a",color:"#93c5fd"}:{},children:["Nível ",((f=e.progress)==null?void 0:f.level)||1]}),l&&n.jsxs("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full font-medium",style:k?{backgroundColor:"#581c87",color:"#c084fc"}:{},children:["#",l," no ranking"]}),n.jsxs("span",{className:"flex items-center space-x-1",style:k?{color:"#e5e7eb"}:{},children:[n.jsx("span",{children:"🔥"}),n.jsxs("span",{children:[((S=e.progress)==null?void 0:S.streak)||0," dias"]})]})]})]}),d.length>0&&n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Evento Ativo"}),n.jsx("div",{className:"text-sm font-semibold text-primary animate-pulse",children:d[0].name})]})]})}),n.jsxs("div",{className:"flex-grow overflow-y-auto p-3 pb-32 hide-scrollbar",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border-2 mb-4 overflow-hidden",style:{borderColor:"rgb(238, 145, 22)",backgroundColor:k?"#374151":"white"},children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",style:k?{color:"#ffffff"}:{},children:["🤖 Recomendações Inteligentes",n.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",style:k?{backgroundColor:"#1e3a8a",color:"#93c5fd"}:{},children:"IA"})]}),n.jsx("div",{className:"space-y-3",children:a.slice(0,3).map((h,b)=>n.jsx("div",{className:`p-3 rounded-lg border-l-4 cursor-pointer transition-all duration-200 hover:scale-102 hover:shadow-lg ${h.priority==="high"?"border-red-500 bg-red-50":h.priority==="medium"?"border-yellow-500 bg-yellow-50":"border-green-500 bg-green-50"}`,style:k?{backgroundColor:h.priority==="high"?"#7f1d1d":h.priority==="medium"?"#451a03":"#14532d",borderLeftColor:h.priority==="high"?"#dc2626":h.priority==="medium"?"#fbbf24":"#10b981"}:{},onClick:()=>p(h),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800",style:k?{color:"#ffffff"}:{},children:h.title}),n.jsx("p",{className:"text-sm text-gray-600",style:k?{color:"#e5e7eb"}:{},children:h.description})]}),n.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${h.priority==="high"?"bg-red-200 text-red-800":h.priority==="medium"?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,style:k?{backgroundColor:h.priority==="high"?"#dc2626":h.priority==="medium"?"#fbbf24":"#10b981",color:h.priority==="high"?"#ffffff":h.priority==="medium"?"#451a03":"#ffffff"}:{},children:h.priority})]})},b))})]}),r&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border-2 mb-4",style:{borderColor:"rgb(238, 145, 22)",backgroundColor:k?"#374151":"white"},children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",style:k?{color:"#ffffff"}:{},children:"📊 Seu Perfil de Aprendizado"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",style:k?{backgroundColor:"#1e3a8a"}:{},children:[n.jsx("div",{className:"text-2xl mb-1",children:"🎯"}),n.jsx("div",{className:"text-sm font-semibold text-gray-800",style:k?{color:"#ffffff"}:{},children:"Estilo"}),n.jsx("div",{className:"text-xs text-gray-600 capitalize",style:k?{color:"#93c5fd"}:{},children:r.learningStyle})]}),n.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",style:k?{backgroundColor:"#14532d"}:{},children:[n.jsx("div",{className:"text-2xl mb-1",children:"⚡"}),n.jsx("div",{className:"text-sm font-semibold text-gray-800",style:k?{color:"#ffffff"}:{},children:"Dificuldade"}),n.jsx("div",{className:"text-xs text-gray-600 capitalize",style:k?{color:"#86efac"}:{},children:r.difficultyPreference})]}),n.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",style:k?{backgroundColor:"#451a03"}:{},children:[n.jsx("div",{className:"text-2xl mb-1",children:"🕐"}),n.jsx("div",{className:"text-sm font-semibold text-gray-800",style:k?{color:"#ffffff"}:{},children:"Horário Ideal"}),n.jsxs("div",{className:"text-xs text-gray-600",style:k?{color:"#fbbf24"}:{},children:[r.optimalStudyTime,"h"]})]}),n.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",style:k?{backgroundColor:"#581c87"}:{},children:[n.jsx("div",{className:"text-2xl mb-1",children:"💪"}),n.jsx("div",{className:"text-sm font-semibold text-gray-800",style:k?{color:"#ffffff"}:{},children:"Motivação"}),n.jsxs("div",{className:"text-xs text-gray-600",style:k?{color:"#c084fc"}:{},children:[r.motivationFactors.length," fatores"]})]})]})]}),r&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border-2 mb-4",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"📈 Suas Áreas"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-semibold text-green-700 mb-2 flex items-center",children:"✅ Áreas Fortes"}),n.jsxs("div",{className:"space-y-2",children:[r.strongAreas.slice(0,3).map((h,b)=>n.jsxs("div",{className:"p-2 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-sm font-medium text-green-800",children:h.type}),n.jsx("div",{className:"text-xs text-green-600",children:h.recommendation})]},b)),r.strongAreas.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"Continue praticando para descobrir seus pontos fortes!"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-semibold text-orange-700 mb-2 flex items-center",children:"🔧 Áreas de Melhoria"}),n.jsxs("div",{className:"space-y-2",children:[r.weakAreas.slice(0,3).map((h,b)=>n.jsxs("div",{className:"p-2 bg-orange-50 rounded-lg",children:[n.jsx("div",{className:"text-sm font-medium text-orange-800",children:h.type}),n.jsx("div",{className:"text-xs text-orange-600",children:h.recommendation})]},b)),r.weakAreas.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"Parabéns! Você está equilibrado em todas as áreas!"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border-2 mb-4",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"🏆 Competições"}),n.jsxs("div",{className:"space-y-3",children:[Array.from(Qt.competitions.values()).filter(h=>h.isActive).slice(0,2).map(h=>n.jsxs("div",{className:"p-3 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold text-gray-800",children:h.title}),n.jsxs("span",{className:"text-xs bg-purple-200 text-purple-800 px-2 py-1 rounded-full",children:[h.participants.length," participantes"]})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:h.description}),n.jsx("button",{onClick:()=>v(h.id),className:"w-full bg-primary text-white py-2 rounded-lg font-medium hover:bg-primary-dark transition",children:"Participar"})]},h.id)),Array.from(Qt.competitions.values()).filter(h=>h.isActive).length===0&&n.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Nenhuma competição ativa no momento. Fique atento às próximas!"})]})]}),u&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border-2 mb-4",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"⚡ Performance"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"Tempo de Carregamento"}),n.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[((T=u.averagePageLoadTime)==null?void 0:T.toFixed(0))||0,"ms"]})]}),n.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"Renderização"}),n.jsxs("div",{className:"text-lg font-bold text-green-600",children:[((A=u.averageComponentRenderTime)==null?void 0:A.toFixed(0))||0,"ms"]})]})]}),((M=u.recommendations)==null?void 0:M.length)>0&&n.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 rounded-lg",children:[n.jsx("div",{className:"text-sm font-semibold text-yellow-800 mb-2",children:"💡 Recomendações de Performance:"}),n.jsx("ul",{className:"text-xs text-yellow-700 space-y-1",children:u.recommendations.map((h,b)=>n.jsxs("li",{children:["• ",h]},b))})]})]})]})]})},oN=({user:e,onChange:t})=>{const s=U=>U?U.replace(/(\d+)[º°o]\s*Ano/g,"$1º Ano").replace(/\s+/g," ").trim():"",[r,o]=j.useState([]),[a,i]=j.useState(!0),[l,c]=j.useState(""),[d,m]=j.useState(""),[u,g]=j.useState(null),[x,E]=j.useState(null),[k,C]=j.useState(""),[p,v]=j.useState(""),[f,S]=j.useState([]),[T,A]=j.useState(""),[M,h]=j.useState(null),[b,N]=j.useState(!1),[y,P]=j.useState([]),[w,L]=j.useState(""),[F,q]=j.useState("");j.useEffect(()=>{_(),I()},[]);const _=async()=>{i(!0);try{const U=await ue("/classes");o(U)}catch{g("Erro ao carregar turmas")}i(!1)},I=async()=>{N(!0);try{const W=(await ue("/users")).filter(O=>O.role==="student"&&O.schoolId===e.id);S(W)}catch{g("Erro ao carregar alunos")}N(!1)},R=async()=>{if(!d||!w){g("Série/Ano e Professor são obrigatórios");return}try{const U=s(d),W=r.filter(B=>s(B.grade)===U),se={name:`Turma ${String.fromCharCode(65+W.length)}`,grade:d,students:[],teacher:w};await _e("/classes",se),c(""),m(""),L(""),g(null),await _(),await I(),t&&t()}catch{g("Erro ao adicionar turma")}},V=U=>{E(U.id),C(U.name),v(U.grade),q(U.teacher||"")},$=async U=>{try{await ls(`/classes/${U}`,{name:k,grade:p,teacher:F}),E(null),await _(),await I(),t&&t()}catch{g("Erro ao editar turma")}},D=async U=>{if(window.confirm("Tem certeza que deseja remover esta turma?"))try{await oa(`/classes/${U}`),await _(),await I(),t&&t()}catch{g("Erro ao remover turma")}},Q=async(U,W)=>{try{await ls(`/classes/${U}/add-student`,{studentId:W}),_(),t&&t()}catch(O){g(O.message||"Erro ao adicionar aluno")}},G=async(U,W)=>{try{await ls(`/classes/${U}/remove-student`,{studentId:W}),_(),t&&t()}catch{g("Erro ao remover aluno")}};return n.jsx("div",{className:"min-h-screen bg-interface p-4 pb-20",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 mb-6",style:{borderColor:"rgb(238, 145, 22)"},children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Gestão Escolar"})}),n.jsx("div",{className:"mb-6",children:n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"📚 Gestão de Turmas"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Gerenciar Turmas"}),n.jsx("button",{onClick:R,className:"bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Adicionar Turma"})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center mb-4",children:[n.jsx("input",{type:"text",placeholder:"Série/Ano (ex: 6º Ano, 7º Ano)",value:d,onChange:U=>m(U.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg flex-1 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors duration-200"}),n.jsx("input",{type:"text",placeholder:"Professor",value:w,onChange:U=>L(U.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg flex-1 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors duration-200"})]}),u&&n.jsx("p",{className:"text-red-600 mb-2",children:u}),n.jsx("div",{className:"bg-blue-50 rounded-lg p-3 mb-4 border border-blue-200",children:n.jsxs("p",{className:"text-sm text-blue-700",children:["💡 ",n.jsx("strong",{children:"Dica:"})," O nome da turma será gerado automaticamente (Turma A, Turma B, etc.) baseado na série selecionada."]})}),a?n.jsx("p",{children:"Carregando turmas..."}):n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.length===0&&n.jsx("p",{className:"text-gray-600 col-span-2",children:"Nenhuma turma cadastrada ainda."}),r.map(U=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:U.name}),n.jsx("button",{className:"text-xs text-primary underline",onClick:()=>{h(M===U.id?null:U.id),M!==U.id&&I()},children:M===U.id?"Fechar":"Gerenciar Alunos"})]}),n.jsxs("p",{className:"text-gray-600",children:["Série: ",U.grade]}),n.jsxs("p",{className:"text-gray-600",children:["Professor: ",U.teacher]}),n.jsxs("p",{className:"text-gray-600 mb-2",children:["Alunos: ",U.students?U.students.length:0]}),x===U.id?n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"text",value:k,onChange:W=>C(W.target.value),className:"p-2 border rounded-md mb-2 w-full"}),n.jsx("input",{type:"text",value:p,onChange:W=>v(W.target.value),className:"p-2 border rounded-md mb-2 w-full"}),n.jsx("input",{type:"text",value:F,onChange:W=>q(W.target.value),placeholder:"Professor",className:"p-2 border rounded-md mb-2 w-full"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>$(U.id),className:"bg-primary text-white px-3 py-1 rounded",children:"Salvar"}),n.jsx("button",{onClick:()=>E(null),className:"bg-gray-300 text-gray-800 px-3 py-1 rounded",children:"Cancelar"})]})]}):n.jsx(n.Fragment,{children:n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx("button",{onClick:()=>V(U),className:"px-3 py-1 rounded",style:{background:"#EE9116",color:"white"},children:"Editar"}),n.jsx("button",{onClick:()=>D(U.id),className:"bg-red-500 text-white px-3 py-1 rounded",children:"Remover"})]})}),M===U.id&&n.jsxs("div",{className:"mt-4 p-3 bg-orange-50 rounded",children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Alunos da Turma"}),U.students&&U.students.length>0?n.jsx("ul",{className:"mb-2",children:U.students.map(W=>{const O=f.find(Z=>Z.id.toString()===W);return O?n.jsxs("li",{className:"flex justify-between items-center border-b py-1",children:[n.jsx("span",{children:O.name}),n.jsx("button",{onClick:()=>G(U.id,O.id),className:"text-xs text-red-600 underline",children:"Remover"})]},O.id):null})}):n.jsx("p",{className:"text-gray-500 mb-2",children:"Nenhum aluno vinculado."}),n.jsx("input",{type:"text",placeholder:"Buscar aluno pelo nome...",value:T,onChange:W=>A(W.target.value),className:"p-2 border rounded-md w-full mb-2"}),b?n.jsx("p",{children:"Carregando alunos..."}):n.jsxs("ul",{children:[f.filter(W=>{const O=!U.students||!U.students.includes(W.id.toString()),Z=!r.some(B=>B.id!==U.id&&B.students&&B.students.includes(W.id.toString())),se=W.name.toLowerCase().includes(T.toLowerCase());return O&&Z&&se}).slice(0,5).map(W=>n.jsxs("li",{className:"flex justify-between items-center border-b py-1",children:[n.jsx("span",{children:W.name}),n.jsx("button",{onClick:()=>Q(U.id,W.id),className:"text-xs text-primary underline",children:"Adicionar"})]},W.id)),f.filter(W=>{const O=r.some(se=>se.id!==U.id&&se.students&&se.students.includes(W.id.toString())),Z=W.name.toLowerCase().includes(T.toLowerCase());return O&&Z}).slice(0,3).map(W=>{const O=r.find(Z=>Z.id!==U.id&&Z.students&&Z.students.includes(W.id.toString()));return n.jsxs("li",{className:"flex justify-between items-center border-b py-1",children:[n.jsxs("span",{className:"text-gray-500",children:[W.name," (em ",O==null?void 0:O.name,")"]}),n.jsx("span",{className:"text-xs text-gray-400",children:"Já vinculado"})]},W.id)})]})]})]},U.id))]})]})]})})})},si=e=>{let t=0;for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);t=(t<<5)-t+r,t=t&t}return t.toString()};si("senha123"),si("senha123"),si("senha123");const Ap=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),Mp=e=>e.length>=6,aN=e=>e.trim().length>=2,iN=async(e,t,s)=>{if(!Ap(e))throw new Error("E-mail inválido.");if(!Mp(t))throw new Error("Senha deve ter pelo menos 6 caracteres.");const o=await fetch("http://localhost:3001/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,role:s})});if(!o.ok){const l=await o.json();throw new Error(l.error||"Erro ao fazer login.")}const a=await o.json();if(a.role!==s)throw new Error("Credenciais inválidas ou papel incorreto.");const i={userId:a.id,loginTime:new Date().toISOString(),lastActivity:new Date().toISOString()};return oe.save(ie.SESSION,i),oe.save(ie.USER,a),K.success(`Bem-vindo de volta, ${a.name}!`),a},lN=async e=>{if(!aN(e.name))throw new Error("Nome deve ter pelo menos 2 caracteres.");if(!Ap(e.email))throw new Error("E-mail inválido.");if(!Mp(e.password))throw new Error("Senha deve ter pelo menos 6 caracteres.");const s=await fetch("http://localhost:3001/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,passwordHash:e.password})});if(!s.ok){const o=await s.json();throw new Error(o.error||"Erro ao registrar.")}const r=await s.json();return oe.save(ie.USER,r),K.success(`Conta criada com sucesso! Bem-vindo ao YuFin, ${r.name}!`),r},cN=()=>{oe.remove(ie.SESSION),localStorage.removeItem("darkMode"),document.documentElement.classList.remove("dark"),K.clear(),K.info("Você saiu da sua conta.")},dN=()=>oe.load(ie.SESSION);function uN(){const[e,t]=j.useState("welcome"),[s,r]=j.useState(null),[o,a]=j.useState(!0),[i,l]=j.useState(null),[c,d]=j.useState(()=>oe.load(ie.CURRENT_MODULE)||1),[m,u]=j.useState(!0),[g,x]=j.useState(null);j.useEffect(()=>{const y=new URLSearchParams(window.location.search).get("token");y&&(x(y),t("register-with-token"))},[]),j.useEffect(()=>{const N=oe.load(ie.USER),y=dN();if(N&&y)try{r(N),Qt.loadData(),N.role==="student"?t("home"):N.role==="parent"?t("parent-dashboard"):(N.role==="school"||N.role==="admin")&&t("school-dashboard")}catch{oe.remove(ie.USER),oe.remove(ie.SESSION),r(null),t("welcome")}else oe.remove(ie.USER),oe.remove(ie.SESSION),localStorage.removeItem("darkMode"),document.documentElement.classList.remove("dark"),r(null),t("welcome");a(!1)},[]),j.useEffect(()=>{s?(oe.save(ie.USER,s),s.role==="student"&&s.currentModule&&(d(s.currentModule),oe.save(ie.CURRENT_MODULE,s.currentModule))):(oe.remove(ie.USER),oe.remove(ie.SESSION),localStorage.removeItem("darkMode"),document.documentElement.classList.remove("dark"),t("welcome"))},[s]);const E=async N=>{try{r(N),x(null);const y=new URL(window.location);y.searchParams.delete("token"),window.history.replaceState({},"",y),K.success("Registro realizado com sucesso!"),t("home")}catch(y){K.error("Erro no registro: "+y.message)}},k=()=>{x(null),t("welcome");const N=new URL(window.location);N.searchParams.delete("token"),window.history.replaceState({},"",N)},C=async(N,y,P)=>{var w,L;try{const F=await iN(N,y,P);r(F);const q=Array.from(((L=(w=Qt.seasonalEvents)==null?void 0:w.values)==null?void 0:L.call(w))||[]).filter(_=>_.isActive);if(q.length>0){const _=q[0];K.success(`🎉 Evento especial ativo: ${_.name}! Bônus de ${_.bonus}x XP em todas as lições!`)}return ds.trackEvent("user_login",{userRole:P,userId:F.id}),{success:!0}}catch(F){return ds.trackError("login_error",F.message),{success:!1,message:F.message}}},p=async N=>{try{let y;return y=await lN(N),r(y),{success:!0}}catch(y){return{success:!1,message:y.message}}},v=()=>{window.confirm("Tem certeza que deseja sair?")&&(ds.trackEvent("user_logout",{userRole:s==null?void 0:s.role,userId:s==null?void 0:s.id}),localStorage.removeItem("darkMode"),document.documentElement.classList.remove("dark"),cN(),r(null))},f=async()=>{if(s)try{const N=await _e(`/users/${s.id}/reset-radical`),{user:y,resetInfo:P}=N;console.log("Usuário atualizado após reset radical:",y),r(y),oe.save(ie.USER,y),oe.save(ie.PROGRESS,{totalXp:P.xp,currentLevel:P.level,xpToNextLevel:100,streak:0,lastActivityDate:new Date().toISOString(),dailyGoal:50,dailyProgress:0,achievements:[],completedLessons:[],totalLessonsCompleted:P.completedLessons,perfectLessons:0,timeSpent:0}),K.success(`Progresso completamente resetado! Voltando ao ${P.newGrade}.`),setTimeout(()=>{s.role==="student"&&t("home")},1e3)}catch(N){K.error("Erro ao zerar progresso no backend: "+N.message)}},S=(N,y={})=>{N==="lesson"?(l(y.lessonId),y.currentModule&&(d(y.currentModule),oe.save(ie.CURRENT_MODULE,y.currentModule)),t("lesson")):t(N)},T=async N=>{try{const y=await ls(`/users/${s.id}/complete-lesson`,{lessonId:i,score:N.score,timeSpent:N.timeSpent,isPerfect:N.isPerfect}),{student:P,reward:w,leveledUp:L}=y;r(P),oe.save(ie.USER,P),w>0&&K.success(`🎉 +R$ ${w.toFixed(2)} adicionados à sua poupança!`),L&&K.success("🎊 Parabéns! Você subiu de nível!"),t("dashboard"),l(null)}catch(y){console.error("Erro ao completar lição:",y),K.error("Erro ao salvar progresso: "+y.message)}},A=N=>typeof N=="string"?N:N==null?void 0:N.screen,M=()=>{const N=A(e);if(!s)switch(N){case"welcome":return n.jsx(_a,{setActiveScreen:t});case"login-student":return n.jsx(za,{handleLogin:C,setActiveScreen:t,role:"student"});case"login-parent":return n.jsx(za,{handleLogin:C,setActiveScreen:t,role:"parent"});case"login-school":return n.jsx(za,{handleLogin:C,setActiveScreen:t,role:"school"});case"register-student":return n.jsx(Ba,{handleRegister:p,setActiveScreen:t,role:"student"});case"register-parent":return n.jsx(Ba,{handleRegister:p,setActiveScreen:t,role:"parent"});case"register-school":return n.jsx(Ba,{handleRegister:p,setActiveScreen:t,role:"school"});case"register-with-token":return n.jsx(i0,{token:g,onSuccess:E,onCancel:k});default:return n.jsx(_a,{setActiveScreen:t})}switch(!0){case N==="home":return s.role==="student"?n.jsx(Iu,{user:s,setUser:r,onNavigate:S,currentModule:c}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case N==="intelligent-dashboard":return s.role==="student"?n.jsx(rN,{user:s,setUser:r,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case N==="lesson":return s.role==="student"?n.jsx(Ou,{lessonId:i,user:s,setUser:r,setActiveScreen:t,onComplete:T,onNavigate:S}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta lição."});case(N&&N.startsWith("lesson-")):const y=N.split("-")[1];return s.role==="student"?n.jsx(Ou,{lessonId:y,user:s,setUser:r,setActiveScreen:t,reviewMode:e.reviewMode,activeScreen:e}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta lição."});case N==="profile":return n.jsx(zj,{user:s,setUser:r,setActiveScreen:t});case N==="wallet":return s.role==="student"?n.jsx(Bj,{user:s,setUser:r,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case N==="store":return s.role==="student"?n.jsx(qj,{user:s,setUser:r,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case N==="challenges":return n.jsx(Zj,{user:s,setUser:r,setActiveScreen:t});case N==="friends":return s.role==="student"?n.jsx(eN,{user:s,setUser:r,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case N==="achievements":return n.jsx(Wj,{user:s,setActiveScreen:t});case N==="ranking":return n.jsx(Xj,{user:s,setActiveScreen:t});case N==="news":return n.jsx(Qj,{user:s,setActiveScreen:t});case N==="parent-dashboard":return s.role==="parent"?n.jsx(Bu,{user:s,setUser:r,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case N==="savings-config":return s.role==="parent"?n.jsx(Hj,{user:s,setUser:r,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case N==="school-dashboard":return s.role==="school"?n.jsx(qu,{user:s,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case N==="reports":return s.role==="school"||s.role==="parent"?n.jsx(Kj,{user:s,setActiveScreen:t}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});case N==="settings":return n.jsx(Jj,{user:s,handleLogout:v,setActiveScreen:t,onResetProgress:f});case N==="classes":return s.role==="school"?n.jsx(oN,{user:s,setActiveScreen:t,onChange:()=>t("school-dashboard")}):n.jsx("p",{className:"text-center text-red-500 mt-20",children:"Acesso negado para esta tela."});default:return s.role==="student"?n.jsx(Iu,{user:s,setUser:r,onNavigate:S,currentModule:c}):s.role==="parent"?n.jsx(Bu,{user:s,setUser:r,setActiveScreen:t}):s.role==="school"?n.jsx(qu,{user:s,setActiveScreen:t}):n.jsx(_a,{setActiveScreen:t})}},h=A(e),b=s&&h&&!h.startsWith("lesson-")&&!["welcome","login-student","login-parent","login-school","register-student","register-parent","register-school"].includes(h);return console.log("Debug Navigation:",{user:!!s,userRole:s==null?void 0:s.role,activeScreen:e,shouldShowNavigation:b}),o?null:n.jsxs("div",{className:"relative min-h-screen",children:[M(),b&&n.jsx(o0,{role:s.role,activeScreen:e,setActiveScreen:t})]})}const mN=lh(document.getElementById("root"));mN.render(n.jsx(uN,{}));
